/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e(e,t,r,o){var c,f=arguments.length,n=f<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(c=e[l])&&(n=(f<3?c(n):f>3?c(t,r,n):c(t,r))||n);return f>3&&n&&Object.defineProperty(t,r,n),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$2(e,n={},i){if(!window.WebGLRenderingContext)return r(e,l),null;const a=t(e,n,i);return a||(r(e,o),null)}function t(e,t={},r){let l;switch(r){case"webgl":l=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":l=["webgl2"];break;default:l=["webgl","experimental-webgl","webkit-3d","moz-webgl"];}let o=null;for(const r of l){try{o=e.getContext(r,t);}catch(e){}if(o)break}return o}function r(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>");}const l='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',o='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a,t$1;let o$1;var i,d;(null==(a=e$1.dojoConfig)?void 0:a.has)||(null==(t$1=e$1.esriConfig)?void 0:t$1.has)?o$1={...null==(i=e$1.dojoConfig)?void 0:i.has,...null==(d=e$1.esriConfig)?void 0:d.has}:o$1={};function s(r){return "function"==typeof o$1[r]?o$1[r]=o$1[r](e$1):o$1[r]}s.add=(e,r,a,t)=>((t||void 0===o$1[e])&&(o$1[e]=r),a&&s(e)),s.cache=o$1,(()=>{s.add("host-webworker",void 0!==e$1.WorkerGlobalScope&&self instanceof e$1.WorkerGlobalScope);const r="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(s.add("host-browser",r),s.add("host-node","object"==typeof e$1.process&&e$1.process.versions&&e$1.process.versions.node&&e$1.process.versions.v8),s.add("dom",r),s("host-browser")){const e=navigator,r=e.userAgent,a=e.appVersion,t=parseFloat(a);if(s.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),s.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),s.add("khtml",a.indexOf("Konqueror")>=0?t:void 0),s.add("edge",parseFloat(r.split("Edge/")[1])||void 0),s.add("opr",parseFloat(r.split("OPR/")[1])||void 0),s.add("webkit",!s("wp")&&!s("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),s.add("chrome",!s("edge")&&!s("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),s.add("android",!s("wp")&&parseFloat(r.split("Android ")[1])||void 0),s.add("safari",!(a.indexOf("Safari")>=0)||s("wp")||s("chrome")||s("android")||s("edge")||s("opr")?void 0:parseFloat(a.split("Version/")[1])),s.add("mac",a.indexOf("Macintosh")>=0),s.add("quirks","BackCompat"===document.compatMode),!s("wp")&&r.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),a=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",t=parseFloat(a.replace(/_/,".").replace(/_/g,""));s.add(e,t),s.add("ios",t);}s.add("trident",parseFloat(a.split("Trident/")[1])||void 0),s.add("svg","undefined"!=typeof SVGAngle),s("webkit")||(r.indexOf("Opera")>=0&&s.add("opera",t>=9.8&&parseFloat(r.split("Version/")[1])||t),!(r.indexOf("Gecko")>=0)||s("wp")||s("khtml")||s("trident")||s("edge")||s.add("mozilla",t),s("mozilla")&&s.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0));}})(),s.add("esri-debug-messages",!1),s.add("esri-deprecation-warnings",!0),(()=>{if(e$1.navigator){const e=navigator.userAgent,r=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),a=e.match(/iPhone/i);r&&s.add("esri-mobile",r),a&&s.add("esri-iPhone",a),s.add("esri-geolocation",!!navigator.geolocation);}s.add("esri-canvas-svg-support",!s("trident")),s.add("esri-secure-context",()=>"isSecureContext"in e$1?e$1.isSecureContext:e$1.location&&e$1.location.origin?0===e$1.location.origin.indexOf("https:"):void 0),s.add("esri-wasm","WebAssembly"in e$1),s.add("esri-shared-array-buffer",()=>{const r="SharedArrayBuffer"in e$1,a=!1===e$1.crossOriginIsolated;return r&&!a}),s.add("esri-atomics","Atomics"in e$1),s.add("esri-workers","Worker"in e$1),s.add("esri-text-decoder","TextDecoder"in e$1),s.add("esri-text-encoder","TextEncoder"in e$1),s.add("featurelayer-advanced-symbols",!1),s.add("featurelayer-pbf",!1),s.add("feature-layers-workers",!0),s.add("mapview-transitions-duration",200),s("host-webworker")||(s.add("esri-abortable-fetch","fetch"in e$1&&(!s("host-browser")||"signal"in new Request("https://www.arcgis.com"))),s("host-browser")&&(s.add("csp-restrictions",()=>{try{new Function;}catch{return !0}return !1}),s.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{s.add("esri-image-decode",!0,!0,!0);}).catch(()=>{s.add("esri-image-decode",!1,!0,!0);})}return !1}),s.add("esri-url-encodes-apostrophe",()=>{const r=e$1.document.createElement("a");return r.href="?'",r.href.indexOf("?%27")>-1}),s.add("esri-webgl",()=>l$1().available),s.add("esri-webgl-high-precision-fragment",()=>l$1().supportsHighPrecisionFragment),s.add("esri-webgl-vertex-shader-samplers",()=>l$1().supportsVertexShaderSamplers),s.add("esri-webgl-element-index-uint",()=>l$1().supportsElementIndexUint),s.add("esri-webgl-standard-derivatives",()=>l$1().supportsStandardDerivatives),s.add("esri-webgl-texture-float",()=>l$1().supportsTextureFloat),s.add("esri-webgl-color-buffer-float",()=>l$1().supportsColorBufferFloat),s.add("esri-webgl-instanced-arrays",()=>l$1().supportsInstancedArrays),s.add("esri-webgl-major-performance-caveat",()=>l$1().majorPerformanceCaveat),s.add("esri-featurelayer-webgl",!0),s.add("esri-featurelayer-webgl-labeling",!0),s.add("esri-webgl2",()=>function(){if(p)return p;if(p={available:!1,version:0},void 0===typeof WebGL2RenderingContext)return p;const e=document.createElement("canvas");if(!e)return p;const a=t(e,{},"webgl2");if(!a)return p;p.available=!0;const t$1=a.getParameter(a.VERSION);if(!t$1)return p;const o=t$1.match(/^WebGL\s+([\d.]*)/);o&&(p.version=parseFloat(o[1]));return p}().available),s.add("esri-webgl-max-texture-size",()=>l$1().maxTextureSize)));})();let n=null;function l$1(){if(n)return n;if(n={available:!1,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1,version:0},void 0===typeof WebGLRenderingContext)return n;const e=document.createElement("canvas");if(!e)return n;let a=t(e,{failIfMajorPerformanceCaveat:!0},"webgl");if(a||(a=t(e,{},"webgl"),a&&(n.majorPerformanceCaveat=!0)),!a)return n;const t$1=a.getParameter(a.VERSION);if(!t$1)return n;const o=t$1.match(/^WebGL\s+([\d.]*)/);if(o){n.version=parseFloat(o[1]),n.available=n.version>=.94;const e=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);e&&(n.supportsHighPrecisionFragment=e.precision>0),n.supportsVertexShaderSamplers=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,n.supportsElementIndexUint=null!==a.getExtension("OES_element_index_uint"),n.supportsStandardDerivatives=null!==a.getExtension("OES_standard_derivatives"),n.supportsInstancedArrays=null!==a.getExtension("ANGLE_instanced_arrays"),n.supportsTextureFloat=null!==a.getExtension("OES_texture_float"),n.supportsColorBufferFloat=null!==a.getExtension("WEBGL_color_buffer_float");}return n.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),n}let p=null;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$3="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,t$2={},o$2={},{staticFeatures:n$1}=e$3.DojoHasEnvironment||{};"DojoHasEnvironment"in e$3&&delete e$3.DojoHasEnvironment;const r$1=n$1?"function"==typeof n$1?n$1.apply(e$3):n$1:{};function s$1(e,n,s=!1){const i=e.toLowerCase();if(function(e){const n=e.toLowerCase();return Boolean(n in r$1||n in t$2||o$2[n])}(i)&&!s&&!(i in r$1))throw new TypeError(`Feature "${e}" exists and overwrite not true.`);"function"==typeof n?o$2[i]=n:(t$2[i]=n,delete o$2[i]);}function i$1(e){let n;const s=e.toLowerCase();if(s in r$1)n=r$1[s];else if(o$2[s])n=t$2[s]=o$2[s].call(null),delete o$2[s];else {if(!(s in t$2))throw new TypeError(`Attempt to detect unregistered has feature "${e}"`);n=t$2[s];}return n}function a$1(e,t=!1,o=!0,n=!0){return {value:e,enumerable:t,writable:o,configurable:n}}function f(e){return function(t,...o){return e.apply(t,o)}}s$1("public-path",void 0),s$1("dojo-debug",!1),s$1("host-browser","undefined"!=typeof document&&"undefined"!=typeof location),s$1("host-node",(function(){if("object"==typeof process&&process.versions&&process.versions.node)return process.versions.node})),s$1("fetch","fetch"in e$3&&"function"==typeof e$3.fetch,!0),s$1("es6-array",()=>["from","of"].every(t=>t in e$3.Array)&&["findIndex","find","copyWithin"].every(t=>t in e$3.Array.prototype),!0),s$1("es6-array-fill",()=>"fill"in e$3.Array.prototype&&1===[1].fill(9,Number.POSITIVE_INFINITY)[0],!0),s$1("es7-array",()=>"includes"in e$3.Array.prototype,!0),s$1("es6-map",()=>{if("function"==typeof e$3.Map)try{const t=new e$3.Map([[0,1]]);return t.has(0)&&"function"==typeof t.keys&&i$1("es6-symbol")&&"function"==typeof t.values&&"function"==typeof t.entries}catch(e){return !1}return !1},!0),s$1("es6-math",()=>["clz32","sign","log10","log2","log1p","expm1","cosh","sinh","tanh","acosh","asinh","atanh","trunc","fround","cbrt","hypot"].every(t=>"function"==typeof e$3.Math[t]),!0),s$1("es6-math-imul",()=>"imul"in e$3.Math&&-5===Math.imul(4294967295,5),!0),s$1("es6-object",()=>i$1("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(t=>"function"==typeof e$3.Object[t]),!0),s$1("es2017-object",()=>["values","entries","getOwnPropertyDescriptors"].every(t=>"function"==typeof e$3.Object[t]),!0),s$1("es-observable",()=>void 0!==e$3.Observable,!0),s$1("es6-promise",()=>void 0!==e$3.Promise&&i$1("es6-symbol"),!0),s$1("es2018-promise-finally",()=>i$1("es6-promise")&&void 0!==e$3.Promise.prototype.finally,!0),s$1("es6-set",()=>{if("function"==typeof e$3.Set){const t=new e$3.Set([1]);return t.has(1)&&"keys"in t&&"function"==typeof t.keys&&i$1("es6-symbol")}return !1},!0),s$1("es6-string",()=>["fromCodePoint"].every(t=>"function"==typeof e$3.String[t])&&["codePointAt","normalize","repeat","startsWith","endsWith","includes"].every(t=>"function"==typeof e$3.String.prototype[t]),!0),s$1("es6-string-raw",()=>{if("raw"in e$3.String){let t=(function(e,...t){const o=[...e];return o.raw=e.raw,o})`a\n${1}`;t.raw=["a\\n"];return "a\\n"===e$3.String.raw(t,42)}return !1},!0),s$1("es2017-string",()=>["padStart","padEnd"].every(t=>"function"==typeof e$3.String.prototype[t]),!0),s$1("es6-symbol",()=>void 0!==e$3.Symbol&&"symbol"==typeof Symbol(),!0),s$1("es6-weakmap",()=>{if(void 0!==e$3.WeakMap){const t={},o={},n=new e$3.WeakMap([[t,1]]);return Object.freeze(t),1===n.get(t)&&n.set(o,2)===n&&i$1("es6-symbol")}return !1},!0),s$1("microtasks",()=>i$1("es6-promise")||i$1("host-node")||i$1("dom-mutationobserver"),!0),s$1("postmessage",()=>void 0!==e$3.window&&"function"==typeof e$3.postMessage,!0),s$1("raf",()=>"function"==typeof e$3.requestAnimationFrame,!0),s$1("setimmediate",()=>void 0!==e$3.setImmediate,!0),s$1("dom-mutationobserver",()=>{if(i$1("host-browser")&&Boolean(e$3.MutationObserver||e$3.WebKitMutationObserver)){const t=document.createElement("div"),o=new(e$3.MutationObserver||e$3.WebKitMutationObserver)((function(){}));return o.observe(t,{attributes:!0}),t.style.setProperty("display","block"),Boolean(o.takeRecords().length)}return !1},!0),s$1("dom-webanimation",()=>i$1("host-browser")&&void 0!==e$3.Animation&&void 0!==e$3.KeyframeEffect,!0),s$1("abort-controller",()=>void 0!==e$3.AbortController),s$1("abort-signal",()=>void 0!==e$3.AbortSignal),s$1("dom-intersection-observer",()=>i$1("host-browser")&&void 0!==e$3.IntersectionObserver,!0),s$1("dom-resize-observer",()=>i$1("host-browser")&&void 0!==e$3.ResizeObserver,!0),s$1("dom-pointer-events",()=>i$1("host-browser")&&void 0!==e$3.onpointerdown,!0),s$1("build-elide",!1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$4=e$3.Symbol;if(!i$1("es6-symbol")){const r=function(t){if(!n$2(t))throw new TypeError(t+" is not a symbol");return t},i=Object.defineProperties,s=Object.defineProperty,c=Object.create,a=Object.prototype,p={},f=function(){const t=c(null);return function(r){let e,n=0;for(;t[String(r)+(n||"")];)++n;return r+=String(n||""),t[r]=!0,e="@@"+r,Object.getOwnPropertyDescriptor(a,e)||s(a,e,{set:function(t){s(this,e,a$1(t));}}),e}}(),u=function t(r){if(this instanceof u)throw new TypeError("TypeError: Symbol is not a constructor");return t()};e$4=e$3.Symbol=function t(r){if(this instanceof t)throw new TypeError("TypeError: Symbol is not a constructor");const e=Object.create(u.prototype);return r=void 0===r?"":String(r),i(e,{__description__:a$1(r),__name__:a$1(f(r))})},s(e$4,"for",a$1((function(t){return p[t]?p[t]:p[t]=e$4(String(t))}))),i(e$4,{keyFor:a$1((function(t){let o;for(o in r(t),p)if(p[o]===t)return o})),hasInstance:a$1(e$4.for("hasInstance"),!1,!1),isConcatSpreadable:a$1(e$4.for("isConcatSpreadable"),!1,!1),iterator:a$1(e$4.for("iterator"),!1,!1),match:a$1(e$4.for("match"),!1,!1),observable:a$1(e$4.for("observable"),!1,!1),replace:a$1(e$4.for("replace"),!1,!1),search:a$1(e$4.for("search"),!1,!1),species:a$1(e$4.for("species"),!1,!1),split:a$1(e$4.for("split"),!1,!1),toPrimitive:a$1(e$4.for("toPrimitive"),!1,!1),toStringTag:a$1(e$4.for("toStringTag"),!1,!1),unscopables:a$1(e$4.for("unscopables"),!1,!1)}),i(u.prototype,{constructor:a$1(e$4),toString:a$1((function(){return this.__name__}),!1,!1)}),i(e$4.prototype,{toString:a$1((function(){return "Symbol ("+r(this).__description__+")"})),valueOf:a$1((function(){return r(this)}))}),s(e$4.prototype,e$4.toPrimitive,a$1((function(){return r(this)}))),s(e$4.prototype,e$4.toStringTag,a$1("Symbol",!1,!1,!0)),s(u.prototype,e$4.toPrimitive,a$1(e$4.prototype[e$4.toPrimitive],!1,!1,!0)),s(u.prototype,e$4.toStringTag,a$1(e$4.prototype[e$4.toStringTag],!1,!1,!0));}function n$2(t){return t&&("symbol"==typeof t||"Symbol"===t["@@toStringTag"])||!1}["hasInstance","isConcatSpreadable","iterator","species","replace","search","split","match","toPrimitive","toStringTag","unscopables","observable"].forEach(t=>{e$4[t]||Object.defineProperty(e$4,t,a$1(e$4.for(t),!1,!1));});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$3(t){t&&t.isActive&&t.callback&&t.callback();}function i$2(t,e){return {destroy:function(){this.destroy=function(){},t.isActive=!1,t.callback=null,e&&e();}}}let s$2,o$3;const c=function(){let o,c;if(i$1("postmessage")){const t=[];e$3.addEventListener("message",(function(i){i.source===e$3&&"dojo-queue-message"===i.data&&(i.stopPropagation(),t.length&&n$3(t.shift()));})),c=function(n){t.push(n),e$3.postMessage("dojo-queue-message","*");};}else i$1("setimmediate")?(o=e$3.clearImmediate,c=function(t){return setImmediate(n$3.bind(null,t))}):(o=e$3.clearTimeout,c=function(t){return setTimeout(n$3.bind(null,t),0)});function r(t){const e={isActive:!0,callback:t},n=c(e);return i$2(e,o&&function(){o(n);})}return i$1("microtasks")?r:function(t){return s$2(),r(t)}}();if(!i$1("microtasks")){let t=!1;o$3=[],s$2=function(){t||(t=!0,c((function(){if(t=!1,o$3.length){let t;for(;t=o$3.shift();)n$3(t);}})));};}!function(){if(!i$1("raf"))return c;i$1("microtasks");}();let r$2=function(){let c;if(i$1("host-node"))c=function(t){e$3.process.nextTick(n$3.bind(null,t));};else if(i$1("es6-promise"))c=function(t){e$3.Promise.resolve(t).then(n$3);};else if(i$1("dom-mutationobserver")){const t=e$3.MutationObserver||e$3.WebKitMutationObserver,n=document.createElement("div"),i=[];new t((function(){for(;i.length>0;){const t=i.shift();t&&t.isActive&&t.callback&&t.callback();}})).observe(n,{attributes:!0}),c=function(t){i.push(t),n.setAttribute("queueStatus","1");};}else c=function(t){s$2(),o$3.push(t);};return function(t){const e={isActive:!0,callback:t};return c(e),i$2(e)}}(),l$2=e$3.Promise;const u=function(t){return t&&"function"==typeof t.then};var a$2;i$1("es6-promise")||(e$3.Promise=((a$2=class t{constructor(e){this.state=1,this[Symbol.toStringTag]="Promise";let n=!1;const i=()=>1!==this.state||n;let s=[],o=function(t){s&&s.push(t);};const c=(t,e)=>{1===this.state&&(this.state=t,this.resolvedValue=e,o=r$2,s&&s.length>0&&r$2((function(){if(s){let t=s.length;for(let e=0;e<t;++e)s[e].call(null);s=null;}})));},l=(t,e)=>{i()||(u(e)?(e.then(c.bind(null,0),c.bind(null,2)),n=!0):c(t,e));};this.then=(e,n)=>new t((t,i)=>{o(()=>{const s=2===this.state?n:e;if("function"==typeof s)try{t(s(this.resolvedValue));}catch(t){i(t);}else 2===this.state?i(this.resolvedValue):t(this.resolvedValue);});});try{e(l.bind(null,0),l.bind(null,2));}catch(t){c(2,t);}}static all(e){return new this((function(n,i){const s=[];let o=0,c=0,r=!0;function l(t,e){s[t]=e,++o,a();}function a(){r||o<c||n(s);}let f=0;for(const n of e)h=f,++c,u(m=n)?m.then(l.bind(null,h),i):t.resolve(m).then(l.bind(null,h)),f++;var h,m;r=!1,a();}))}static race(e){return new this((function(n,i){for(const s of e)s instanceof t?s.then(n,i):t.resolve(s).then(n);}))}static reject(t){return new this((function(e,n){n(t);}))}static resolve(t){return new this((function(e){e(t);}))}catch(t){return this.then(void 0,t)}})[Symbol.species]=l$2,l$2=a$2)),i$1("es2018-promise-finally")||(e$3.Promise.prototype.finally=function(t){return this.then(t&&(e=>Promise.resolve(t()).then(()=>e)),t&&(e=>Promise.resolve(t()).then(()=>{throw e})))});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$4(n,r){if(n.forEach)n.forEach(r);else for(let t=0;t<n.length;t++)r(n[t],t,n);}function r$3(n,r,t){if(n.slice)return n.slice(r,t);void 0===r?r=0:(r<0&&(r+=n.length),r=Math.min(n.length,Math.max(0,r))),void 0===t?t=n.length:(t<0&&(t+=n.length),t=Math.min(n.length,Math.max(0,t)));const o=Math.max(0,t-r),c=new(n.constructor)(o);for(let t=0;t<o;t++)c[t]=n[r+t];return c}function t$3(n){return n instanceof ArrayBuffer||n&&n.constructor&&"ArrayBuffer"===n.constructor.name}function o$4(n){return n instanceof Int8Array||n&&n.constructor&&"Int8Array"===n.constructor.name}function c$1(n){return n instanceof Uint8Array||n&&n.constructor&&"Uint8Array"===n.constructor.name}function e$5(n){return n instanceof Uint8ClampedArray||n&&n.constructor&&"Uint8ClampedArray"===n.constructor.name}function a$3(n){return n instanceof Int16Array||n&&n.constructor&&"Int16Array"===n.constructor.name}function u$1(n){return n instanceof Uint16Array||n&&n.constructor&&"Uint16Array"===n.constructor.name}function i$3(n){return n instanceof Int32Array||n&&n.constructor&&"Int32Array"===n.constructor.name}function f$1(n){return n instanceof Uint32Array||n&&n.constructor&&"Uint32Array"===n.constructor.name}function s$3(n){return n instanceof Float32Array||n&&n.constructor&&"Float32Array"===n.constructor.name}function y(n){return n instanceof Float64Array||n&&n.constructor&&"Float64Array"===n.constructor.name}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function p$1(t,e){let n;if(e)for(n in t)t.hasOwnProperty(n)&&(void 0===t[n]?delete t[n]:t[n]instanceof Object&&p$1(t[n],!0));else for(n in t)t.hasOwnProperty(n)&&void 0===t[n]&&delete t[n];return t}function s$4(p){if(!p||"object"!=typeof p||"function"==typeof p)return p;if(o$4(p)||c$1(p)||e$5(p)||a$3(p)||u$1(p)||i$3(p)||f$1(p)||s$3(p)||y(p))return r$3(p);if(p instanceof Date)return new Date(p.getTime());if(p instanceof ArrayBuffer){return p.slice(0,p.byteLength)}if(p instanceof Map){const t=new Map;return p.forEach((e,n)=>{t.set(n,s$4(e));}),t}if(p instanceof Set){const t=new Set;return p.forEach(e=>{t.add(s$4(e));}),t}let y$1;const l=p;return y$1="function"==typeof l.clone?l.clone():"function"==typeof l.map&&"function"==typeof l.forEach?l.map(s$4):"function"==typeof l.notifyChange&&"function"==typeof l.watch?l.clone():m({},p,s$4),y$1}function y$1(t,e){return t===e||"number"==typeof t&&isNaN(t)&&"number"==typeof e&&isNaN(e)||"function"==typeof(t||{}).getTime&&"function"==typeof(e||{}).getTime&&t.getTime()===e.getTime()||!1}function l$3(t={},...e){for(const n of e)m(t,n);return t}function m(t,e,n){let o,f;const i={};for(o in e){f=e[o];const r=!(o in i)||i[o]!==f;(!(o in t)||t[o]!==f&&r)&&(t[o]=n?n(f):f);}return t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$5(r,n,t=!1){return e$6(r,n,t)}function t$4(r,n){if(null!=n)return n[r]||i$4(r.split("."),!1,n)}function o$5(r,n,t){const o=r.split("."),e=o.pop(),u=i$4(o,!0,t);u&&e&&(u[e]=n);}function i$4(r,n,t){let o=t;for(const t of r){if(null==o)return;if(!(t in o)){if(!n)return;o[t]={};}o=o[t];}return o}function e$6(n,t,o){return t?Object.keys(t).reduce((function(n,i){let u=n[i],c=t[i];return u===c?n:void 0===u?(n[i]=s$4(c),n):(Array.isArray(c)||Array.isArray(n)?(u=u?Array.isArray(u)?n[i]=u.concat():n[i]=[u]:n[i]=[],c&&(Array.isArray(c)||(c=[c]),o?c.forEach(r=>{-1===u.indexOf(r)&&u.push(r);}):n[i]=c.concat())):c&&"object"==typeof c?n[i]=e$6(u,c,o):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=c),n)}),n||{}):n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$7,i$5,o$6,l$4,s$5,a$4,g,u$2,h,f$2;if(i$1("es6-string")&&i$1("es6-string-raw"))e$7=e$3.String.fromCodePoint,i$5=e$3.String.raw,o$6=f(e$3.String.prototype.codePointAt),l$4=f(e$3.String.prototype.endsWith),s$5=f(e$3.String.prototype.includes),a$4=f(e$3.String.prototype.normalize),g=f(e$3.String.prototype.repeat),u$2=f(e$3.String.prototype.startsWith);else {const t=function(t,r,n,e,i=!1){if(null==r)throw new TypeError("string."+t+" requires a valid string to search against.");const o=r.length;return e=e!=e?i?o:0:e,[r,String(n),Math.min(Math.max(e,0),o)]};e$7=function(...t){const r=arguments.length;if(!r)return "";const n=String.fromCharCode,e=16384;let i=[],o=-1,l="";for(;++o<r;){let t=Number(arguments[o]);if(!(isFinite(t)&&Math.floor(t)===t&&t>=0&&t<=1114111))throw RangeError("string.fromCodePoint: Invalid code point "+t);if(t<=65535)i.push(t);else {t-=65536;let r=55296+(t>>10),n=t%1024+56320;i.push(r,n);}(o+1===r||i.length>e)&&(l+=n.apply(null,i),i.length=0);}return l},i$5=function(t,...r){let n=t.raw,e="",i=r.length;if(null==t||null==t.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(let t=0,o=n.length;t<o;t++)e+=n[t]+(t<i&&t<o-1?r[t]:"");return e},o$6=function(t,r=0){if(null==t)throw new TypeError("string.codePointAt requries a valid string.");const n=t.length;if(r!=r&&(r=0),r<0||r>=n)return;const e=t.charCodeAt(r);if(e>=55296&&e<=56319&&n>r+1){const n=t.charCodeAt(r+1);if(n>=56320&&n<=57343)return 1024*(e-55296)+n-56320+65536}return e},l$4=function(r,n,e){if(""===n)return !0;if(void 0===e)e=r.length;else if(null===e||isNaN(e))return !1;[r,n,e]=t("endsWith",r,n,e,!0);const i=e-n.length;return !(i<0)&&r.slice(i,e)===n},s$5=function(r,n,e=0){return [r,n,e]=t("includes",r,n,e),-1!==r.indexOf(n,e)},g=function(t,r=0){if(null==t)throw new TypeError("string.repeat requires a valid string.");if(r!=r&&(r=0),r<0||r===1/0)throw new RangeError("string.repeat requires a non-negative finite count.");let n="";for(;r;)r%2&&(n+=t),r>1&&(t+=t),r>>=1;return n},u$2=function(r,n,e=0){n=String(n),[r,n,e]=t("startsWith",r,n,e);const i=e+n.length;return !(i>r.length)&&r.slice(e,i)===n};}i$1("es2017-string")?(h=f(e$3.String.prototype.padEnd),f$2=f(e$3.String.prototype.padStart)):(h=function(t,r,n=" "){if(null==t)throw new TypeError("string.repeat requires a valid string.");if(r===1/0)throw new RangeError("string.padEnd requires a non-negative finite count.");(null==r||r<0)&&(r=0);let e=String(t);const i=r-e.length;return i>0&&(e+=g(n,Math.floor(i/n.length))+n.slice(0,i%n.length)),e},f$2=function(t,r,n=" "){if(null==t)throw new TypeError("string.repeat requires a valid string.");if(r===1/0)throw new RangeError("string.padStart requires a non-negative finite count.");(null==r||r<0)&&(r=0);let e=String(t);const i=r-e.length;return i>0&&(e=g(n,Math.floor(i/n.length))+n.slice(0,i%n.length)+e),e});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$6=/\{([^\}]+)\}/g;function r$4(t){return null==t?"":t}function o$7(e,o){return e.replace(n$6,"object"==typeof o?(e,n)=>r$4(t$4(n,o)):(t,e)=>r$4(o(e)))}function c$2(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,t=>e&&-1!==e.indexOf(t)?t:"\\"+t)}function u$3(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
s$1("postmessage",!1,!0);const t$5={applicationUrl:e$1.location&&e$1.location.href,assetsPath:null,baseUrl:null,fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};e$1.esriConfig&&(n$5(t$5,e$1.esriConfig,!0),delete t$5.has),t$5.baseUrl||(t$5.baseUrl="./"),t$5.assetsPath||(t$5.assetsPath="assets"),t$5.request.corsEnabledServers=[],t$5.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function u$4(n){return null!=n}function t$6(n){return null==n}function r$5(n){return void 0===n}function o$8(n,t){return u$4(n)?t(n):null}function f$3(n){return n}function c$3(n,t){return u$4(n)?n:"function"==typeof t?t():t}function e$8(n){return u$4(n)&&n.destroy(),null}function s$6(n){return null}function h$1(n,u){const t=new Array;for(const r of n)t.push(a$5(r,null,u));return t}function y$2(n,u){for(const t of n)a$5(t,null,u);}function a$5(n,t,r){return u$4(n)?r(n):t}function d$1(n,t){return u$4(n)?t(n):null}function w(n,...u){let t=n,r=0;for(;r<u.length&&t;)t=t[u[r++]];return t}function A(n){return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$6={info:0,warn:1,error:2,none:3};class n$7{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,n$7._loggers[this.module]=this;const r=this.module.lastIndexOf(".");-1!==r&&(this._parent=n$7.getLogger(this.module.slice(0,r)));}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e);}warn(...e){this._log("warn","always",...e);}info(...e){this._log("info","always",...e);}errorOnce(...e){this._log("error","once",...e);}warnOnce(...e){this._log("warn","once",...e);}infoOnce(...e){this._log("info","once",...e);}errorOncePerTick(...e){this._log("error","oncePerTick",...e);}warnOncePerTick(...e){this._log("warn","oncePerTick",...e);}infoOncePerTick(...e){this._log("info","oncePerTick",...e);}static get test(){return {resetLoggers(e={}){const r=n$7._loggers;return n$7._loggers=e,r},set throttlingDisabled(e){n$7._throttlingDisabled=e;}}}static getLogger(e){let r=n$7._loggers[e];return r||(r=new n$7({module:e})),r}_log(e,r,...o){if(!this._matchLevel(e))return;if("always"!==r&&!n$7._throttlingDisabled){const t=this._argsToKey(o),i=this._loggedMessages[e].get(t);if("once"===r&&null!=i||"oncePerTick"===r&&i&&i>=n$7._tickCounter)return;this._loggedMessages[e].set(t,n$7._tickCounter),n$7._scheduleTickCounterIncrement();}for(const r of t$5.log.interceptors)if(r(e,this.module,...o))return;this._inheritedWriter()(e,this.module,...o);}_parentWithMember(e,r){let t=this;for(;u$4(t);){const r=t[e];if(u$4(r))return r;t=t.parent;}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,r,...t){console[e](`[${r}]`,...t);}_matchLevel(r){const o=t$5.log.level?t$5.log.level:s("esri-debug-messages")?"info":"warn";return i$6[this._parentWithMember("level",o)]<=i$6[r]}_argsToKey(...e){return u$3(JSON.stringify(e,(e,r)=>"object"!=typeof r||Array.isArray(r)?r:"[Object]"))}static _scheduleTickCounterIncrement(){n$7._tickCounterScheduled||(n$7._tickCounterScheduled=!0,Promise.resolve().then(()=>{n$7._tickCounter++,n$7._tickCounterScheduled=!1;}));}}n$7._loggers={},n$7._tickCounter=0,n$7._tickCounterScheduled=!1,n$7._throttlingDisabled=!1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$6(r){s("esri-debug-messages")&&console.error(`Should never be reached (uncaught value ${r})`,(new Error).stack);}function o$9(e){return ()=>e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$7=n$7.getLogger("esri.core.Accessor");function t$7(e){return null==e?e:new Date(e)}function o$a(e){return null==e?e:!!e}function u$5(e){return null==e?e:e.toString()}function a$6(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function s$7(e){return null==e?e:Math.round(parseFloat(e))}function l$5(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function i$7(e,n){return null!=n&&e&&!(n instanceof e)}function c$4(e){return e&&"isCollection"in e}function f$4(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function p$2(e,n){return !!l$5(n)&&(r$7.error("Accessor#set","Assigning an instance of '"+(n.declaredClass||"unknown")+"' which is not a subclass of '"+v(e)+"'"),!0)}function y$3(e,n){return null==n?n:c$4(e)?function(e,n){if(!n||!n.constructor||!c$4(n.constructor))return p$2(e,n)?n:new e(n);const r=f$4(e.prototype.itemType),t=f$4(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(p$2(e,n),n):new e(n):n}(e,n):i$7(e,n)?p$2(e,n)?n:new e(n):n}function v(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function g$1(e){switch(e){case Number:return a$6;case N:return s$7;case Boolean:return o$a;case String:return u$5;case Date:return t$7;default:return y$3.bind(null,e)}}function d$2(e,n){const r=g$1(e);return 1===arguments.length?r:r(n)}function h$2(e,n,r){return 1===arguments.length?h$2.bind(null,e):n?Array.isArray(n)?n.map(n=>e(n,r)):[e(n,r)]:n}function b(e,n){return 1===arguments.length?h$2(d$2.bind(null,e)):h$2(d$2.bind(null,e),n)}function m$1(e,n,r){return 0!==n&&Array.isArray(r)?r.map(r=>m$1(e,n-1,r)):e(r)}function w$1(e,n,r){if(2===arguments.length)return w$1.bind(null,e,n);if(!r)return r;let t=n,o=r=m$1(e,n,r);for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let e=0;e<t;e++)r=[r];return r}function A$1(e,n,r){return 2===arguments.length?w$1(d$2.bind(null,e),n):w$1(d$2.bind(null,e),n,r)}function $(e){return !!Array.isArray(e)&&!e.some(n=>{const r=typeof n;return !("string"===r||"number"===r||"function"===r&&e.length>1)})}function j(e,n){if(2===arguments.length)return j(e).call(null,n);const t=new Set,o=e.filter(e=>"function"!=typeof e),u=e.filter(e=>"function"==typeof e);for(const n of e)"string"!=typeof n&&"number"!=typeof n||t.add(n);let a=null,s=null;return (e,n)=>{if(null==e)return e;const l=typeof e,c="string"===l||"number"===l;return c&&(t.has(e)||u.some(e=>"string"===l&&e===String||"number"===l&&e===Number))||"object"===l&&u.some(n=>!i$7(e,n))?e:(c&&o.length?(a||(a=o.map(e=>"string"==typeof e?`'${e}'`:""+e).join(", ")),r$7.error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):"object"==typeof e&&u.length?(s||(s=u.map(e=>v(e)).join(", ")),r$7.error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${s}`)):r$7.error("Accessor#set",`'${e}' is not a valid value for this property`),n&&(n.valid=!1),null)}}function k(e,n){if(2===arguments.length)return k(e).call(null,n);const t={},o=[],u=[];for(const n in e.typeMap){const r=e.typeMap[n];t[n]=d$2(r),o.push(v(r)),u.push(n);}const a=()=>`'${o.join("', '")}'`,s=()=>`'${u.join("', '")}'`,c="string"==typeof e.key?n=>n[e.key]:e.key;return n=>{if(e.base&&!i$7(e.base,n))return n;if(null==n)return n;const o=c(n)||e.defaultKeyValue,u=t[o];if(!u)return r$7.error("Accessor#set",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!i$7(e.typeMap[o],n))return n;if("string"==typeof e.key&&!l$5(n)){const r={};for(const t in n)t!==e.key&&(r[t]=n[t]);return u(r)}return u(n)}}class N{}const S={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function T(e){if(!e||!("type"in e))return !1;switch(e.type){case"native":case"array":case"one-of":return !0}return !1}function M(n){switch(n.type){case"native":return d$2(n.value);case"array":return h$2(M(n.value));case"one-of":return function(e){let n=null;return (t,o)=>B(t,e)?t:(null==n&&(n=_(e)),r$7.error("Accessor#set","Invalid property value, value needs to be of type "+n),o&&(o.valid=!1),null)}(n);default:return r$6(n),null}}function _(n){switch(n.type){case"native":switch(n.value){case Number:return "number";case String:return "string";case Boolean:return "boolean";case N:return "integer";case Date:return "date";default:return v(n.value)}case"array":return "array of "+_(n.value);case"one-of":{const e=n.values.map(e=>_(e));return `one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}default:r$6(n);}return "unknown"}function B(e,n){if(null==e)return !0;switch(n.type){case"native":switch(n.value){case Number:case N:return "number"==typeof e;case Boolean:return "boolean"==typeof e;case String:return "string"==typeof e}return e instanceof n.value;case"array":return !!Array.isArray(e)&&!e.some(e=>!B(e,n.value));case"one-of":return n.values.some(n=>B(e,n))}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$8(r){return o$b(()=>r.forEach(r=>u$4(r)&&r.remove()))}function o$b(e){return {remove:()=>{e&&(e(),e=void 0);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$9(r){return r?r.__accessor__?r.__accessor__:r.propertyInvalidated?r:null:null}function i$8(r,t){return null!=r&&r.metadatas&&null!=r.metadatas[t]}function a$7(r,t,n){if(n){return l$6(r,t,{policy:n,path:""})}return l$6(r,t,null)}function l$6(n,e,i){return e?Object.keys(e).reduce((function(n,a){let o=null,u="merge";if(i&&(o=i.path?`${i.path}.${a}`:a,u=i.policy(o)),"replace"===u)return n[a]=e[a],n;if(void 0===n[a])return n[a]=s$4(e[a]),n;let s=n[a],f=e[a];if(s===f)return n;if(Array.isArray(f)||Array.isArray(n))s=s?Array.isArray(s)?n[a]=s.concat():n[a]=[s]:n[a]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(r=>{-1===s.indexOf(r)&&s.push(r);}));else if(f&&"object"==typeof f)if(i){const r=i.path;i.path=A(o),n[a]=l$6(s,f,i),i.path=r;}else n[a]=l$6(s,f,null);else n.hasOwnProperty(a)&&!e.hasOwnProperty(a)||(n[a]=f);return n}),n||{}):n}function o$c(r){return r?"string"==typeof r&&-1===r.indexOf(".")?r:u$6(r):r}function u$6(r){return Array.isArray(r)?r:r.split(".")}function s$8(r){if(Array.isArray(r)||r.indexOf(",")>-1){const t=Array.isArray(r)?r:r.split(",");for(let r=0;r<t.length;r++)t[r]=t[r].trim();return 1===t.length?t[0]:t}return r.trim()}function f$5(r){if(-1===r.indexOf("?"))return null;const t=u$6(r),n=new Array(t.length);for(let r=0;r<t.length;r++){const e=t[r];n[r]="?"===e[e.length-1],n[r]&&(t[r]=e.slice(0,-1));}return {fullPath:t.join("."),conditional:n}}function c$5(r,t,e,i){const a=s$8(t);if(Array.isArray(a)){const t=a.map(t=>i(r,t.trim(),e));return r$8(t)}return i(r,a.trim(),e)}function y$4(r){let t=!1;return ()=>{t||(t=!0,r());}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$a(t,e,i){const o="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=i.getItemAt||Array.isArray(i)){const t=parseInt(o,10);if(!isNaN(t))return Array.isArray(i)?i[t]:i.getItemAt(t)}const u=e$9(i);return e?i$8(u,o)?u.get(o):i[o]:i$8(u,o)?u.internalGet(o):i[o]}function i$9(t,n,r,o){if(null==t)return t;const u=e$a(n[o],r,t);return !u&&o<n.length-1?void 0:o===n.length-1?u:i$9(u,n,r,o+1)}function o$d(n,r,o=!1,u=0){return "string"==typeof r&&-1===r.indexOf(".")?e$a(r,o,n):i$9(n,u$6(r),o,u)}function u$7(t,n){return o$d(t,n,!0)}function f$6(t,n){return void 0!==o$d(n,t,!0)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class o$e{constructor(t){this.autoDestroy=!1,this.properties=t;}}function n$8(r){let n=r.constructor.__accessorMetadata__;const c=Object.prototype.hasOwnProperty.call(r.constructor,"__accessorMetadata__");if(n){if(!c){const e=Object.create(n.properties),c=n.autoDestroy;for(const r in e)e[r]=s$4(e[r]);n=new o$e(e),n.autoDestroy=c,Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});}}else n=new o$e({}),Object.defineProperty(r.constructor,"__accessorMetadata__",{value:n,enumerable:!1,configurable:!0,writable:!0});return A(r.constructor.__accessorMetadata__)}function c$6(t){return n$8(t).properties}function s$9(t,e){const r=c$6(t);let o=r[e];return o||(o=r[e]={}),o}function i$a(t,e){return a$7(t,e,_$1)}const p$3=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _$1(t){return p$3.test(t)?"replace":"merge"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$a=n$7.getLogger("esri.core.accessorSupport.set");function r$9(o,n,i){if(o&&n)if("object"==typeof n)for(const e of Object.getOwnPropertyNames(n))r$9(o,e,n[e]);else {if(-1!==n.indexOf(".")){const e=n.split("."),s=e.splice(e.length-1,1)[0];return void r$9(u$7(o,e),s,i)}if(s("esri-debug-messages")){const e=o.__accessor__;null==e||e.metadatas[n]||s$a.warn("setting unknown property '"+n+"' on instance of "+e.host.declaredClass);}o[n]=i;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const g$2=n$7.getLogger("esri.core.accessorSupport.decorators.property");function y$5(t={}){return (y,h,j$1)=>{if(y===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${y.name}.${h}. Accessor does not support static properties.`);const O=s$9(y,h);j$1&&(j$1.get||j$1.set?(O.get=j$1.get||O.get,O.set=j$1.set||O.set):"value"in j$1&&("value"in t&&g$2.warn(`@property() will redefine the value of "${h}" on "${y.constructor.name}" already defined in the metadata`,t),O.value=t.value=j$1.value)),null!=t.readOnly&&(O.readOnly=t.readOnly);const{aliasOf:A}=t;if(A){const t="string"==typeof A?A:A.source,r="string"==typeof A?null:!0===A.overridable;let e;O.dependsOn=[t],O.get=function(){let r=u$7(this,t);if("function"==typeof r){e||(e=t.split(".").slice(0,-1).join("."));const n=u$7(this,e);n&&(r=r.bind(n));}return r},O.readOnly||(O.set=r?function(t){void 0!==t?this._override(h,t):this._clearOverride(h);}:function(r){r$9(this,t,r);});}const w=t.type,x=t.types;O.cast||(w?O.cast=function(t){let r=0,e=t;if(T(t))return M(t);for(;Array.isArray(e)&&1===e.length&&"string"!=typeof e[0]&&"number"!=typeof e[0];)e=e[0],r++;const f=e;if($(f))return 0===r?j(f):w$1(j(f),r);if(1===r)return b(f);if(r>1)return A$1(f,r);const l=t;if(l.from)return l.from;return d$2(l)}(w):x&&(Array.isArray(x)?O.cast=h$2(k(x[0])):O.cast=k(x))),t.range&&(O.cast=v$1(O.cast,t.range)),i$a(O,t);}}function h$3(t,r,e){const n=s$9(t,e);n.json||(n.json={});let o=n.json;return void 0!==r&&(o.origins||(o.origins={}),o.origins[r]||(o.origins[r]={}),o=o.origins[r]),o}function v$1(t,r){return e=>{let n=+t(e);return null!=r.step&&(n=Math.round(n/r.step)*r.step),null!=r.min&&(n=Math.max(r.min,n)),null!=r.max&&(n=Math.min(r.max,n)),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$f=Object.prototype.toString;function r$a(n){const o="__accessorMetadata__"in n?d$2(n):n;return function(...t){if(t.push(o),"number"==typeof t[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return e$b.apply(this,t)}}function e$b(t,o,r,e){s$9(t,o).cast=e;}function i$b(...t){var e;if(3!==t.length||"string"!=typeof t[1])return 1===t.length&&"[object Function]"===o$f.call(t[0])?r$a(t[0]):1===t.length&&"string"==typeof t[0]?(e=t[0],function(t,o){s$9(t,e).cast=t[o];}):void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class o$g{constructor(t,i){if(this.path=t,this.callback=i,this.chain=null,this.conditional=null,t.indexOf(".")>-1){const i=f$5(t);i&&(this.path=i.fullPath,this.conditional=i.conditional),this.chain=u$6(this.path);}else "?"===t[t.length-1]&&(this.path=t.slice(0,t.length-1),this.conditional=[!0],this.chain=[this.path]);return this.callback=i,this}install(t){return function(t,i){if(t.chain)return new a$8(t,i);return new h$4(t,i)}(this,t)}notify(t){this.callback(t,this.path);}}class h$4{constructor(t,i){var r;this.binding=t,this.target=i,null==(r=e$9(i))||r.addCursor(this.binding.path,this);}destroy(){var t;this.target&&(null==(t=e$9(this.target))||t.removeCursor(this.binding.path,this),this.target=this.binding=null);}propertyDestroyed(t,i){var r;null==(r=e$9(this.target))||r.removeCursor(i,this);}propertyInvalidated(){this.binding&&this.binding.notify(this.target);}propertyCommitted(){this.binding&&this.binding.notify(this.target);}}class a$8{constructor(t,r){this.binding=t,this.target=r,this.stack=[],this.properties=A(e$9(r));const s=t.chain[0];return this.stack.push({properties:this.properties,propertyName:s}),this.properties.addCursor(s,this),this.moveForward(),this}destroy(){for(;;){const t=this.stack.pop();if(null==t)break;t.properties.removeCursor(t.propertyName,this);}this.target=this.binding=null;}propertyDestroyed(t,i){this.moveBackward(t,i);}propertyInvalidated(){this.binding&&this.binding.notify(this.target);}propertyCommitted(t,i){this.binding&&(this.moveBackward(t,i),this.moveForward(),this.binding.notify(this.target));}moveBackward(t,i){const r=this.stack;let s=r[r.length-1];for(;s.properties!==t&&s.propertyName!==i;)s.properties.removeCursor(s.propertyName,this),r.pop(),s=r[r.length-1];}moveForward(){const t=this.stack,i=t[t.length-1];if(1===t.length&&this.binding.conditional&&this.binding.conditional[t.length-1]&&!i.properties.metadatas[i.propertyName])return;const r=i.properties.internalGet(i.propertyName),s=e$9(r);if(s&&this.binding.chain&&t.length<this.binding.chain.length){const i=this.binding.chain[t.length];if(this.binding.conditional&&this.binding.conditional[t.length]&&!s.metadatas[i])return;this.stack.push({properties:s,propertyName:i}),s.addCursor(i,this),this.moveForward();}}}class c$7{constructor(t){this.cursors=t;}remove(){const t=this.cursors;for(;t.length>0;)t.pop().destroy();this.cursors=null;}}class l$7{constructor(t){this.cursor=t;}remove(){this.cursor=e$8(this.cursor);}}function p$4(t,i){const s=s$8(t);if(Array.isArray(s)){const t=[];for(const r of s)t.push(new o$g(r,i));return function(i){const r=[];for(let s=0;s<t.length;s++)r[s]=t[s].install(i);return new c$7(r)}}{const t=new o$g(s,i);return function(i){return new l$7(t.install(i))}}}function d$3(t,i,s){const n=s$8(i);if(Array.isArray(n)){const i=[];for(const r of n)i.push(new o$g(r,s).install(t));return new c$7(i)}const e=new o$g(n,s).install(t);return new l$7(e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$b=s("esri-debug-messages"),n$9=n$7.getLogger("esri.core.accessorSupport.extensions.computedProperty"),p$5={processClassPropertyMetadata(e,r,p,a){if(s$b){const o=r.dependsOn;o&&o.length&&o.map(e=>e.split(".")[0]).forEach(r=>{"?"!==r[r.length-1]&&null==p[r]&&n$9.error(`[accessor] class '${a}' - property '${e}' depends on unknown property '${r}' which hasn't been found during introspection. This can be fix by adding '${r}' to the metadata for example.`);});}r.dependsOn&&r.dependsOn.length&&(r.wire=p$4(r.dependsOn,r=>{var t;return null==(t=e$9(r))?void 0:t.propertyInvalidated(e)}));},instanceCreated(e,r,o){for(const t of o){const o=r[t];o.wire&&o.wire(e);}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$a(n){if(n.json&&n.json.origins){const o=n.json.origins,e={"web-document":["web-scene","web-map"]};for(const n in e)if(o[n]){const s=o[n];e[n].forEach(n=>{o[n]=s;}),delete o[n];}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$c{constructor(s,i,r){var n;(this.name=s,this.details=r,this.message=void 0,this instanceof e$c)&&(this.message=i&&(n=r,i.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(function(e,s){if(""===s)return "$";const i=t$4(s,n),r=null==i?"":i;if(void 0===r)throw new Error(`could not find key "${s}" in template`);return r.toString()})))||"");}toString(){return "["+this.name+"]: "+this.message}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$8 extends e$c{constructor(e,r,s){if(super(e,r,s),!(this instanceof t$8))return new t$8(e,r,s)}}t$8.prototype.type="warning";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$d(e){return !!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$c=n$7.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p$6(e,r,n){var o,i;e&&(!n&&!r.read||(null==(o=r.read)?void 0:o.reader)||!1===(null==(i=r.read)?void 0:i.enabled)||function(t){if("types"in t)return l$8(t.types);return a$9(t.type)}(e)&&o$5("read.reader",u$8(e),r));}function u$8(t){var e;const r=null!=(e=t.ndimArray)?e:0;if(r>1)return function(t){var e;const r=s$c(t),n=y$6.bind(null,r),o=null!=(e=t.ndimArray)?e:0;return (t,e,r)=>{if(null==t)return t;t=n(t,r,o);let i=o,p=t;for(;i>0&&Array.isArray(p);)i--,p=p[0];if(void 0!==p)for(let e=0;e<i;e++)t=[t];return t}}(t);if(1===r)return f$7(t);if("type"in t&&c$8(t.type)){var n,o;const e=null==(n=t.type.prototype)||null==(o=n.itemType)?void 0:o.Type,r=f$7("function"==typeof e?{type:e}:{types:e});return (e,n,o)=>{const i=r(e,n,o);return i?new t.type(i):i}}return s$c(t)}function s$c(t){return "type"in t?function(t){if(t.prototype.read)return (e,r,n)=>{if(null==e)return e;const o=typeof e;if("object"!==o)return void i$c.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${o}'`);const p=new t;return p.read(e,n),p};return t.fromJSON}(t.type):function(t){var e;let o=null;const p=null!=(e=t.errorContext)?e:"type";return (e,u,s)=>{if(null==e)return e;const y=typeof e;if("object"!==y)return void i$c.error(`Expected JSON value of type 'object' to deserialize, but got '${y}'`);o||(o=function(t){const e={};for(const i in t.typeMap){var n,o;const p=t.typeMap[i],u=n$8(p.prototype);if("function"==typeof t.key)continue;const s=u.properties[t.key];if(!s)continue;(null==(n=s.json)?void 0:n.type)&&Array.isArray(s.json.type)&&1===s.json.type.length&&"string"==typeof s.json.type[0]&&(e[s.json.type[0]]=p);const y=null==(o=s.json)?void 0:o.write;if(!y||!y.writer){e[i]=p;continue}const f=y.target,c="string"==typeof f?f:t.key,a={};y.writer(i,a,c),a[c]&&(e[a[c]]=p);}return e}(t));const f=t.key;if("string"!=typeof f)return;const c=e[f],a=c?o[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!a){const t=`Type '${c||"unknown"}' is not supported`;return s&&s.messages&&e&&s.messages.push(new t$8(p+":unsupported",t,{definition:e,context:s})),void i$c.error(t)}const l=new a;return l.read(e,s),l}}(t.types)}function y$6(t,e,r,n){return 0!==n&&Array.isArray(e)?e.map(e=>y$6(t,e,r,n-1)):t(e,void 0,r)}function f$7(t){const e=s$c(t);return (t,r,n)=>{if(null==t)return t;if(Array.isArray(t)){const r=[];for(const o of t){const t=e(o,void 0,n);void 0!==t&&r.push(t);}return r}const o=e(t,void 0,n);return void 0!==o?[o]:void 0}}function c$8(t){if(!e$d(t))return !1;const e=t.prototype.itemType;return !(!e||!e.Type)&&("function"==typeof e.Type?a$9(e.Type):l$8(e.Type))}function a$9(t){return !Array.isArray(t)&&(!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||c$8(t)))}function l$8(t){for(const e in t.typeMap){if(!a$9(t.typeMap[e]))return !1}return !0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$e(e){if(e.json||(e.json={}),o$h(e.json),n$b(e.json),r$b(e.json),e.json.origins)for(const t in e.json.origins)o$h(e.json.origins[t]),n$b(e.json.origins[t]),r$b(e.json.origins[t]);return !0}function r$b(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name});}function o$h(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0);}function n$b(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$f(e,i){var o;if(!i.write||i.write.writer||!1===i.write.enabled&&!i.write.overridePolicy)return;const l=null!=(o=null==e?void 0:e.ndimArray)?o:0;var y;e&&(1===l||"type"in e&&e$d(e.type))?i.write.writer=u$9:i.write.writer=l>1?(y=l,function(t,e,n,i){let o;if(null===t)o=null;else {o=f$8(t,i,y);let r=y,e=o;for(;r>0&&Array.isArray(e);)r--,e=e[0];if(void 0!==e)for(let t=0;t<r;t++)o=[o];}o$5(n,o,e);}):n$c;}function n$c(t,e,n,o){o$5(n,i$d(t,o),e);}function i$d(r,t){return r&&"function"==typeof r.write?r.write({},t):r&&"function"==typeof r.toJSON?r.toJSON():"number"==typeof r?o$i(r):r}function o$i(r){return r===-1/0?-Number.MAX_VALUE:r===1/0?Number.MAX_VALUE:isNaN(r)?null:r}function u$9(t,e,n,o){let u;null===t?u=null:t&&"function"==typeof t.map?(u=t.map(r=>i$d(r,o)),"function"==typeof u.toArray&&(u=u.toArray())):u=[i$d(t,o)],o$5(n,u,e);}function f$8(r,t,e){return 0!==e&&Array.isArray(r)?r.map(r=>f$8(r,t,e-1)):i$d(r,t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function i$e(r,o){return a$a(r,"read",o)}function s$d(r,o){return a$a(r,"write",o)}function a$a(r,o,t){let n=r&&r.json;if(r&&r.json&&r.json.origins&&t){const e=r.json.origins[t.origin];e&&("any"===o||o in e)&&(n=e);}return n}function p$7(o){const n=function(o){if(o.type)return function(o){if(!o.type)return;let t=0,n=o.type;for(;Array.isArray(n)&&!$(n);)n=n[0],t++;return {type:n,ndimArray:t}}(o);return function(r){if(!r.types)return;let o=0,t=r.types;for(;Array.isArray(t);)t=t[0],o++;return {types:t,ndimArray:o}}(o)}(o);if(o.json.origins)for(const r in o.json.origins){const i=o.json.origins[r];p$6(n,i,!1),e$f(n,i);}p$6(n,o.json,!0),e$f(n,o.json);}const f$9={processPrototypePropertyMetadata(r,t){e$e(t)&&(n$a(t),p$7(t));}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$g=[p$5,f$9];function r$c(o,t){for(const r of e$g)if(r.processPrototypePropertyMetadata)for(const e in o){const s=o[e];r.processPrototypePropertyMetadata(e,s,o,t);}}function s$e(o,t){for(const r of e$g)if(r.processClassPropertyMetadata)for(const e in o){const s=o[e];r.processClassPropertyMetadata(e,s,o,t);}}function n$d(o,t){const r=Object.getOwnPropertyNames(t);for(const s of e$g)s.instanceCreated&&s.instanceCreated(o,t,r);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$f=new Set,i$f=new Set;function n$e(o){return n=>{n.prototype.declaredClass=o,r$c(n$8(n.prototype).properties,o),c$9(n);const a=[],l=[];let p=n.prototype;for(;p;)p.hasOwnProperty("initialize")&&!s$f.has(p.initialize)&&(s$f.add(p.initialize),a.push(p.initialize)),p.hasOwnProperty("destroy")&&!i$f.has(p.destroy)&&(i$f.add(p.destroy),l.push(p.destroy)),p=Object.getPrototypeOf(p);s$f.clear(),i$f.clear();class d extends n{constructor(...t){if(super(...t),this.constructor===d&&"function"==typeof this.postscript){if(a.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=a.length-1;e>=0;e--)a[e].call(this);}}),l.length){let t=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(t){if(s("esri-debug-messages"))try{throw new Error("instance is already destroyed")}catch(e){console.warn(e.stack);}}else {t=!0;for(let e=0;e<l.length;e++)l[e].call(this);}}});}this.postscript(...t);}}}return d.__accessorMetadata__=n$8(n.prototype),d.prototype.declaredClass=o,d}}function a$b(e,t){return null==t.get?void 0===t.value?function(){return this.__accessor__.store.get(e)}:function(){const r=this.__accessor__.store;return r.has(e)?r.get(e):t.value}:function(){return this.__accessor__.getterComputed(e,t)}}function c$9(e){const r=e.prototype,s=r.declaredClass,i=n$8(r).properties;s$e(i,s);const n={};for(const e of Object.getOwnPropertyNames(i)){const t=i[e];n[e]={enumerable:!0,configurable:!0,get:a$b(e,t),set(r){const o=this.__accessor__;if(void 0!==o){if(!Object.isFrozen(this)){if(o.initialized&&t.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${e}' of ${this.declaredClass}`);if(2===o.lifecycle&&t.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${e}' of ${this.declaredClass}`);o.set(e,r);}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r});}};}Object.defineProperties(e.prototype,n);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$g extends e$c{constructor(e,t,r){if(super(e,t,r),!(this instanceof s$g))return new s$g(e,t,r)}toJSON(){if(null!=this.details)try{return {name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&"object"==typeof r&&"function"==typeof r.toJSON)return r;try{return s$4(r)}catch(e){return "[object]"}}))}}catch(e){throw n$7.getLogger("esri.core.Error").error(e),e}return {name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new s$g(e.name,e.message,e.details)}}s$g.prototype.type="error";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const c$a=n$7.getLogger("esri.core.urlUtils"),f$a=t$5.request,a$c="esri/config: esriConfig.request.proxyUrl is not set.",h$5=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,p$8=/^\s*http:/i,d$4=/^\s*https:/i,m$2=/^\s*file:/i,g$3=/:\d+$/,y$7=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,x=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),O=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class w$2{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let e=A(this.uri.match(x));this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=A(this.authority.match(O)),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null);}toString(){return this.uri}}const $$1=new w$2(t$5.applicationUrl),U={},b$1=(()=>{const t=A($$1.path),e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return `${`${$$1.scheme}://${$$1.host}${null!=$$1.port?":"+$$1.port:""}`}${e}`})();function C(t){const e={path:null,query:null},n=new w$2(t),r=t.indexOf("?");return null===n.query?e.path=t:(e.path=t.substring(0,r),e.query=R(n.query)),n.fragment&&(e.hash=n.fragment,null===n.query&&(e.path=e.path.substring(0,e.path.length-(n.fragment.length+1)))),e}function R(t){const e=t.split("&"),n={};for(const t of e){if(!t)continue;const e=t.indexOf("=");let r,o;e<0?(r=decodeURIComponent(t),o=""):(r=decodeURIComponent(t.slice(0,e)),o=decodeURIComponent(t.slice(e+1)));let i=n[r];"string"==typeof i&&(i=n[r]=[i]),Array.isArray(i)?i.push(o):n[r]=o;}return n}function q(t){return t&&"object"==typeof t&&"toJSON"in t&&"function"==typeof t.toJSON}function j$1(t,e){return t?e&&"function"==typeof e?Object.keys(t).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(e(n,t[n]))).join("&"):Object.keys(t).map(n=>{const r=t[n];if(null==r)return "";const o=encodeURIComponent(n)+"=",i=e&&e[n];return i?o+encodeURIComponent(i(r)):Array.isArray(r)?r.map(t=>q(t)?o+encodeURIComponent(JSON.stringify(t)):o+encodeURIComponent(t)).join("&"):q(r)?o+encodeURIComponent(JSON.stringify(r)):o+encodeURIComponent(r)}).filter(t=>t).join("&"):""}function v$2(t=!1){let e,n=f$a.proxyUrl;if("string"==typeof t){r=t,e=d$4.test(r)||"https"===$$1.scheme&&et(r);const o=P(t);o&&(n=o.proxyUrl);}else e=!!t;var r;if(!n)throw c$a.warn(a$c),new s$g("urlutils:proxy-not-set",a$c);e&&it()&&(n=ot(n));return C(n)}function L(t){const e=P(t);let n,r=void 0;if(e){const t=S$1(e.proxyUrl);r=t.path,n=t.query?R(t.query):null;}if(r){const e=C(t);t=r+"?"+e.path;const o=j$1({...n,...e.query});o&&(t=`${t}?${o}`);}return t}const I={path:"",query:""};function S$1(t){const e=t.indexOf("?");return -1!==e?(I.path=t.slice(0,e),I.query=t.slice(e+1)):(I.path=t,I.query=null),I}function A$2(t){return t=(t=st(t=function(t){if(!t||"/"!==t[t.length-1])return t+"/";return t}(t=S$1(t).path),!0)).toLowerCase()}function k$1(t){const e={proxyUrl:t.proxyUrl,urlPrefix:A$2(t.urlPrefix)},n=f$a.proxyRules,r=e.urlPrefix;let o=n.length;for(let t=0;t<n.length;t++){const e=n[t].urlPrefix;if(0===r.indexOf(e)){if(r.length===e.length)return -1;o=t;break}0===e.indexOf(r)&&(o=t+1);}return n.splice(o,0,e),o}function P(t){const e=f$a.proxyRules,n=A$2(t);for(let t=0;t<e.length;t++)if(0===n.indexOf(e[t].urlPrefix))return e[t]}function B$1(t,e){return t=E(t),e=E(e),st(t)===st(e)}function E(t){const e=(t=Q(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function J(t){const n=n=>null==n||n instanceof RegExp&&n.test(t)||"string"==typeof n&&u$2(t,n),r=f$a.interceptors;if(r)for(const t of r)if(Array.isArray(t.urls)){if(t.urls.some(n))return t}else if(n(t.urls))return t;return null}function N$1(t,e,n=!1){const r=ft(t),o=ft(e);return !(!n&&r.scheme!==o.scheme)&&(null!=r.host&&null!=o.host&&(r.host.toLowerCase()===o.host.toLowerCase()&&r.port===o.port))}function T$1(t){if("string"==typeof t){if(!G(t))return !0;t=ft(t);}if(N$1(t,$$1))return !0;const e=f$a.trustedServers||[];for(let n=0;n<e.length;n++){const r=z(e[n]);for(let e=0;e<r.length;e++)if(N$1(t,r[e]))return !0}return !1}function z(t){return U[t]||(nt(t)||et(t)?U[t]=[new w$2(D(t))]:U[t]=[new w$2("http://"+t),new w$2("https://"+t)]),U[t]}function D(t,e=b$1,n){return et(t)?n&&n.preserveProtocolRelative?t:"http"===$$1.scheme&&$$1.authority===F(t).slice(2)?"http:"+t:"https:"+t:nt(t)?t:A(_$2("/"===t[0]?function(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);if(-1===n)return t;return t.slice(0,n)}(e):e,t))}function M$1(t,e=b$1,n){if(!G(t))return t;const r=Q(t),o=r.toLowerCase(),i=Q(e).toLowerCase().replace(/\/+$/,""),s=n?Q(n).toLowerCase().replace(/\/+$/,""):null;if(s&&0!==i.indexOf(s))return t;const u=(t,e,n)=>-1===(n=t.indexOf(e,n))?t.length:n;let l=u(o,"/",o.indexOf("//")+2),c=-1;for(;o.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==o.length);)l=u(o,"/",l+1);if(-1===c)return t;if(s&&c<s.length)return t;t=r.slice(c);const f=i.slice(c-1).replace(/[^/]+/g,"").length;if(f>0)for(let e=0;e<f;e++)t="../"+t;else t="./"+t;return t}function Q(t){return t=function(t){const e=f$a.httpsDomains;if(!function(t){return p$8.test(t)||"http"===$$1.scheme&&et(t)}(t))return t;const r=t.indexOf("/",7);let o;o=-1===r?t:t.slice(0,r);if(o=o.toLowerCase().slice(7),g$3.test(o)){if(!l$4(o,":80"))return t;o=o.slice(0,-3),t=t.replace(":80","");}if("http"===$$1.scheme&&o===$$1.authority&&!y$7.test(t))return t;(it()&&o===$$1.authority||e&&e.some(t=>o===t||l$4(o,"."+t))||it()&&!P(t))&&(t=ot(t));return t}(t=function(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(t=function(t){if(/^https?:\/\//i.test(t)){const e=S$1(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+="?"+e.query);}return t}(t=D(t=t.trim()))))}function _$2(...t){const e=t.filter(u$4);if(!e||!e.length)return;const n=[];if(G(e[0])){const t=e[0],o=t.indexOf("//");-1!==o&&(n.push(t.slice(0,o+1)),r=e[0],m$2.test(r)&&(n[0]+="/"),e[0]=t.slice(o+2));}else "/"===e[0][0]&&n.push("");var r;const o=e.reduce((t,e)=>e?t.concat(e.split("/")):t,[]);for(let t=0;t<o.length;t++){const e=o[t];".."===e&&n.length>0&&".."!==n[n.length-1]?n.pop():(!e&&t===o.length-1||e&&("."!==e||0===n.length))&&n.push(e);}return n.join("/")}function F(t,e=!1){if(H(t)||K(t))return null;let n=t.indexOf("://");if(-1===n&&et(t))n=2;else {if(-1===n)return null;n+=3;}const r=t.indexOf("/",n);return -1!==r&&(t=t.slice(0,r)),e&&(t=st(t,!0)),t}function G(t){return et(t)||nt(t)}function H(t){return null!=t&&"blob:"===t.slice(0,5)}function K(t){return "data:"===t.slice(0,5)}function V(t){const e=X(t);if(!e||!e.isBase64)return null;const n=atob(e.data),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r.buffer}const W=/^data:(.*?)(;base64)?,(.*)$/;function X(t){const e=t.match(W);if(!e)return null;const[,n,r,o]=e;return {mediaType:n,isBase64:!!r,data:o}}function Y(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function et(t){return null!=t&&void 0!==t&&"/"===t[0]&&"/"===t[1]}function nt(t){return h$5.test(t)}function ot(t){return et(t)?"https:"+t:t.replace(p$8,"https:")}function it(){return "https"===$$1.scheme}function st(t,e=!1){return et(t)?t.slice(2):(t=t.replace(h$5,""),e&&t.length>1&&"/"===t[0]&&"/"===t[1]&&(t=t.slice(2)),t)}function ut(t){let e=0;if(G(t)){const n=t.indexOf("//");-1!==n&&(e=n+2);}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function lt(t){return t.replace(/\/+$/,"")}function ct(t,e,n){if(!(e&&n&&t&&G(t)))return t;const r=t.indexOf("//"),o=t.indexOf("/",r+2),i=t.indexOf(":",r+2),s=Math.min(o<0?t.length:o,i<0?t.length:i);if(t.slice(r+2,s).toLowerCase()!==e.toLowerCase())return t;return `${t.slice(0,r+2)}${n}${t.slice(s)}`}function ft(t){return "string"==typeof t?new w$2(D(t)):(t.scheme||(t.scheme=$$1.scheme),t)}function ht(t,e){const n=C(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function pt(t,e,n){const r=C(t),o=r.query||{};return o[e]=String(n),`${r.path}?${j$1(o)}`}function dt(t,e){const n=C(t),r=n.query||{};for(const t in e)r[t]=e[t];const o=j$1(r);return o?`${n.path}?${o}`:n.path}function gt(t){if(t$6(t))return null;const e=t.match(yt);return e?e[1]:null}const yt=/.*?\.([^\/]*)$/;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$j(){const t=n$f.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const o=o=>t[o].toString(16);return o(0)+o(1)+"-"+o(2)+"-"+o(3)+"-"+o(4)+"-"+o(5)+o(6)+o(7)}const n$f=e$1.crypto||e$1.msCrypto;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$d="20200916",e$h="ee65a9472ada46ac297d5434ba85929645abf6f8";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$k="4.17",t$9={request:(r,e)=>Promise.resolve().then(function () { return request; }).then(({default:s})=>{const o=r.options||{};return o.responseType="array-buffer",o.signal=null==e?void 0:e.signal,s(r.url,o)}).then(r=>({result:{data:r.data,ssl:r.ssl},transferList:[r.data]}))};let i$g;function n$g(r){i$g=r;}s("host-webworker")||(s("esri-console-log-version")&&console.warn(`Using ArcGIS API for JavaScript 4.17-next [Date: ${a$d}, Revision: ${e$h.slice(0,8)}]`),(s("edge")||s("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser"));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function i$h(t){return t&&"function"==typeof t[Symbol.iterator]}function n$h(t){return t&&"number"==typeof t.length}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$i=Math.pow(2,53)-1;let a$e,f$b,s$h,u$a,l$9,c$b,h$6;if(i$1("es6-array")&&i$1("es6-array-fill"))a$e=e$3.Array.from,f$b=e$3.Array.of,s$h=f(e$3.Array.prototype.copyWithin),u$a=f(e$3.Array.prototype.fill),l$9=f(e$3.Array.prototype.find),c$b=f(e$3.Array.prototype.findIndex);else {const t=function(t){return isNaN(t)?0:(t=Number(t),isFinite(t)&&(t=Math.floor(t)),Math.min(Math.max(t,0),i$i))},r=function(t){return t=Number(t),isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=function(t,r){return t<0?Math.max(r+t,0):Math.min(t,r)};a$e=function(r,n,i){if(null==r)throw new TypeError("from: requires an array-like object");n&&i&&(n=n.bind(i));const a=t(r.length),f="function"==typeof this?Object(new this(a)):new Array(a);if(!n$h(r)&&!i$h(r))return f;if(n$h(r)){if(0===a)return [];for(let t=0;t<r.length;t++)f[t]=n?n(r[t],t):r[t];}else {let t=0;for(const e of r)f[t]=n?n(e,t):e,t++;}return void 0!==r.length&&(f.length=a),f},f$b=function(...t){return Array.prototype.slice.call(t)},s$h=function(e,o,i,a){if(null==e)throw new TypeError("copyWithin: target must be an array-like object");const f=t(e.length);o=n(r(o),f),i=n(r(i),f),a=n(void 0===a?f:r(a),f);let s=Math.min(a-i,f-o),u=1;for(o>i&&o<i+s&&(u=-1,i+=s-1,o+=s-1);s>0;)i in e?e[o]=e[i]:delete e[o],o+=u,i+=u,s--;return e},u$a=function(e,o,i,a){const f=t(e.length);let s=n(r(i),f);for(a=n(void 0===a?f:r(a),f);s<a;)e[s++]=o;return e},l$9=function(t,r,n){const e=c$b(t,r,n);return -1!==e?t[e]:void 0},c$b=function(r,n,e){const o=t(r.length);if(!n)throw new TypeError("find: second argument must be a function");e&&(n=n.bind(e));for(let t=0;t<o;t++)if(n(r[t],t,r))return t;return -1};}if(i$1("es7-array"))h$6=f(e$3.Array.prototype.includes);else {const t=function(t){return t=Number(t),isNaN(t)?0:(isFinite(t)&&(t=Math.floor(t)),Math.min(Math.max(t,0),i$i))};h$6=function(r,n,e=0){let o=t(r.length);for(let t=e;t<o;++t){const e=r[t];if(n===e||n!=n&&e!=e)return !0}return !1};}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$a(e){return {setTimeout:(t,o)=>{const r=e.setTimeout(t,o);return {remove:()=>e.clearTimeout(r)}}}}var o$l=t$a(e$1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$i(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function r$d(r,t,n){if(!e$i(r))throw new TypeError("target is not a Evented or EventTarget object");if("on"in r)return r.on(t,n);if(Array.isArray(t)){const e=t.slice();for(const t of e)r.addEventListener(t,n);return {remove(){for(const t of e)r.removeEventListener(t,n);}}}return r.addEventListener(t,n),{remove(){r.removeEventListener(t,n);}}}function t$b(t,n,o){if(!e$i(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(n,o);const i=r$d(t,n,e=>{i.remove(),o.call(t,e);});return {remove(){i.remove();}}}const o$m={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function i$j({key:e}){return o$m[e]||e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let l$a=e$3.AbortSignal;i$1("abort-signal")||(e$3.AbortSignal=l$a=class{constructor(){this._aborted=!1,this.listeners={};}get aborted(){return this._aborted}addEventListener(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e);}removeEventListener(t,e){if(!(t in this.listeners))return;const r=c$b(this.listeners[t],t=>t===e);r>=0&&this.listeners[t].splice(r,1);}dispatchEvent(t){const{type:e}=t;return "abort"===e&&(this._aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),e in this.listeners&&(this.listeners[e].forEach(e=>{setTimeout(()=>e.call(this,t),0);}),!t.preventDefault)}});let f$c=e$3.AbortController;i$1("abort-controller")||(e$3.AbortController=f$c=class{constructor(){this.signal=new l$a;}abort(){let t;try{t=new Event("abort");}catch(e){"undefined"!=typeof document?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):t={type:"abort",bubbles:!1,cancelable:!1};}this.signal.dispatchEvent(t);}});var h$7=f$c;const m$3=n$7.getLogger("esri");function p$9(t){return Promise.all(t)}function v$3(t){return new Promise((e,r)=>{try{t(e,r);}catch(t){Promise.resolve().then(()=>r(t));}})}function d$5(t="Aborted"){return new s$g("AbortError",t)}function g$4(){return new h$7}function j$2(t){if(y$8(t))throw d$5()}function w$3(t){return u$4(t)?"aborted"in t?t:t.signal:t}function y$8(t){const e=w$3(t);return u$4(e)&&e.aborted}function E$1(t){if(L$1(t))throw t}function A$3(t){if(!L$1(t))throw t}function T$2(t,e){const r=w$3(t);if(!t$6(r)){if(!r.aborted)return t$b(r,"abort",()=>e());e();}}function P$1(t,e){const r=w$3(t);if(!t$6(r))return j$2(r),t$b(r,"abort",()=>e(d$5()))}function L$1(t){return t&&"AbortError"===t.name}function k$2(t){return t.catch(t=>{if(!L$1(t))throw t})}function _$3(){let t=null;const e=v$3((e,r)=>{t={promise:void 0,resolve:e,reject:r};});return t.promise=e,t}function x$1(t){if(!t)return;if("function"!=typeof t.forEach){const e=Object.keys(t);return x$1(e.map(e=>t[e])).then(t=>{const r={};return e.forEach((e,n)=>r[e]=t[n]),r})}const e=t,r=D$1;return v$3(t=>{const n=[];let o=e.length;0===o&&t(n),e.forEach(e=>{const s={promise:e||r(e)};n.push(s),s.promise.then(t=>{s.value=t;}).catch(t=>{s.error=t;}).then(()=>{--o,0===o&&t(n);});});})}function S$2(t){return t&&"function"==typeof t.then}function q$1(t){return x$1(t).then(t=>t.filter(t=>!!t.value).map(t=>t.value))}function z$1(t){return t&&t.length?v$3((e,r)=>{for(const n of t)n.then(e,r);}):D$1()}function B$2(t){return Promise.reject(t)}function D$1(t){return Promise.resolve(t)}function O$1(t,e,r){const n=g$4();return T$2(r,()=>n.abort()),v$3((r,o)=>{let s=setTimeout(()=>{s=0,r(e);},t);T$2(n,()=>{s&&(clearTimeout(s),o(d$5()));});})}function F$1(t){return t&&"function"==typeof t.then}function G$1(t){return t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then?t:D$1(t)}function H$1(t,e=-1){let r,n,s,i,c=null;const a=(...u)=>{if(r){n=u,i&&i.reject(d$5()),i=_$3();const t=A(i.promise);if(c){const t=c;c=null,t.abort();}return t}if(s=i||_$3(),i=null,e>0){const n=g$4();r=G$1(t(...u,n.signal));const o=r;O$1(e).then(()=>{r===o&&(i?n.abort():c=n);});}else r=1,r=G$1(t(...u));const l=()=>{const t=n;n=s=r=c=null,null!=t&&a(...t);},f=r,h=s;return f.then(l,l),f.then(h.resolve,h.reject),A(h.promise)};return a}function I$1(){let t,e;const r=v$3((r,n)=>{t=r,e=n;}),n=e=>{t(e);};return n.resolve=e=>t(e),n.reject=t=>e(t),n.timeout=(t,e)=>o$l.setTimeout(()=>n.reject(e),t),n.promise=r,n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$i(n,i,a=!1,c){return v$3((o,d)=>{if(y$8(c))return void d(s$i());let l=()=>{v(),d(new Error("Unable to load "+i));},m=()=>{const e=n;v(),o(e);},u=()=>{if(!n)return;const e=n;v(),e.src="",d(s$i());};const v=()=>{s("esri-image-decode")||(n.removeEventListener("error",l),n.removeEventListener("load",m)),l=null,m=null,n=null,u$4(c)&&c.removeEventListener("abort",u),u=null,a&&URL.revokeObjectURL(i);};u$4(c)&&c.addEventListener("abort",u),s("esri-image-decode")?n.decode().then(m,l):(n.addEventListener("error",l),n.addEventListener("load",m));})}function s$i(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function j$3(r,s$1){const o=K(r),n=H(r);n||o||(r=Q(r));const f={url:r,requestOptions:{...f$3(s$1)}};let h=J(r);if(h){const e=await async function(e,t){if(null!=e.responseData)return e.responseData;e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers});e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query});if(e.before){let r,s;try{s=await e.before(t);}catch(e){r=R$1("request:interceptor",e,t);}if((s instanceof Error||s instanceof s$g)&&(r=R$1("request:interceptor",s,t)),r)throw e.error&&e.error(r),r;return s}}(h,f);if(null!=e)return {data:e,getHeader:M$2,requestOptions:f.requestOptions,url:f.url};h.after||h.error||(h=null);}if(r=f.url,"image"===(s$1=f.requestOptions).responseType){if(s("host-webworker")||s("host-node"))throw R$1("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),f)}else if(o)throw R$1("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+s$1.responseType),f);if("head"===s$1.method){if(s$1.body)throw R$1("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),f);if(o||n)throw R$1("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),f)}if(await async function(){s("host-webworker")?U$1||(U$1=await import('./chunks/request-b738ca3b.js')):j$3._abortableFetch||(s("esri-abortable-fetch")?j$3._abortableFetch=e$1.fetch.bind(e$1):j$3._abortableFetch=(await import('./chunks/fetch.umd-880c74b0.js').then(function (n) { return n.f; })).fetch);}(),U$1)return U$1.execute(r,s$1);const w=g$4();T$2(s$1,()=>w.abort());const y={controller:w,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:h,params:f,redoRequest:!1,useIdentity:_$4.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},g=await async function(t){let r,s;await async function(t){const r=t.params.url,s=t.params.requestOptions,o=t.controller.signal,n=s.body;let a=null,i=null,l=null;P$2&&"HTMLFormElement"in e$1&&(n instanceof FormData?a=n:n instanceof HTMLFormElement&&(i=n,a=new FormData(i)));"string"==typeof n&&(l=n);t.fetchOptions={cache:s.cacheBust&&!j$3._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:s.headers||{},method:"head"===s.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:o},(a||l)&&(t.fetchOptions.body=a||l);"anonymous"===s.authMode&&(t.useIdentity=!1);if(t.hasToken=!!(/token=/i.test(r)||s.query&&s.query.token||a&&a.get&&a.get("token")||i&&i.elements.token),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!B$3(r)&&!y$8(o)){let e;"immediate"===s.authMode?(await H$2(),e=await i$g.getCredential(r,{signal:o}),t.credential=e):"no-prompt"===s.authMode?(await H$2(),e=await i$g.getCredential(r,{prompt:!1,signal:o}).catch(()=>{}),t.credential=e):i$g&&(e=i$g.findCredential(r)),e&&(t.credentialToken=e.token,t.useSSL=!!e.ssl);}}(t);try{do{[r,s]=await N$2(t);}while(!await $$2(t,r,s))}catch(e){const s=R$1("request:server",e,t.params,r);throw s.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(s),s}const o=t.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(o)&&!t.hasToken&&!t.credentialToken&&s&&s.user&&s.user.username&&!T$1(o)){const e=F(o,!0);e&&_$4.trustedServers.push(e);}const n=t.credential;if(n&&i$g){const e=i$g.findServerInfo(n.server);let t=e&&e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=i$g.findCredential(t,n.userId);e&&-1===i$g._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t);}}return {data:s,getHeader:r?e=>r.headers.get(e):M$2,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}(y);return h&&h.after&&h.after(g),g}let U$1;const _$4=t$5.request,P$2="FormData"in e$1,F$2=[499,498,403,401],D$2=["COM_0056","COM_0057","SB_0008"],I$2=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],M$2=()=>null;function R$1(e,t,s,o){let n="Error";const a={url:s.url,requestOptions:s.requestOptions,getHeader:M$2,ssl:!1};if(t instanceof s$g)return t.details?(t.details=s$4(t.details),t.details.url=s.url,t.details.requestOptions=s.requestOptions):t.details=a,t;if(t){const e=o&&(e=>o.headers.get(e)),r=o&&o.status,s=t.message;s&&(n=s),e&&(a.getHeader=e),a.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||r||0,a.subCode=t.subcode,a.messageCode=t.messageCode,"string"==typeof t.details?a.messages=[t.details]:a.messages=t.details;}return L$1(t)?d$5():new s$g(e,n,a)}async function H$2(){i$g||await import('./chunks/IdentityManager-5b6f283c.js');}function B$3(e){return I$2.some(t=>t.test(e))}async function N$2(e){let r=e.params.url;const s$1=e.params.requestOptions,n=e.fetchOptions,a=H(r)||K(r),i=s$1.responseType||"json",u=a?0:null!=s$1.timeout?s$1.timeout:_$4.timeout;let d=!1;if(!a){e.useSSL&&(r=ot(r)),s$1.cacheBust&&"default"===n.cache&&(r=pt(r,"request.preventCache",Date.now()));let o={...s$1.query};e.credentialToken&&(o.token=e.credentialToken);let a=j$1(o);s("esri-url-encodes-apostrophe")&&(a=a.replace(/'/g,"%27"));const i=r.length+1+a.length;let l;d="post"===s$1.method||!!s$1.body||i>_$4.maxUrlLength;const c=s$1.useProxy||!!P(r);if(c){const e=v$2(r);l=e.path,!d&&l.length+1+i>_$4.maxUrlLength&&(d=!0),e.query&&(o={...e.query,...o});}if("HEAD"===n.method&&(d||c)){if(d){if(i>_$4.maxUrlLength)throw R$1("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw R$1("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(c)throw R$1("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(d?(n.method="POST",s$1.body?r=dt(r,o):(n.body=j$1(o),n.headers["Content-Type"]="application/x-www-form-urlencoded")):r=dt(r,o),c&&(e.useProxy=!0,r=`${l}?${r}`),o.token&&P$2&&n.body instanceof FormData){const e=n.body;e.set?e.set("token",o.token):e.append("token",o.token);}if(s$1.hasOwnProperty("withCredentials"))e.withCredentials=s$1.withCredentials;else if(T$1(r))e.withCredentials=!0;else if(i$g){const t=i$g.findServerInfo(r);t&&t.webTierAuth&&(e.withCredentials=!0);}e.withCredentials&&(n.credentials="include");}let T,S,C$1=0,L=!1;u>0&&(C$1=setTimeout(()=>{L=!0,e.controller.abort();},u));try{if("image"!==s$1.responseType||"default"!==n.cache||"GET"!==n.method||d||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return !0;return !1}(s$1.headers)||!a&&!e.useProxy&&_$4.proxyUrl&&!function(e){const t=F(e);return !t||l$4(t,".arcgis.com")||-1!==j$3._corsServers.indexOf(t)||T$1(t)}(r)){if(T=await j$3._abortableFetch(r,n),e.useProxy||function(e){if(H(e)||K(e))return;const t=F(e);t&&-1===j$3._corsServers.indexOf(t)&&j$3._corsServers.push(t);}(r),T.ok&&"HEAD"!==n.method){switch(i){case"array-buffer":S=await T.arrayBuffer();break;case"blob":case"image":S=await T.blob();break;default:S=await T.text();}if(C$1&&(clearTimeout(C$1),C$1=0),"json"===i||"xml"===i||"document"===i)if(S)switch(i){case"json":S=JSON.parse(S);break;case"xml":S=A$4(S,"application/xml");break;case"document":S=A$4(S,"text/html");}else S=null;if(S){if("array-buffer"===i||"blob"===i){const e=T.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&S["blob"===i?"size":"byteLength"]<=750)try{const e=await new Response(S).json();e.error&&(S=e);}catch{}}"image"===i&&S instanceof Blob&&(S=await G$2(URL.createObjectURL(S),e,!0));}}}else S=await G$2(r,e);}catch(t){if("AbortError"===t.name){if(L)throw new Error("Timeout exceeded");throw d$5("Request canceled")}if(!(!T&&t instanceof TypeError&&_$4.proxyUrl)||s$1.body||"post"===s$1.method||"head"===s$1.method||e.useProxy)throw t;e.redoRequest=!0,k$1({proxyUrl:_$4.proxyUrl,urlPrefix:ut(C(r).path)});}finally{C$1&&clearTimeout(C$1);}return [T,S]}function A$4(e,t){let r;try{r=(new DOMParser).parseFromString(e,t);}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function $$2(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;if(!t)return !0;if(!t.ok)throw new Error(`Unable to load ${t.url} status: ${t.status}`);let o,n,a,i;r&&r.error&&(o=l$3(new Error,r.error)),o&&(n=Number(o.code),a=o.hasOwnProperty("subcode")?Number(o.subcode):null,i=o.messageCode,i=i&&i.toUpperCase());const l=e.params.requestOptions.authMode;if(403===n&&(4===a||o.message&&o.message.toLowerCase().indexOf("ssl")>-1&&-1===o.message.toLowerCase().indexOf("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(e.useIdentity&&("no-prompt"!==l||498===n)&&-1!==F$2.indexOf(n)&&!B$3(e.params.url)&&(403!==n||-1===D$2.indexOf(i)&&(null==a||2===a&&e.credentialToken))){await H$2();try{const t=await i$g.getCredential(e.params.url,{error:R$1("request:server",o,e.params),prompt:"no-prompt"!==l,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===l)return e.credential=null,e.credentialToken=null,!1;o=t;}}if(o)throw o;return !0}function G$2(e,t,r=!1){const s=t.controller.signal,o=new Image;return t.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.src=e,n$i(o,e,r,s)}j$3._abortableFetch=null,j$3._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];

var request = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': j$3
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function i$k(t,r={},a){await t.load(a);const n=_$2(t.itemUrl,"resources"),{start:s=1,num:i=10,sortOrder:c="asc",sortField:l="created"}=r,p={query:{start:s,num:i,sortOrder:c,sortField:l},signal:w(a,"signal")},u=await t.portal._request(n,p);return {total:u.total,nextStart:u.nextStart,resources:u.resources.map(({created:e,size:r,resource:a})=>({created:new Date(e),size:r,resource:t.resourceFromPath(a)}))}}async function c$c(r,n,s,i){if(!r.hasPath())throw new s$g(`portal-item-resource-${n}:invalid-path`,"Resource does not have a valid path");await r.portalItem.load(i);const c=_$2(r.portalItem.userItemUrl,"add"===n?"addResources":"updateResources"),[l,p]=u$b(r.path),m=await d$6(s),f=new FormData;return l&&"."!==l&&f.append("resourcesPrefix",l),f.append("fileName",p),f.append("file",m,p),f.append("f","json"),u$4(i)&&i.access&&f.append("access",i.access),await r.portalItem.portal._request(c,{method:"post",body:f,signal:w(i,"signal")}),r}async function l$b(t,r,n){if(!r.hasPath())throw new s$g("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await t.load(n);const s=_$2(t.userItemUrl,"removeResources");await t.portal._request(s,{method:"post",query:{resource:r.path},signal:w(n,"signal")}),r.portalItem=null;}async function p$a(t,r){await t.load(r);const a=_$2(t.userItemUrl,"removeResources");return t.portal._request(a,{method:"post",query:{deleteAll:!0},signal:w(r,"signal")})}function u$b(e){const t=e.lastIndexOf("/");return -1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function m$4(e){const[t,a]=function(e){const t=gt(e);if(t$6(t))return [e,""];return [e.slice(0,e.length-t.length-1),"."+t]}(e),[o,s]=u$b(t);return [o,s,a]}async function d$6(e){if(e instanceof Blob)return e;return (await j$3(e.url,{responseType:"blob"})).data}function f$d(e,t){if(!e.hasPath())return null;const[r,,a]=m$4(e.path);return e.portalItem.resourceFromPath(_$2(r,t+a))}function g$5(e,t){if(!e.hasPath())return null;const[r,,a]=m$4(e.path);return e.portalItem.resourceFromPath(_$2(r,t+a))}function h$8(e){return e instanceof Blob?e.type:function(e){const t=gt(e);return v$4[t]||y$9}(e.url)}function w$4(e){return x$2[h$8(e)]||j$4}const v$4={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"},x$2={};for(const e in v$4)x$2[v$4[e]]=e;const y$9="text/plain",j$4=x$2[y$9];

var resourceUtils = /*#__PURE__*/Object.freeze({
    __proto__: null,
    addOrUpdateResource: c$c,
    contentToBlob: d$6,
    fetchResources: i$k,
    getSiblingOfSameType: f$d,
    getSiblingOfSameTypeI: g$5,
    removeAllResources: p$a,
    removeResource: l$b,
    resourceContentExtension: w$4,
    resourceContentType: h$8,
    splitPrefixFileNameAndExtension: m$4
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$j=new Set;function o$n(e,i,o={}){if(s("esri-deprecation-warnings")){const{moduleName:n}=o;r$e(e,"Function: "+((n?n+"::":"")+i+"()"),o);}}function t$c(e,i,o={}){if(s("esri-deprecation-warnings")){const{moduleName:n}=o;r$e(e,"Property: "+((n?n+"::":"")+i),o);}}function r$e(i,o,t={}){if(s("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:a}=t;let c=o;n&&(c+="\n\t Replacement: "+n),r&&(c+="\n\t Version: "+r),s&&(c+=`\n\t See ${s} for more details.`),function(n,i,o=!1){o&&e$j.has(i)||(o&&e$j.add(i),n.warn(" DEPRECATED - "+i));}(i,c,a);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$f=7;function t$d(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function n$j(r){switch(r){case 0:return "defaults";case 2:return "service";case 3:return "portal-item";case 4:return "web-scene";case 5:return "web-map";case 6:return "user"}return A(void 0)}function c$d(e){return n$j(e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$e{constructor(t,i,e,o=1,s=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=e,this.allocationSize=o,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let t=0;t<s;t++)this._pool[t]=new this.ctor;this.allocationSize=Math.max(o,1);}destroy(){this.prune(0);}acquire(...i){let e;const o=this.ctor;if(t$e.test.disabled)e=new o;else {if(0===this._pool.length){const t=this.allocationSize;for(let i=0;i<t;i++)this._pool[i]=new o;}e=this._pool.pop();}return this.acquireFunction?this.acquireFunction(e,...i):function(t){return t&&t.acquire&&"function"==typeof t.acquire}(e)&&e.acquire(...i),e}release(i){i&&!t$e.test.disabled&&(this.releaseFunction?this.releaseFunction(i):function(t){return t&&t.release&&"function"==typeof t.release}(i)&&i.release(),this._pool.push(i));}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const t=this._pool[i];this._dispose(t);}this._pool.length=t;}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose();}}t$e.test={disabled:!1};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$f{constructor(t=1){this._seed=t;}set seed(e){this._seed=null==e?Math.random()*t$f._m:e;}getInt(){return this._seed=(t$f._a*this._seed+t$f._c)%t$f._m,this._seed}getFloat(){return this.getInt()/(t$f._m-1)}getIntRange(t,e){return Math.round(this.getFloatRange(t,e))}getFloatRange(e,s){const n=s-e,a=this.getInt()/t$f._m;return e+Math.floor(a*n)}}t$f._m=2147483647,t$f._a=48271,t$f._c=0;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$j(n,t,r){if(!n&&!t)return !0;if(!n||!t||n.length!==t.length)return !1;if(r){for(let e=0;e<n.length;e++)if(!r(n[e],t[e]))return !1}else for(let r=0;r<n.length;r++)if(n[r]!==t[r])return !1;return !0}function d$7(t,r,e){return t&&r?e?t.filter((function(t){return c$b(r,(function(n){return e(t,n)}))>-1})):t.filter((function(n){return r.indexOf(n)>-1})):[]}const m$5=!!Array.prototype.fill;function p$b(n,t){if(m$5)return new Array(n).fill(t);const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}function y$a(n,t){void 0===t&&(t=n,n=0);const r=new Array(t-n);for(let e=n;e<t;e++)r[e-n]=e;return r}function A$5(n){return n.reduce((n,t)=>n.concat(t||[]),[])}class M$3{constructor(){this.last=0;}}const v$5=new M$3;function z$2(n,t,r,e){e=e||v$5;const o=Math.max(0,e.last-10);for(let u=o;u<r;++u)if(n[u]===t)return e.last=u,u;const u=Math.min(o,r);for(let r=0;r<u;++r)if(n[r]===t)return e.last=r,r;return -1}function O$2(n,t,r,e){const o=null==r?n.length:r,u=z$2(n,t,o,e);if(-1!==u)return n[u]=n[o-1],null==r&&n.pop(),t}const j$5=new Set;function E$2(n,t,r=n.length,e=t.length,o,u){if(0===e||0===r)return r;j$5.clear();for(let n=0;n<e;++n)j$5.add(t[n]);o=o||v$5;const f=Math.max(0,o.last-10);for(let t=f;t<r;++t)if(j$5.has(n[t])&&(u&&u.push(n[t]),j$5.delete(n[t]),n[t]=n[r-1],--r,--t,0===j$5.size||0===r))return j$5.clear(),r;for(let t=0;t<f;++t)if(j$5.has(n[t])&&(u&&u.push(n[t]),j$5.delete(n[t]),n[t]=n[r-1],--r,--t,0===j$5.size||0===r))return j$5.clear(),r;return j$5.clear(),r}function F$3(n){const t=new Array(n.size);let r=0;return n.forEach((n,e)=>t[r++]=e),t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$g{constructor(){this._values=new Map;}clone(e){const r=new t$g;return this._values.forEach((t,a)=>{e&&e.has(a)||r.set(a,s$4(t));}),r}get(s){return this._values.get(s)}originOf(){return 6}keys(){return F$3(this._values)}set(s,e){this._values.set(s,e);}delete(s){this._values.delete(s);}has(s){return this._values.has(s)}forEach(s){this._values.forEach(s);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$9=n$7.getLogger("esri.core.accessorSupport.Properties");function l$c(s$1,e){return !!e.metadatas[s$1]||(s("esri-debug-messages")&&h$9.warn(`cannot access unknown property '${s$1}' on instance of ${e.host.declaredClass}.`),!1)}function c$e(s$1,e,r,i){return !s$1.nonNullable||null!=r||(0!==i.host.__accessor__.lifecycle&&s("esri-debug-messages")&&h$9.warn(`cannot set non-nullable property '${e}' to null on ${i.host.declaredClass}.`),!1)}const d$8=new t$e(class{constructor(){this.value=null,this.valid=!0;}acquire(){this.valid=!0;}release(){this.value=null;}});class n$k{constructor(t){this.host=t,this._origin=6,this.cursors=null,this.ctorArgs=null,this.destroyed=!1,this.dirties={},this.lifecycle=0,this.overridden=null,this.store=new t$g;const s=this.host.constructor.__accessorMetadata__;this.metadatas=s.properties,this.autoDestroy=s.autoDestroy;}initialize(){this.lifecycle=1,n$d(this.host,this.metadatas);}constructed(){this.lifecycle=2;}destroy(){this.destroyed=!0;const t=this.cursors;if(t)for(const s of Object.getOwnPropertyNames(t)){const e=t[s];if(e){for(;e.length>0;)e.pop().propertyDestroyed(this,s);t[s]=null;}}if(this.autoDestroy)for(const t in this.metadatas){const e=this.internalGet(t);e&&((s=e)&&"function"==typeof s.destroy)&&(e.destroy(),this.metadatas[t].nonNullable||this.internalSet(t,null));}var s;}get initialized(){return 0!==this.lifecycle}clearOverride(t){this.isOverridden(t)&&(this.overridden[t]=!1,this.propertyInvalidated(t));}get(t){l$c(t,this);const s=this.metadatas[t],e=s.get;if(this.store.has(t)&&(!e||!this.dirties[t]))return this.store.get(t);if(e){const s=e.call(this.host);return this.store.set(t,s,1),this.propertyCommitted(t),s}return s.value}getterComputed(t,s){var e;if(this.store.has(t)&&!this.dirties[t])return this.store.get(t);const r=null==(e=s.get)?void 0:e.call(this.host);return this.store.set(t,r,1),this.propertyCommitted(t),r}originOf(t){const s=this.store.originOf(t);if(void 0===s){const s=this.metadatas[t];if(s&&s.hasOwnProperty("value"))return "defaults"}return n$j(s)}has(t){return !!this.metadatas[t]&&this.store.has(t)}internalGet(t){if(!l$c(t,this))return;const s=this.store;return s.has(t)?s.get(t):this.metadatas[t].value}internalSet(t,s){return this.setAtOrigin(t,s,this.initialized?this._origin:0)}setAtOrigin(t,e,r){if(!l$c(t,this))return;const i=this.store.get(t);(!y$1(e,i)||r!==this.store.originOf(t)||!this.store.has(t,r)||this.isOverridden(t))&&(this.propertyInvalidated(t),this.store.set(t,e,r),this.propertyCommitted(t));}isOverridden(t){return null!=this.overridden&&!0===this.overridden[t]}keys(){return Object.keys(this.metadatas)}override(t,s){if(!l$c(t,this))return;this.overridden||(this.overridden={});const e=this.metadatas[t];if(!c$e(e,t,s,this))return;const r=e.cast;if(r){const t=this.cast(r,s),{valid:e,value:i}=t;if(d$8.release(t),!e)return;s=i;}this.overridden[t]=!0,this.internalSet(t,s);}set(t,s){if(!l$c(t,this))return;const e=this.metadatas[t];if(!c$e(e,t,s,this))return;const r=e.set,i=e.cast;if(i){const t=this.cast(i,s),{valid:e,value:r}=t;if(d$8.release(t),!e)return;s=r;}r?r.call(this.host,s):this.internalSet(t,s);}setDefaultOrigin(t){this._origin=t$d(t);}getDefaultOrigin(){return n$j(this._origin)}propertyInvalidated(t){const s=this.dirties;this.isOverridden(t)||(s[t]=!0);const e=this.cursors&&this.cursors[t];if(e)for(const s of e)s.propertyInvalidated(this,t);}propertyCommitted(t){const s=this.cursors&&this.cursors[t];if(this.dirties[t]=!1,s)for(const e of s)e.propertyCommitted(this,t);}addCursor(t,s){this.cursors||(this.cursors={});let e=this.cursors[t];e||(this.cursors[t]=e=[]),e.push(s);}removeCursor(t,s){const e=this.cursors;if(!e)return;const r=e[t];r&&(r.splice(r.indexOf(s),1),0===r.length&&(e[t]=null));}cast(t,s){const e=d$8.acquire();return e.valid=!0,e.value=s,t&&(e.value=t.call(this.host,s,e)),e}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$g=Array.prototype.splice;function t$h(e){e.length=0;}class o$o{constructor(r=50,o=50){this._pool=new t$e(Array,void 0,t$h,o,r);}acquire(){return this._pool.acquire()}copy(e){const t=this.acquire();return e.unshift(0,0),r$g.apply(t,e),e.splice(0,2),t}release(e){this._pool.release(e);}prune(){this._pool.prune(0);}static acquire(){return s$k.acquire()}static copy(e){return s$k.copy(e)}static release(e){return s$k.release(e)}static prune(){s$k.prune();}}const s$k=new o$o(100);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$i extends t$e{constructor(){super(...arguments),this._set=new Set;}destroy(){super.destroy(),this._set=s$6(this._set);}acquire(...e){const s=super.acquire(...e);return this._set.delete(s),s}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e));}_dispose(e){this._set.delete(e),super._dispose(e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$k=e$1.queueMicrotask?e$1.queueMicrotask:e=>{e$1.Promise.resolve().then(e);},t$j=[];let r$h=[];function n$l(o){t$j.push(o),1===t$j.length&&e$k(()=>{for(const o of r$h)o();const o=t$j.slice();t$j.length=0;for(const e of o)e();});}!function(o){o.before=function(o){return r$h.push(o),{remove(){r$h=r$h.filter(e=>e!==o);}}};}(n$l||(n$l={}));var s$l=n$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var o$p;!function(o){function t(o,t,n,e){let i=t,r=t;const f=n>>>1,c=o[i-1];for(;r<=f;){r=i<<1,r<n&&e(o[r-1],o[r])<0&&++r;const t=o[r-1];if(e(t,c)<=0)break;o[i-1]=t,i=r;}o[i-1]=c;}function n(o,t){return o<t?-1:o>t?1:0}o.sort=function(o,e,i,r){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===r&&(r=n);for(let n=i>>>1;n>e;n--)t(o,n,i,r);const f=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,f,n,r);}},o.iterableSort=function*(o,e,i,r){void 0===e&&(e=0),void 0===i&&(i=o.length),void 0===r&&(r=n);for(let n=i>>>1;n>e;n--)t(o,n,i,r),yield;const f=e+1;for(let n=i-1;n>e;n--){const i=o[e];o[e]=o[n],o[n]=i,t(o,f,n,r),yield;}};}(o$p||(o$p={}));var t$k=o$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class i$l{constructor(h){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new M$3,h&&(h.initialSize&&(this.data=new Array(h.initialSize)),h.allocator&&(this._allocator=h.allocator),void 0!==h.deallocator&&(this._deallocator=h.deallocator),h.shrink&&(this._shrink=()=>{this.data.length>1.5*this.length&&(this.data.length=Math.floor(1.1*this.length));}));}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t;}else {if(this._deallocator)for(let h=t;h<this._length;++h)this.data[h]=this._deallocator(this.data[h]);this._length=t,this._shrink();}}clear(){this.length=0;}prune(){this.clear(),this.data=[];}push(t){this.data[this._length++]=t;}pushArray(t,h=t.length){for(let i=0;i<h;i++)this.data[this._length++]=t[i];}fill(t,h){for(let i=0;i<h;i++)this.data[this._length++]=t;}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return ++this._length,t}pop(){if(0===this.length)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}*iterableRemoveMany(t){const i=new Array;for(let a=0;a<this.length&&!(a>=this.length);++a)z$2(t.data,this.data[a],t.length,t._hint)<0&&i.push(this.data[a]),yield;this.data=i,this._length=this.data.length;}remove(t){const i=z$2(this.data,t,this.length,this._hint);if(-1!==i)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const h=O$2(this.data,t,this.length,this._hint);return void 0!==h&&(this.length=this.length-1),h}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,h=t.length,i){this.length=E$2(this.data,t,this.length,h,this._hint,i);}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(t,h){t>=this.length||h>=this.length||t===h||([this.data[t],this.data[h]]=[this.data[h],this.data[t]]);}sort(t){t$k.sort(this.data,0,this.length,t);}iterableSort(t){return t$k.iterableSort(this.data,0,this.length,t)}some(t,h){for(let i=0;i<this.length;++i)if(t.call(h,this.data[i],i,this.data))return !0;return !1}filterInPlace(t,h){let i=0;for(let a=0;a<this._length;++a){const s=this.data[a];t.call(h,s,a,this.data)&&(this.data[a]=this.data[i],this.data[i]=s,i++);}if(this._deallocator)for(let t=i;t<this._length;t++)this.data[t]=this._deallocator(this.data[t]);return this._length=i,this}forEachSimple(t,h){const i=this.length,a=this.data;for(let s=0;s<i;++s)t.call(h,a[s],s,a);}*iterableForEach(){for(let t=0;t<this.length;++t)yield this.data[t];}map(t,h){const i=new Array(this.length);for(let a=0;a<this.length;++a)i[a]=t.call(h,this.data[a],a,this.data);return i}reduce(t,h){let i=h;for(let h=0;h<this.length;++h)i=t(i,this.data[h],h,this.data);return i}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class i$m{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1;}}class o$q{constructor(e){this.callback=e,this.isActive=!0;}remove(){this.isActive=!1;}}let c$f=-1;const u$c={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},l$d=["prepare","preRender","render","postRender","update"],p$c=[],f$e=new i$l;class h$a{constructor(e){this._task=e;}remove(){this._task.removed=!0;}pause(){this._task.paused=!0;}resume(){this._task.paused=!1;}}const d$9={frameTasks:f$e,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(e=!1){f$e.forEachSimple(e=>{e.removed=!0;}),e&&D$3();},dispatch:g$6,executeFrameTasks:function(e=performance.now()){c$f<0&&(c$f=e);const t=e-c$f,r=1e3/60,s=Math.max(0,t-r);c$f=e;for(let a=0;a<l$d.length;a++){const n=l$d[a];f$e.forEachSimple(i=>{var o;if(i.paused||i.removed)return;0===a&&i.ticks++;i.phases[n]&&(u$c.time=e,u$c.deltaTime=0===i.ticks?0:t,u$c.elapsedFrameTime=performance.now()-e,u$c.frameDuration=r-s,null==(o=i.phases[n])||o.call(i,u$c));});}D$3();}};function k$3(e){const t=new o$q(e);return p$c.push(t),d$9.willDispatch||(d$9.willDispatch=!0,s$l(g$6)),t}function v$6(e){const t=new i$m(e);return f$e.push(t),d$9.rafId||(c$f=-1,d$9.rafId=F$4()),new h$a(t)}function x$3(e=performance.now()){d$9.rafId=null,f$e.length>0&&(d$9.rafId=F$4()),d$9.executeFrameTasks(e);}function F$4(){return d$9.requestNextFrame?d$9.requestNextFrame(j$6):j$6()}const T$3=new i$l;function D$3(){f$e.forEachSimple(e=>{e.removed&&T$3.push(e);}),f$e.removeUnorderedMany(T$3.data,T$3.length),T$3.clear();}function g$6(){for(;p$c.length;){const t=A(p$c.shift());t.isActive&&t.callback();}d$9.willDispatch=!1;}function j$6(){return requestAnimationFrame(x$3)}function A$6(e=1,n){const i=I$1(),o=()=>{y$8(n)?i.reject(d$5()):0===e?i():(--e,s$l(()=>o()));};return o(),i.promise}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class c$g{constructor(){this.uid=0,this.target=null,this.path=null,this.oldValue=null,this.callback=null,this.removed=!1,this.propertyPath=null;}acquire(e,o,r,l){this.target=e,this.path=o,this.oldValue=r,this.callback=l,this.propertyPath=o$c(o),this.uid=++c$g.uid,this.removed=!1;}release(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++c$g.uid,this.removed=!0;}}c$g.pool=new t$i(c$g),c$g.uid=0;const a$f=new o$o,d$a=new Set;let h$b,f$f=a$f.acquire();function p$d(e){d$a.has(e)?f$f.splice(f$f.indexOf(e),1):d$a.add(e),f$f.push(e),h$b||(h$b=k$3(y$b));}function m$6(e){if(e.removed)return;const{callback:t,path:o,propertyPath:r,oldValue:n,target:s}=e,i=o$d(s,r,!0);_$5(n,i)&&(e.oldValue=i,t.call(s,i,n,o,s));}function _$5(t,o){return !y$1(t,o)}function g$7(e){for(let t=0;t<f$f.length;t++){const o=f$f[t];o.target===e&&(o.removed=!0);}}function y$b(){let e=10;for(;h$b&&e--;){h$b=null;const e=f$f;f$f=a$f.acquire(),d$a.clear();const t=a$f.acquire();for(const o of e){const e=o.uid;m$6(o),e===o.uid&&o.removed&&t.push(o);}for(let e=0;e<f$f.length;e++){const o=f$f[e];o.removed&&(t.push(o),d$a.delete(o),f$f.splice(e,1),e-=1);}for(let e=0;e<t.length;e++)c$g.pool.release(t[e]);a$f.release(e),a$f.release(t),j$7.forEach(e=>e());}}const j$7=new Set;function V$1(e,t,s,i=!1){return !e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?function(e,t,r){const s=c$5(e,t,r,(e,t,o)=>{let r=o$d(e,t,!0),i=!1;return d$3(e,t,(e,t)=>{if(e&&!e.__accessor__.destroyed){if(!i&&t){i=!0;const n=o$d(e,t,!0);_$5(r,n)&&o.call(e,n,r,t,e),r=o$d(e,t,!0),i=!1;}}else s.remove();})});return s}(e,t,s):function(e,t,s){let i=c$5(e,t,s,(e,t,o)=>{let s,u,a=o$d(e,t,!0),d=d$3(e,t,(e,t)=>{e.__accessor__.destroyed||s&&s.uid!==u?i.remove():(s||(s=c$g.pool.acquire(e,t,a,o),u=s.uid,a=null),p$d(s));});return {remove:y$4((function(){d.remove(),s&&(s.uid!==u||s.removed||(s.removed=!0,p$d(s)),s=null),i=d=a=null;}))}});return i}(e,t,s)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function p$e(t){const r=typeof t;return null==t?{value:t}:Array.isArray(t)?{type:[t[0]],value:null}:"object"===r?t.constructor&&t.constructor.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t:"boolean"===r?{type:Boolean,value:t}:"string"===r?{type:String,value:t}:"number"===r?{type:Number,value:t}:"function"===r?{type:t,value:null}:void 0}class h$c{constructor(...t){if(this.constructor===h$c)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new n$k(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t));}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class a extends n{constructor(...t){super(...t),this.inherited=null,i&&i.apply(this,t);}}n$8(a.prototype);for(const r in t){const e=t[r];a.prototype[r]="function"==typeof e?function(...t){const s=this.inherited;this.inherited=function(...t){if(n.prototype[r])return n.prototype[r].apply(this,t)};let o=void 0;try{o=e.apply(this,t);}catch(t){throw this.inherited=s,t}return this.inherited=s,o}:t[r];}for(const t in r){const e=p$e(r[t]);y$5(e)(a.prototype,t);}return n$e(s)(a)}postscript(t){const r=this.__accessor__,e=r.ctorArgs||t;r.initialize(),e&&(this.set(e),r.ctorArgs=null),r.constructed(),this.initialize();}initialize(){}destroy(){this.destroyed||(g$7(this),this.__accessor__.destroy());}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}get(t){return u$7(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(r){return o$n(n$7.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof r}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return r$9(this,t,r),this}watch(t,r,e){return V$1(this,t,r,e)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.propertyInvalidated(t);}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$m{constructor(){this._emitter=new n$m.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}}!function(i){class o{constructor(t=null){this.target=t,this._listenersMap=null;}clear(){this._listenersMap&&this._listenersMap.clear();}emit(t,e){const s=this._listenersMap&&this._listenersMap.get(t);if(!s)return !1;const r=this.target||this;return [...s].forEach(t=>{t.call(r,e);}),s.length>0}on(t,s){if(Array.isArray(t)){const r=t.map(t=>this.on(t,s));return r$8(r)}if(t.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const r=this._listenersMap.get(t)||[];return r.push(s),this._listenersMap.set(t,r),{remove:()=>{const e=this._listenersMap&&this._listenersMap.get(t)||[],r=e.indexOf(s);r>=0&&e.splice(r,1);}}}once(t,e){let s;return s=this.on(t,t=>{s.remove(),e.call(null,t);}),s}hasEventListener(t){const e=this._listenersMap&&this._listenersMap.get(t);return null!=e&&e.length>0}}i.EventEmitter=o,i.EventedMixin=e$1=>{let r=class extends e$1{constructor(){super(...arguments),this._emitter=new o;}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};return r=e([n$e("esri.core.Evented")],r),r};let h=class extends h$c{constructor(){super(...arguments),this._emitter=new n$m.EventEmitter(this);}emit(t,e){return this._emitter.emit(t,e)}on(t,e){return this._emitter.on(t,e)}once(t,e){return this._emitter.once(t,e)}hasEventListener(t){return this._emitter.hasEventListener(t)}};h=e([n$e("esri.core.Evented")],h),i.EventedAccessor=h;}(n$m||(n$m={}));var i$n=n$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$r(o,e,i){let p,c;return void 0===e?(c=o,p=[void 0]):"string"!=typeof e?(c=o,p=[void 0],i=e):(c=e,p=Array.isArray(o)?o:[o]),(o,e)=>{const n=o.constructor.prototype;p.forEach(p=>{const s=h$3(o,p,c);s.write&&"object"!=typeof s.write&&(s.write={}),i&&o$5("write.target",i,s),o$5("write.writer",n[e],s);});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$m(e,t,o){if(!e||!e.read||!1===e.read.enabled||!e.read.source)return !1;const n=e.read.source;if("string"==typeof n){if(n===t)return !0;if(n.indexOf(".")>-1&&0===n.indexOf(t)&&f$6(n,o))return !0}else for(const e of n){if(e===t)return !0;if(e.indexOf(".")>-1&&0===e.indexOf(t)&&f$6(e,o))return !0}return !1}function i$o(e,t,r,n,i){let f=i$e(t[r],i);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(f)&&(e[r]=!0);for(const a of Object.getOwnPropertyNames(t))f=i$e(t[a],i),s$m(f,r,n)&&(e[a]=!0);}function f$g(e,t,r,o){const s=r.metadatas,i=a$a(s[t],"any",o),f=i&&i.default;if(void 0===f)return;const a="function"==typeof f?f.call(e,t,o):f;void 0!==a&&r.set(t,a);}const a$g={origin:"service"};function c$h(r,n,s=a$g){if(!n||"object"!=typeof n)return;const c=e$9(r),u=c.metadatas,d={};for(const e of Object.getOwnPropertyNames(n))i$o(d,u,e,n,s);c.setDefaultOrigin(s.origin);for(const e of Object.getOwnPropertyNames(d)){const i=i$e(u[e],s).read,f=i&&i.source;let a;a=f&&"string"==typeof f?o$d(n,f):n[e],i&&i.reader&&(a=i.reader.call(r,a,n,s)),void 0!==a&&c.set(e,a);}if(!s||!s.ignoreDefaults)for(const e of Object.getOwnPropertyNames(u))d[e]||f$g(r,e,c,s);c.setDefaultOrigin("user");}function u$d(e,t,r,o=a$g){var n;const s={...o,messages:[]};r(s),null==(n=s.messages)||n.forEach(t=>{"warning"!==t.type||e.loaded?o&&o.messages&&o.messages.push(t):e.loadWarnings.push(t);});}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$e=n$7.getLogger("esri.core.accessorSupport.write");function f$h(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function c$i(r,e,t,i,n,u){if(!i||!i.write)return !1;const f=r.get(t);if(!n&&i.write.overridePolicy){const e=i.write.overridePolicy.call(r,f,t,u);void 0!==e&&(n=e);}if(n||(n=i.write),!n||!1===n.enabled)return !1;if((null===f&&!n.allowNull||void 0===f)&&n.isRequired){const e=new s$g("web-document-write:property-required",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return e&&u&&u.messages?u.messages.push(e):e&&!u&&l$e.error(e.name,e.message),!1}if(void 0===f)return !1;if(null===f&&!n.allowNull)return !1;if(function(r,e,t,i,o){const n=i.default;if(void 0===n)return !1;if(null!=i.defaultEquals)return i.defaultEquals(o);if("function"==typeof n){if(Array.isArray(o)){const i=n.call(r,e,t);return s$j(i,o)}return !1}return n===o}(r,t,u,i,f))return !1;if(void 0!==i.default)return !0;if(!n.ignoreOrigin&&u&&u.origin){if(e.store.originOf(t)<t$d(u.origin))return !1}return !0}function p$f(r,t,o,n){const s=e$9(r),u=s.metadatas,a=s$d(u[t],n);return !!a&&c$i(r,s,t,a,o,n)}function g$8(r,o,s){if(r&&"function"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return a$7(o,r.toJSON());const a=e$9(r),l=a.metadatas;for(const e in l){const p=s$d(l[e],s);if(!c$i(r,a,e,p,void 0,s))continue;const g=r.get(e),d=f$h(r,p,p.write&&"string"==typeof p.write.target?p.write.target:e,g,s);Object.keys(d).length>0&&(o=a$7(o,d),s&&s.resources&&s.resources.pendingOperations&&s.resources.pendingOperations.length&&p$9(s.resources.pendingOperations).then(()=>a$7(o,d)),s&&s.writtenProperties&&s.writtenProperties.push({target:r,propName:e,oldOrigin:c$d(a.store.originOf(e)),newOrigin:s.origin}));}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$p=s=>{let i=class extends s{constructor(...r){super(...r);}read(r,t){c$h(this,r,t);}write(r={},t){return g$8(this,r,t)}toJSON(r){return this.write({},r)}static fromJSON(r,t){return c$j.call(this,r,t)}};return i=e([n$e("esri.core.JSONSupport")],i),i.prototype.toJSON.isDefaultToJSON=!0,i};function c$j(r,t){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");const s=new this;return s.read(r,t),s}let a$h=class extends(i$p(h$c)){};a$h=e([n$e("esri.core.JSONSupport")],a$h);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o$s(e,n,o){return e(o={path:n,exports:{},require:function(e,n){return r$i(null==n&&o.path)}},o.exports),o.exports}function r$i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var o$t=o$s((function(r){var o;void 0!==(o=function(){var r,o={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(r=2e3;r<=2045;r++)o[r]=0;for(r=2056;r<=2065;r++)o[r]=0;for(r=2067;r<=2135;r++)o[r]=0;for(r=2137;r<=2154;r++)o[r]=0;for(r=2161;r<=2170;r++)o[r]=0;for(r=2172;r<=2193;r++)o[r]=0;for(r=2195;r<=2198;r++)o[r]=0;for(r=2200;r<=2203;r++)o[r]=0;for(r=2205;r<=2217;r++)o[r]=0;for(r=2222;r<=2224;r++)o[r]=1;for(r=2225;r<=2250;r++)o[r]=2;for(r=2251;r<=2253;r++)o[r]=1;for(r=2257;r<=2264;r++)o[r]=2;for(r=2274;r<=2279;r++)o[r]=2;for(r=2280;r<=2282;r++)o[r]=1;for(r=2283;r<=2289;r++)o[r]=2;for(r=2290;r<=2292;r++)o[r]=0;for(r=2308;r<=2313;r++)o[r]=0;for(r=2315;r<=2491;r++)o[r]=0;for(r=2494;r<=2866;r++)o[r]=0;for(r=2867;r<=2869;r++)o[r]=1;for(r=2870;r<=2888;r++)o[r]=2;for(r=2891;r<=2895;r++)o[r]=2;for(r=2896;r<=2898;r++)o[r]=1;for(r=2902;r<=2908;r++)o[r]=2;for(r=2915;r<=2920;r++)o[r]=2;for(r=2921;r<=2923;r++)o[r]=1;for(r=2924;r<=2930;r++)o[r]=2;for(r=2931;r<=2962;r++)o[r]=0;for(r=2964;r<=2968;r++)o[r]=2;for(r=2969;r<=2973;r++)o[r]=0;for(r=2975;r<=2991;r++)o[r]=0;for(r=2995;r<=3051;r++)o[r]=0;for(r=3054;r<=3079;r++)o[r]=0;for(r=3081;r<=3088;r++)o[r]=0;for(r=3092;r<=3101;r++)o[r]=0;for(r=3106;r<=3138;r++)o[r]=0;for(r=3146;r<=3151;r++)o[r]=0;for(r=3153;r<=3166;r++)o[r]=0;for(r=3168;r<=3172;r++)o[r]=0;for(r=3174;r<=3203;r++)o[r]=0;for(r=3294;r<=3358;r++)o[r]=0;for(r=3367;r<=3403;r++)o[r]=0;for(r=3408;r<=3416;r++)o[r]=0;for(r=3417;r<=3438;r++)o[r]=2;for(r=3441;r<=3446;r++)o[r]=2;for(r=3447;r<=3450;r++)o[r]=0;for(r=3451;r<=3459;r++)o[r]=2;for(r=3460;r<=3478;r++)o[r]=0;for(r=3554;r<=3559;r++)o[r]=0;for(r=3560;r<=3570;r++)o[r]=2;for(r=3571;r<=3581;r++)o[r]=0;for(r=3594;r<=3597;r++)o[r]=0;for(r=3601;r<=3604;r++)o[r]=0;for(r=3637;r<=3639;r++)o[r]=0;for(r=3665;r<=3667;r++)o[r]=0;for(r=3693;r<=3695;r++)o[r]=0;for(r=3701;r<=3727;r++)o[r]=0;for(r=3728;r<=3739;r++)o[r]=2;for(r=3740;r<=3751;r++)o[r]=0;for(r=3753;r<=3760;r++)o[r]=2;for(r=3761;r<=3773;r++)o[r]=0;for(r=3775;r<=3777;r++)o[r]=0;for(r=3779;r<=3781;r++)o[r]=0;for(r=3783;r<=3785;r++)o[r]=0;for(r=3788;r<=3791;r++)o[r]=0;for(r=3797;r<=3802;r++)o[r]=0;for(r=3814;r<=3816;r++)o[r]=0;for(r=3825;r<=3829;r++)o[r]=0;for(r=3832;r<=3841;r++)o[r]=0;for(r=3844;r<=3852;r++)o[r]=0;for(r=3873;r<=3885;r++)o[r]=0;for(r=3890;r<=3893;r++)o[r]=0;for(r=3907;r<=3912;r++)o[r]=0;for(r=3942;r<=3950;r++)o[r]=0;for(r=3968;r<=3970;r++)o[r]=0;for(r=3973;r<=3976;r++)o[r]=0;for(r=3986;r<=3989;r++)o[r]=0;for(r=3994;r<=3997;r++)o[r]=0;for(r=4048;r<=4051;r++)o[r]=0;for(r=4056;r<=4063;r++)o[r]=0;for(r=4093;r<=4096;r++)o[r]=0;for(r=4390;r<=4398;r++)o[r]=0;for(r=4399;r<=4413;r++)o[r]=2;for(r=4418;r<=4433;r++)o[r]=2;for(r=4455;r<=4457;r++)o[r]=2;for(r=4484;r<=4489;r++)o[r]=0;for(r=4491;r<=4554;r++)o[r]=0;for(r=4568;r<=4589;r++)o[r]=0;for(r=4652;r<=4656;r++)o[r]=0;for(r=4766;r<=4800;r++)o[r]=0;for(r=5014;r<=5016;r++)o[r]=0;for(r=5069;r<=5072;r++)o[r]=0;for(r=5105;r<=5130;r++)o[r]=0;for(r=5173;r<=5188;r++)o[r]=0;for(r=5253;r<=5259;r++)o[r]=0;for(r=5269;r<=5275;r++)o[r]=0;for(r=5292;r<=5311;r++)o[r]=0;for(r=5329;r<=5331;r++)o[r]=0;for(r=5343;r<=5349;r++)o[r]=0;for(r=5355;r<=5357;r++)o[r]=0;for(r=5387;r<=5389;r++)o[r]=0;for(r=5459;r<=5463;r++)o[r]=0;for(r=5479;r<=5482;r++)o[r]=0;for(r=5518;r<=5520;r++)o[r]=0;for(r=5530;r<=5539;r++)o[r]=0;for(r=5550;r<=5552;r++)o[r]=0;for(r=5562;r<=5583;r++)o[r]=0;for(r=5623;r<=5625;r++)o[r]=2;for(r=5631;r<=5639;r++)o[r]=0;for(r=5649;r<=5653;r++)o[r]=0;for(r=5663;r<=5680;r++)o[r]=0;for(r=5682;r<=5685;r++)o[r]=0;for(r=5875;r<=5877;r++)o[r]=0;for(r=5896;r<=5899;r++)o[r]=0;for(r=5921;r<=5940;r++)o[r]=0;for(r=6050;r<=6125;r++)o[r]=0;for(r=6244;r<=6275;r++)o[r]=0;for(r=6328;r<=6348;r++)o[r]=0;for(r=6350;r<=6356;r++)o[r]=0;for(r=6366;r<=6372;r++)o[r]=0;for(r=6381;r<=6387;r++)o[r]=0;for(r=6393;r<=6404;r++)o[r]=0;for(r=6480;r<=6483;r++)o[r]=0;for(r=6511;r<=6514;r++)o[r]=0;for(r=6579;r<=6581;r++)o[r]=0;for(r=6619;r<=6624;r++)o[r]=0;for(r=6625;r<=6627;r++)o[r]=2;for(r=6628;r<=6632;r++)o[r]=0;for(r=6634;r<=6637;r++)o[r]=0;for(r=6669;r<=6692;r++)o[r]=0;for(r=6707;r<=6709;r++)o[r]=0;for(r=6720;r<=6723;r++)o[r]=0;for(r=6732;r<=6738;r++)o[r]=0;for(r=6931;r<=6933;r++)o[r]=0;for(r=6956;r<=6959;r++)o[r]=0;for(r=7005;r<=7007;r++)o[r]=0;for(r=7057;r<=7070;r++)o[r]=2;for(r=7074;r<=7082;r++)o[r]=0;for(r=7109;r<=7118;r++)o[r]=0;for(r=7119;r<=7127;r++)o[r]=1;for(r=7374;r<=7376;r++)o[r]=0;for(r=7528;r<=7586;r++)o[r]=0;for(r=7587;r<=7645;r++)o[r]=2;for(r=7692;r<=7696;r++)o[r]=0;for(r=7755;r<=7787;r++)o[r]=0;for(r=7791;r<=7795;r++)o[r]=0;for(r=7799;r<=7801;r++)o[r]=0;for(r=7803;r<=7805;r++)o[r]=0;for(r=7825;r<=7831;r++)o[r]=0;for(r=7845;r<=7859;r++)o[r]=0;for(r=8013;r<=8032;r++)o[r]=0;for(r=8065;r<=8068;r++)o[r]=1;for(r=8518;r<=8529;r++)o[r]=2;for(r=8533;r<=8536;r++)o[r]=2;for(r=8538;r<=8540;r++)o[r]=2;for(r=8677;r<=8679;r++)o[r]=0;for(r=8836;r<=8840;r++)o[r]=0;for(r=8857;r<=8859;r++)o[r]=0;for(r=8908;r<=8910;r++)o[r]=0;for(r=9154;r<=9159;r++)o[r]=0;for(r=9205;r<=9218;r++)o[r]=0;for(r=9271;r<=9273;r++)o[r]=0;for(r=20002;r<=20032;r++)o[r]=0;for(r=20062;r<=20092;r++)o[r]=0;for(r=20135;r<=20138;r++)o[r]=0;for(r=20248;r<=20258;r++)o[r]=0;for(r=20348;r<=20358;r++)o[r]=0;for(r=20436;r<=20440;r++)o[r]=0;for(r=20822;r<=20824;r++)o[r]=0;for(r=20934;r<=20936;r++)o[r]=0;for(r=21035;r<=21037;r++)o[r]=0;for(r=21095;r<=21097;r++)o[r]=0;for(r=21148;r<=21150;r++)o[r]=0;for(r=21413;r<=21423;r++)o[r]=0;for(r=21453;r<=21463;r++)o[r]=0;for(r=21473;r<=21483;r++)o[r]=0;for(r=21780;r<=21782;r++)o[r]=0;for(r=21891;r<=21894;r++)o[r]=0;for(r=21896;r<=21899;r++)o[r]=0;for(r=22171;r<=22177;r++)o[r]=0;for(r=22181;r<=22187;r++)o[r]=0;for(r=22191;r<=22197;r++)o[r]=0;for(r=22234;r<=22236;r++)o[r]=0;for(r=22521;r<=22525;r++)o[r]=0;for(r=22991;r<=22994;r++)o[r]=0;for(r=23028;r<=23038;r++)o[r]=0;for(r=23830;r<=23853;r++)o[r]=0;for(r=23866;r<=23872;r++)o[r]=0;for(r=23877;r<=23884;r++)o[r]=0;for(r=23886;r<=23894;r++)o[r]=0;for(r=23946;r<=23948;r++)o[r]=0;for(r=24311;r<=24313;r++)o[r]=0;for(r=24342;r<=24347;r++)o[r]=0;for(r=24370;r<=24374;r++)o[r]=10;for(r=24375;r<=24381;r++)o[r]=0;for(r=24718;r<=24721;r++)o[r]=0;for(r=24817;r<=24821;r++)o[r]=0;for(r=24877;r<=24882;r++)o[r]=0;for(r=24891;r<=24893;r++)o[r]=0;for(r=25391;r<=25395;r++)o[r]=0;for(r=25828;r<=25838;r++)o[r]=0;for(r=26191;r<=26195;r++)o[r]=0;for(r=26391;r<=26393;r++)o[r]=0;for(r=26701;r<=26722;r++)o[r]=0;for(r=26729;r<=26799;r++)o[r]=2;for(r=26801;r<=26803;r++)o[r]=2;for(r=26811;r<=26813;r++)o[r]=2;for(r=26847;r<=26870;r++)o[r]=2;for(r=26891;r<=26899;r++)o[r]=0;for(r=26901;r<=26923;r++)o[r]=0;for(r=26929;r<=26946;r++)o[r]=0;for(r=26948;r<=26998;r++)o[r]=0;for(r=27037;r<=27040;r++)o[r]=0;for(r=27205;r<=27232;r++)o[r]=0;for(r=27258;r<=27260;r++)o[r]=0;for(r=27391;r<=27398;r++)o[r]=0;for(r=27561;r<=27564;r++)o[r]=0;for(r=27571;r<=27574;r++)o[r]=0;for(r=27581;r<=27584;r++)o[r]=0;for(r=27591;r<=27594;r++)o[r]=0;for(r=28191;r<=28193;r++)o[r]=0;for(r=28348;r<=28358;r++)o[r]=0;for(r=28402;r<=28432;r++)o[r]=0;for(r=28462;r<=28492;r++)o[r]=0;for(r=29118;r<=29122;r++)o[r]=0;for(r=29168;r<=29172;r++)o[r]=0;for(r=29177;r<=29185;r++)o[r]=0;for(r=29187;r<=29195;r++)o[r]=0;for(r=29900;r<=29903;r++)o[r]=0;for(r=30161;r<=30179;r++)o[r]=0;for(r=30491;r<=30494;r++)o[r]=0;for(r=30729;r<=30732;r++)o[r]=0;for(r=31251;r<=31259;r++)o[r]=0;for(r=31265;r<=31268;r++)o[r]=0;for(r=31275;r<=31279;r++)o[r]=0;for(r=31281;r<=31297;r++)o[r]=0;for(r=31461;r<=31469;r++)o[r]=0;for(r=31491;r<=31495;r++)o[r]=0;for(r=31917;r<=31922;r++)o[r]=0;for(r=31965;r<=32e3;r++)o[r]=0;for(r=32001;r<=32003;r++)o[r]=2;for(r=32005;r<=32031;r++)o[r]=2;for(r=32033;r<=32060;r++)o[r]=2;for(r=32064;r<=32067;r++)o[r]=2;for(r=32074;r<=32077;r++)o[r]=2;for(r=32081;r<=32086;r++)o[r]=0;for(r=32107;r<=32130;r++)o[r]=0;for(r=32133;r<=32158;r++)o[r]=0;for(r=32164;r<=32167;r++)o[r]=2;for(r=32180;r<=32199;r++)o[r]=0;for(r=32201;r<=32260;r++)o[r]=0;for(r=32301;r<=32360;r++)o[r]=0;for(r=32601;r<=32662;r++)o[r]=0;for(r=32664;r<=32667;r++)o[r]=2;for(r=32701;r<=32761;r++)o[r]=0;for(r=53001;r<=53004;r++)o[r]=0;for(r=53008;r<=53019;r++)o[r]=0;for(r=53021;r<=53032;r++)o[r]=0;for(r=53034;r<=53037;r++)o[r]=0;for(r=53042;r<=53046;r++)o[r]=0;for(r=53074;r<=53080;r++)o[r]=0;for(r=54001;r<=54004;r++)o[r]=0;for(r=54008;r<=54019;r++)o[r]=0;for(r=54021;r<=54032;r++)o[r]=0;for(r=54034;r<=54037;r++)o[r]=0;for(r=54042;r<=54046;r++)o[r]=0;for(r=54048;r<=54053;r++)o[r]=0;for(r=54074;r<=54080;r++)o[r]=0;for(r=54098;r<=54101;r++)o[r]=0;for(r=102001;r<=102040;r++)o[r]=0;for(r=102042;r<=102063;r++)o[r]=0;for(r=102065;r<=102067;r++)o[r]=0;for(r=102070;r<=102117;r++)o[r]=0;for(r=102122;r<=102216;r++)o[r]=0;for(r=102221;r<=102377;r++)o[r]=0;for(r=102382;r<=102388;r++)o[r]=0;for(r=102389;r<=102398;r++)o[r]=2;for(r=102399;r<=102444;r++)o[r]=0;for(r=102445;r<=102447;r++)o[r]=2;for(r=102448;r<=102458;r++)o[r]=0;for(r=102459;r<=102468;r++)o[r]=2;for(r=102469;r<=102499;r++)o[r]=0;for(r=102500;r<=102519;r++)o[r]=1;for(r=102520;r<=102524;r++)o[r]=0;for(r=102525;r<=102529;r++)o[r]=2;for(r=102530;r<=102588;r++)o[r]=0;for(r=102590;r<=102598;r++)o[r]=0;for(r=102601;r<=102603;r++)o[r]=0;for(r=102605;r<=102628;r++)o[r]=0;for(r=102629;r<=102646;r++)o[r]=2;for(r=102648;r<=102700;r++)o[r]=2;for(r=102701;r<=102703;r++)o[r]=0;for(r=102707;r<=102730;r++)o[r]=2;for(r=102733;r<=102758;r++)o[r]=2;for(r=102767;r<=102900;r++)o[r]=0;for(r=102965;r<=102969;r++)o[r]=0;for(r=102971;r<=102973;r++)o[r]=0;for(r=102975;r<=102989;r++)o[r]=0;for(r=102990;r<=102992;r++)o[r]=1;for(r=102997;r<=103002;r++)o[r]=0;for(r=103003;r<=103008;r++)o[r]=2;for(r=103009;r<=103011;r++)o[r]=0;for(r=103012;r<=103014;r++)o[r]=2;for(r=103019;r<=103021;r++)o[r]=0;for(r=103022;r<=103024;r++)o[r]=2;for(r=103029;r<=103031;r++)o[r]=0;for(r=103032;r<=103034;r++)o[r]=2;for(r=103065;r<=103068;r++)o[r]=0;for(r=103074;r<=103076;r++)o[r]=0;for(r=103077;r<=103079;r++)o[r]=1;for(r=103080;r<=103082;r++)o[r]=0;for(r=103083;r<=103085;r++)o[r]=2;for(r=103090;r<=103093;r++)o[r]=0;for(r=103097;r<=103099;r++)o[r]=0;for(r=103100;r<=103102;r++)o[r]=2;for(r=103107;r<=103109;r++)o[r]=0;for(r=103110;r<=103112;r++)o[r]=2;for(r=103113;r<=103116;r++)o[r]=0;for(r=103117;r<=103120;r++)o[r]=2;for(r=103153;r<=103157;r++)o[r]=0;for(r=103158;r<=103162;r++)o[r]=2;for(r=103163;r<=103165;r++)o[r]=0;for(r=103166;r<=103168;r++)o[r]=1;for(r=103169;r<=103171;r++)o[r]=2;for(r=103186;r<=103188;r++)o[r]=0;for(r=103189;r<=103191;r++)o[r]=2;for(r=103192;r<=103195;r++)o[r]=0;for(r=103196;r<=103199;r++)o[r]=2;for(r=103200;r<=103224;r++)o[r]=0;for(r=103225;r<=103227;r++)o[r]=1;for(r=103232;r<=103237;r++)o[r]=0;for(r=103238;r<=103243;r++)o[r]=2;for(r=103244;r<=103246;r++)o[r]=0;for(r=103247;r<=103249;r++)o[r]=2;for(r=103254;r<=103256;r++)o[r]=0;for(r=103257;r<=103259;r++)o[r]=2;for(r=103264;r<=103266;r++)o[r]=0;for(r=103267;r<=103269;r++)o[r]=2;for(r=103300;r<=103375;r++)o[r]=0;for(r=103381;r<=103383;r++)o[r]=0;for(r=103384;r<=103386;r++)o[r]=1;for(r=103387;r<=103389;r++)o[r]=0;for(r=103390;r<=103392;r++)o[r]=2;for(r=103397;r<=103399;r++)o[r]=0;for(r=103400;r<=103471;r++)o[r]=2;for(r=103476;r<=103478;r++)o[r]=0;for(r=103479;r<=103481;r++)o[r]=2;for(r=103486;r<=103488;r++)o[r]=0;for(r=103489;r<=103491;r++)o[r]=2;for(r=103492;r<=103495;r++)o[r]=0;for(r=103496;r<=103499;r++)o[r]=2;for(r=103528;r<=103543;r++)o[r]=0;for(r=103544;r<=103548;r++)o[r]=2;for(r=103549;r<=103551;r++)o[r]=0;for(r=103552;r<=103554;r++)o[r]=1;for(r=103555;r<=103557;r++)o[r]=2;for(r=103558;r<=103560;r++)o[r]=0;for(r=103571;r<=103573;r++)o[r]=0;for(r=103574;r<=103576;r++)o[r]=2;for(r=103577;r<=103580;r++)o[r]=0;for(r=103581;r<=103583;r++)o[r]=2;for(r=103595;r<=103598;r++)o[r]=0;for(r=103600;r<=103694;r++)o[r]=0;for(r=103696;r<=103699;r++)o[r]=0;for(r=103700;r<=103793;r++)o[r]=2;for(r=103794;r<=103871;r++)o[r]=0;for(r=103900;r<=103971;r++)o[r]=2;return o}())&&(r.exports=o);}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$q={102113:!0,102100:!0,3857:!0,3785:!0},a$i={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},_$6='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',t$l=[-20037508.342788905,20037508.342788905],n$o=[-20037508.342787,20037508.342787],l$f={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:t$l,origin:n$o,dx:1e-5},102100:{wkTemplate:_$6,valid:t$l,origin:n$o,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:t$l,origin:n$o,dx:1e-5},3857:{wkTemplate:_$6,valid:t$l,origin:n$o,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function E$3(e,r){return !(!e||!r)&&(e===r||(null!=e.wkid||null!=r.wkid?e.wkid===r.wkid||R$2(e)&&R$2(r)||null!=r.latestWkid&&e.wkid===r.latestWkid||null!=e.latestWkid&&r.wkid===e.latestWkid:!(!e.wkt||!r.wkt)&&e.wkt.toUpperCase()===r.wkt.toUpperCase()))}function M$4(e){return T$4(e)&&e.wkid?l$f[e.wkid]:null}function S$3(e){return !!T$4(e)&&(e.wkid?null==o$t[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function d$b(e){return T$4(e)&&4326===e.wkid}function R$2(e){return T$4(e)&&null!=e.wkid&&!0===i$q[e.wkid]}function A$7(e){return T$4(e)&&null!=e.wkid&&!0===a$i[e.wkid]}function T$4(e){return null!=e&&(null!=e.wkid&&e.wkid>=2e3||null!=e.wkt)}const G$3={wkid:4326,wkt:o$7(l$f[4326].wkTemplate,{Central_Meridian:"0.0"})},o$u={wkid:102100,latestWkid:3857};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$7;let k$4=m$7=class extends a$h{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null;}static fromJSON(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return m$7.WebMercator;if(4326===e.wkid)return m$7.WGS84}const t=new m$7;return t.read(e),t}normalizeCtorArgs(e){if(e&&"object"==typeof e)return e;return {["string"==typeof e?"wkt":"wkid"]:e}}get isWGS84(){return d$b(this)}get isWebMercator(){return R$2(this)}get isGeographic(){return S$3(this)}get isWrappable(){return A$7(this)}writeWkt(e,t){this.wkid||(t.wkt=e);}clone(){if(this===m$7.WGS84)return m$7.WGS84;if(this===m$7.WebMercator)return m$7.WebMercator;const e=new m$7;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=s$4(this.imageCoordinateSystem)),e}equals(e){if(null==e)return !1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return !1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,o=this.imageCoordinateSystem;return null==t||i?JSON.stringify(o)===JSON.stringify(e.imageCoordinateSystem):r?o.id===t&&o.referenceServiceName===r:o.id===t}return E$3(this,e)}toJSON(e){return this.write(void 0,e)}};k$4.GCS_NAD_1927=null,k$4.WGS84=null,k$4.WebMercator=null,e([y$5({dependsOn:["wkid"],readOnly:!0})],k$4.prototype,"isWGS84",null),e([y$5({dependsOn:["wkid"],readOnly:!0})],k$4.prototype,"isWebMercator",null),e([y$5({dependsOn:["wkid","wkt"],readOnly:!0})],k$4.prototype,"isGeographic",null),e([y$5({dependsOn:["wkid"],readOnly:!0})],k$4.prototype,"isWrappable",null),e([y$5({type:Number,json:{write:!0}})],k$4.prototype,"latestWkid",void 0),e([y$5({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkt}}}}}}})],k$4.prototype,"wkid",void 0),e([y$5({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return {isRequired:null===this.wkid}}}}}}})],k$4.prototype,"wkt",void 0),e([o$r("wkt"),o$r("web-scene","wkt")],k$4.prototype,"writeWkt",null),e([y$5({type:Number,json:{write:!0}})],k$4.prototype,"vcsWkid",void 0),e([y$5({type:Number,json:{write:!0}})],k$4.prototype,"latestVcsWkid",void 0),e([y$5()],k$4.prototype,"imageCoordinateSystem",void 0),k$4=m$7=e([n$e("esri.geometry.SpatialReference")],k$4),k$4.prototype.toJSON.isDefaultToJSON=!0,k$4.GCS_NAD_1927=new k$4({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),k$4.WGS84=new k$4(G$3),k$4.WebMercator=new k$4(o$u),Object.freeze&&(Object.freeze(k$4.GCS_NAD_1927),Object.freeze(k$4.WGS84),Object.freeze(k$4.WebMercator));var w$5=k$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$l(e,t,a){let c,d;return void 0===t||Array.isArray(t)?(d=e,a=t,c=[void 0]):(d=t,c=Array.isArray(e)?e:[e]),(e,t)=>{const s=e.constructor.prototype;c.forEach(c=>{const p=h$3(e,c,d);p.read&&"object"!=typeof p.read&&(p.read={}),o$5("read.reader",s[t],p),a&&(p.read.source=(p.read.source||[]).concat(a));});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let a$j=class extends a$h{constructor(...e){super(...e),this.type=null,this.extent=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=w$5.WGS84;}get cache(){return {}}readSpatialReference(e,r){if(e instanceof w$5)return e;if(null!=e){const o=new w$5;return o.read(e,r),o}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache");}getCacheValue(e){return this.cache[e]}setCacheValue(e,r){this.cache[e]=r;}};e([y$5()],a$j.prototype,"type",void 0),e([y$5({readOnly:!0,dependsOn:["spatialReference"]})],a$j.prototype,"cache",null),e([y$5({readOnly:!0,dependsOn:["spatialReference"]})],a$j.prototype,"extent",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a$j.prototype,"hasM",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a$j.prototype,"hasZ",void 0),e([y$5({type:w$5,json:{write:!0}})],a$j.prototype,"spatialReference",void 0),e([e$l("spatialReference")],a$j.prototype,"readSpatialReference",null),a$j=e([n$e("esri.geometry.Geometry")],a$j);var c$k=a$j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$p(n,u,r,t){return n.x=n.x+u,n.y=n.y+r,null!=t&&null!=n.z&&(n.z=n.z+t),n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$m=6378137,t$m=3189068.5,I$3=6378137*Math.PI,P$3=I$3/180,n$q={a:6378137,e2:.006694379990137799,a1:42697.67270715753,a2:1823091254.6075451,a3:142.9172228981241,a4:4557728136.518863,a5:42840.589930055656,a6:.9933056200098622};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function a$k(t){return 57.29577951308232*t}function l$g(t){return .017453292519943*t}function p$g(t){return null!=t.wkid||null!=t.wkt}const u$e=[0,0];function c$l(t,n,e,i,s){const r=t,o=s;if("x"in r&&"x"in o)[o.x,o.y]=n(r.x,r.y,u$e,i);else if("xmin"in r&&"xmin"in o)[o.xmin,o.ymin]=n(r.xmin,r.ymin,u$e,i),[o.xmax,o.ymax]=n(r.xmax,r.ymax,u$e,i);else if("paths"in r&&"paths"in o||"rings"in r&&"rings"in o){const t="paths"in r?r.paths:r.rings,e=[];let s;for(let r=0;r<t.length;r++){const o=t[r];s=[],e.push(s);for(let t=0;t<o.length;t++)s.push(n(o[t][0],o[t][1],[0,0],i)),o[t].length>2&&s[t].push(o[t][2]),o[t].length>3&&s[t].push(o[t][3]);}"paths"in o?o.paths=e:o.rings=e;}else if("points"in r&&"points"in o){const t=r.points,e=[];for(let s=0;s<t.length;s++)e[s]=n(t[s][0],t[s][1],[0,0],i),t[s].length>2&&e[s].push(t[s][2]),t[s].length>3&&e[s].push(t[s][3]);o.points=e;}else if("type"in r&&"mesh"===r.type&&"type"in o&&"mesh"===o.type){const t=r.vertexAttributes&&r.vertexAttributes.position,e=o.vertexAttributes&&o.vertexAttributes.position;if(t){const s=[0,0];for(let r=0;r<t.length;r+=3)n(t[r],t[r+1],s,i),e[r]=s[0],e[r+1]=s[1];}}return o.spatialReference=e,s}function f$i(t,s){const r=t&&(p$g(t)?t:t.spatialReference),o=s&&(p$g(s)?s:s.spatialReference);return !(!r||!o)&&(!!E$3(o,r)||(R$2(o)&&d$b(r)||R$2(r)&&d$b(o)))}function h$d(r,o){const a=r&&r.spatialReference,l=o&&(p$g(o)?o:o.spatialReference);return f$i(a,l)?E$3(a,l)?s$4(r):R$2(l)?c$l(r,m$8,w$5.WebMercator,!1,s$4(r)):d$b(l)?c$l(r,x$4,w$5.WGS84,!1,s$4(r)):null:null}function m$8(t,n,e=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const i=l$g(n);return e[0]=l$g(t)*e$m,e[1]=t$m*Math.log((1+Math.sin(i))/(1-Math.sin(i))),e}function x$4(t,n,e=[0,0],i=!1){const s=a$k(t/e$m);return e[0]=i?s:s-360*Math.floor((s+180)/360),e[1]=a$k(Math.PI/2-2*Math.atan(Math.exp(-1*n/e$m))),e}function g$9(n,e=!1,i=s$4(n)){return c$l(n,m$8,w$5.WebMercator,e,i)}function y$c(n,e=!1,i=s$4(n)){return c$l(n,x$4,w$5.WGS84,e,i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var y$d;const f$j=[0,0];function m$9(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}const g$a=n$7.getLogger("esri.geometry.Point");let x$5=y$d=class extends c$k{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point";}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const s=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(s)?s:s.clone());}static distance(e,t){const s=e.x-t.x,r=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(s*s+r*r+i*i)}normalizeCtorArgs(e,t,s,r,i){let o;if(Array.isArray(e))o=e,i=t,e=o[0],t=o[1],s=o[2],r=o[3];else if(e&&"object"==typeof e){if(o=e,e=null!=o.x?o.x:o.longitude,t=null!=o.y?o.y:o.latitude,s=o.z,r=o.m,(i=o.spatialReference)&&"esri.geometry.SpatialReference"!==i.declaredClass&&(i=new w$5(i)),null!=o.longitude||null!=o.latitude)if(null==o.longitude)g$a.warn(".longitude=","Latitude was defined without longitude");else if(null==o.latitude)g$a.warn(".latitude=","Longitude was defined without latitude");else if(!o.declaredClass&&i&&i.isWebMercator){const s=m$8(o.longitude,o.latitude,f$j);e=s[0],t=s[1];}}else m$9(s)?(i=s,s=null):m$9(r)&&(i=r,r=null);const a={x:e,y:t};return null==a.x&&null!=a.y?g$a.warn(".y=","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&g$a.warn(".x=","X coordinate was defined without a Y coordinate"),null!=i&&(a.spatialReference=i),null!=s&&(a.z=s),null!=r&&(a.m=r),a}get hasM(){return void 0!==this.m}set hasM(e){e!==this.hasM&&(this._set("m",e?0:void 0),this._set("hasM",e));}get hasZ(){return void 0!==this.z}set hasZ(e){e!==this.hasZ&&(this._set("z",e?0:void 0),this._set("hasZ",e));}get latitude(){const e=this._get("spatialReference");if(e){if(e.isWebMercator)return x$4(this.x,this.y,f$j)[1];if(e.isGeographic)return this._get("y")}return null}set latitude(e){const t=this._get("spatialReference");t&&(t.isWebMercator?this._set("y",m$8(this.x,e,f$j)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e));}get longitude(){const e=this._get("spatialReference");if(e){if(e.isWebMercator)return x$4(this._get("x"),this._get("y"),f$j)[0];if(e.isGeographic)return this._get("x")}return null}set longitude(e){const t=this._get("spatialReference");t&&(t.isWebMercator?this._set("x",m$8(e,this._get("y"),f$j)[0]):t.isGeographic&&this._set("x",e),this._set("longitude",e));}writeX(e,t,s){t[s]=isNaN(e)?"NaN":e;}readX(e){return "string"==typeof e?NaN:e}clone(){const e=new y$d;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return y$d.copy(e,this),this}equals(e){if(!e)return !1;const{x:t,y:s,z:r,m:i,spatialReference:o}=this,{z:a,m:n}=e;let{x:l,y:u,spatialReference:p}=e;if(!o.equals(p))if(o.isWebMercator&&p.isWGS84)[l,u]=m$8(l,u),p=o;else {if(!o.isWGS84||!p.isWebMercator)return !1;[l,u]=x$4(l,u),p=o;}return t===l&&s===u&&r===a&&i===n&&o.wkid===p.wkid}offset(e,t,s){return n$p(this,e,t,s)}normalize(){if(!this.spatialReference)return this;const e=M$4(this.spatialReference);if(!e)return this;let t=this.x;const[s,r]=e.valid,i=2*r;let o;return t>r?(o=Math.ceil(Math.abs(t-r)/i),t-=o*i):t<s&&(o=Math.ceil(Math.abs(t-s)/i),t+=o*i),this._set("x",t),this}distance(e){return y$d.distance(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write(null,e)}};e([y$5({dependsOn:["x","y","z","m","spatialReference"]})],x$5.prototype,"cache",void 0),e([y$5({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],x$5.prototype,"hasM",null),e([y$5({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],x$5.prototype,"hasZ",null),e([y$5({type:Number,dependsOn:["y"]})],x$5.prototype,"latitude",null),e([y$5({type:Number,dependsOn:["x"]})],x$5.prototype,"longitude",null),e([y$5({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),i$b(e=>isNaN(e)?e:a$6(e))],x$5.prototype,"x",void 0),e([o$r("x")],x$5.prototype,"writeX",null),e([e$l("x")],x$5.prototype,"readX",null),e([y$5({type:Number,json:{write:!0}})],x$5.prototype,"y",void 0),e([y$5({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasZ}}}}})],x$5.prototype,"z",void 0),e([y$5({type:Number,json:{write:{overridePolicy(){return {enabled:this.hasM}}}}})],x$5.prototype,"m",void 0),x$5=y$d=e([n$e("esri.geometry.Point")],x$5),x$5.prototype.toJSON.isDefaultToJSON=!0;var _$7=x$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$r=[0,0];function t$n(n,t){return e$n(n,t.x,t.y,t.z)}function r$j(n,t){if(!t.points||t.points.length)return !1;for(const r of t.points)if(!i$r(n,r))return !1;return !0}function u$f(n,t){const{xmin:r,ymin:u,zmin:i,xmax:o,ymax:f,zmax:c}=t;return n.hasZ&&t.hasZ?e$n(n,r,u,i)&&e$n(n,r,f,i)&&e$n(n,o,f,i)&&e$n(n,o,u,i)&&e$n(n,r,u,c)&&e$n(n,r,f,c)&&e$n(n,o,f,c)&&e$n(n,o,u,c):e$n(n,r,u)&&e$n(n,r,f)&&e$n(n,o,f)&&e$n(n,o,u)}function i$r(n,t){return e$n(n,t[0],t[1])}function o$v(n,t){return e$n(n,t[0],t[1],t[2])}function e$n(n,t,r,u){return t>=n.xmin&&t<=n.xmax&&r>=n.ymin&&r<=n.ymax&&(null==u||!n.hasZ||u>=n.zmin&&u<=n.zmax)}function f$k(t,r){return n$r[1]=r.y,n$r[0]=r.x,c$m(t,n$r)}function c$m(n,t){return function(n,t){if(!n)return !1;if(function(n){return !Array.isArray(n[0][0])}(n))return s$n(!1,n,t);let r=!1;for(let u=0,i=n.length;u<i;u++)r=s$n(r,n[u],t);return r}(n.rings,t)}function s$n(n,t,r){const[u,i]=r;let o=n,e=0;for(let n=0,r=t.length;n<r;n++){e++,e===r&&(e=0);const[f,c]=t[n],[s,x]=t[e];(c<i&&x>=i||x<i&&c>=i)&&f+(i-c)/(x-c)*(s-f)<u&&(o=!o);}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function i$s(t,e){return t$n(t,e)}function o$w(n,t){const e=n.hasZ&&t.hasZ;let r,i,o;if(n.xmin<=t.xmin){if(r=t.xmin,n.xmax<r)return !1}else if(r=n.xmin,t.xmax<r)return !1;if(n.ymin<=t.ymin){if(i=t.ymin,n.ymax<i)return !1}else if(i=n.ymin,t.ymax<i)return !1;if(e&&t.hasZ)if(n.zmin<=t.zmin){if(o=t.zmin,n.zmax<o)return !1}else if(o=n.zmin,t.zmax<o)return !1;return !0}function f$l(n,t){const{points:i,hasZ:o}=t,f=o?o$v:i$r;for(const t of i)if(f(n,t))return !0;return !1}const s$o=[0,0],c$n=[0,0],m$a=[0,0],u$g=[0,0],l$h=[s$o,c$n,m$a,u$g],a$l=[[m$a,s$o],[s$o,c$n],[c$n,u$g],[u$g,m$a]];function x$6(n,r){s$o[0]=n.xmin,s$o[1]=n.ymax,c$n[0]=n.xmax,c$n[1]=n.ymax,m$a[0]=n.xmin,m$a[1]=n.ymin,u$g[0]=n.xmax,u$g[1]=n.ymin;for(const n of l$h)if(c$m(r,n))return !0;for(const t of r.rings){if(!t.length)continue;let r=t[0];if(i$r(n,r))return !0;for(let i=1;i<t.length;i++){const o=t[i];if(i$r(n,o)||p$h(r,o,a$l))return !0;r=o;}}return !1}function y$e(n,t){s$o[0]=n.xmin,s$o[1]=n.ymax,c$n[0]=n.xmax,c$n[1]=n.ymax,m$a[0]=n.xmin,m$a[1]=n.ymin,u$g[0]=n.xmax,u$g[1]=n.ymin;const r=t.paths;for(const t of r){if(!r.length)continue;let i=t[0];if(i$r(n,i))return !0;for(let r=1;r<t.length;r++){const o=t[r];if(i$r(n,o)||p$h(i,o,a$l))return !0;i=o;}}return !1}const h$e=[0,0];function g$b(n){for(let t=0;t<n.length;t++){const e=n[t];for(let r=0;r<e.length-1;r++){const i=e[r],o=e[r+1];for(let e=t+1;e<n.length;e++)for(let t=0;t<n[e].length-1;t++){const r=n[e][t],f=n[e][t+1];if(z$3(i,o,r,f,h$e)&&!(h$e[0]===i[0]&&h$e[1]===i[1]||h$e[0]===r[0]&&h$e[1]===r[1]||h$e[0]===o[0]&&h$e[1]===o[1]||h$e[0]===f[0]&&h$e[1]===f[1]))return !0}}const r=e.length;if(!(r<=4))for(let n=0;n<r-3;n++){let t=r-1;0===n&&(t=r-2);const i=e[n],o=e[n+1];for(let r=n+2;r<t;r++){const n=e[r],t=e[r+1];if(z$3(i,o,n,t,h$e)&&!(h$e[0]===i[0]&&h$e[1]===i[1]||h$e[0]===n[0]&&h$e[1]===n[1]||h$e[0]===o[0]&&h$e[1]===o[1]||h$e[0]===t[0]&&h$e[1]===t[1]))return !0}}}return !1}function p$h(n,t,e){for(let r=0;r<e.length;r++)if(z$3(n,t,e[r][0],e[r][1]))return !0;return !1}function z$3(n,t,e,r,i){const[o,f]=n,[s,c]=t,[m,u]=e,[l,a]=r,x=l-m,y=o-m,h=s-o,g=a-u,p=f-u,z=c-f,G=g*h-x*z;if(0===G)return !1;const Z=(x*p-g*y)/G,P=(h*p-z*y)/G;return Z>=0&&Z<=1&&P>=0&&P<=1&&(i&&(i[0]=o+Z*(s-o),i[1]=f+Z*(c-f)),!0)}function G$4(n){switch(n){case"esriGeometryEnvelope":case"extent":return o$w;case"esriGeometryMultipoint":case"multipoint":return f$l;case"esriGeometryPoint":case"point":return i$s;case"esriGeometryPolygon":case"polygon":return x$6;case"esriGeometryPolyline":case"polyline":return y$e;case"mesh":return o$w}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var y$f;function f$m(t,i,e){return null==i?e:null==e?i:t(i,e)}let d$c=y$f=class extends c$k{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0;}normalizeCtorArgs(t,i,e,s,n){return !(m=t)||"esri.geometry.SpatialReference"!==m.declaredClass&&null==m.wkid?"object"==typeof t?(t.spatialReference=null==t.spatialReference?w$5.WGS84:t.spatialReference,t):{xmin:t,ymin:i,xmax:e,ymax:s,spatialReference:null==n?w$5.WGS84:n}:{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0};var m;}static fromBounds(t,i){return new y$f({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:i})}get center(){const t=new _$7({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const i=this.center;return null!=t.z&&this.hasZ?this.offset(t.x-i.x,t.y-i.y,t.z-i.z):this.offset(t.x-i.x,t.y-i.y)}clone(){const t=new y$f;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,null!=this.zmin&&(t.zmin=this.zmin,t.zmax=this.zmax),null!=this.mmin&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&f$i(i,e)&&(t=i.isWebMercator?g$9(t):y$c(t,!0)),"point"===t.type?t$n(this,t):"extent"===t.type&&u$f(this,t)}equals(t){if(!t)return !1;const i=this.spatialReference,e=t.spatialReference;return i&&e&&!i.equals(e)&&f$i(i,e)&&(t=i.isWebMercator?g$9(t):y$c(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const i=.5*(1-t),e=this.width*i,s=this.height*i;if(this.xmin+=e,this.ymin+=s,this.xmax-=e,this.ymax-=s,this.hasZ){const t=(this.zmax-this.zmin)*i;this.zmin+=t,this.zmax-=t;}if(this.hasM){const t=(this.mmax-this.mmin)*i;this.mmin+=t,this.mmax-=t;}return this}intersects(t){if(t$6(t))return !1;const i=this.spatialReference,s=t.spatialReference;i&&s&&!i.equals(s)&&f$i(i,s)&&(t=i.isWebMercator?g$9(t):y$c(t,!0));const n=G$4(t.type);return "mesh"!==t.type?n(this,t):n(this,t.extent)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,i,e){return this.xmin+=t,this.ymin+=i,this.xmax+=t,this.ymax+=i,null!=e&&(this.zmin+=e,this.zmax+=e),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=f$m(Math.min,this.zmin,t.zmin),this.zmax=f$m(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=f$m(Math.min,this.mmin,t.mmin),this.mmax=f$m(Math.max,this.mmax,t.mmax)),this}intersection(t){return this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=f$m(Math.max,this.zmin,t.zmin),this.zmax=f$m(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=f$m(Math.max,this.mmin,t.mmin),this.mmax=f$m(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write(null,t)}_shiftCM(t=M$4(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,s=this._getCM(t);if(s){const n=e.isWebMercator?y$c(s):s;this.xmin-=s.x,this.xmax-=s.x,e.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new w$5(o$7(e.isWGS84?t.altTemplate:t.wkTemplate,{Central_Meridian:n.x}));}return this}_getCM(t){let i=null;const[e,s]=t.valid,n=this.xmin,m=this.xmax;return n>=e&&n<=s&&(m>=e&&m<=s)||(i=this.center),i}_normalize(t,i,e){const s=this.spatialReference;if(!s)return this;if(!(e=e||M$4(s)))return this;const n=this._getParts(e).map(t=>t.extent);if(n.length<2)return n[0]||this;if(n.length>2)return t?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(t)return this._shiftCM(e);if(i)return n;let r=!0,a=!0;return n.forEach(t=>{t.hasZ||(r=!1),t.hasM||(a=!1);}),{rings:n.map(t=>{const i=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(r){const e=(t.zmax-t.zmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}if(a){const e=(t.mmax-t.mmin)/2;for(let t=0;t<i.length;t++)i[t].push(e);}return i}),hasZ:r,hasM:a,spatialReference:s}}_getParts(t){let i=this.cache._parts;if(!i){i=[];const{ymin:e,ymax:s,spatialReference:n}=this,r=this.width,a=this.xmin,h=this.xmax;let o;t=t||M$4(n);const[x,l]=t.valid;o=this._normalizeX(this.xmin,t);const p=o.x,c=o.frameId;o=this._normalizeX(this.xmax,t);const u=o.x,f=o.frameId,d=p===u&&r>0;if(r>2*l){const t=new y$f(a<h?p:u,e,l,s,n),m=new y$f(x,e,a<h?u:p,s,n),r=new y$f(0,e,l,s,n),o=new y$f(x,e,0,s,n),d=[],z=[];t.contains(r)&&d.push(c),t.contains(o)&&z.push(c),m.contains(r)&&d.push(f),m.contains(o)&&z.push(f);for(let t=c+1;t<f;t++)d.push(t),z.push(t);i.push({extent:t,frameIds:[c]},{extent:m,frameIds:[f]},{extent:r,frameIds:d},{extent:o,frameIds:z});}else p>u||d?i.push({extent:new y$f(p,e,l,s,n),frameIds:[c]},{extent:new y$f(x,e,u,s,n),frameIds:[f]}):i.push({extent:new y$f(p,e,u,s,n),frameIds:[c]});this.cache._parts=i;}const e=this.hasZ,s=this.hasM;if(e||s){const t={};e&&(t.zmin=this.zmin,t.zmax=this.zmax),s&&(t.mmin=this.mmin,t.mmax=this.mmax);for(let e=0;e<i.length;e++)i[e].extent.set(t);}return i}_normalizeX(t,i){const[e,s]=i.valid,n=2*s;let m,r=0;return t>s?(m=Math.ceil(Math.abs(t-s)/n),t-=m*n,r=m):t<e&&(m=Math.ceil(Math.abs(t-e)/n),t+=m*n,r=-m),{x:t,frameId:r}}};e([y$5({dependsOn:["xmin","ymin","zmin","mmin","xmax","ymax","zmax","mmax","spatialReference"]})],d$c.prototype,"cache",void 0),e([y$5({readOnly:!0,dependsOn:["cache"]})],d$c.prototype,"center",null),e([y$5({readOnly:!0,dependsOn:["cache"]})],d$c.prototype,"extent",null),e([y$5({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d$c.prototype,"hasM",null),e([y$5({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d$c.prototype,"hasZ",null),e([y$5({readOnly:!0,dependsOn:["ymin","ymax"]})],d$c.prototype,"height",null),e([y$5({readOnly:!0,dependsOn:["xmin","xmax"]})],d$c.prototype,"width",null),e([y$5({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],d$c.prototype,"xmin",void 0),e([y$5({type:Number,json:{write:!0}})],d$c.prototype,"ymin",void 0),e([y$5({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],d$c.prototype,"mmin",void 0),e([y$5({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],d$c.prototype,"zmin",void 0),e([y$5({type:Number,json:{write:!0}})],d$c.prototype,"xmax",void 0),e([y$5({type:Number,json:{write:!0}})],d$c.prototype,"ymax",void 0),e([y$5({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasM}}}}})],d$c.prototype,"mmax",void 0),e([y$5({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return {enabled:this.hasZ}}}}})],d$c.prototype,"zmax",void 0),d$c=y$f=e([n$e("esri.geometry.Extent")],d$c),d$c.prototype.toJSON.isDefaultToJSON=!0;var z$4=d$c;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function h$f(h,a,s=!1){let{hasM:t,hasZ:e}=h;Array.isArray(a)?4!==a.length||t||e?3===a.length&&s&&!t?(e=!0,t=!1):3===a.length&&t&&e&&(t=!1,e=!1):(t=!0,e=!0):(e=!e&&a.hasZ&&(!t||a.hasM),t=!t&&a.hasM&&(!e||a.hasZ)),h.hasZ=e,h.hasM=t;}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$i;function h$g(t){return (s,e)=>null==s?e:null==e?s:t(s,e)}let c$o=l$i=class extends c$k{constructor(...t){super(...t),this.points=[],this.type="multipoint";}normalizeCtorArgs(t,s){if(!t&&!s)return null;const e={};var r;Array.isArray(t)?(e.points=t,e.spatialReference=s):!(r=t)||"esri.geometry.SpatialReference"!==r.declaredClass&&null==r.wkid?(t.points&&(e.points=t.points),t.spatialReference&&(e.spatialReference=t.spatialReference),t.hasZ&&(e.hasZ=t.hasZ),t.hasM&&(e.hasM=t.hasM)):e.spatialReference=t;const i=e.points&&e.points[0];return i&&(void 0===e.hasZ&&void 0===e.hasM?(e.hasZ=i.length>2,e.hasM=!1):void 0===e.hasZ?e.hasZ=i.length>3:void 0===e.hasM&&(e.hasM=i.length>3)),e}get extent(){const t=this.points;if(!t.length)return null;const s=new z$4,e=this.hasZ,r=this.hasM,i=e?3:2,o=t[0],n=h$g(Math.min),p=h$g(Math.max);let l,c,u,m,[f,d]=o,[y,j]=o;for(let s=0,o=t.length;s<o;s++){const o=t[s],[a,h]=o;if(f=n(f,a),d=n(d,h),y=p(y,a),j=p(j,h),e&&o.length>2){const t=o[2];l=n(l,t),u=p(u,t);}if(r&&o.length>i){const t=o[i];c=n(c,t),m=p(m,t);}}return s.xmin=f,s.ymin=d,s.xmax=y,s.ymax=j,s.spatialReference=this.spatialReference,e?(s.zmin=l,s.zmax=u):(s.zmin=null,s.zmax=null),r?(s.mmin=c,s.mmax=m):(s.mmin=null,s.mmax=null),s}writePoints(t,e){e.points=s$4(this.points);}addPoint(t){return this.clearCache(),h$f(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this}clone(){const t={points:s$4(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new l$i(t)}getPoint(t){if(!this._validateInputs(t))return null;const s=this.points[t],e={x:s[0],y:s[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(e.z=s[2],r=3),this.hasM&&(e.m=s[r]),new _$7(e)}removePoint(t){return this._validateInputs(t)?(this.clearCache(),new _$7(this.points.splice(t,1)[0],this.spatialReference)):null}setPoint(t,s){return this._validateInputs(t)?(this.clearCache(),h$f(this,s),Array.isArray(s)||(s=s.toArray()),this.points[t]=s,this):this}toJSON(t){return this.write(null,t)}_validateInputs(t){return null!=t&&t>=0&&t<this.points.length}};e([y$5({dependsOn:["points","hasZ","hasM","spatialReference"]})],c$o.prototype,"cache",void 0),e([y$5({dependsOn:["cache"]})],c$o.prototype,"extent",null),e([y$5({type:[[Number]],json:{write:{isRequired:!0}}})],c$o.prototype,"points",void 0),e([o$r("points")],c$o.prototype,"writePoints",null),c$o=l$i=e([n$e("esri.geometry.Multipoint")],c$o),c$o.prototype.toJSON.isDefaultToJSON=!0;var u$h=c$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$o(n,t){const e=t[0]-n[0],r=t[1]-n[1];if(n.length>2&&t.length>2){const o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}return Math.sqrt(e*e+r*r)}function r$k(n,t,e){const r=n[0]+e*(t[0]-n[0]),o=n[1]+e*(t[1]-n[1]);return n.length>2&&t.length>2?[r,o,n[2]+e*(t[2]-n[2])]:[r,o]}function o$x(n,t,e,r){const[o,i]=t,[s,l]=e[r],[f,u]=e[r+1],h=f-s,c=u-l,a=h*h+c*c,g=(o-s)*h+(i-l)*c,m=Math.min(1,Math.max(0,g/a));return n[0]=s+h*m,n[1]=l+c*m,n}function i$t(n,t){return r$k(n,t,.5)}function f$n(n,t,e){const r=n.length;let o=0,i=0,s=0;for(let l=0;l<r;l++){const f=n[l],u=n[(l+1)%r];let h=2;o+=f[0]*u[1]-u[0]*f[1],f.length>2&&u.length>2&&e&&(i+=f[0]*u[2]-u[0]*f[2],h=3),f.length>h&&u.length>h&&t&&(s+=f[0]*u[h]-u[0]*f[h]);}return o<=0&&i<=0&&s<=0}function u$i(n){if("rings"in n){for(const t of n.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(n.rings.length>0){if(!f$n(n.rings[0],n.hasM,n.hasZ))for(let t=0;t<n.rings.length;++t)n.rings[t]=n.rings[t].reverse();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$p(n){return n?r$l(n.rings,n.hasZ):null}function r$l(n,t){if(!n||!n.length)return null;const l=[],e=[],r=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let l=0,u=n.length;l<u;l++){const u=o$y(n[l],t,r);u&&e.push(u);}if(e.sort((n,l)=>{let e=n[2]-l[2];return 0===e&&t&&(e=n[4]-l[4]),e}),e.length){let n=6*e[0][2];l[0]=e[0][0]/n,l[1]=e[0][1]/n,t&&(n=6*e[0][4],l[2]=0!==n?e[0][3]/n:0),(l[0]<r[0]||l[0]>r[1]||l[1]<r[2]||l[1]>r[3]||t&&(l[2]<r[4]||l[2]>r[5]))&&(l.length=0);}if(!l.length){const e=n[0]&&n[0].length?u$j(n[0],t):null;if(!e)return null;l[0]=e[0],l[1]=e[1],t&&e.length>2&&(l[2]=e[2]);}return l}function o$y(n,t,l){let e=0,r=0,o=0,u=0,i=0;for(let h=0;h<n.length;h++){const g=n[h],[s,f,c]=g,m=n[(h+1)%n.length],[x,a,y]=m;let p=s*a-x*f;u+=p,e+=(s+x)*p,r+=(f+a)*p,t&&g.length>2&&m.length>2&&(p=s*y-x*c,o+=(c+y)*p,i+=p),s<l[0]&&(l[0]=s),s>l[1]&&(l[1]=s),f<l[2]&&(l[2]=f),f>l[3]&&(l[3]=f),t&&(c<l[4]&&(l[4]=c),c>l[5]&&(l[5]=c));}if(u>0&&(u*=-1),i>0&&(i*=-1),!u)return null;const h=[e,r,.5*u];return t&&(h[3]=o,h[4]=.5*i),h}function u$j(l,e){const r=e?[0,0,0]:[0,0],o=e?[0,0,0]:[0,0];let u=0,i=0,h=0,g=0;for(let s=0,f=l.length;s<f-1;s++){const f=l[s],c=l[s+1];if(f&&c){r[0]=f[0],r[1]=f[1],o[0]=c[0],o[1]=c[1],e&&f.length>2&&c.length>2&&(r[2]=f[2],o[2]=c[2]);const l=e$o(r,o);if(l){u+=l;const n=i$t(f,c);i+=l*n[0],h+=l*n[1],e&&n.length>2&&(g+=l*n[2]);}}}return u>0?e?[i/u,h/u,g/u]:[i/u,h/u]:l.length?l[0]:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$s(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function t$o(n){return void 0!==n.points}function o$z(n){return void 0!==n.x&&void 0!==n.y}function i$u(n){return void 0!==n.paths}function e$q(n){return void 0!==n.rings}function l$j(n){return (t,o)=>null==t?o:null==o?t:n(t,o)}const r$m=l$j(Math.min),u$k=l$j(Math.max);function c$p(l,r){return i$u(r)?h$h(l,r.paths,!1,!1):e$q(r)?h$h(l,r.rings,!1,!1):t$o(r)?s$p(l,r.points,!1,!1,!1,!1):n$s(r)?g$c(l,r):(o$z(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.x,l[3]=r.y),l)}function f$o(l,r){return i$u(r)?h$h(l,r.paths,!0,!1):e$q(r)?h$h(l,r.rings,!0,!1):t$o(r)?s$p(l,r.points,!0,!1,!0,!1):n$s(r)?g$c(l,r,!0,!1,!0,!1):(o$z(r)&&(l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=r.x,l[4]=r.y,l[5]=r.z),l)}function h$h(n,t,o,i){const e=o?3:2;if(!t.length||!t[0].length)return null;let[l,c]=t[0][0],[f,h]=t[0][0],g=void 0,s=void 0,d=void 0,v=void 0;for(let n=0;n<t.length;n++){const x=t[n];for(let n=0;n<x.length;n++){const t=x[n],[m,a]=t;if(l=r$m(l,m),c=r$m(c,a),f=u$k(f,m),h=u$k(h,a),o&&t.length>2){const n=t[2];g=r$m(g,n),s=u$k(s,n);}if(i&&t.length>e){const n=t[e];d=r$m(g,n),v=u$k(s,n);}}}return o?i?(n[0]=l,n[1]=c,n[2]=g,n[3]=d,n[4]=f,n[5]=h,n[6]=s,n[7]=v,n.length=8,n):(n[0]=l,n[1]=c,n[2]=g,n[3]=f,n[4]=h,n[5]=s,n.length=6,n):i?(n[0]=l,n[1]=c,n[2]=d,n[3]=f,n[4]=h,n[5]=v,n.length=6,n):(n[0]=l,n[1]=c,n[2]=f,n[3]=h,n.length=4,n)}function g$c(n,t,o,i,e,l){const r=t.xmin,u=t.xmax,c=t.ymin,f=t.ymax;let h=t.zmin,g=t.zmax,s=t.mmin,d=t.mmax;return e?(h=h||0,g=g||0,l?(s=s||0,d=d||0,n[0]=r,n[1]=c,n[2]=h,n[3]=s,n[4]=u,n[5]=f,n[6]=g,n[7]=d,n):(n[0]=r,n[1]=c,n[2]=h,n[3]=u,n[4]=f,n[5]=g,n)):l?(s=s||0,d=d||0,n[0]=r,n[1]=c,n[2]=s,n[3]=u,n[4]=f,n[5]=d,n):(n[0]=r,n[1]=c,n[2]=u,n[3]=f,n)}function s$p(n,t,o,i,e,l){const c=o?3:2,f=i&&l,h=o&&e;if(!t.length||!t[0].length)return null;let[g,s]=t[0],[d,v]=t[0],x=void 0,m=void 0,a=void 0,y=void 0;for(let n=0;n<t.length;n++){const o=t[n],[i,e]=o;if(g=r$m(g,i),s=r$m(s,e),d=u$k(d,i),v=u$k(v,e),h&&o.length>2){const n=o[2];x=r$m(x,n),m=u$k(m,n);}if(f&&o.length>c){const n=o[c];a=r$m(x,n),y=u$k(m,n);}}return e?(x=x||0,m=m||0,l?(a=a||0,y=y||0,n[0]=g,n[1]=s,n[2]=x,n[3]=a,n[4]=d,n[5]=v,n[6]=m,n[7]=y,n):(n[0]=g,n[1]=s,n[2]=x,n[3]=d,n[4]=v,n[5]=m,n)):l?(a=a||0,y=y||0,n[0]=g,n[1]=s,n[2]=a,n[3]=d,n[4]=v,n[5]=y,n):(n[0]=g,n[1]=s,n[2]=d,n[3]=v,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$p=[];function m$b(n,i,t,m){return {xmin:n,ymin:i,xmax:t,ymax:m}}function u$l(n,i,t,m,u,o){return {xmin:n,ymin:i,zmin:t,xmax:m,ymax:u,zmax:o}}function o$A(n,i,t,m,u,o){return {xmin:n,ymin:i,mmin:t,xmax:m,ymax:u,mmax:o}}function r$n(n,i,t,m,u,o,r,x){return {xmin:n,ymin:i,zmin:t,mmin:m,xmax:u,ymax:o,zmax:r,mmax:x}}function x$7(n,i=!1,t=!1){return i?t?r$n(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]):u$l(n[0],n[1],n[2],n[3],n[4],n[5]):t?o$A(n[0],n[1],n[2],n[3],n[4],n[5]):m$b(n[0],n[1],n[2],n[3])}function a$m(n){return n?void 0!==(i=n).xmin&&void 0!==i.ymin&&void 0!==i.xmax&&void 0!==i.ymax?n:function(n){return void 0!==n.x&&void 0!==n.y}(n)?c$q(n):function(n){return void 0!==n.rings}(n)?e$r(n):function(n){return void 0!==n.paths}(n)?f$p(n):function(n){return void 0!==n.points}(n)?s$q(n):null:null;var i;}function s$q(i){const{hasZ:m,hasM:u,points:o}=i;return x$7(s$p(t$p,o,m,u),m,u)}function c$q(n){const{x:i,y:t,z:x,m:a}=n,s=null!=a;return null!=x?s?r$n(i,t,x,a,i,t,x,a):u$l(i,t,x,i,t,x):s?o$A(i,t,a,i,t,a):m$b(i,t,i,t)}function e$r(n){const{hasZ:m,hasM:u,rings:o}=n,r=h$h(t$p,o,m,u);return r?x$7(r,m,u):null}function f$p(n){const{hasZ:m,hasM:u,paths:o}=n,r=h$h(t$p,o,m,u);return r?x$7(r,m,u):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$d;function j$8(t){return !Array.isArray(t[0])}let R$3=d$d=class extends c$k{constructor(...t){super(...t),this.rings=[],this.type="polygon";}static fromExtent(t){const e=t.clone().normalize(),r=t.spatialReference;let s=!1,i=!1;e.map(t=>{t.hasZ&&(s=!0),t.hasM&&(i=!0);});const n={rings:e.map((function(t){const e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];if(s&&t.hasZ){const r=t.zmin+.5*(t.zmax-t.zmin);for(let t=0;t<e.length;t++)e[t].push(r);}if(i&&t.hasM){const r=t.mmin+.5*(t.mmax-t.mmin);for(let t=0;t<e.length;t++)e[t].push(r);}return e})),spatialReference:r};return s&&(n.hasZ=!0),i&&(n.hasM=!0),new d$d(n)}normalizeCtorArgs(t,e){let r,s,i=null,o=null;return t&&!Array.isArray(t)?(i=t.rings?t.rings:null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),r=t.hasZ,s=t.hasM):i=t,i=i||[],e=e||w$5.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),o=i[0]&&i[0][0],o&&(void 0===r&&void 0===s?(r=o.length>2,s=!1):void 0===r?r=!s&&o.length>3:void 0===s&&(s=!r&&o.length>3)),{rings:i,spatialReference:e,hasZ:r,hasM:s}}get centroid(){const t=e$p(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new _$7;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=e$r(this);if(!e)return null;const r=new z$4(e);return r.spatialReference=t,r}get isSelfIntersecting(){return g$b(this.rings)}writePaths(t,r){r.rings=s$4(this.rings);}addRing(t){if(!t)return;this.clearCache();const e=this.rings,r=e.length;if(j$8(t)){const s=[];for(let e=0,r=t.length;e<r;e++)s[e]=t[e].toArray();e[r]=s;}else e[r]=t.concat();return this}clone(){const t=new d$d;return t.spatialReference=this.spatialReference,t.rings=s$4(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}contains(t){return !!t&&(f$i(t,this.spatialReference)&&(t=h$d(t,this.spatialReference)),f$k(this,t))}isClockwise(t){let e;return e=j$8(t)?t.map(t=>this.hasZ?this.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y]):t,f$n(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.rings[t][e],s=this.hasZ,i=this.hasM;return s&&!i?new _$7(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new _$7(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new _$7(r[0],r[1],r[2],r[3],this.spatialReference):new _$7(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(this.clearCache(),h$f(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t].splice(e,0,r),this):this}removePoint(t,e){return this._validateInputs(t,e)?(this.clearCache(),new _$7(this.rings[t].splice(e,1)[0],this.spatialReference)):null}removeRing(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.rings.splice(t,1)[0],r=this.spatialReference;return e.map(t=>new _$7(t,r))}setPoint(t,e,r){return this._validateInputs(t,e)?(this.clearCache(),h$f(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[t][e]=r,this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.rings.length)return !1;if(null!=e){const s=this.rings[t];if(r&&(e<0||e>s.length))return !1;if(!r&&(e<0||e>=s.length))return !1}return !0}toJSON(t){return this.write(null,t)}};e([y$5({dependsOn:["hasM","hasZ","rings"]})],R$3.prototype,"cache",void 0),e([y$5({readOnly:!0,dependsOn:["cache"]})],R$3.prototype,"centroid",null),e([y$5({dependsOn:["cache"],readOnly:!0})],R$3.prototype,"extent",null),e([y$5({dependsOn:["cache"],readOnly:!0})],R$3.prototype,"isSelfIntersecting",null),e([y$5({type:[[[Number]]],json:{write:{isRequired:!0}}})],R$3.prototype,"rings",void 0),e([o$r("rings")],R$3.prototype,"writePaths",null),R$3=d$d=e([n$e("esri.geometry.Polygon")],R$3),R$3.prototype.toJSON.isDefaultToJSON=!0;var x$8=R$3;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$r;let u$m=c$r=class extends c$k{constructor(...t){super(...t),this.paths=[],this.type="polyline";}normalizeCtorArgs(t,e){let r,s,i=null,o=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),r=t.hasZ,s=t.hasM):i=t,i=i||[],e=e||w$5.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),o=i[0]&&i[0][0],o&&(void 0===r&&void 0===s?(r=o.length>2,s=!1):void 0===r?r=!s&&o.length>3:void 0===s&&(s=!r&&o.length>3)),{paths:i,spatialReference:e,hasZ:r,hasM:s}}get extent(){const{spatialReference:t}=this,e=f$p(this);if(!e)return null;const r=new z$4(e);return r.spatialReference=t,r}writePaths(t,r){r.paths=s$4(this.paths);}addPath(t){if(!t)return;this.clearCache();const e=this.paths,r=e.length;if(function(t){return !Array.isArray(t[0])}(t)){const s=[];for(let e=0,r=t.length;e<r;e++)s[e]=t[e].toArray();e[r]=s;}else e[r]=t.concat();return this}clone(){const t=new c$r;return t.spatialReference=this.spatialReference,t.paths=s$4(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],s=this.hasZ,i=this.hasM;return s&&!i?new _$7(r[0],r[1],r[2],void 0,this.spatialReference):i&&!s?new _$7(r[0],r[1],void 0,r[2],this.spatialReference):s&&i?new _$7(r[0],r[1],r[2],r[3],this.spatialReference):new _$7(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(this.clearCache(),h$f(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this):this}removePath(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.paths.splice(t,1)[0],r=this.spatialReference;return e.map(t=>new _$7(t,r))}removePoint(t,e){return this._validateInputs(t,e)?(this.clearCache(),new _$7(this.paths[t].splice(e,1)[0],this.spatialReference)):null}setPoint(t,e,r){return this._validateInputs(t,e)?(this.clearCache(),h$f(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this):this}_validateInputs(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return !1;if(null!=e){const s=this.paths[t];if(r&&(e<0||e>s.length))return !1;if(!r&&(e<0||e>=s.length))return !1}return !0}toJSON(t){return this.write(null,t)}};e([y$5({dependsOn:["hasM","hasZ","paths"]})],u$m.prototype,"cache",void 0),e([y$5({dependsOn:["cache"],readOnly:!0})],u$m.prototype,"extent",null),e([y$5({type:[[[Number]]],json:{write:{isRequired:!0}}})],u$m.prototype,"paths",void 0),e([o$r("paths")],u$m.prototype,"writePaths",null),u$m=c$r=e([n$e("esri.geometry.Polyline")],u$m),u$m.prototype.toJSON.isDefaultToJSON=!0;var f$q=u$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$q{constructor(t,o={ignoreUnknown:!1}){this.jsonToAPI=t,this.options=o,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=t=>this.fromJSON(t),this.write=(t,o,s)=>{const i=this.toJSON(t);void 0!==i&&(o[s]=i);},this.write.isJSONMapWriter=!0;}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const o={};for(const s in t)o[t[s]]=s;return o}getKeysSorted(t){const o=[];for(const s in t)o.push(s);return o.sort(),o}}function o$B(){return function(o){return new t$q(o,{ignoreUnknown:!0})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$v=o$B()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t$r=o$B()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function u$n(o){return void 0!==o.xmin&&void 0!==o.ymin&&void 0!==o.xmax&&void 0!==o.ymax}function s$r(o){return void 0!==o.points}function l$k(o){return void 0!==o.x&&void 0!==o.y}function f$r(o){return void 0!==o.paths}function y$g(o){return void 0!==o.rings}function p$i(m){return m?m instanceof c$k?m:l$k(m)?_$7.fromJSON(m):f$r(m)?f$q.fromJSON(m):y$g(m)?x$8.fromJSON(m):s$r(m)?u$h.fromJSON(m):u$n(m)?z$4.fromJSON(m):null:null}function d$e(o){return o?l$k(o)?"esriGeometryPoint":f$r(o)?"esriGeometryPolyline":y$g(o)?"esriGeometryPolygon":u$n(o)?"esriGeometryEnvelope":s$r(o)?"esriGeometryMultipoint":null:null}const v$7={esriGeometryPoint:_$7,esriGeometryPolyline:f$q,esriGeometryPolygon:x$8,esriGeometryEnvelope:z$4,esriGeometryMultipoint:u$h};function G$5(o){return o&&v$7[o]||null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$w={base:c$k,key:"type",typeMap:{extent:z$4,multipoint:u$h,point:_$7,polyline:f$q,polygon:x$8}},n$t=k(i$w);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$o;const g$d=new t$e(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0;}preventDefault(){this.cancellable&&(this.defaultPrevented=!0);}reset(e){this.defaultPrevented=!1,this.item=e;}},void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1;}),_$8=()=>{};function p$j(e){return e?e instanceof j$9?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function d$f(e){if(e&&e.length)return e[0]}function v$8(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function C$1(e,t,s,i){t&&t.forEach((t,r,n)=>{e.push(t),C$1(e,s.call(i,t,r,n),s,i);});}const y$h=new Set,A$8=new Set,b$2=new Set,x$9=new Map;let E$4=0,j$9=u$o=class extends i$n.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:E$4++});}static isCollection(e){return null!=e&&e instanceof u$o}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof u$o?{items:e}:e:{}}get items(){return this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...p$j(e)),this._emitAfterChanges(1));}hasEventListener(e){return "change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=_$8,s.removed=!0,e.splice(e.indexOf(s),1);}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return {remove(){s.remove();}}}add(e,t){if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...p$j(e)),this._emitAfterChanges(1),this}removeAll(){if(!this.length||this._emitBeforeChanges(2))return [];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return this._createNewInstance({items:this._items.map(s$4)})}concat(...e){const t=e.map(p$j);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(!this.length||this._emitBeforeChanges(2))return;const i=A(this._splice(0,this.length)),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(2);}every(e,t){return this._items.every(e,t)}filter(e,t){let s;return s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return l$9(this._items,e,t)}findIndex(e,t){return c$b(this._items,e,t)}flatten(e,t){const s=[];return C$1(s,this,e,t),new u$o(s)}forEach(e,t){return this._items.forEach(e,t)}getItemAt(e){return this._items[e]}getNextIndex(e){const t=this.length;return (e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return !!arguments.length&&-1!==this._items.indexOf(e,t)}indexOf(e,t=0){return this._items.indexOf(e,t)}join(e=","){return this._items.join(e)}lastIndexOf(e,t=this.length-1){return this._items.lastIndexOf(e,t)}map(e,t){const s=this._items.map(e,t);return new u$o({items:s})}reorder(e,t=this.length-1){const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4);}return e}}pop(){if(!this.length||this._emitBeforeChanges(2))return;const e=d$f(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return this.removeAt(this.indexOf(e))}removeAt(e){if(e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=d$f(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(!e||!e.length||this._emitBeforeChanges(2))return [];const t=e instanceof u$o?e.toArray():e,s=this._items,i=[],r=t.length;for(let e=0;e<r;e++){const r=t[e],n=s.indexOf(r);if(n>-1){const r=1+v$8(t,s,e+1,n+1),h=this._splice(n,r);h&&h.length>0&&i.push.apply(i,h),e+=r-1;}}return this._emitAfterChanges(2),i}reverse(){if(this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(!this.length||this._emitBeforeChanges(2))return;const e=d$f(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return this._items.some(e,t)}sort(e){if(!this.length||this._emitBeforeChanges(4))return this;const t=A(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return [];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return this._items.slice()}toJSON(){return this.toArray()}toLocaleString(){return this._items.toLocaleString()}toString(){return this._items.toString()}unshift(...e){return !e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.constructor.prototype.itemType;let n,h=void 0;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=k$3(()=>this._dispatchChange())),t){if(h=i.splice(e,t),this.hasEventListener("before-remove")){const t=g$d.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=h.length;s<r;s++)n=h[s],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(h.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);g$d.release(t);}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=g$d.acquire();e.target=this,e.cancellable=!1;const t=h.length;for(let s=0;s<t;s++)e.reset(h[s]),this.emit("after-remove",e);g$d.release(e);}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s);}s=e;}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),h=e===this.length;if(t||n){const r=g$d.acquire();r.target=this,r.cancellable=!0;const o=g$d.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit("before-add",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),n&&(o.reset(l),this.emit("after-add",o)))):(h?i.push(l):i.splice(e++,0,l),this._set("length",i.length),o.reset(l),this.emit("after-add",o));g$d.release(o),g$d.release(r);}else {if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set("length",i.length);}}return (s&&s.length||h&&h.length)&&this._notifyChangeEvent(s,h),h}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const s=g$d.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit("before-changes",s),t=s.defaultPrevented,g$d.release(s);}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=g$d.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),g$d.release(t);}}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t});}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;y$h.clear(),A$8.clear(),b$2.clear();for(const{added:t,removed:s}of e){if(t)if(0===b$2.size&&0===A$8.size)for(const e of t)y$h.add(e);else for(const e of t)A$8.has(e)?(b$2.add(e),A$8.delete(e)):b$2.has(e)||y$h.add(e);if(s)if(0===b$2.size&&0===y$h.size)for(const e of s)A$8.add(e);else for(const e of s)y$h.has(e)?y$h.delete(e):(b$2.delete(e),A$8.add(e));}const s=o$o.acquire();y$h.forEach(e=>{s.push(e);});const i=o$o.acquire();A$8.forEach(e=>{i.push(e);});const r=this._items,n=t.items,h=o$o.acquire();if(b$2.forEach(e=>{n.indexOf(e)!==r.indexOf(e)&&h.push(e);}),t.listeners&&(s.length||i.length||h.length)){const e={target:this,added:s,removed:i,moved:h},r=t.listeners.length;for(let s=0;s<r;s++){const i=t.listeners[s];i.removed||i.callback.call(this,e);}}o$o.release(s),o$o.release(i),o$o.release(h);}y$h.clear(),A$8.clear(),b$2.clear();}};j$9.ofType=t=>{if(!t)return u$o;if(x$9.has(t))return x$9.get(t);let s=null;if("function"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=" | "+i:s=i;}let n=class extends u$o{};n=e([n$e(`esri.core.Collection<${s}>`)],n);const o={Type:t,ensureType:"function"==typeof t?d$2(t):k(t)};return Object.defineProperty(n.prototype,"itemType",{value:o}),x$9.set(t,n),n},e([y$5()],j$9.prototype,"length",void 0),e([y$5()],j$9.prototype,"items",null),j$9=u$o=e([n$e("esri.core.Collection")],j$9);var L$2=j$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$u(n,t,e=L$2){return t||(t=new e),t===n||(t.removeAll(),!function(r){return r&&(Array.isArray(r)||"items"in r&&Array.isArray(r.items))}(n)?n&&t.add(n):t.addMany(n)),t}function t$s(r){return r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class a$n{constructor(s){this.instance=s,this._resolver=_$3(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp();},()=>{this._status=2,this._cleanUp();});}addResolvingPromise(s){this._resolvingPromises.push(s),this._tryResolve();}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject(d$5());}when(s,e){return this._resolver.promise.then(s,e)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null;}_tryResolve(){if(this.isFulfilled())return;const s=_$3(),i=[...this._resolvingPromises,A(s.promise)],r=this._allPromise=p$9(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance);},s=>{this.isFulfilled()||this._allPromise!==r||L$1(s)||this._resolver.reject(s);}),s.resolve();}}const _$9=e$1=>{let o=class extends e$1{constructor(...s){super(...s),this._promiseProps=new a$n(this),this.addResolvingPromise(D$1());}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(s,e){return v$3((s,e)=>{this._promiseProps.when(s,e);}).then(s,e)}catch(s){return this.when(null,s)}addResolvingPromise(s){s&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in s?s.when():s);}};return o=e([n$e("esri.core.Promise")],o),o};let u$p=class extends(_$9(h$c)){};u$p=e([n$e("esri.core.Promise")],u$p);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$q=i=>{let u=class extends i{constructor(...o){super(...o),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(v$3(o=>{const t=this.load.bind(this);this.load=s=>{const r=v$3((o,t)=>{P$1(s,t),this.destroyed&&t(new s$g("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(o,t);});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const o=this._loadController=g$4();t({signal:o.signal}),T$2(o.signal,()=>{this._promiseProps.abort();});}return o(),r};})),this.when(()=>{this._set("loadStatus","loaded"),this._loadController=null;},o=>{this._set("loadStatus","failed"),this._set("loadError",o),this._loadController=null;});}get loaded(){return "loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var o;return this.isFulfilled()||(this._set("loadError",new s$g("load:cancelled","Cancelled")),null==(o=this._loadController)||o.abort()),this}};return e([y$5({readOnly:!0,dependsOn:["loadStatus"]})],u.prototype,"loaded",null),e([y$5({readOnly:!0})],u.prototype,"loadError",void 0),e([y$5()],u.prototype,"loadStatus",void 0),e([y$5({type:[t$8],readOnly:!0})],u.prototype,"loadWarnings",null),u=e([n$e("esri.core.Loadable")],u),u};let c$s=class extends(u$q(u$p)){};c$s=e([n$e("esri.core.Loadable")],c$s),function(o){o.LoadableMixin=u$q,o.isLoadable=function(o){return !(!o||!o.load)};}(c$s||(c$s={}));var h$i=c$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var o$C,l$l,e$s;let i$x=void 0,r$o=void 0;const t$t=null!=(o$C=null==(l$l=e$1.esriConfig)?void 0:l$l.locale)?o$C:null==(e$s=e$1.dojoConfig)?void 0:e$s.locale;function u$r(){var o,l;return null!=(o=null!=t$t?t$t:null==(l=e$1.navigator)?void 0:l.language)?o:"en"}function c$t(){return void 0===r$o&&(r$o=u$r()),r$o}const s$s=[];function f$s(n){return s$s.push(n),{remove(){s$s.splice(s$s.indexOf(n),1);}}}const g$e=[];function h$j(n){return g$e.push(n),{remove(){s$s.splice(g$e.indexOf(n),1);}}}function p$k(){var n;const o=null!=(n=i$x)?n:u$r();r$o!==o&&(r$o=o,[...g$e].forEach(n=>{n.call(null,o);}),[...s$s].forEach(n=>{n.call(null,o);}));}null==e$1.addEventListener||e$1.addEventListener("languagechange",p$k);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let r$p=e$3.WeakMap;if(!i$1("es6-weakmap")){const e={},t=function(){return Math.floor(1e8*Math.random())},o=function(){let e=Math.floor(Date.now()%1e8);return function(){return "__wm"+t()+e+++"__"}}();r$p=class{constructor(e){if(this[Symbol.toStringTag]="WeakMap",this._name=o(),this._frozenEntries=[],e)if(n$h(e))for(let t=0;t<e.length;t++){const n=e[t];this.set(n[0],n[1]);}else for(const[t,n]of e)this.set(t,n);}_getFrozenEntryIndex(e){for(let t=0;t<this._frozenEntries.length;t++)if(this._frozenEntries[t].key===e)return t;return -1}delete(t){if(null==t)return !1;const n=t[this._name];if(n&&n.key===t&&n.value!==e)return n.value=e,!0;const r=this._getFrozenEntryIndex(t);return r>=0&&(this._frozenEntries.splice(r,1),!0)}get(t){if(null==t)return;const n=t[this._name];if(n&&n.key===t&&n.value!==e)return n.value;const r=this._getFrozenEntryIndex(t);return r>=0?this._frozenEntries[r].value:void 0}has(t){if(null==t)return !1;const n=t[this._name];if(Boolean(n&&n.key===t&&n.value!==e))return !0;return this._getFrozenEntryIndex(t)>=0}set(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");let n=e[this._name];return n&&n.key===e||(n=Object.create(null,{key:{value:e}}),Object.isFrozen(e)?this._frozenEntries.push(n):Object.defineProperty(e,this._name,{value:n})),n.value=t,this}};}var o$D=r$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$v={year:"numeric",month:"numeric",day:"numeric"},a$o={year:"numeric",month:"long",day:"numeric"},h$k={year:"numeric",month:"short",day:"numeric"},m$c={year:"numeric",month:"long",weekday:"long",day:"numeric"},i$y={hour:"numeric",minute:"numeric"},s$t={...i$y,second:"numeric"},l$m={"short-date":n$v,"short-date-short-time":{...n$v,...i$y},"short-date-short-time-24":{...n$v,...i$y,hour12:!1},"short-date-long-time":{...n$v,...s$t},"short-date-long-time-24":{...n$v,...s$t,hour12:!1},"short-date-le":n$v,"short-date-le-short-time":{...n$v,...i$y},"short-date-le-short-time-24":{...n$v,...i$y,hour12:!1},"short-date-le-long-time":{...n$v,...s$t},"short-date-le-long-time-24":{...n$v,...s$t,hour12:!1},"long-month-day-year":a$o,"long-month-day-year-short-time":{...a$o,...i$y},"long-month-day-year-short-time-24":{...a$o,...i$y,hour12:!1},"long-month-day-year-long-time":{...a$o,...s$t},"long-month-day-year-long-time-24":{...a$o,...s$t,hour12:!1},"day-short-month-year":h$k,"day-short-month-year-short-time":{...h$k,...i$y},"day-short-month-year-short-time-24":{...h$k,...i$y,hour12:!1},"day-short-month-year-long-time":{...h$k,...s$t},"day-short-month-year-long-time-24":{...h$k,...s$t,hour12:!1},"long-date":m$c,"long-date-short-time":{...m$c,...i$y},"long-date-short-time-24":{...m$c,...i$y,hour12:!1},"long-date-long-time":{...m$c,...s$t},"long-date-long-time-24":{...m$c,...s$t,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":i$y,"long-time":s$t},g$f=o$B()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),d$g=g$f.toJSON.bind(g$f),u$s=g$f.fromJSON.bind(g$f),c$u={ar:"ar-u-nu-latn-ca-gregory"};let D$4=new o$D,T$5=l$m["short-date-short-time"];function S$4(t){const o=t||T$5;if(!D$4.has(o)){const t=c$t(),r=c$u[c$t()]||t;D$4.set(o,new Intl.DateTimeFormat(r,o));}return D$4.get(o)}function L$3(t){return l$m[t]||null}function M$5(t,o){return S$4(o).format(t)}h$j(()=>{D$4=new o$D,T$5=l$m["short-date-short-time"];});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$z={ar:"ar-u-nu-latn"};let a$p=new o$D,e$t={};function m$d(n){const o=n||e$t;if(!a$p.has(o)){const t=c$t(),e=i$z[c$t()]||t;a$p.set(o,new Intl.NumberFormat(e,n));}return A(a$p.get(o))}function s$u(t={}){const n={};return null!=t.digitSeparator&&(n.useGrouping=t.digitSeparator),null!=t.places&&(n.minimumFractionDigits=n.maximumFractionDigits=t.places),n}function u$t(t,n){return m$d(n).format(t)}h$j(()=>{a$p=new o$D,e$t={};});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$A=n$7.getLogger("esri.intl");function s$v(e,s,c={}){const{format:a={}}=c;return o$7(e,r=>function(r,e,s){let c,a;const f=r.indexOf(":");-1===f?c=r.trim():(c=r.slice(0,f).trim(),a=r.slice(f+1).trim());if(!c)return "";const m=t$4(c,e);if(null==m)return "";const l=s[a]||s[c];if(l)return function(t,r){switch(r.type){case"date":return M$5(t,r.intlOptions);case"number":return u$t(t,r.intlOptions);default:return i$A.warn("missing format descriptor for key {key}"),u$u(t)}}(m,l);if(a)return function(t,r){switch(r.toLowerCase()){case"dateformat":return M$5(t);case"numberformat":return u$t(t);default:return i$A.warn("inline format is unsupported since 4.12: "+r),/^(dateformat|datestring)/i.test(r)?M$5(t):/^numberformat/i.test(r)?u$t(t):u$u(t)}}(m,a);return u$u(m)}(r,s,a))}function u$u(t){switch(typeof t){case"string":return t;case"number":return u$t(t);case"boolean":return ""+t;default:return t instanceof Date?M$5(t):""}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$u=!!Set.prototype.values,n$w=!!Array.from,o$E=e$u&&n$w?function(t){return Array.from(t.values())}:function(t){const r=new Array(t.size);let e=0;return t.forEach(t=>r[e++]=t),r},u$v=e$u?function(t){return new Set(t)}:function(t){const r=new Set;for(const e of t)r.add(e);return r};const f$t=e$u?function(t){if(0===t.size)throw new Error("Set is empty");return t.values().next().value}:function(r){if(0===r.size)throw new Error("Set is empty");let e=void 0,n=!1;return r.forEach(t=>{n||(e=t,n=!0);}),A(e)};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$w(r,t){return j$3(e$v(r),t)}function e$v(o){return _$2(t$5.baseUrl,t$5.assetsPath,o)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$q=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,c$v=u$v(["ar","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-BR","pt-PT","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),d$h=new Map;async function h$l(t){d$h.has(t)||d$h.set(t,async function(t){const e=/^(.*)\/t9n\/(.*)$/g.exec(t);if(!e)throw new s$g("esri-intl:invalid-bundle",`Missing "t9n" folder in locale bundle path "${t}"`);const n=e[1]+"/t9n/",i=e[2],o=l$n(c$t()),a=`${n}${i}.json`,c=o?`${n}${i}_${o}.json`:a;let d;try{d=await u$w(c);}catch(e){if(c===a)throw e;try{d=await u$w(a);}catch{throw new s$g("esri-intl:unknown-bundle",`Bundle "${t}" cannot be loaded`,{error:e})}}return d}(t));const e=d$h.get(t);return await f$u.add(e),e}function l$n(t){if(!a$q.test(t))return null;const[,s,e]=a$q.exec(t),n=s+(e?"-"+e.toUpperCase():"");return c$v.has(n)?n:c$v.has(s)?s:null}async function u$w(s){if(u$4(m$e.fetchBundleAsset))return m$e.fetchBundleAsset(s);return (await s$w(s,{responseType:"json"})).data}h$j(()=>{d$h.clear();});const f$u=new class{constructor(){this._numLoading=0;}async waitForAll(){this._dfd&&await this._dfd.promise;}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=_$3());}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null);}},m$e={cache:d$h};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$x;const m$f=new t$q({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let l$o=u$x=class extends h$c{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.num=10,this.query=null,this.sortField=null,this.start=1;}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t);}clone(){return new u$x({categories:this.categories?s$4(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,r){let e,s;if(this.categories&&(e=this.categories.map(t=>Array.isArray(t)?JSON.stringify(t):t)),this.extent){const t=h$d(this.extent,w$5.WGS84);t&&(s=`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`);}let o=this.query;!this.disableExtraQuery&&t.extraQuery&&(o="("+o+")"+t.extraQuery);const i={categories:e,bbox:s,q:o,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(i.sortField=this.sortField.split(",").map(t=>m$f.toJSON(t.trim())).join(","),i.sortOrder=this.sortOrder),{query:{...r,...i}}}};e([y$5()],l$o.prototype,"categories",void 0),e([y$5()],l$o.prototype,"disableExtraQuery",void 0),e([y$5({type:z$4})],l$o.prototype,"extent",void 0),e([y$5()],l$o.prototype,"num",void 0),e([y$5()],l$o.prototype,"query",void 0),e([y$5()],l$o.prototype,"sortField",void 0),e([y$5()],l$o.prototype,"sortOrder",null),e([y$5()],l$o.prototype,"start",void 0),l$o=u$x=e([n$e("esri.portal.PortalQueryParams")],l$o);var c$w=l$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$w=class extends h$c{constructor(r){super(r),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null;}};e([y$5()],e$w.prototype,"nextQueryParams",void 0),e([y$5()],e$w.prototype,"queryParams",void 0),e([y$5()],e$w.prototype,"results",void 0),e([y$5()],e$w.prototype,"total",void 0),e$w=e([n$e("esri.portal.PortalQueryResult")],e$w);var p$l=e$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$m=class extends a$h{constructor(r){super(r),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null;}get url(){const r=this.get("portal.restUrl");return r?`${r}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new s$g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};e([y$5({type:Date})],p$m.prototype,"created",void 0),e([y$5()],p$m.prototype,"id",void 0),e([y$5()],p$m.prototype,"portal",void 0),e([y$5()],p$m.prototype,"title",void 0),e([y$5({dependsOn:["portal.restUrl"],readOnly:!0})],p$m.prototype,"url",null),e([y$5()],p$m.prototype,"username",void 0),p$m=e([n$e("esri.portal.PortalFolder")],p$m);var l$p=p$m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let l$q=class extends a$h{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get url(){const t=this.get("portal.restUrl");return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal._request(this.url+"/categorySchema",t).then(r=>{const e=r.categorySchema||[];return e.some(t=>"contentCategorySetsGroupQuery.LivingAtlas"===t.source)?this._fetchCategorySchemaSet("LivingAtlas",t):e})}fetchMembers(t){return this.portal._request(this.url+"/users",t)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+="&w="+t),r}toJSON(){throw new s$g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(t,e){let o=d$2(c$w,t);return parseFloat(this.portal.currentVersion)>5?(o=o||new c$w,this.portal._queryPortal(`/content/groups/${this.id}/search`,o,"PortalItem",e)):(o=o?o.clone():new c$w,o.query="group:"+this.id+(o.query?" "+o.query:""),this.portal.queryItems(o,e))}_fetchCategorySchemaSet(t,r){return this.portal._fetchSelf(this.portal.authMode,!0,r).then(t=>{const e=t.contentCategorySetsGroupQuery;if(e){const t=new c$w;return t.disableExtraQuery=!0,t.num=1,t.query=e,this.portal.queryGroups(t,r)}throw new s$g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(e=>{if(e.total){const o=e.results[0],s=new c$w;return s.num=1,s.query=`typekeywords:"${t}"`,o.queryItems(s,r)}throw new s$g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(t=>{if(t.total){return t.results[0].fetchData("json",r).then(t=>{const r=t&&t.categorySchema;return r&&r.length?r:[]})}return []})}};e([y$5()],l$q.prototype,"access",void 0),e([y$5({type:Date})],l$q.prototype,"created",void 0),e([y$5()],l$q.prototype,"description",void 0),e([y$5()],l$q.prototype,"id",void 0),e([y$5()],l$q.prototype,"isInvitationOnly",void 0),e([y$5({type:Date})],l$q.prototype,"modified",void 0),e([y$5()],l$q.prototype,"owner",void 0),e([y$5()],l$q.prototype,"portal",void 0),e([y$5()],l$q.prototype,"snippet",void 0),e([y$5()],l$q.prototype,"sortField",void 0),e([y$5()],l$q.prototype,"sortOrder",void 0),e([y$5()],l$q.prototype,"tags",void 0),e([y$5()],l$q.prototype,"thumbnail",void 0),e([y$5({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],l$q.prototype,"thumbnailUrl",null),e([y$5()],l$q.prototype,"title",void 0),e([y$5({dependsOn:["portal.restUrl"],readOnly:!0})],l$q.prototype,"url",null),l$q=e([n$e("esri.portal.PortalGroup")],l$q);var p$n=l$q;

var PortalGroup = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': p$n
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$r;let d$i=a$r=class extends a$h{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null;}get thumbnailUrl(){const t=this.url,r=this.thumbnail;return t&&r?this.portal._normalizeUrl(`${t}/info/${r}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const r=t&&t.item,e=t&&t.data,o=t&&t.folder,s={method:"post"};r&&(s.query=r.createPostQuery(),null!=e&&("string"==typeof e?s.query.text=e:"object"==typeof e&&(s.query.text=JSON.stringify(e))));let l=this.userContentUrl;return o&&(l+="/"+("string"==typeof o?o:o.id)),this.portal._request(l+"/addItem",s).then(t=>(r.id=t.id,r.portal=this.portal,r.loaded?r.reload():r.load()))}deleteItem(t){let r=this.userContentUrl;return t.ownerFolder&&(r+="/"+t.ownerFolder),this.portal._request(r+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null;})}deleteItems(t){const r=this.userContentUrl+"/deleteItems",e=t.map(t=>t.id);if(e.length){const o={method:"post",query:{items:e.join(",")}};return this.portal._request(r,o).then(()=>{t.forEach(t=>{t.id=null,t.portal=null;});})}return D$1(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(t=>{let r;return r=t&&t.folders?t.folders.map(t=>{const r=l$p.fromJSON(t);return r.portal=this.portal,r}):[],r})}fetchGroups(){return this.portal._request(this.url).then(t=>{let r;return r=t&&t.groups?t.groups.map(t=>{const r=p$n.fromJSON(t);return r.portal=this.portal,r}):[],r})}fetchItems(t){t||(t={});let r,e=this.userContentUrl;return t.folder&&(e+="/"+t.folder.id),Promise.resolve().then(function () { return PortalItem; }).then(({default:o})=>{r=o;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal._request(e,{query:s})}).then(t=>{let e;return t&&t.items?(e=t.items.map(t=>{const e=r.fromJSON(t);return e.portal=this.portal,e}),p$9(e.map(t=>t.load())).catch(t=>t).then(()=>({items:e,nextStart:t.nextStart,total:t.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let r=this.thumbnailUrl;return r&&t&&(r+="&w="+t),r}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new p$n({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):B$2(new s$g("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new s$g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const r=new a$r;return r.sourceJSON=t,r.read(t),r}};e([y$5()],d$i.prototype,"access",void 0),e([y$5({type:Date})],d$i.prototype,"created",void 0),e([y$5()],d$i.prototype,"culture",void 0),e([y$5()],d$i.prototype,"description",void 0),e([y$5()],d$i.prototype,"email",void 0),e([y$5()],d$i.prototype,"favGroupId",void 0),e([y$5()],d$i.prototype,"fullName",void 0),e([y$5({type:Date})],d$i.prototype,"modified",void 0),e([y$5()],d$i.prototype,"orgId",void 0),e([y$5()],d$i.prototype,"portal",void 0),e([y$5()],d$i.prototype,"preferredView",void 0),e([y$5()],d$i.prototype,"privileges",void 0),e([y$5()],d$i.prototype,"region",void 0),e([y$5()],d$i.prototype,"role",void 0),e([y$5()],d$i.prototype,"roleId",void 0),e([y$5()],d$i.prototype,"sourceJSON",void 0),e([y$5()],d$i.prototype,"thumbnail",void 0),e([y$5({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],d$i.prototype,"thumbnailUrl",null),e([y$5()],d$i.prototype,"units",void 0),e([y$5({dependsOn:["portal.restUrl"],readOnly:!0})],d$i.prototype,"userContentUrl",null),e([y$5({dependsOn:["portal.restUrl"],readOnly:!0})],d$i.prototype,"url",null),e([y$5()],d$i.prototype,"username",void 0),e([y$5()],d$i.prototype,"userType",void 0),d$i=a$r=e([n$e("esri.portal.PortalUser")],d$i);var h$m=d$i;

var PortalUser = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': h$m
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var w$6;let G$6;const b$3={PortalGroup:()=>Promise.resolve().then(function () { return PortalGroup; }),PortalItem:()=>Promise.resolve().then(function () { return PortalItem; }),PortalUser:()=>Promise.resolve().then(function () { return PortalUser; })};let T$6=w$6=class extends(i$p(h$i)){constructor(t){super(t),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=t$5.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null;}normalizeCtorArgs(t){return "string"==typeof t?{url:t}:t}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null);}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)-1===t$5.request.trustedServers.indexOf(e)&&t$5.request.trustedServers.push(e);return t}readDefaultBasemap(t){if(t){const e=G$6.fromJSON(t);return e.portalItem={portal:this},e}return null}readDefaultVectorBasemap(t){if(t){const e=G$6.fromJSON(t);return e.portalItem={portal:this},e}return null}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?" AND orgid:"+this.id:null}get isOrganization(){return !!this.access}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest";}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t?t.toLowerCase():t}readUser(t){let e=null;return t&&(e=h$m.fromJSON(t),e.portal=this),e}load(t){const e=Promise.resolve().then(function () { return Basemap; }).then(({default:e})=>{j$2(t),G$6=e;}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,t)).then(t=>{if(i$g){const t=i$g;this.credential=t.findCredential(this.restUrl),this.credential||this.authMode!==w$6.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=t.on("credential-create",()=>{t.findCredential(this.restUrl)&&this._signIn();}));}this.sourceJSON=t,this.read(t);});return this.addResolvingPromise(e),D$1(this)}async createClosestFacilityTask(){await this.load();const t=this._getHelperServiceUrl("closestFacility");return new((await import('./chunks/ClosestFacilityTask-fc8a5f07.js')).default)(t)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await import('./chunks/ElevationLayer-80f36f48.js')).default;return t?t.map(t=>new e({id:t.id,url:t.url})):[]}async createGeometryService(){await this.load();const t=this._getHelperServiceUrl("geometry");return new((await import('./chunks/GeometryService-72426822.js')).default)({url:t})}async createPrintTask(){await this.load();const t=this._getHelperServiceUrl("printTask");return new((await import('./chunks/PrintTask-8a2552e8.js')).default)(t)}async createRouteTask(){await this.load();const t=this._getHelperServiceUrl("route");return new((await import('./chunks/RouteTask-f433b856.js')).default)(t)}async createServiceAreaTask(){await this.load();const t=this._getHelperServiceUrl("serviceArea");return new((await import('./chunks/ServiceAreaTask-9d53da41.js')).default)(t)}fetchBasemaps(t,e){const r=new c$w;return r.query=t||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,e).then(t=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',t.total){const o=t.results[0];return r.sortField=o.sortField||"name",r.sortOrder=o.sortOrder||"desc",o.queryItems(r,e)}return null}).then(t=>{let e;return e=t&&t.total?t.results.filter(t=>"Web Map"===t.type).map(t=>new G$6({portalItem:t})):[],e})}fetchCategorySchema(t){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",t).then(t=>t.categorySchema):y$8(t)?B$2(d$5()):D$1([])}fetchFeaturedGroups(t){const e=this.featuredGroups,r=new c$w;if(r.num=100,r.sortField="title",e&&e.length){const o=[];for(const t of e)o.push(`(title:"${t.title}" AND owner:${t.owner})`);return r.query=o.join(" OR "),this.queryGroups(r,t).then(t=>t.results)}return y$8(t)?B$2(d$5()):D$1([])}fetchRegions(t){const e=this.user&&this.user.culture||this.culture||c$t();return this._request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}static getDefault(){return w$6._default&&!w$6._default.destroyed||(w$6._default=new w$6),w$6._default}queryGroups(t,e){return this._queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this._queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this._queryPortal("/community/users",t,"PortalUser",e)}toJSON(){throw new s$g("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new w$6({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new s$g("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}_getHelperServiceUrl(t){const e=this._getHelperService(t);if(!e.url)throw new s$g("portal:service-url-not-found",`The \`helperServices\` entry "${t}" does not include a \`url\` value`);return e.url}_fetchSelf(t=this.authMode,e=!1,r){const o=this.restUrl+"/portals/self",s={authMode:t,query:{culture:c$t().toLowerCase()},...r};return "auto"===s.authMode&&(s.authMode="no-prompt"),e&&(s.query.default=!0),this._request(o,s)}_queryPortal(t,e,r,o){const i=d$2(c$w,e),a=e=>this._request(this.restUrl+t,{...i.toRequestOptions(this),...o}).then(t=>{const r=i.clone();return r.start=t.nextStart,new p$l({nextQueryParams:r,queryParams:i,total:t.total,results:w$6._resultsToTypedArray(e,{portal:this},t,o)})}).then(t=>p$9(t.results.map(e=>"function"==typeof e.when?e.when():t)).then(()=>t,e=>(E$1(e),t)));return r&&b$3[r]?b$3[r]().then(({default:t})=>(j$2(o),a(t))):a()}_signIn(){if(this.authMode===w$6.AUTH_MODE_ANONYMOUS)return B$2(new s$g("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return B$2(this.loadError);const t=t=>D$1().then(()=>"not-loaded"===this.loadStatus?(t||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(t=>{t&&(this.sourceJSON=t,this.read(t));});return i$g?i$g.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.indexOf("?")>-1?"&":"?")+"token="+e:t)}_requestToTypedArray(t,e,r){return this._request(t,e).then(t=>{const e=w$6._resultsToTypedArray(r,{portal:this},t);return p$9(e.map(e=>"function"==typeof e.when?e.when():t)).then(()=>e,()=>e)})}_request(t,e={}){const r={f:"json",...e.query},{authMode:o=(this.authMode===w$6.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:s=null,cacheBust:i=!1,method:a="auto",responseType:l="json",signal:n}=e,u={authMode:o,body:s,cacheBust:i,method:a,query:r,responseType:l,timeout:0,signal:n};return j$3(this._normalizeSSL(t),u).then(t=>t.data)}static _resultsToTypedArray(t,r,s,i){let a;if(s){const l=u$4(i)?i.signal:null;a=s.listings||s.notifications||s.userInvitations||s.tags||s.items||s.groups||s.comments||s.provisions||s.results||s.relatedItems||s,(t||r)&&(a=a.map(o=>{const s=l$3(t?t.fromJSON(o):o,r);return "function"==typeof s.load&&s.load(l),s}));}else a=[];return a}};T$6.AUTH_MODE_ANONYMOUS="anonymous",T$6.AUTH_MODE_AUTO="auto",T$6.AUTH_MODE_IMMEDIATE="immediate",e([y$5()],T$6.prototype,"access",void 0),e([y$5()],T$6.prototype,"allSSL",void 0),e([y$5()],T$6.prototype,"authMode",void 0),e([y$5()],T$6.prototype,"authorizedCrossOriginDomains",void 0),e([e$l("authorizedCrossOriginDomains")],T$6.prototype,"readAuthorizedCrossOriginDomains",null),e([y$5()],T$6.prototype,"basemapGalleryGroupQuery",void 0),e([y$5()],T$6.prototype,"bingKey",void 0),e([y$5()],T$6.prototype,"canListApps",void 0),e([y$5()],T$6.prototype,"canListData",void 0),e([y$5()],T$6.prototype,"canListPreProvisionedItems",void 0),e([y$5()],T$6.prototype,"canProvisionDirectPurchase",void 0),e([y$5()],T$6.prototype,"canSearchPublic",void 0),e([y$5()],T$6.prototype,"canShareBingPublic",void 0),e([y$5()],T$6.prototype,"canSharePublic",void 0),e([y$5()],T$6.prototype,"canSignInArcGIS",void 0),e([y$5()],T$6.prototype,"canSignInIDP",void 0),e([y$5()],T$6.prototype,"colorSetsGroupQuery",void 0),e([y$5()],T$6.prototype,"commentsEnabled",void 0),e([y$5({type:Date})],T$6.prototype,"created",void 0),e([y$5()],T$6.prototype,"credential",void 0),e([y$5()],T$6.prototype,"culture",void 0),e([y$5()],T$6.prototype,"currentVersion",void 0),e([y$5()],T$6.prototype,"customBaseUrl",void 0),e([y$5()],T$6.prototype,"defaultBasemap",void 0),e([e$l("defaultBasemap")],T$6.prototype,"readDefaultBasemap",null),e([y$5({type:z$4})],T$6.prototype,"defaultExtent",void 0),e([y$5()],T$6.prototype,"defaultVectorBasemap",void 0),e([e$l("defaultVectorBasemap")],T$6.prototype,"readDefaultVectorBasemap",null),e([y$5()],T$6.prototype,"description",void 0),e([y$5()],T$6.prototype,"eueiEnabled",void 0),e([y$5({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],T$6.prototype,"extraQuery",null),e([y$5()],T$6.prototype,"featuredGroups",void 0),e([y$5()],T$6.prototype,"featuredItemsGroupQuery",void 0),e([y$5()],T$6.prototype,"galleryTemplatesGroupQuery",void 0),e([y$5()],T$6.prototype,"livingAtlasGroupQuery",void 0),e([y$5()],T$6.prototype,"hasCategorySchema",void 0),e([y$5()],T$6.prototype,"helpBase",void 0),e([y$5()],T$6.prototype,"helperServices",void 0),e([y$5()],T$6.prototype,"helpMap",void 0),e([y$5()],T$6.prototype,"homePageFeaturedContent",void 0),e([y$5()],T$6.prototype,"homePageFeaturedContentCount",void 0),e([y$5()],T$6.prototype,"httpPort",void 0),e([y$5()],T$6.prototype,"httpsPort",void 0),e([y$5()],T$6.prototype,"id",void 0),e([y$5()],T$6.prototype,"ipCntryCode",void 0),e([y$5({dependsOn:["access"],readOnly:!0})],T$6.prototype,"isOrganization",null),e([y$5()],T$6.prototype,"isPortal",void 0),e([y$5()],T$6.prototype,"isReadOnly",void 0),e([y$5()],T$6.prototype,"layerTemplatesGroupQuery",void 0),e([y$5()],T$6.prototype,"maxTokenExpirationMinutes",void 0),e([y$5({type:Date})],T$6.prototype,"modified",void 0),e([y$5()],T$6.prototype,"name",void 0),e([y$5()],T$6.prototype,"portalHostname",void 0),e([y$5()],T$6.prototype,"portalMode",void 0),e([y$5()],T$6.prototype,"portalProperties",void 0),e([y$5()],T$6.prototype,"region",void 0),e([y$5({dependsOn:["url"],readOnly:!0})],T$6.prototype,"restUrl",null),e([y$5()],T$6.prototype,"rotatorPanels",void 0),e([y$5()],T$6.prototype,"showHomePageDescription",void 0),e([y$5()],T$6.prototype,"sourceJSON",void 0),e([y$5()],T$6.prototype,"staticImagesUrl",void 0),e([y$5()],T$6.prototype,"stylesGroupQuery",void 0),e([y$5()],T$6.prototype,"supportsHostedServices",void 0),e([y$5()],T$6.prototype,"symbolSetsGroupQuery",void 0),e([y$5()],T$6.prototype,"templatesGroupQuery",void 0),e([y$5()],T$6.prototype,"thumbnail",void 0),e([y$5({dependsOn:["restUrl","thumbnail"],readOnly:!0})],T$6.prototype,"thumbnailUrl",null),e([y$5()],T$6.prototype,"units",void 0),e([y$5()],T$6.prototype,"url",void 0),e([y$5()],T$6.prototype,"urlKey",void 0),e([e$l("urlKey")],T$6.prototype,"readUrlKey",null),e([y$5()],T$6.prototype,"user",void 0),e([e$l("user")],T$6.prototype,"readUser",null),e([y$5()],T$6.prototype,"useStandardizedQuery",void 0),e([y$5()],T$6.prototype,"useVectorBasemaps",void 0),e([y$5()],T$6.prototype,"vectorBasemapGalleryGroupQuery",void 0),T$6=w$6=e([n$e("esri.portal.Portal")],T$6);var C$2=T$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$x(n,t,o){return x$1(n.map((r,n)=>t.apply(o,[r,n])))}function t$u(n,t,o){return x$1(n.map((r,n)=>t.apply(o,[r,n]))).then(r=>r.map(r=>r.value))}function o$F(r){return r.then(r=>({ok:!0,value:r})).catch(r=>({ok:!1,error:r}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function i$B(o,a){return await o.load(),n$y(o,a)}async function n$y(i,n){const s=[],f=(...l)=>{for(const t of l)t$6(t)||(Array.isArray(t)?f(...t):L$2.isCollection(t)?t.forEach(o=>f(o)):h$i.isLoadable(t)&&s.push(t));};n(f);let c=null;if(await t$u(s,async o=>{var a;!1!==(await o$F((a=o,"loadAll"in a&&"function"==typeof a.loadAll?o.loadAll():o.load()))).ok||c||(c=o);}),c)throw c.loadError;return i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$n=n$7.getLogger("esri.portal.PortalItemResource");let n$z=class extends h$c{constructor(t){super(t),this.portalItem=null;}normalizeCtorArgs(t){return t&&t.portalItem&&t.path?{...t,path:this.normalizePath(t.path,t.portalItem)}:t}set path(t){u$4(t)&&G(t)?h$n.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t);}_castPath(t){return this.normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?"./resources/"+this.path:null}fetch(t="json",r){const s=this.url;if(t$6(s))throw new s$g("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(s,{responseType:t,signal:w(r,"signal")})}async update(t,r){return (await Promise.resolve().then(function () { return resourceUtils; })).addOrUpdateResource(this,"update",t,r)}hasPath(){return u$4(this.path)}normalizePath(t,o){return t$6(t)?t:(t=t.replace(/^\/+/,""),u$4(o)&&G(t)&&(t=M$1(t,o.itemUrl)),t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};e([y$5()],n$z.prototype,"portalItem",void 0),e([y$5({type:String,value:null})],n$z.prototype,"path",null),e([i$b("path")],n$z.prototype,"_castPath",null),e([y$5({type:String,readOnly:!0,dependsOn:["portalItem","path"]})],n$z.prototype,"url",null),e([y$5({type:String,readOnly:!0,dependsOn:["portalItem","path"]})],n$z.prototype,"itemRelativeUrl",null),n$z=e([n$e("esri.portal.PortalItemResource")],n$z);var d$j=n$z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$x=class extends h$c{constructor(r){super(r),this.created=null,this.rating=null;}};e([y$5()],e$x.prototype,"created",void 0),e([y$5()],e$x.prototype,"rating",void 0),e$x=e([n$e("esri.portal.PortalRating")],e$x);var p$o=e$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var b$4;let x$a=b$4=class extends(i$p(h$i)){constructor(e){super(e),this.access=null,this.accessInformation=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null;}static from(e){return y$3(b$4,e)}destroy(){this.portal=null;}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return "Feature Service"===e||"Feature Collection"===e?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===e?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r}readExtent(e){return e&&e.length?new z$4(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[];let r,i=!1,o=!1,s=!1,a=!1,n=!1;return e.indexOf("service")>0||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(i=t.indexOf("Hosted Service")>-1,"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(o=t.indexOf("Table")>-1,s=t.indexOf("Route Layer")>-1,a=t.indexOf("Markup")>-1,n=-1!==t.indexOf("Spatiotemporal"),r=n&&o?"spatiotemporaltable":o?"table":s?"routelayer":a?"markup":n?"spatiotemporal":i?"featureshosted":"features"):r="map service"===e||"wms"===e||"wmts"===e?i||t.indexOf("Tiled")>-1||"wmts"===e?"maptiles":"mapimages":"scene service"===e?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":"sceneweblayer":"image service"===e?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"geoprocessing service"===e&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):r="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&t.indexOf("ArcGIS Pro")>-1||"explorer map"===e&&t.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"360 vr experience"===e||"netcdf"===e||"administrative report"===e?"datafiles":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"form"===e||"document link"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===e?"layersgray":"scene package"===e?"scenepackage":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":"hub initiative"===e?"hubinitiative":"hubpage"===e?"hubpage":"hub event"===e?"hubevent":"hub site application"===e?"hubsite":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"style"===e?"style":"desktop style"===e?"desktopstyle":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===e?"missionreport":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"workflow"===e?"workflow":"insights script"===e?"insightsscript":"kernel gateway connection"===e?"kernelgatewayconnection":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"maps",r?e$v("esri/images/portal/"+r+"16.png"):null}get isLayer(){return ["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");if(!t)return null;return `${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`}load(e){this.portal||(this.portal=C$2.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:u$4(e)?e.signal:null}):{}).then(e=>{this.sourceJSON=e,this.read(e);});return this.addResolvingPromise(t),D$1(this)}addRating(e){const t={method:"post",query:{}};return e instanceof p$o&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new p$o({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:s$4(this.applicationProxies),avgRating:this.avgRating,categories:s$4(this.categories),created:s$4(this.created),culture:this.culture,description:this.description,extent:s$4(this.extent),groupCategories:s$4(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:s$4(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:s$4(this.screenshots),size:this.size,snippet:this.snippet,tags:s$4(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:s$4(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new b$4({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",e).then(e=>null!=e.rating?(e.created=new Date(e.created),new p$o(e)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:e,...t},b$4)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const e in r.query)null===r.query[e]&&(r.query[e]="");return r.query.clearEmptyFields=!0,null!=t&&("string"==typeof t?r.query.text=t:"object"==typeof t&&(r.query.text=JSON.stringify(t))),this.portal._request(this.userItemUrl+"/update",r).then(()=>this.reload())}):B$2(new s$g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,o={method:"post"};if("string"==typeof t)K(t)?o.query={data:t}:o.query={url:D(t)},u$4(r)&&(o.query.filename=r);else {const e=new FormData;u$4(r)?e.append("file",t,r):e.append("file",t),o.body=e;}return this.portal._request(this.userItemUrl+"/updateThumbnail",o).then(()=>this.reload())}):B$2(new s$g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return (await Promise.resolve().then(function () { return resourceUtils; })).fetchResources(this,e,t)}async addResource(e,t,r){const i=await Promise.resolve().then(function () { return resourceUtils; });return e.portalItem=this,i.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await Promise.resolve().then(function () { return resourceUtils; });if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new s$g("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return (await Promise.resolve().then(function () { return resourceUtils; })).removeAllResources(this,e)}resourceFromPath(e){return new d$j({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return p$1(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new b$4({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)"tags"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"typeKeywords"===t&&null!==e[t]&&(e[t]=e[t].join(", ")),"extent"===t&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};e([y$5({type:["private","shared","org","public"]})],x$a.prototype,"access",void 0),e([y$5()],x$a.prototype,"accessInformation",void 0),e([y$5({json:{read:{source:"appProxies"}}})],x$a.prototype,"applicationProxies",void 0),e([y$5()],x$a.prototype,"avgRating",void 0),e([y$5()],x$a.prototype,"categories",void 0),e([y$5({type:Date})],x$a.prototype,"created",void 0),e([y$5()],x$a.prototype,"culture",void 0),e([y$5()],x$a.prototype,"description",void 0),e([y$5({dependsOn:["type","typeKeywords"],readOnly:!0})],x$a.prototype,"displayName",null),e([y$5({type:z$4})],x$a.prototype,"extent",void 0),e([e$l("extent")],x$a.prototype,"readExtent",null),e([y$5()],x$a.prototype,"groupCategories",void 0),e([y$5({dependsOn:["type","typeKeywords"],readOnly:!0})],x$a.prototype,"iconUrl",null),e([y$5()],x$a.prototype,"id",void 0),e([y$5({dependsOn:["type"],readOnly:!0})],x$a.prototype,"isLayer",null),e([y$5()],x$a.prototype,"itemControl",void 0),e([y$5({dependsOn:["portal.restUrl","id"],readOnly:!0})],x$a.prototype,"itemUrl",null),e([y$5()],x$a.prototype,"licenseInfo",void 0),e([y$5({type:Date})],x$a.prototype,"modified",void 0),e([y$5()],x$a.prototype,"name",void 0),e([y$5()],x$a.prototype,"numComments",void 0),e([y$5()],x$a.prototype,"numRatings",void 0),e([y$5()],x$a.prototype,"numViews",void 0),e([y$5()],x$a.prototype,"owner",void 0),e([y$5()],x$a.prototype,"ownerFolder",void 0),e([y$5({type:C$2})],x$a.prototype,"portal",void 0),e([y$5()],x$a.prototype,"screenshots",void 0),e([y$5()],x$a.prototype,"size",void 0),e([y$5()],x$a.prototype,"snippet",void 0),e([y$5()],x$a.prototype,"sourceJSON",void 0),e([y$5()],x$a.prototype,"tags",void 0),e([y$5()],x$a.prototype,"thumbnail",void 0),e([y$5({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],x$a.prototype,"thumbnailUrl",null),e([y$5()],x$a.prototype,"title",void 0),e([y$5()],x$a.prototype,"type",void 0),e([y$5()],x$a.prototype,"typeKeywords",void 0),e([y$5()],x$a.prototype,"url",void 0),e([y$5({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],x$a.prototype,"userItemUrl",null),x$a=b$4=e([n$e("esri.portal.PortalItem")],x$a);var O$3=x$a;

var PortalItem = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': O$3
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function a$s(e){if(!e)return;const a=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,i=await h$l("esri/t9n/basemaps");return i[e]||i[a]}const i$C={streets:{id:"streets",thumbnailUrl:e$v("esri/images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",thumbnailUrl:e$v("esri/images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",thumbnailUrl:e$v("esri/images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",thumbnailUrl:e$v("esri/images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",thumbnailUrl:e$v("esri/images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",thumbnailUrl:e$v("esri/images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",thumbnailUrl:e$v("esri/images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",thumbnailUrl:e$v("esri/images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",thumbnailUrl:e$v("esri/images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",thumbnailUrl:e$v("esri/images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",thumbnailUrl:e$v("esri/images/basemap/dark-gray-vector.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",thumbnailUrl:e$v("esri/images/basemap/gray-vector.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",thumbnailUrl:e$v("esri/images/basemap/streets-vector.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",thumbnailUrl:e$v("esri/images/basemap/topo-vector.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",thumbnailUrl:e$v("esri/images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",thumbnailUrl:e$v("esri/images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",thumbnailUrl:e$v("esri/images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$r=u$v(["bing-maps","open-street-map","tile","unknown","unsupported","vector-tile","web-tile"]),a$t=u$v(["feature","group","tile","unknown","unsupported","vector-tile","web-tile"]);function u$y(e){return !("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}function p$p(e,n){if(n.restrictedWebMapWriting){const r=function(e){return "basemap"===e.layerContainerType?l$r:"operational-layers"===e.layerContainerType?a$t:null}(n);return !u$4(r)||r.has(e.type)&&!u$y(e)}return !0}function m$g(e,t){if(function(e,t){if(u$y(e)){const i=t$4("featureCollection.layers",t),o=i&&i[0]&&i[0].layerDefinition;o&&("maxScale"in e&&(o.maxScale=o$i(e.maxScale)),"minScale"in e&&(o.minScale=o$i(e.minScale)));}else "group"!==e.type&&("maxScale"in e&&(t.maxScale=o$i(e.maxScale)),"minScale"in e&&(t.minScale=o$i(e.minScale)));}(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=o$i(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type)if(u$y(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled);}else t.showLegend=e.legendEnabled;}function d$k(n,r,o){if(!("write"in n)||!n.write)return o&&o.messages&&o.messages.push(new s$g("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if(p$p(n,o)){const e={};return n.write(e,o)?e:null}return u$4(r)&&m$g(n,r=s$4(r)),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var S$5;let v$9=0;const U$2=n$7.getLogger("esri.Basemap");let x$b=S$5=class extends(i$p(h$i)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+v$9++,this.baseLayers=new L$2,this.referenceLayers=new L$2;const r=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&U$2.error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`);},t=e=>{e.parent=null;};this.baseLayers.on("after-add",e=>r(e.item)),this.referenceLayers.on("after-add",e=>r(e.item)),this.baseLayers.on("after-remove",e=>t(e.item)),this.referenceLayers.on("after-remove",e=>t(e.item));}initialize(){this.when().catch(e=>{U$2.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e);}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){var e;const r=this.baseLayers.removeAll();for(const e of r)e.destroy();const t=this.referenceLayers.removeAll();for(const e of t)e.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(e=this.portalItem)||e.destroy(),this.portalItem=null;}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",n$u(e,this._get("baseLayers")));}_writeBaseLayers(e,r,s){const o=[];e?(s={...s,layerContainerType:"basemap"},this.baseLayers.forEach(e=>{const r=d$k(e,s.webmap?s.webmap.getLayerJSONFromResourceInfo(e):null,s);u$4(r)&&o.push(r);}),this.referenceLayers.forEach(e=>{const r=d$k(e,s.webmap?s.webmap.getLayerJSONFromResourceInfo(e):null,s);u$4(r)&&(r.isReference=!0,o.push(r));}),r.baseMapLayers=o):r.baseMapLayers=o;}set referenceLayers(e){this._set("referenceLayers",n$u(e,this._get("referenceLayers")));}writeTitle(e,r){r.title=e||"Basemap";}load(e){return this.addResolvingPromise(this._loadFromSource(e)),D$1(this)}loadAll(){return i$B(this,e=>{e(this.baseLayers,this.referenceLayers);})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new S$5({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r);}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(e=>{const t=s$4(e);return t.url&&et(t.url)&&(t.url="https:"+t.url),t.templateUrl&&et(t.templateUrl)&&(t.templateUrl="https:"+t.templateUrl),t})),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:t}=this;j$2(e);const s=[];if(r){const t=r.context?r.context.url:null;if(s.push(this._loadLayersFromJSON(r.data,t,e)),r.data.id&&!r.data.title){const e=r.data.id;s.push(a$s(e).then(e=>{e&&this.read({title:e},r.context);}));}}else t&&s.push(this._loadFromItem(t,e));await p$9(s);}async _loadLayersFromJSON(e,r,t){const s=this.resourceInfo&&this.resourceInfo.context,o=this.portalItem&&this.portalItem.portal||s&&s.portal||null,a=s&&"web-scene"===s.origin?"web-scene":"web-map",i=await import('./chunks/layersCreator-aebd1203.js'),n=[];if(j$2(t),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const t={context:{origin:a,url:r,portal:o,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},s=i.populateOperationalLayers(this.baseLayers,e.baseMapLayers.filter(e=>!e.isReference),t);n.push(s);const l=i.populateOperationalLayers(this.referenceLayers,e.baseMapLayers.filter(e=>e.isReference),t);n.push(l);}await x$1(n);}async _loadFromItem(e,r){const t=await e.load(r),s=await t.fetchData("json",r),o=C(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||C$2.getDefault(),url:o}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||C$2.getDefault(),url:o}),this._loadLayersFromJSON(this.resourceInfo.data,o,r)}static fromId(e){const r=i$C[e];return r?S$5.fromJSON(r):null}};e([y$5({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,r,t,s){this._writeBaseLayers(e,r,s);}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:L$2}},writer(e,r,t,s){this._writeBaseLayers(e,r,s);}}}}}})],x$b.prototype,"baseLayers",null),e([y$5({type:String,json:{origins:{"web-scene":{write:!0}}}})],x$b.prototype,"id",void 0),e([y$5({type:O$3})],x$b.prototype,"portalItem",void 0),e([y$5()],x$b.prototype,"referenceLayers",null),e([y$5({readOnly:!0})],x$b.prototype,"resourceInfo",void 0),e([y$5({type:w$5})],x$b.prototype,"spatialReference",void 0),e([y$5()],x$b.prototype,"thumbnailUrl",void 0),e([y$5({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],x$b.prototype,"title",void 0),e([o$r("title")],x$b.prototype,"writeTitle",null),x$b=S$5=e([n$e("esri.Basemap")],x$b);var M$6=x$b;

var Basemap = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': M$6
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$y={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,5,10]};function r$q(r){var l;return null!=(l=e$y[r])?l:null}function l$s(e){const l=r$q(e);return l?[...l]:l}function a$u(e,r,l){l<0&&++l,l>1&&--l;const a=6*l;return a<1?e+(r-e)*a:2*l<1?r:3*l<2?e+(r-e)*(2/3-l)*6:e}function n$A(e,r,l,n=1){const i=(e%360+360)%360/360,o=l<=.5?l*(r+1):l+r-l*r,t=2*l-o;return [Math.round(256*a$u(t,o,i+1/3)),Math.round(256*a$u(t,o,i)),Math.round(256*a$u(t,o,i-1/3)),n]}function i$D(e){const r=e.length>5,l=r?8:4,a=(1<<l)-1,n=r?1:17,i=r?9===e.length:5===e.length;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const t=[0,0,0,1];let u;return i&&(u=o&a,o>>=l,t[3]=n*u/255),u=o&a,o>>=l,t[2]=n*u,u=o&a,o>>=l,t[1]=n*u,u=o&a,o>>=l,t[0]=n*u,t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$B=new Float32Array(1);function u$z(n){--n;for(let t=1;t<32;t<<=1)n|=n>>t;return n+1}function e$z(n,t,r){return n<t?t:n>r?r:n}function i$E(n,t,r){return Math.min(Math.max(n,t),r)}function o$G(n){return 0==(n&n-1)}function a$v(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,++n}const c$x=Math.sign||function(n){return +(n>0)-+(n<0)||+n},h$o=Math.log2||function(n){return Math.log(n)/Math.LN2};function M$7(n,t,r){return n+(t-n)*r}function m$h(n){return n*Math.PI/180}function b$5(n){return 180*n/Math.PI}function N$3(n){return Math.acos(e$z(n,-1,1))}function g$g(n){return Math.asin(e$z(n,-1,1))}function F$5(t){return n$B[0]=t,n$B[0]}const y$i=F$5(34028234663852886e22);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$C(t){return e$z(s$7(t),0,255)}function a$w(t,r,s){return t=Number(t),isNaN(t)?s:t<r?r:t>s?s:t}class o$H{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t);}static blendColors(t,r,s,i=new o$H){return i.r=Math.round(t.r+(r.r-t.r)*s),i.g=Math.round(t.g+(r.g-t.g)*s),i.b=Math.round(t.b+(r.b-t.b)*s),i.a=t.a+(r.a-t.a)*s,i._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const t=i[2].split(/\s*,\s*/),e=i[1];if("rgb"===e&&3===t.length||"rgba"===e&&4===t.length){const s=t[0];if("%"===s.charAt(s.length-1)){const s=t.map(t=>2.56*parseFloat(t));return 4===t.length&&(s[3]=parseFloat(t[3])),o$H.fromArray(s,r)}return o$H.fromArray(t.map(t=>parseFloat(t)),r)}if("hsl"===e&&3===t.length||"hsla"===e&&4===t.length)return o$H.fromArray(n$A(parseFloat(t[0]),parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])),r)}return null}static fromHex(t,r=new o$H){const s=4===t.length?4:8,i=(1<<s)-1;let e=Number("0x"+t.substr(1));return isNaN(e)?null:(["b","g","r"].forEach(t=>{const n=e&i;e>>=s,r[t]=4===s?17*n:n;}),r.a=1,r)}static fromArray(t,r=new o$H){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const s=r$q(t);return s&&o$H.fromArray(s,r)||o$H.fromRgb(t,r)||o$H.fromHex(t,r)}static fromJSON(t){return t&&new o$H([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(r){return u$4(r)?[r.r/255,r.g/255,r.b/255]:null}static toUnitRGBA(r){return u$4(r)?[r.r/255,r.g/255,r.b/255,null!=r.a?r.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if("string"==typeof t)o$H.fromString(t,this);else if(Array.isArray(t))o$H.fromArray(t,this);else {var r,s,i,e;this._set(null!=(r=t.r)?r:0,null!=(s=t.g)?s:0,null!=(i=t.b)?i:0,null!=(e=t.a)?e:1),t instanceof o$H||this._sanitize();}return this}toRgb(){return [this.r,this.g,this.b]}toRgba(){return [this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),s=this.b.toString(16);return `#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${s.length<2?"0"+s:s}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const r=n$C(this.r),s=n$C(this.g),i=n$C(this.b);return 0===t||1!==this.a?[r,s,i,n$C(255*this.a)]:[r,s,i]}clone(){return new o$H(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(a$w(this.r,0,255)),this.g=Math.round(a$w(this.g,0,255)),this.b=Math.round(a$w(this.b,0,255)),this.a=a$w(this.a,0,1),this}_set(t,r,s,i){this.r=t,this.g=r,this.b=s,this.a=i;}}o$H.prototype.declaredClass="esri.Color";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$D(n){const r=s$7(100*(1-n));return Math.max(0,Math.min(r,100))}function r$r(t){const n=1-t/100;return Math.max(0,Math.min(n,1))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$A(e,o={ignoreUnknown:!0}){const i=e instanceof t$q?e:new t$q(e,o);return y$5({type:(null==o?void 0:o.ignoreUnknown)?i.apiValues:String,readOnly:null==o?void 0:o.readOnly,json:{type:i.jsonValues,read:!(null==o?void 0:o.readOnly)&&{reader:i.read},write:{writer:i.write}}})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$v;let p$q=t$v=class extends a$h{constructor(o){super(o),this.type="none";}clone(){return new t$v({type:this.type})}};e([e$A({none:"none",stayAbove:"stay-above"})],p$q.prototype,"type",void 0),p$q=t$v=e([n$e("esri.ground.NavigationConstraint")],p$q);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var S$6;const C$3=n$7.getLogger("esri.Ground");let _$a=S$6=class extends(i$p(h$i)){constructor(r){super(r),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new L$2;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,"elevation"!==r.type&&"base-elevation"!==r.type&&C$3.error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`);};this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>{r.item.parent=null;});}initialize(){this.when().catch(r=>{C$3.error("#load()","Failed to load ground",r);}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context);}destroy(){const r=this.layers.removeAll();for(const e of r)e.destroy();this.layers.destroy();}normalizeCtorArgs(r){return r&&"resourceInfo"in r&&(this._set("resourceInfo",r.resourceInfo),delete(r={...r}).resourceInfo),r}set layers(r){this._set("layers",n$u(r,this._get("layers")));}writeLayers(r,o,t,s){const a=[];r?(s={...s,layerContainerType:"ground"},r.forEach(r=>{if("write"in r){const o={};o$9(r)().write(o,s)&&a.push(o);}else s&&s.messages&&s.messages.push(new s$g("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}));}),o.layers=a):o.layers=a;}load(r){return this.addResolvingPromise(this._loadFromSource(r)),D$1(this)}loadAll(){return i$B(this,r=>{r(this.layers);})}queryElevation(r,e){return this.load().then(()=>this._importElevationQuery()).then(o=>{const t=new o.ElevationQuery,s=this.layers.filter(I$4).toArray();return t.queryAll(s,r,e)})}createElevationSampler(r,e){const o=this.layers.filter(I$4).toArray();return 1===o.length?o[0].createElevationSampler(r,e):this._importElevationQuery().then(t=>(new t.ElevationQuery).createSamplerAll(o,r,e))}clone(){const r={opacity:this.opacity,surfaceColor:s$4(this.surfaceColor),navigationConstraint:s$4(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(r.loadStatus="loaded"),new S$6({resourceInfo:this.resourceInfo}).set(r)}read(r,e){this.resourceInfo||this._set("resourceInfo",{data:r,context:e}),super.read(r,e);}_loadFromSource(r){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,r):D$1(null)}_loadLayersFromJSON(r,e,o){const t=e&&e.origin||"web-scene",s=e&&e.portal||null,a=e&&e.url||null;return import('./chunks/layersCreator-aebd1203.js').then(e=>{j$2(o);const i=[];if(r.layers&&Array.isArray(r.layers)){const o={context:{origin:t,url:a,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};i.push(e.populateOperationalLayers(this.layers,r.layers,o));}return x$1(i)}).then(()=>{})}_importElevationQuery(){return import('./chunks/ElevationQuery-f9486622.js')}};function I$4(r){return "elevation"===r.type||function(r){return r&&"createElevationSampler"in r}(r)}e([y$5({json:{read:!1}})],_$a.prototype,"layers",null),e([o$r("layers")],_$a.prototype,"writeLayers",null),e([y$5({readOnly:!0})],_$a.prototype,"resourceInfo",void 0),e([y$5({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:N,read:{reader:r$r,source:"transparency"},write:{writer:(r,e)=>{e.transparency=n$D(r);},target:"transparency"}}})],_$a.prototype,"opacity",void 0),e([y$5({type:o$H,json:{type:[N],write:(r,e)=>{e.surfaceColor=r.toJSON().slice(0,3);}}})],_$a.prototype,"surfaceColor",void 0),e([y$5({type:p$q,json:{write:!0}})],_$a.prototype,"navigationConstraint",void 0),_$a=S$6=e([n$e("esri.Ground")],_$a);var E$5=_$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let h$p=class extends h$c{constructor(r){super(r),this._groups=new Map;}destroy(){this.removeAll();}get size(){let r=0;return this._groups.forEach(e=>{r+=e.length;}),r}add(r,e){if(!this._isHandle(r)&&!Array.isArray(r)&&!L$2.isCollection(r))return this;const s=this._getOrCreateGroup(e);return Array.isArray(r)||L$2.isCollection(r)?r.forEach(r=>this._isHandle(r)&&s.push(r)):s.push(r),this.notifyChange("size"),this}forEach(r,e){if("function"==typeof r)this._groups.forEach(e=>e.forEach(r));else {const s=this._getGroup(r);s&&e&&s.forEach(e);}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if(Array.isArray(r)||L$2.isCollection(r))return r.forEach(this.remove,this),this;if(!this.has(r))return this;const e=this._getGroup(r);for(let r=0;r<e.length;r++)e[r].remove();return this._deleteGroup(r),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(r=>{for(let e=0;e<r.length;e++)r[e].remove();}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(r){return A(this._groups.get(this._ensureGroupKey(r)))}_deleteGroup(r){return this._groups.delete(this._ensureGroupKey(r))}_ensureGroupKey(r){return r||"_default_"}};e([y$5({readOnly:!0})],h$p.prototype,"size",null),h$p=e([n$e("esri.core.Handles")],h$p);var u$A=h$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let r$s=class extends L$2{constructor(t){super(t),this._handles=new u$A,this.root=null;}initialize(){this._handles.add(this.rootCollectionNames.map(t=>this.watch("root."+t,()=>this.updateCollections(),!0))),this.updateCollections();}destroy(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null;}updateCollections(){this._collections=this.rootCollectionNames.map(t=>this.get("root."+t)).filter(t=>null!=t),this.refresh();}refresh(){const t=this._handles;t.remove("collections"),this.removeAll();const o=[],e=[];for(const t of this._collections)this._processCollection(o,e,t);this.push(...e);for(const e of o)t.add(e.on("after-changes",()=>this.refresh()),"collections");}_createNewInstance(t){return new L$2(t)}_processCollection(t,o,e){e&&(t.push(e),e.forEach(e=>{e&&(this.itemFilterFunction&&!this.itemFilterFunction(e)||o.push(e),this.getChildrenFunction&&this._processCollection(t,o,this.getChildrenFunction(e)));}));}};e([y$5()],r$s.prototype,"rootCollectionNames",void 0),e([y$5()],r$s.prototype,"root",void 0),e([y$5()],r$s.prototype,"getChildrenFunction",void 0),e([y$5()],r$s.prototype,"itemFilterFunction",void 0),r$s=e([n$e("esri.core.CollectionFlattener")],r$s);var l$t=r$s;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$F=n$7.getLogger("esri.support.basemapUtils");function s$x(){return {}}function o$I(e){for(const r in e){const n=e[r];!1===(null==n?void 0:n.destroyed)&&n.destroy(),delete e[r];}}function c$y(e,n){var t;let s;if("string"==typeof e){if(!(e in i$C)){const r=Object.keys(i$C).map(e=>`"${e}"`).join(", ");return i$F.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${r}`),null}n&&(s=n[e]),s||(s=M$6.fromId(e),n&&(n[e]=s));}else s=d$2(M$6,e);return (null==(t=s)?void 0:t.destroyed)&&(i$F.warn("The provided basemap is already destroyed",{basemap:s}),s=null),s}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$G=n$7.getLogger("esri.support.groundUtils"),t$w={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function a$x(e){let a;if("string"==typeof e)if(e in t$w){a=new E$5({resourceInfo:{data:{layers:[t$w[e]]}}});}else i$G.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else a=d$2(E$5,e);return a}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$x=0;const r$t=r=>{let o=class extends r{constructor(...e){super(...e),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+t$x++});}};return o=e([n$e("esri.core.Identifiable")],o),o};let o$J=class extends(r$t(class{})){};o$J=e([n$e("esri.core.Identifiable")],o$J);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$z=0;const m$i=n$7.getLogger("esri.layers.Layer");let h$q=class extends(i$n.EventedMixin(r$t(h$i))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new z$4(-180,-90,180,90,w$5.WGS84),this.id=Date.now().toString(16)+"-layer-"+c$z++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=w$5.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0;}static async fromArcGISServerUrl(t){const r="string"==typeof t?{url:t}:t,e=await import('./chunks/arcgisLayers-a1de1344.js');try{return await e.fromUrl(r)}catch(t){throw m$i.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",t),t}}static async fromPortalItem(t){const e="portalItem"in t?t:{portalItem:t},o=await import('./chunks/portalLayers-957682bd.js').then(function (n) { return n.p; });try{return await o.fromItem(e)}catch(t){const o=e&&e.portalItem,i=o&&o.id||"unset",a=o&&o.portal&&o.portal.url||t$5.portalUrl;throw m$i.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+i+"')",t),t}}initialize(){this.when().catch(t=>{var r,o;n$7.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(r=this.title)?r:"no title"}', id: '${null!=(o=this.id)?o:"no id"}')`,{error:t});});}destroy(){if(this.parent){const t=this,r=this.parent;"layers"in r&&r.layers.includes(t)?r.layers.remove(t):"tables"in r&&r.tables.includes(t)?r.tables.remove(t):"baseLayers"in r&&r.baseLayers.includes(t)?r.baseLayers.remove(t):"baseLayers"in r&&r.referenceLayers.includes(t)&&r.referenceLayers.remove(t);}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const t=this._get("url");return t?C(t):null}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return (await j$3(t,{query:{f:"json"},responseType:"json"})).data}throw new s$g("layer:no-attribution-data","Layer does not have attribution data")}};e([y$5({type:String})],h$q.prototype,"attributionDataUrl",void 0),e([y$5({type:z$4})],h$q.prototype,"fullExtent",void 0),e([y$5({readOnly:!0,dependsOn:["attributionDataUrl"]})],h$q.prototype,"hasAttributionData",null),e([y$5({type:String})],h$q.prototype,"id",void 0),e([y$5({type:Boolean,nonNullable:!0})],h$q.prototype,"legendEnabled",void 0),e([y$5({type:["show","hide","hide-children"]})],h$q.prototype,"listMode",void 0),e([y$5({type:Number,range:{min:0,max:1},nonNullable:!0})],h$q.prototype,"opacity",void 0),e([y$5()],h$q.prototype,"parent",void 0),e([y$5({readOnly:!0,dependsOn:["url"]})],h$q.prototype,"parsedUrl",null),e([y$5({type:Boolean})],h$q.prototype,"popupEnabled",void 0),e([y$5({type:Boolean})],h$q.prototype,"attributionVisible",void 0),e([y$5({type:w$5})],h$q.prototype,"spatialReference",void 0),e([y$5({type:String})],h$q.prototype,"title",void 0),e([y$5({type:String,readOnly:!0,json:{read:!1}})],h$q.prototype,"type",void 0),e([y$5()],h$q.prototype,"url",void 0),e([y$5({type:Boolean,nonNullable:!0})],h$q.prototype,"visible",void 0),h$q=e([n$e("esri.layers.Layer")],h$q);var b$6=h$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function l$u(e){return e&&"group"===e.type}function d$l(e,r,t){let s,o;if(e)for(let i=0,a=e.length;i<a;i++){if(s=e.getItemAt(i),s[r]===t)return s;if(l$u(s)&&(o=d$l(s.layers,r,t),o))return o}}const p$r=n$7.getLogger("esri.support.LayersMixin"),y$j=r=>{let l=class extends r{constructor(...e){super(...e),this.layers=new L$2;const r=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||p$r.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`);},t=e=>{e.parent=null,this.layerRemoved(e);};this.layers.on("before-add",e=>{var r;(r=e.item).parent&&"remove"in r.parent&&r.parent.remove(r);}),this.layers.on("after-add",e=>r(e.item)),this.layers.on("after-remove",e=>t(e.item));}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy();}set layers(e){this._set("layers",n$u(e,this._get("layers")));}add(e,r){const t=this.layers;r=t.getNextIndex(r),e instanceof b$6?e.parent===this?this.reorder(e,r):t.add(e,r):F$1(e)?e.then(e=>{this.destroyed||this.add(e,r);}):p$r.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.");}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach(e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r);});}findLayerById(e){return d$l(this.layers,"id",e)}findLayerByUid(e){return d$l(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([y$5()],l.prototype,"layers",null),l=e([n$e("esri.support.LayersMixin")],l),l};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const p$s=n$7.getLogger("esri.support.TablesMixin"),a$y=e$1=>{let a=class extends e$1{constructor(...t){super(...t),this.tables=new L$2,this.tables.on("after-add",t=>{const e=t.item;e.parent&&e.parent!==this&&"tables"in e.parent&&e.parent.tables.remove(e),e.parent=this,"feature"!==e.type&&p$s.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`);}),this.tables.on("after-remove",t=>{t.item.parent=null;});}destroy(){const t=this.tables.removeAll();for(const e of t)e.destroy();this.tables.destroy();}set tables(t){this._set("tables",n$u(t,this._get("tables")));}};return e([y$5()],a.prototype,"tables",null),a=e([n$e("esri.support.TablesMixin")],a),a};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const b$7=n$7.getLogger("esri.Map");let g$h=class extends(a$y(y$j(i$n.EventedMixin(h$c)))){constructor(r){super(r),this.basemap=null,this.ground=new E$5,this._basemapCache=s$x();}destroy(){var r,e;this.allLayers.destroy(),this.allTables.destroy(),null==(r=this.ground)||r.destroy(),null==(e=this.basemap)||e.destroy(),o$I(this._basemapCache),this._basemapCache=null;}get allLayers(){return new l$t({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:r=>r.layers})}get allTables(){return this._createTablesFlattener(this)}castBasemap(r){return c$y(r,this._basemapCache)}castGround(r){const e=a$x(r);return e||(b$7.error("Map.ground may not be set to null or undefined"),this._get("ground"))}findLayerById(r){return this.allLayers.find(e=>e.id===r)}_createTablesFlattener(r){return new l$t({root:r,rootCollectionNames:["tables","layers"],getChildrenFunction:r=>r&&"group"===r.type?this._createTablesFlattener(r):null,itemFilterFunction:r=>this._isMapOrGroupLayer(r.parent)&&r.parent.tables.includes(r)})}_isMapOrGroupLayer(r){return r&&(r===this||this._isGroupLayer(r))}_isGroupLayer(r){return r&&"group"===r.type}};e([y$5({readOnly:!0})],g$h.prototype,"allLayers",null),e([y$5({readOnly:!0})],g$h.prototype,"allTables",null),e([y$5({type:M$6})],g$h.prototype,"basemap",void 0),e([i$b("basemap")],g$h.prototype,"castBasemap",null),e([y$5({type:E$5,nonNullable:!0})],g$h.prototype,"ground",void 0),e([i$b("ground")],g$h.prototype,"castGround",null),g$h=e([n$e("esri.Map")],g$h);var f$v=g$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$B=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function t$y(e){return e?e/72*96:0}function n$E(e){return e?72*e/96:0}function c$A(t){if("string"==typeof t){if(e$B.test(t)){const c=t.match(e$B),r=Number(c[1]),i=c[3]&&c[3].toLowerCase(),o="-"===t.charAt(0),a="px"===i?n$E(r):r;return o?-a:a}return console.warn("screenUtils.toPt: input not recognized!"),null}return t}function r$u(e=0,t=0){return {x:e,y:t}}function i$H(e=0,t=0){return [e,t]}function d$m(e){return e}function h$r(e){return r$u(e.x,e.y)}function k$5(e,t){const n=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return r$u(t.clientX-n.left,t.clientY-n.top)}function b$8(e,t){return t instanceof Event?k$5(e,t):h$r(t)}function g$i(e){if(e instanceof Event)return !0;if("object"==typeof e&&"type"in e){switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return !0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":default:return !1}}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const c$B=new t$q({inherited:"inherited",codedValue:"coded-value",range:"range"});let i$I=class extends a$h{constructor(r){super(r),this.name=null,this.type=null;}};e([y$5({type:String,json:{write:!0}})],i$I.prototype,"name",void 0),e([e$A(c$B)],i$I.prototype,"type",void 0),i$I=e([n$e("esri.layers.support.Domain")],i$I);var a$z=i$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$z;let p$t=t$z=class extends a$h{constructor(r){super(r),this.name=null,this.code=null;}clone(){return new t$z({name:this.name,code:this.code})}};e([y$5({type:String,json:{write:!0}})],p$t.prototype,"name",void 0),e([y$5({type:[String,Number],json:{write:!0}})],p$t.prototype,"code",void 0),p$t=t$z=e([n$e("esri.layers.support.CodedValue")],p$t);var c$C=p$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$A;let i$J=a$A=class extends a$z{constructor(o){super(o),this.codedValues=null,this.type="coded-value";}getName(o){let e=null;if(this.codedValues){const r=String(o);this.codedValues.some(o=>(String(o.code)===r&&(e=o.name),!!e));}return e}clone(){return new a$A({codedValues:s$4(this.codedValues),name:this.name})}};e([y$5({type:[c$C],json:{write:!0}})],i$J.prototype,"codedValues",void 0),e([e$A({codedValue:"coded-value"})],i$J.prototype,"type",void 0),i$J=a$A=e([n$e("esri.layers.support.CodedValueDomain")],i$J);var u$B=i$J;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$A;let p$u=t$A=class extends a$z{constructor(r){super(r),this.type="inherited";}clone(){return new t$A}};e([e$A({inherited:"inherited"})],p$u.prototype,"type",void 0),p$u=t$A=e([n$e("esri.layers.support.InheritedDomain")],p$u);var i$K=p$u;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$B;let i$L=a$B=class extends a$z{constructor(r){super(r),this.maxValue=null,this.minValue=null,this.type="range";}clone(){return new a$B({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e([y$5({type:Number,json:{type:[Number],read:{source:"range",reader:(r,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return {enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(r,e,o){e[o]=[this.minValue||0,r];}}}})],i$L.prototype,"maxValue",void 0),e([y$5({type:Number,json:{type:[Number],read:{source:"range",reader:(r,e)=>e.range&&e.range[0]},write:{target:"range",writer(r,e,o){e[o]=[r,this.maxValue||0];}}}})],i$L.prototype,"minValue",void 0),e([e$A({range:"range"})],i$L.prototype,"type",void 0),i$L=a$B=e([n$e("esri.layers.support.RangeDomain")],i$L);var p$v=i$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$M;function u$C(e,n){switch(e.type){case"range":{const a="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+n<a||+n>r)return i$M.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every(e=>null==e||e.code!==n))return i$M.INVALID_CODED_VALUE}return null}!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";}(i$M||(i$M={}));const m$j={key:"type",base:a$z,typeMap:{range:p$v,"coded-value":u$B,inherited:i$K}};function d$n(n){if(!n||!n.type)return null;switch(n.type){case"range":return p$v.fromJSON(n);case"codedValue":return u$B.fromJSON(n);case"inherited":return i$K.fromJSON(n);default:r$6(n);}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let a$C;async function s$y(){return a$C||(a$C=(async()=>{const e=await import('./chunks/arcadeUtils-22bba5b8.js').then(function (n) { return n.ap; });return await e.arcade.load(),{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),a$C}const i$N=(e,r,t)=>u$D.create(e,r,t,null,["$feature"]),c$D=(e,r,t)=>u$D.create(e,r,t,null,["$feature","$view"]),o$K=(e,r,t,a)=>u$D.create(e,r,t,a,["$feature","$view"]);class u$D{constructor(e,r,t,a,s,i,c,n){this.script=e,this.evaluate=s,this.fields=c,this._syntaxTree=a,this._arcade=r,this._arcadeDictionary=t,this._arcadeFeature=i,this._spatialReference=n,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale");}static async create(a,i,c,n,o,l){const{arcade:p,Feature:m,Dictionary:f}=await s$y(),d=w$5.fromJSON(i),h=p.parseScript(a,l),y=o.reduce((e,r)=>({...e,[r]:null}),{});let _=null;u$4(n)&&(_=new f(n),_.immutable=!0,y.$config=null);const F=p.scriptUsesGeometryEngine(h)&&p.enableGeometrySupport(),w=p.scriptUsesFeatureSet(h)&&p.enableFeatureSetSupport(),S=p.scriptIsAsync(h)&&p.enableAsyncSupport(),b={vars:y,spatialReference:d,useAsync:!!S},$=new f;$.immutable=!1,$.setField("scale",0);const x=p.compileScript(h,b);return await p$9([F,w,S]),new u$D(a,p,f,h,e=>("$view"in e&&e.$view&&($.setField("scale",e.$view.scale),e.$view=$),_&&(e.$config=_),x({vars:e,spatialReference:d})),new m,c,d)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const d$o=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],m$k=["field","normalizationField"];function p$w(e,n){if(null!=e&&null!=n)for(const t of Array.isArray(e)?e:[e])if(y$k(d$o,t,n),"visualVariables"in t&&t.visualVariables)for(const e of t.visualVariables)y$k(m$k,e,n);}function y$k(t,i,r){if(t)for(const o of t){const t=t$4(o,i),l=t&&"function"!=typeof t&&S$7(r,t);l&&o$5(o,l.name,i);}}function g$j(e,n){if(null!=e&&null!=n)if("startField"in e){const t=S$7(n,e.startField),i=S$7(n,e.endField);e.startField=t&&t.name||null,e.endField=i&&i.name||null;}else {const t=S$7(n,e.startTimeField),i=S$7(n,e.endTimeField);e.startTimeField=t&&t.name||null,e.endTimeField=i&&i.name||null;}}const F$6=new Set;function I$5(e,n){return e&&n?(F$6.clear(),b$9(F$6,e,n),o$E(F$6).sort()):[]}function b$9(e,n,t){if(t)if(n&&n.length)if(h$6(t,"*"))for(const{name:t}of n)e.add(t);else for(const i of t)h$s(e,n,i);else {if(h$6(t,"*"))return e.clear(),void e.add("*");for(const n of t)e.add(n);}}function h$s(e,n,t){if(n&&n.length){const i=S$7(n,t);i&&e.add(i.name);}else "string"==typeof t&&e.add(t);}function T$7(e,n){return n&&e?h$6(n,"*")?e.map(e=>e.name):n:[]}function S$7(e,n){if("string"!=typeof n)return null;if(null!=e){n=n.toLowerCase();for(const t of e)if(t&&t.name.toLowerCase()===n)return t}return null}function x$c(e,n){if(!e||!n||"string"!=typeof n)return !1;n=n.toLowerCase();for(const t of e)if(t&&t.name.toLowerCase()===n)return !0;return !1}async function N$4(e,n,t){if(!t)return;const{arcadeUtils:i}=await s$y(),r=i.extractFieldNames(t);for(const t of r)h$s(e,n,t);}function v$a({displayField:e,fields:n}){return e||(n&&n.length?E$6(n,"name-or-title")||E$6(n,"unique-identifier")||E$6(n,"type-or-category")||function(e){for(const n of e){if(!n||!n.name)continue;const e=n.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return n.name}return null}(n):null)}function E$6(e,n){for(const t of e)if(t&&t.valueType&&t.valueType===n)return t.name;return null}async function V$2(n,t){if(!t)return;const{fields:i}=t,r=t$4("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(n,i):void 0}async function A$9(e,n,t){n&&t&&"cluster"===t.type&&t.fields&&await p$9(t.fields.map(t=>async function(e,n,t){t.outStatistic.onStatisticValueExpression?N$4(e,n,t.outStatistic.onStatisticValueExpression):e.add(t.outStatistic.onStatisticField);}(e,n.fields,t)));}async function L$4(e,n,t){if(n&&t&&(t.where&&"1=1"!==t.where||t.timeExtent)&&(n.timeInfo&&t.timeExtent&&b$9(e,n.fields,[n.timeInfo.startField,n.timeInfo.endField]),t.where)){const r=(await import('./chunks/WhereClause-eee01b56.js')).WhereClause.create(t.where,n.fieldsIndex);if(!r.isStandardized)throw new s$g("fieldUtils:collectFilterFields","Where clause is not standardized");b$9(e,n.fields,r.fieldNames);}}function $$3(e){if(!e)return [];const n="editFieldsInfo"in e&&e.editFieldsInfo;return n?I$5(e.fields,[n&&n.creatorField,n&&n.creationDateField,n&&n.editorField,n&&n.editDateField]):[]}async function j$a(e,n){const{labelingInfo:t,fields:i}=n;t&&t.length&&await p$9(t.map(n=>async function(e,n,t){if(!t)return;const i=t.getLabelExpression(),r=t.where;if("arcade"===i.type)await N$4(e,n,i.expression);else {const t=i.expression.match(/{[^}]*}/g);t&&t.forEach(t=>{h$s(e,n,t.slice(1,-1));});}const o=/['"]+/g;if(r){const t=r.split(" ");3===t.length&&h$s(e,n,t[0].replace(o,"")),7===t.length&&(h$s(e,n,t[0].replace(o,"")),h$s(e,n,t[4].replace(o,"")));}}(e,i,n)));}function k$6(e){const n=e.defaultValue;return void 0!==n&&W$1(e,n)?n:e.nullable?null:void 0}function C$4(e){return "number"==typeof e&&!isNaN(e)&&isFinite(e)}function z$5(e){return null===e||C$4(e)}const P$4="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function R$4(e){return null===e||P$4(e)}function G$7(e){return null!=e&&"string"==typeof e}function q$2(e){return null===e||G$7(e)}function M$8(){return !0}function W$1(e,n){let t;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":t=e.nullable?R$4:P$4;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":t=e.nullable?z$5:C$4;break;case"string":case"esriFieldTypeString":t=e.nullable?q$2:G$7;break;default:t=M$8;}return 1===arguments.length?t:t(n)}const Y$1=["integer","small-integer","single","double"],J$1=u$v([...Y$1,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function X$1(e){return null!=e&&J$1.has(e.type)}function B$4(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}function H$3(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)}var Q$1,Z;function ee(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function ne(e,n){return e.nullable&&null===n?null:X$1(e)&&!te(e.type,Number(n))?Q$1.OUT_OF_RANGE:W$1(e,n)?e.domain?u$C(e.domain,n):null:Z.INVALID_TYPE}function te(e,n){const t="string"==typeof e?re(e):e;return !!t&&(t.isInteger?P$4(n)&&n>=t.min&&n<=t.max:n>=t.min&&n<=t.max)}function re(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return le;case"esriFieldTypeInteger":case"integer":return ae;case"esriFieldTypeSingle":case"single":return se;case"esriFieldTypeDouble":case"double":return ue}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range";}(Q$1||(Q$1={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type";}(Z||(Z={}));const le={min:-32768,max:32767,isInteger:!0},ae={min:-2147483648,max:2147483647,isInteger:!0},se={min:-34e37,max:12e37,isInteger:!1},ue={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function fe(e,n,t){switch(e){case i$M.INVALID_CODED_VALUE:return `Value ${t} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case i$M.VALUE_OUT_OF_RANGE:return `Value ${t} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case Z.INVALID_TYPE:return `Value ${t} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case Q$1.OUT_OF_RANGE:{const{min:e,max:i}=re(n.type);return `Value ${t} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${e} to ${i}`}}}function ce(e,n){return !de(e,n,null)}function de(e,n,i){if(!n||!n.attributes||!e){if(u$4(i))for(const n of e)i.add(n);return !0}const r=n.attributes;let o=!1;for(const n of e)if(!(n in r)){if(o=!0,!u$4(i))break;i.add(n);}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$C=class extends a$h{constructor(r){super(r),this.type=null;}};e([y$5({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],e$C.prototype,"type",void 0),e$C=e([n$e("esri.popup.content.Content")],e$C);var p$x=e$C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var s$z;let p$y=s$z=class extends p$x{constructor(r){super(r),this.displayType=null,this.type="attachments";}clone(){return new s$z({displayType:this.displayType})}};e([y$5({type:["preview","list"],json:{write:!0}})],p$y.prototype,"displayType",void 0),e([y$5({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],p$y.prototype,"type",void 0),p$y=s$z=e([n$e("esri.popup.content.AttachmentsContent")],p$y);var i$O=p$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$z;let i$P=p$z=class extends p$x{constructor(r){super(r),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom";}clone(){return new p$z({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?s$4(this.outFields):null})}};e([y$5()],i$P.prototype,"creator",void 0),e([y$5()],i$P.prototype,"destroyer",void 0),e([y$5()],i$P.prototype,"outFields",void 0),e([y$5({type:["custom"],readOnly:!0})],i$P.prototype,"type",void 0),i$P=p$z=e([n$e("esri.popup.content.CustomContent")],i$P);var c$E=i$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$D=o$B()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),o$L=a$D.toJSON.bind(a$D),r$v=a$D.fromJSON.bind(a$D);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$p;let l$v=d$p=class extends a$h{constructor(r){super(r),this.dateFormat=null,this.digitSeparator=!1,this.places=null;}clone(){return new d$p({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(r){return this.dateFormat?M$5(r,L$3(this.dateFormat)):u$t(r,s$u(this))}};e([e$A(a$D)],l$v.prototype,"dateFormat",void 0),e([y$5({type:Boolean,json:{write:!0}})],l$v.prototype,"digitSeparator",void 0),e([y$5({type:N,json:{write:!0}})],l$v.prototype,"places",void 0),l$v=d$p=e([n$e("esri.popup.support.FieldInfoFormat")],l$v);var n$F=l$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$E;const d$q=new t$q({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});let c$F=a$E=class extends a$h{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0;}writeStringFieldOption(t,o){o.stringFieldOption=d$q.toJSON(t);}readStringFieldOption(t){if(t)return d$q.fromJSON(t)}clone(){return new a$E({fieldName:this.fieldName,format:this.format?s$4(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};e([y$5({type:String,json:{write:!0}})],c$F.prototype,"fieldName",void 0),e([y$5({type:n$F,json:{write:!0}})],c$F.prototype,"format",void 0),e([y$5({type:Boolean,json:{write:!0,default:!1}})],c$F.prototype,"isEditable",void 0),e([y$5({type:String,json:{write:!0}})],c$F.prototype,"label",void 0),e([y$5({type:d$q.apiValues,json:{write:!0,default:"text-box",type:d$q.jsonValues}})],c$F.prototype,"stringFieldOption",void 0),e([o$r("stringFieldOption")],c$F.prototype,"writeStringFieldOption",null),e([e$l("stringFieldOption")],c$F.prototype,"readStringFieldOption",null),e([y$5({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],c$F.prototype,"statisticType",void 0),e([y$5({type:String,json:{write:!0}})],c$F.prototype,"tooltip",void 0),e([y$5({type:Boolean,json:{write:!0}})],c$F.prototype,"visible",void 0),c$F=a$E=e([n$e("esri.popup.FieldInfo")],c$F);var m$l=c$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$w;let n$G=l$w=class extends p$x{constructor(o){super(o),this.fieldInfos=null,this.type="fields";}writeFieldInfos(o,r){r.fieldInfos=o&&o.map(o=>o.toJSON());}clone(){return new l$w({fieldInfos:Array.isArray(this.fieldInfos)?s$4(this.fieldInfos):null})}};e([y$5({type:[m$l]})],n$G.prototype,"fieldInfos",void 0),e([o$r("fieldInfos")],n$G.prototype,"writeFieldInfos",null),e([y$5({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],n$G.prototype,"type",void 0),n$G=l$w=e([n$e("esri.popup.content.FieldsContent")],n$G);var c$G=n$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let s$A=class extends a$h{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null;}};e([y$5({type:String,json:{write:!0}})],s$A.prototype,"altText",void 0),e([y$5({type:String,json:{write:!0}})],s$A.prototype,"caption",void 0),e([y$5({type:String,json:{write:!0}})],s$A.prototype,"title",void 0),e([y$5({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],s$A.prototype,"type",void 0),s$A=e([n$e("esri.popup.content.mixins.MediaInfo")],s$A);var p$A=s$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$M(o,t){const e=t?{...t,source:o}:o;return y$5({aliasOf:e})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$B;let i$Q=p$B=class extends h$c{constructor(o){super(o),this.tooltip=null,this.value=null,this.x=null,this.y=null;}clone(){return new p$B({tooltip:this.tooltip,value:this.value})}};e([y$5()],i$Q.prototype,"tooltip",void 0),e([y$5()],i$Q.prototype,"value",void 0),e([o$M("value")],i$Q.prototype,"x",void 0),e([o$M("tooltip")],i$Q.prototype,"y",void 0),i$Q=p$B=e([n$e("esri.popup.content.support.ChartMediaInfoValueSeries")],i$Q);var c$H=i$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$C;let l$x=p$C=class extends a$h{constructor(o){super(o),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null;}clone(){return new p$C({fields:s$4(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};e([y$5({type:[String],json:{write:!0}})],l$x.prototype,"fields",void 0),e([y$5({type:String,json:{write:!0}})],l$x.prototype,"normalizeField",void 0),e([y$5({type:[c$H],json:{read:!1}})],l$x.prototype,"series",void 0),e([y$5({type:String,json:{write:!0}})],l$x.prototype,"tooltipField",void 0),l$x=p$C=e([n$e("esri.popup.content.support.ChartMediaInfoValue")],l$x);var c$I=l$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$D=class extends p$A{constructor(r){super(r),this.type=null,this.value=null;}};e([y$5({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$D.prototype,"type",void 0),e([y$5({type:c$I,json:{write:!0}})],p$D.prototype,"value",void 0),p$D=e([n$e("esri.popup.content.mixins.ChartMediaInfo")],p$D);var i$R=p$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const c$J=o$B()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$E;let i$S=p$E=class extends i$R{constructor(r){super(r),this.type="bar-chart";}clone(){return new p$E({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e([y$5({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:c$J.write}})],i$S.prototype,"type",void 0),i$S=p$E=e([n$e("esri.popup.content.BarChartMediaInfo")],i$S);var a$F=i$S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$F;let i$T=p$F=class extends i$R{constructor(r){super(r),this.type="column-chart";}clone(){return new p$F({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e([y$5({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:c$J.write}})],i$T.prototype,"type",void 0),i$T=p$F=e([n$e("esri.popup.content.ColumnChartMediaInfo")],i$T);var c$K=i$T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$D;let p$G=e$D=class extends a$h{constructor(r){super(r),this.linkURL=null,this.sourceURL=null;}clone(){return new e$D({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e([y$5({type:String,json:{write:!0}})],p$G.prototype,"linkURL",void 0),e([y$5({type:String,json:{write:!0}})],p$G.prototype,"sourceURL",void 0),p$G=e$D=e([n$e("esri.popup.content.support.ImageMediaInfoValue")],p$G);var i$U=p$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$V;let p$H=i$V=class extends p$A{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null;}clone(){return new i$V({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};e([y$5({type:Number,json:{write:!0}})],p$H.prototype,"refreshInterval",void 0),e([y$5({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],p$H.prototype,"type",void 0),e([y$5({type:i$U,json:{write:!0}})],p$H.prototype,"value",void 0),p$H=i$V=e([n$e("esri.popup.content.ImageMediaInfo")],p$H);var a$G=p$H;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$W;let p$I=i$W=class extends i$R{constructor(r){super(r),this.type="line-chart";}clone(){return new i$W({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e([y$5({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:c$J.write}})],p$I.prototype,"type",void 0),p$I=i$W=e([n$e("esri.popup.content.LineChartMediaInfo")],p$I);var a$H=p$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$J;let i$X=p$J=class extends i$R{constructor(r){super(r),this.type="pie-chart";}clone(){return new p$J({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e([y$5({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:c$J.write}})],i$X.prototype,"type",void 0),i$X=p$J=e([n$e("esri.popup.content.PieChartMediaInfo")],i$X);var a$I=i$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$m={base:p$A,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":a$F,"column-chart":c$K,"line-chart":a$H,"pie-chart":a$I,image:a$G}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$E;let l$y=u$E=class extends p$x{constructor(o){super(o),this.activeMediaInfoIndex=null,this.mediaInfos=null,this.type="media";}readMediaInfos(o){return o&&o.map(o=>"image"===o.type?a$G.fromJSON(o):"barchart"===o.type?a$F.fromJSON(o):"columnchart"===o.type?c$K.fromJSON(o):"linechart"===o.type?a$H.fromJSON(o):"piechart"===o.type?a$I.fromJSON(o):void 0).filter(Boolean)}writeMediaInfos(o,r){r.mediaInfos=o&&o.map(o=>o.toJSON());}clone(){return new u$E({activeMediaInfoIndex:this.activeMediaInfoIndex,mediaInfos:this.mediaInfos?s$4(this.mediaInfos):null})}};e([y$5()],l$y.prototype,"activeMediaInfoIndex",void 0),e([y$5({types:[m$m]})],l$y.prototype,"mediaInfos",void 0),e([e$l("mediaInfos")],l$y.prototype,"readMediaInfos",null),e([o$r("mediaInfos")],l$y.prototype,"writeMediaInfos",null),e([y$5({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],l$y.prototype,"type",void 0),l$y=u$E=e([n$e("esri.popup.content.MediaContent")],l$y);var I$6=l$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var s$B;let p$K=s$B=class extends p$x{constructor(t){super(t),this.text=null,this.type="text";}clone(){return new s$B({text:this.text})}};e([y$5({type:String,json:{write:!0}})],p$K.prototype,"text",void 0),e([y$5({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p$K.prototype,"type",void 0),p$K=s$B=e([n$e("esri.popup.content.TextContent")],p$K);var i$Y=p$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$w={base:null,key:"type",typeMap:{attachment:i$O,media:I$6,text:i$Y,field:c$G}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var s$C;let p$L=s$C=class extends a$h{constructor(r){super(r),this.name=null,this.title=null,this.expression=null,this.returnType=null;}clone(){return new s$C({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([y$5({type:String,json:{write:!0}})],p$L.prototype,"name",void 0),e([y$5({type:String,json:{write:!0}})],p$L.prototype,"title",void 0),e([y$5({type:String,json:{write:!0}})],p$L.prototype,"expression",void 0),e([y$5({type:["string","number"],json:{write:!0}})],p$L.prototype,"returnType",void 0),p$L=s$C=e([n$e("esri.popup.ExpressionInfo")],p$L);var i$Z=p$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$E;let p$M=e$E=class extends a$h{constructor(o){super(o),this.returnTopmostRaster=null,this.showNoDataRecords=null;}clone(){return new e$E({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e([y$5({type:Boolean,json:{write:!0}})],p$M.prototype,"returnTopmostRaster",void 0),e([y$5({type:Boolean,json:{write:!0}})],p$M.prototype,"showNoDataRecords",void 0),p$M=e$E=e([n$e("esri.popup.LayerOptions")],p$M);var a$J=p$M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$B;let p$N=t$B=class extends a$h{constructor(r){super(r),this.field=null,this.order=null;}clone(){return new t$B({field:this.field,order:this.order})}};e([y$5({type:String,json:{write:!0}})],p$N.prototype,"field",void 0),e([y$5({type:["asc","desc"],json:{write:!0}})],p$N.prototype,"order",void 0),p$N=t$B=e([n$e("esri.popup.support.RelatedRecordsInfoFieldOrder")],p$N);var i$_=p$N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$$;let c$L=i$$=class extends a$h{constructor(r){super(r),this.showRelatedRecords=null,this.orderByFields=null;}clone(){return new i$$({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?s$4(this.orderByFields):null})}};e([y$5({type:Boolean,json:{write:!0}})],c$L.prototype,"showRelatedRecords",void 0),e([y$5({type:[i$_],json:{write:!0}})],c$L.prototype,"orderByFields",void 0),c$L=i$$=e([n$e("esri.popup.RelatedRecordsInfo")],c$L);var d$r=c$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$F;let p$O=e$F=class extends(r$t(h$c)){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0;}clone(){return new e$F({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e([y$5()],p$O.prototype,"active",void 0),e([y$5()],p$O.prototype,"className",void 0),e([y$5()],p$O.prototype,"disabled",void 0),e([y$5()],p$O.prototype,"id",void 0),e([y$5()],p$O.prototype,"indicator",void 0),e([y$5()],p$O.prototype,"title",void 0),e([y$5()],p$O.prototype,"type",void 0),e([y$5()],p$O.prototype,"visible",void 0),p$O=e$F=e([n$e("esri.support.actions.ActionBase")],p$O);var c$M=p$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$10;let e$G=i$10=class extends c$M{constructor(s){super(s),this.image=null,this.type="button";}clone(){return new i$10({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e([y$5()],e$G.prototype,"image",void 0),e$G=i$10=e([n$e("esri.support.Action.ActionButton")],e$G);var c$N=e$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$H;let i$11=e$H=class extends c$M{constructor(s){super(s),this.image=null,this.type="toggle",this.value=!1;}clone(){return new e$H({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e([y$5()],i$11.prototype,"image",void 0),e([y$5()],i$11.prototype,"value",void 0),i$11=e$H=e([n$e("esri.support.Action.ActionToggle")],i$11);var a$K=i$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var b$a;const R$5=L$2.ofType({key:"type",defaultKeyValue:"button",base:c$M,typeMap:{button:c$N,toggle:a$K}}),L$5={base:p$x,key:"type",typeMap:{media:I$6,custom:c$E,text:i$Y,attachments:i$O,fields:c$G}},J$2=n$7.getLogger("esri.PopupTemplate"),M$9=["attachments","fields","media","text"];let k$7=b$a=class extends a$h{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.title="",this.relatedRecordsInfo=null;}castContent(t){return Array.isArray(t)?t.map(t=>k(L$5,t)):"string"==typeof t||"function"==typeof t||t instanceof HTMLElement||F$1(t)?t:(J$2.error("content error","unsupported content value",{value:t}),null)}readContent(t,e){const{popupElements:o}=e;return Array.isArray(o)&&o.length>0?this._readPopupInfoElements(e):this._readPopupInfo(e)}writeContent(t,e){"string"!=typeof t?Array.isArray(t)&&(e.popupElements=t.filter(t=>-1!==M$9.indexOf(t.type)).map(t=>t&&t.toJSON()),e.popupElements.forEach(t=>{"attachments"===t.type?this._writeAttachmentContent(e):"media"===t.type?this._writeMediaContent(t,e):"text"===t.type&&this._writeTextContent(t,e);})):e.description=t;}writeFieldInfos(t,e){const{content:o}=this,s=Array.isArray(o)?o:null;if(t){const o=!!s&&s.some(t=>"fields"===t.type&&(!t.fieldInfos||0===t.fieldInfos.length));e.fieldInfos=t.filter(Boolean).map(t=>{const e=t.toJSON();return o||(e.visible=!1),e});}if(s)for(const t of s)"fields"===t.type&&this._writeFieldsContent(t,e);}writeLayerOptions(t,e){e.layerOptions=!t||null===t.showNoDataRecords&&null===t.returnTopmostRaster?null:t.toJSON();}writeTitle(t,e){e.title=t||"";}clone(){const{actions:t}=this,o=t?s$4(t.toArray()):[];return new b$a({actions:o,content:Array.isArray(this.content)?s$4(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?s$4(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?s$4(this.fieldInfos):null,layerOptions:this.layerOptions?s$4(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?s$4(this.outFields):null,overwriteActions:this.overwriteActions,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?s$4(this.relatedRecordsInfo):null})}async collectRequiredFields(t,e){await this._collectExpressionInfoFields(t,e,this.expressionInfos),b$9(t,e,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)]);}async getRequiredFields(t){const e=new Set;return await this.collectRequiredFields(e,t),o$E(e).sort()}_writeFieldsContent(t,o){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const s=s$4(t.fieldInfos);Array.isArray(o.fieldInfos)?s.forEach(t=>{const e=l$9(o.fieldInfos,e=>e.fieldName.toLowerCase()===t.fieldName.toLowerCase());e?e.visible=!0:o.fieldInfos.push(t);}):o.fieldInfos=s;}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0);}_writeTextContent(t,e){!e.description&&t.text&&(e.description=t.text);}_writeMediaContent(t,o){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const s=s$4(t.mediaInfos);Array.isArray(o.mediaInfos)?o.mediaInfos=[...o.mediaInfos,...s]:o.mediaInfos=s;}_readPopupInfoElements({description:t,mediaInfos:e,popupElements:o}){const s={description:!1,mediaInfos:!1};return o.map(o=>"media"===o.type?(o.mediaInfos||!e||s.mediaInfos||(o.mediaInfos=e,s.mediaInfos=!0),I$6.fromJSON(o)):"text"===o.type?(o.text||!t||s.description||(o.text=t,s.description=!0),i$Y.fromJSON(o)):"attachments"===o.type?i$O.fromJSON(o):"fields"===o.type?c$G.fromJSON(o):void 0).filter(Boolean)}_readPopupInfo({description:t,mediaInfos:e,showAttachments:o}){const s=[];return t?s.push(new i$Y({text:t})):s.push(new c$G),Array.isArray(e)&&e.length&&s.push(I$6.fromJSON({mediaInfos:e})),o&&s.push(i$O.fromJSON({displayType:"list"})),s.length?s:t}_getContentElementFields(t){if(!t||"attachments"===t.type)return [];if("custom"===t.type)return t.outFields||[];if("fields"===t.type)return this._getFieldInfoFields(t.fieldInfos||this.fieldInfos);if("media"===t.type){return (t.mediaInfos||[]).reduce((t,e)=>[...t,...this._getMediaInfoFields(e)],[])}return "text"===t.type?this._extractFieldNames(t.text):void 0}_getMediaInfoFields(t){const{caption:e,title:o,value:s}=t,i=s||{},{fields:r=[],normalizeField:n,tooltipField:p,sourceURL:l,linkURL:a}=i,d=[...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(l),...this._extractFieldNames(a),...r];return n&&d.push(n),p&&d.push(p),d}_getContentFields(t){return "string"==typeof t?this._extractFieldNames(t):Array.isArray(t)?t.reduce((t,e)=>[...t,...this._getContentElementFields(e)],[]):[]}async _collectExpressionInfoFields(t,e,o){o&&await p$9(o.map(o=>N$4(t,e,o.expression)));}_getFieldInfoFields(t){return t?t.filter(t=>void 0===t.visible||!!t.visible).map(t=>t.fieldName).filter(t=>-1===t.indexOf("relationships/")&&-1===t.indexOf("expression/")):[]}_getActionsFields(t){return t?t.toArray().reduce((t,e)=>[...t,...this._getActionFields(e)],[]):[]}_getActionFields(t){const{className:e,title:o,type:s}=t,i="button"===s||"toggle"===s?t.image:"";return [...this._extractFieldNames(o),...this._extractFieldNames(e),...this._extractFieldNames(i)]}_getTitleFields(t){return "string"==typeof t?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||"string"!=typeof t)return [];const e=t.match(/{[^}]*}/g);if(!e)return [];const o=/\{(\w+):.+\}/,s=e.filter(t=>!(0===t.indexOf("{relationships/")||0===t.indexOf("{expression/"))).map(t=>t.replace(o,"{$1}"));return s?s.map(t=>t.slice(1,-1)):[]}};e([y$5({type:R$5})],k$7.prototype,"actions",void 0),e([y$5()],k$7.prototype,"content",void 0),e([i$b("content")],k$7.prototype,"castContent",null),e([e$l("content",["description","popupElements","mediaInfos","showAttachments"])],k$7.prototype,"readContent",null),e([o$r("content",{popupElements:{type:L$2.ofType(r$w)},showAttachments:{type:Boolean},mediaInfos:{type:L$2.ofType(m$m)},description:{type:String}})],k$7.prototype,"writeContent",null),e([y$5({type:[i$Z],json:{write:!0}})],k$7.prototype,"expressionInfos",void 0),e([y$5({type:[m$l]})],k$7.prototype,"fieldInfos",void 0),e([o$r("fieldInfos")],k$7.prototype,"writeFieldInfos",null),e([y$5({type:a$J})],k$7.prototype,"layerOptions",void 0),e([o$r("layerOptions")],k$7.prototype,"writeLayerOptions",null),e([y$5({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],k$7.prototype,"lastEditInfoEnabled",void 0),e([y$5()],k$7.prototype,"outFields",void 0),e([y$5()],k$7.prototype,"overwriteActions",void 0),e([y$5({json:{type:String}})],k$7.prototype,"title",void 0),e([o$r("title")],k$7.prototype,"writeTitle",null),e([y$5({type:d$r,json:{write:!0}})],k$7.prototype,"relatedRecordsInfo",void 0),k$7=b$a=e([n$e("esri.PopupTemplate")],k$7);var P$5=k$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const p$P=new t$q({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c$O=0,m$n=class extends a$h{constructor(r){super(r),this.id="sym"+c$O++,this.type=null;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}async collectRequiredFields(r,o){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e([y$5({type:p$P.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p$P.write}}})],m$n.prototype,"type",void 0),e([y$5({type:o$H,value:new o$H([0,0,0,1]),json:{write:{allowNull:!0}}})],m$n.prototype,"color",null),e([e$l("color")],m$n.prototype,"readColor",null),m$n=e([n$e("esri.symbols.Symbol")],m$n);var a$L=m$n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$z;let u$F=l$z=class extends a$L{constructor(r){super(r),this.data=null,this.type="cim";}readData(r,o){return o}writeData(r,o){if(r)for(const t in r)o[t]=r[t];}async collectRequiredFields(r,o){if("CIMSymbolReference"===this.data.type){const t=this.data.primitiveOverrides;if(t){const s=t.map(t=>{const s=t.valueExpressionInfo;return N$4(r,o,s.expression)});await p$9(s);}}}clone(){return new l$z({data:s$4(this.data)})}hash(){return u$3(JSON.stringify(this.data)).toString()}};e([y$5({json:{write:!1}})],u$F.prototype,"color",void 0),e([y$5({json:{write:!0}})],u$F.prototype,"data",void 0),e([e$l("data",["symbol"])],u$F.prototype,"readData",null),e([o$r("data")],u$F.prototype,"writeData",null),e([e$A({CIMSymbolReference:"cim"},{readOnly:!0})],u$F.prototype,"type",void 0),u$F=l$z=e([n$e("esri.symbols.CIMSymbol")],u$F);var d$s=u$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$Q=class extends a$h{constructor(r){super(r),this.enabled=!0,this.type=null;}writeEnabled(r,e,o){r||(e[o]=r);}};e([y$5({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p$Q.prototype,"enabled",void 0),e([o$r("enabled")],p$Q.prototype,"writeEnabled",null),e([y$5({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],p$Q.prototype,"type",void 0),p$Q=e([n$e("esri.symbols.Symbol3DLayer")],p$Q);var c$P=p$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$D={type:o$H,json:{type:[N],default:null,read:{source:["color","transparency"],reader:function(r,t){const n=null!=t.transparency?r$r(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new o$H([s[0]||0,s[1]||0,s[2]||0,n]):null}},write:{target:{color:{type:[N]},transparency:{type:N}},writer:function(r,e){e.color=r.toJSON().slice(0,3);const t=n$D(r.a);0!==t&&(e.transparency=t);}}}},a$M={type:Number,cast:c$A,json:{write:!0}},c$Q={type:[Number],cast:r=>null!=r?r:Array.isArray(r)?r.map(c$A):null,json:{read:!1,write:!1}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let m$o=class extends a$h{constructor(o){super(o),this.color=new o$H([0,0,0,1]),this.extensionLength=0,this.size=n$E(1);}clone(){}cloneProperties(){return {color:s$4(this.color),size:this.size,extensionLength:this.extensionLength}}};e([y$5({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],m$o.prototype,"type",void 0),e([y$5(s$D)],m$o.prototype,"color",void 0),e([y$5({...a$M,json:{write:{overridePolicy:o=>({enabled:!!o})}}})],m$o.prototype,"extensionLength",void 0),e([y$5(a$M)],m$o.prototype,"size",void 0),m$o=e([n$e("esri.symbols.edges.Edges3D")],m$o);var l$A=m$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$C;let p$R=t$C=class extends l$A{constructor(r){super(r),this.type="sketch";}clone(){return new t$C(this.cloneProperties())}};e([e$A({sketch:"sketch"},{readOnly:!0})],p$R.prototype,"type",void 0),p$R=t$C=e([n$e("esri.symbols.edges.SketchEdges3D")],p$R);var c$R=p$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$D;let p$S=t$D=class extends l$A{constructor(r){super(r),this.type="solid";}clone(){return new t$D(this.cloneProperties())}};e([e$A({solid:"solid"},{readOnly:!0})],p$S.prototype,"type",void 0),p$S=t$D=e([n$e("esri.symbols.support.SolidEdges3D")],p$S);var c$S=p$S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$E={types:{key:"type",base:l$A,typeMap:{solid:c$S,sketch:c$R}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$T;let i$12=c$T=class extends a$h{constructor(){super(...arguments),this.color=null;}clone(){return new c$T({color:u$4(this.color)?this.color.clone():null})}};e([y$5(s$D)],i$12.prototype,"color",void 0),i$12=c$T=e([n$e("esri.symbols.support.Symbol3DMaterial")],i$12);var l$B=i$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$C;let m$p=l$C=class extends c$P{constructor(e){super(e),this.type="extrude",this.size=void 0,this.material=null,this.castShadows=!0,this.edges=null;}clone(){return new l$C({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:u$4(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};e([e$A({Extrude:"extrude"},{readOnly:!0})],m$p.prototype,"type",void 0),e([y$5({type:Number,json:{write:!0}})],m$p.prototype,"size",void 0),e([y$5({type:l$B,json:{write:!0}})],m$p.prototype,"material",void 0),e([y$5({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m$p.prototype,"castShadows",void 0),e([y$5(t$E)],m$p.prototype,"edges",void 0),m$p=l$C=e([n$e("esri.symbols.ExtrudeSymbol3DLayer")],m$p);var c$U=m$p;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let i$13=class extends a$L{constructor(r){super(r),this.type="simple-line",this.width=.75;}hash(){return `${this.type}.${this.width}`}};e([e$A({esriSLS:"simple-line"},{readOnly:!0})],i$13.prototype,"type",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],i$13.prototype,"width",void 0),i$13=e([n$e("esri.symbols.LineSymbol")],i$13);var c$V=i$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$N;let n$H=a$N=class extends a$h{constructor(r){super(r),this.placement="begin-end",this.type="line-marker",this.style="arrow";}writeStyle(r,o,e,t){"web-map"===(null==t?void 0:t.origin)?o[e]="arrow":o[e]=r;}set color(r){this._set("color",r);}readColor(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r}writeColor(r,o,e,t){"web-map"===(null==t?void 0:t.origin)||(o[e]=r);}clone(){return new a$N({color:s$4(this.color),placement:this.placement,style:this.style})}hash(){var r;return `${this.placement}.${null==(r=this.color)?void 0:r.hash()}.${this.style}`}};e([y$5({type:["begin","end","begin-end"],json:{default:"begin-end",write:!0}})],n$H.prototype,"placement",void 0),e([e$A({"line-marker":"line-marker"},{readOnly:!0}),y$5({json:{origins:{"web-map":{write:!1}}}})],n$H.prototype,"type",void 0),e([y$5({type:["arrow","circle","square","diamond","cross","x"]})],n$H.prototype,"style",void 0),e([o$r("style")],n$H.prototype,"writeStyle",null),e([y$5({type:o$H,value:null,json:{write:{allowNull:!0}}})],n$H.prototype,"color",null),e([e$l("color")],n$H.prototype,"readColor",null),e([o$r("color")],n$H.prototype,"writeColor",null),n$H=a$N=e([n$e("esri.symbols.LineSymbolMarker")],n$H);var m$q=n$H;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$T;const m$r=new t$q({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let h$t=p$T=class extends c$V{constructor(...r){super(...r),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2;}normalizeCtorArgs(r,o,e,t,s,i){if(r&&"string"!=typeof r)return r;const n={};return null!=r&&(n.style=r),null!=o&&(n.color=o),null!=e&&(n.width=c$A(e)),null!=t&&(n.cap=t),null!=s&&(n.join=s),null!=i&&(n.miterLimit=c$A(i)),n}clone(){var r;return new p$T({color:s$4(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(r=this.marker)?void 0:r.clone()})}hash(){var r,o;return `${super.hash()}.${null==(r=this.color)?void 0:r.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(o=this.marker)?void 0:o.hash()}`}};e([e$A({esriSLS:"simple-line"},{readOnly:!0})],h$t.prototype,"type",void 0),e([y$5({type:m$r.apiValues,json:{read:m$r.read,write:m$r.write}})],h$t.prototype,"style",void 0),e([y$5({type:["butt","round","square"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],h$t.prototype,"cap",void 0),e([y$5({type:["miter","round","bevel"],json:{write:{overridePolicy:(r,o,e)=>({enabled:"round"!==r&&(null==e||null==e.origin)})}}})],h$t.prototype,"join",void 0),e([y$5({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m$q}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],h$t.prototype,"marker",void 0),e([y$5({type:Number,json:{read:!1,write:!1}})],h$t.prototype,"miterLimit",void 0),h$t=p$T=e([n$e("esri.symbols.SimpleLineSymbol")],h$t);var d$t=h$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$U=class extends a$L{constructor(e){super(e),this.outline=null,this.type=null;}hash(){return `${this.type}.${this.outline&&this.outline.hash()}`}};e([y$5({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d$t}},json:{default:null,write:!0}})],p$U.prototype,"outline",void 0),e([y$5({type:["simple-fill","picture-fill"],readOnly:!0})],p$U.prototype,"type",void 0),p$U=e([n$e("esri.symbols.FillSymbol")],p$U);var i$14=p$U;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$F=class extends a$h{constructor(r){super(r);}clone(){}};e([y$5({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$F.prototype,"type",void 0),t$F=e([n$e("esri.symbols.patterns.Pattern3D")],t$F);var p$V=t$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$I = ["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$W;let i$15=p$W=class extends p$V{constructor(r){super(r),this.type="style",this.style="solid";}clone(){return new p$W({style:this.style})}};e([y$5({type:["style"]})],i$15.prototype,"type",void 0),e([y$5({type:e$I,json:{read:!0,write:!0}})],i$15.prototype,"style",void 0),i$15=p$W=e([n$e("esri.symbols.patterns.StylePattern3D")],i$15);var c$W=i$15;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$x(t,r,s){if(!t)return t;switch(t.type){case"style":{const r=new c$W;return r.read(t,s),r}}}const s$E={types:{key:"type",base:p$V,typeMap:{style:c$W}},json:{read:r$x,write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$N=new o$H("white"),r$y=new o$H("black"),e$J=new o$H([255,255,255,0]);function t$G(n){return 0===n.r&&0===n.g&&0===n.b}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$X;let c$X=p$X=class extends l$B{clone(){return new p$X({color:u$4(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})}};e([e$A({multiply:"multiply",replace:"replace",tint:"tint"})],c$X.prototype,"colorMixMode",void 0),c$X=p$X=e([n$e("esri.symbols.support.Symbol3DFillMaterial")],c$X);var i$16=c$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$G;let n$I=u$G=class extends a$h{constructor(){super(...arguments),this.color=new o$H([0,0,0,1]),this.size=n$E(1),this.stipplePattern=null,this.stippleOffColor=null;}clone(){return new u$G({color:u$4(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}};e([y$5(s$D)],n$I.prototype,"color",void 0),e([y$5(a$M)],n$I.prototype,"size",void 0),e([y$5(c$Q)],n$I.prototype,"stipplePattern",void 0),e([y$5({type:o$H})],n$I.prototype,"stippleOffColor",void 0),n$I=u$G=e([n$e("esri.symbols.support.Symbol3DOutline")],n$I);var a$O=n$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$u;let y$l=d$u=class extends c$P{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null;}clone(){return new d$u({edges:u$4(this.edges)?this.edges.clone():null,enabled:this.enabled,material:u$4(this.material)?this.material.clone():null,pattern:u$4(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:u$4(this.outline)?this.outline.clone():null})}static fromSimpleFillSymbol(t){return new d$u({material:{color:(t.color||e$J).clone()},pattern:t.style&&"solid"!==t.style?new c$W({style:t.style}):null,outline:t.outline?new a$O({size:t.outline.width||0,color:(t.outline.color||o$N).clone()}):null})}};e([e$A({Fill:"fill"},{readOnly:!0})],y$l.prototype,"type",void 0),e([y$5({type:i$16,json:{write:!0}})],y$l.prototype,"material",void 0),e([y$5(s$E)],y$l.prototype,"pattern",void 0),e([y$5({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],y$l.prototype,"castShadows",void 0),e([y$5({type:a$O,json:{write:!0}})],y$l.prototype,"outline",void 0),e([y$5(t$E)],y$l.prototype,"edges",void 0),y$l=d$u=e([n$e("esri.symbols.FillSymbol3DLayer")],y$l);var h$u=y$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$Y;let l$D=p$Y=class extends a$h{constructor(o){super(o),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal";}castSize(o){return c$A(o)}clone(){return new p$Y({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return `${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e([y$5({type:["underline","line-through","none"],json:{default:"none",write:!0}})],l$D.prototype,"decoration",void 0),e([y$5({type:String,json:{write:!0}})],l$D.prototype,"family",void 0),e([y$5({type:Number,json:{write:{overridePolicy:(o,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],l$D.prototype,"size",void 0),e([i$b("size")],l$D.prototype,"castSize",null),e([y$5({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],l$D.prototype,"style",void 0),e([y$5({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],l$D.prototype,"weight",void 0),l$D=p$Y=e([n$e("esri.symbols.Font")],l$D);var a$P=l$D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$J(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=D(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const t=M$1(r,o.portalItem.itemUrl);p$Z.test(t)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(t).path);}return U$3(r,o&&o.portal)}function i$17(r,a){if(!r)return r;!G(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let u=D(r);if(a){const t=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(t){const o=U$3(t,a.portal);u=M$1(U$3(u,a.portal),o,o),u!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(u);}}return u=function(r,t){if(t&&!t.isPortal&&t.urlKey&&t.customBaseUrl)return ct(r,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname);return r}(u,a&&a.portal),G(u)&&(u=Q(u)),u}function c$Y(r,t,e){return n$J(r,e)}function m$s(r,t,e,o){const s=i$17(r,o);void 0!==s&&(t[e]=s);}const f$w=/\/items\/([^\/]+)\/resources\//,p$Z=/^\.\/resources\//;function v$b(t){const e=u$4(t)?t.match(f$w):null;return u$4(e)?e[1]:null}function U$3(r,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return r;const e=`${t.urlKey}.${t.customBaseUrl}`;return N$1($$1,`${$$1.scheme}://${e}`)?ct(r,t.portalHostname,e):ct(r,e,t.portalHostname)}var h$v=Object.freeze({__proto__:null,fromJSON:n$J,toJSON:i$17,read:c$Y,write:m$s,itemIdFromResourceUrl:v$b});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var n$K;const d$v=o$B()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let j$b=n$K=class extends a$h{constructor(r){super(r);}readHref(r,e,o){return r?n$J(r,o):e.dataURI}writeHref(r,e,o,t){r&&(K(r)?e.dataURI=r:(e.href=i$17(r,t),G(e.href)&&(e.href=Q(e.href))));}clone(){return new n$K({href:this.href,primitive:this.primitive})}};e([y$5({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],j$b.prototype,"href",void 0),e([e$l("href")],j$b.prototype,"readHref",null),e([o$r("href",{href:{type:String},dataURI:{type:String}})],j$b.prototype,"writeHref",null),e([e$A(d$v)],j$b.prototype,"primitive",void 0),j$b=n$K=e([n$e("esri.symbols.support.IconSymbol3DLayerResource")],j$b);const h$w="circle";var y$m=j$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$K;let p$_=e$K=class extends h$c{constructor(){super(...arguments),this.x=0,this.y=0;}clone(){return new e$K({x:this.x,y:this.y})}};e([y$5({type:Number})],p$_.prototype,"x",void 0),e([y$5({type:Number})],p$_.prototype,"y",void 0),p$_=e$K=e([n$e("esri.symbols.support.Symbol3DAnchorPosition2D")],p$_);var c$Z=p$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$w;const f$x=n$7.getLogger("esri.symbols.IconSymbol3DLayer");let b$b=d$w=class extends c$P{constructor(o){super(o),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0;}clone(){return new d$w({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:u$4(this.material)?this.material.clone():null,outline:u$4(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(o){const t=o.color||o$N,r=j$c(o),e=o.outline&&o.outline.width>0?{size:o.outline.width,color:(o.outline.color||o$N).clone()}:null;return new d$w({size:o.size,resource:{primitive:w$7(o.style)},material:{color:t},outline:e,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(o){const t=!o.color||t$G(o.color)?o$N:o.color,r=j$c(o);return new d$w({size:o.width<=o.height?o.height:o.width,resource:{href:o.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(o){return new d$w({resource:{href:Y({mediaType:"application/json",data:JSON.stringify(o.data)})}})}};function j$c(o){const t="width"in o?o.width:o.size,r="height"in o?o.height:o.size,e=v$c(o.xoffset),i=v$c(o.yoffset);return (e||i)&&t&&r?{x:-e/t,y:i/r}:null}function v$c(o){return isFinite(o)?o:0}e([y$5({type:l$B,json:{write:!0}})],b$b.prototype,"material",void 0),e([y$5({type:y$m,json:{write:!0}})],b$b.prototype,"resource",void 0),e([e$A({Icon:"icon"},{readOnly:!0})],b$b.prototype,"type",void 0),e([y$5(a$M)],b$b.prototype,"size",void 0),e([e$A({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),y$5({json:{default:"center"}})],b$b.prototype,"anchor",void 0),e([y$5({type:p$_,json:{type:[Number],read:{reader:o=>new p$_({x:o[0],y:o[1]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],b$b.prototype,"anchorPosition",void 0),e([y$5({type:a$O,json:{write:!0}})],b$b.prototype,"outline",void 0),b$b=d$w=e([n$e("esri.symbols.IconSymbol3DLayer")],b$b);const g$k={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function w$7(o){const t=g$k[o];return t||(f$x.warn(o+' cannot be mapped to Icon symbol. Fallback to "circle"'),"circle")}var S$8=b$b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$H;let j$d=u$H=class extends c$P{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=n$E(1),this.stipplePattern=null,this.stippleOffColor=null;}clone(){return new u$H({enabled:this.enabled,material:u$4(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})}static fromSimpleLineSymbol(t){return new u$H({size:t.width||1,cap:t.cap||"butt",join:t.join||"miter",material:{color:(t.color||o$N).clone()}})}};e([y$5({type:l$B,json:{write:!0}})],j$d.prototype,"material",void 0),e([e$A({Line:"line"},{readOnly:!0})],j$d.prototype,"type",void 0),e([y$5({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],j$d.prototype,"join",void 0),e([y$5({type:["butt","square","round"],json:{write:!0,default:"butt"}})],j$d.prototype,"cap",void 0),e([y$5(a$M)],j$d.prototype,"size",void 0),e([y$5(c$Q)],j$d.prototype,"stipplePattern",void 0),e([y$5({type:o$H})],j$d.prototype,"stippleOffColor",void 0),j$d=u$H=e([n$e("esri.symbols.LineSymbol3DLayer")],j$d);var f$y=j$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$t;const n$L=o$B()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let a$Q=m$t=class extends a$h{clone(){return new m$t({href:this.href,primitive:this.primitive})}};e([y$5({type:String,json:{read:c$Y,write:m$s}})],a$Q.prototype,"href",void 0),e([e$A(n$L)],a$Q.prototype,"primitive",void 0),a$Q=m$t=e([n$e("esri.symbols.support.ObjectSymbol3DLayerResource")],a$Q);const u$I="sphere";var d$x=a$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$L;let p$$=e$L=class extends h$c{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0;}clone(){return new e$L({x:this.x,y:this.y,z:this.z})}};e([y$5({type:Number})],p$$.prototype,"x",void 0),e([y$5({type:Number})],p$$.prototype,"y",void 0),e([y$5({type:Number})],p$$.prototype,"z",void 0),p$$=e$L=e([n$e("esri.symbols.support.Symbol3DAnchorPosition3D")],p$$);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$R;let c$_=a$R=class extends c$P{constructor(o){super(o),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0;}clone(){return new a$R({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:u$4(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return !this.resource||"string"!=typeof this.resource.href}};e([y$5({type:l$B,json:{write:!0}})],c$_.prototype,"material",void 0),e([y$5({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$_.prototype,"castShadows",void 0),e([y$5({type:d$x,json:{write:!0}})],c$_.prototype,"resource",void 0),e([e$A({Object:"object"},{readOnly:!0})],c$_.prototype,"type",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"width",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"height",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"depth",void 0),e([e$A({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),y$5({json:{default:"origin"}})],c$_.prototype,"anchor",void 0),e([y$5({type:p$$,json:{type:[Number],read:{reader:o=>new p$$({x:o[0],y:o[1],z:o[2]})},write:{writer:(o,t)=>{t.anchorPosition=[o.x,o.y,o.z];},overridePolicy(){return {enabled:"relative"===this.anchor}}}}})],c$_.prototype,"anchorPosition",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"heading",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"tilt",void 0),e([y$5({type:Number,json:{write:!0}})],c$_.prototype,"roll",void 0),e([y$5({readOnly:!0,dependsOn:["resource","resource.href"]})],c$_.prototype,"isPrimitive",null),c$_=a$R=e([n$e("esri.symbols.ObjectSymbol3DLayer")],c$_);var l$E=c$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$S;let l$F=a$S=class extends c$P{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all";}get size(){return this.width&&this.height?this.width===this.height?this.width:void 0:this.width?this.width:this.height?this.height:void 0}set size(t){this.width=t,this.height=t;}readSize(t,e){return e.height||e.width?t:e.size}clone(){return new a$S({enabled:this.enabled,material:u$4(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e([y$5({type:l$B,json:{write:!0}})],l$F.prototype,"material",void 0),e([y$5({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],l$F.prototype,"castShadows",void 0),e([e$A({Path:"path"},{readOnly:!0})],l$F.prototype,"type",void 0),e([y$5({type:Number})],l$F.prototype,"size",null),e([e$l("size")],l$F.prototype,"readSize",null),e([y$5({type:["circle","quad"],json:{write:!0,default:"circle"}})],l$F.prototype,"profile",void 0),e([y$5({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],l$F.prototype,"join",void 0),e([y$5({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],l$F.prototype,"cap",void 0),e([y$5({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],l$F.prototype,"width",void 0),e([y$5({type:Number,json:{write:!0}})],l$F.prototype,"height",void 0),e([y$5({type:["center","bottom","top"],json:{write:!0,default:"center"}})],l$F.prototype,"anchor",void 0),e([y$5({type:["heading","all"],json:{write:!0,default:"all"}})],l$F.prototype,"profileRotation",void 0),l$F=a$S=e([n$e("esri.symbols.PathSymbol3DLayer")],l$F);var c$$=l$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$u;let l$G=m$u=class extends a$h{constructor(){super(...arguments),this.color=new o$H([0,0,0,1]),this.size=0;}clone(){return new m$u({color:s$4(this.color),size:this.size})}};e([y$5(s$D)],l$G.prototype,"color",void 0),e([y$5(a$M)],l$G.prototype,"size",void 0),l$G=m$u=e([n$e("esri.symbols.support.Symbol3DHalo")],l$G);var u$J=l$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$10;let h$x=c$10=class extends c$P{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text";}get font(){return this._get("font")||null}set font(t){t&&this._userSize&&(t.size=this._userSize),this._set("font",t);}writeFont(t,o,e,r){const s={...r,textSymbol3D:!0};o.font=t.write({},s),delete o.font.size;}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(t){this._userSize=t,this.font&&(this.font.size=this._userSize),this.notifyChange("size");}clone(){return new c$10({enabled:this.enabled,font:this.font&&s$4(this.font),halo:this.halo&&s$4(this.halo),material:u$4(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(t){const e=function(t,e){if(t&&e>0)return {color:s$4(t),size:e};return null}(t.haloColor,t.haloSize),r=t.font?t.font.clone():new a$P;return new c$10({size:r.size,font:r,halo:e,material:t.color?{color:t.color.clone()}:null,text:t.text})}};e([y$5({type:a$P,json:{write:!0}})],h$x.prototype,"font",null),e([o$r("font")],h$x.prototype,"writeFont",null),e([y$5({type:u$J,json:{write:!0}})],h$x.prototype,"halo",void 0),e([y$5({type:l$B,json:{write:!0}})],h$x.prototype,"material",void 0),e([y$5(a$M),y$5({dependsOn:["font.size"]})],h$x.prototype,"size",null),e([y$5({type:String,json:{write:!0}})],h$x.prototype,"text",void 0),e([e$A({Text:"text"},{readOnly:!0})],h$x.prototype,"type",void 0),h$x=c$10=e([n$e("esri.symbols.TextSymbol3DLayer")],h$x);var f$z=h$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$H;let c$11=l$H=class extends c$P{constructor(o){super(o),this.color=m$v.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate";}clone(){return new l$H({color:s$4(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e([y$5({type:o$H,nonNullable:!0,json:{type:[N],write:(o,r,e)=>r[e]=o.toArray(1),default:()=>m$v.clone(),defaultEquals:o=>o.toCss(!0)===m$v.toCss(!0)}})],c$11.prototype,"color",void 0),e([e$A({Water:"water"},{readOnly:!0})],c$11.prototype,"type",void 0),e([y$5({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c$11.prototype,"waterbodySize",void 0),e([y$5({type:Number,json:{write:!0,default:null}})],c$11.prototype,"waveDirection",void 0),e([y$5({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c$11.prototype,"waveStrength",void 0),c$11=l$H=e([n$e("esri.symbols.WaterSymbol3DLayer")],c$11);const m$v=new o$H([0,119,190]);var n$M=c$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$10;let i$18=p$10=class extends h$c{constructor(){super(...arguments),this.portal=null;}clone(){return new p$10({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e([y$5({type:String})],i$18.prototype,"name",void 0),e([y$5({type:String})],i$18.prototype,"styleUrl",void 0),e([y$5({type:String})],i$18.prototype,"styleName",void 0),e([y$5({type:C$2})],i$18.prototype,"portal",void 0),i$18=p$10=e([n$e("esri.symbols.support.StyleOrigin")],i$18);var l$I=i$18;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$H;let p$11=t$H=class extends h$c{clone(){return new t$H({url:this.url})}};e([y$5({type:String})],p$11.prototype,"url",void 0),p$11=t$H=e([n$e("esri.symbols.support.Thumbnail")],p$11);var c$12=p$11;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const v$d={icon:S$8,object:l$E,line:f$y,path:c$$,fill:h$u,extrude:c$U,text:f$z,water:n$M},k$8=L$2.ofType({base:c$P,key:"type",typeMap:v$d,errorContext:"symbol-layer"}),C$5=n$7.getLogger("esri.symbols.Symbol3D");let T$8=class extends a$L{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,o=r&&r.type||L$2;this._set("symbolLayers",new o);}get color(){return null}set color(e){C$5.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.");}set symbolLayers(e){n$u(e,this._get("symbolLayers"));}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=n$J(e.styleUrl,o);return new l$I({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new l$I({portal:o&&o.portal||C$2.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new t$8("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}));}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=i$17(e.styleUrl,t);G(o)&&(o=Q(o)),r.styleOrigin={styleUrl:o,name:e.name};}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!B$1(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new t$8("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name});}normalizeCtorArgs(e){return e instanceof c$P||e&&v$d[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e([y$5({json:{read:!1,write:!1}})],T$8.prototype,"color",null),e([y$5({type:k$8,nonNullable:!0,json:{write:!0}}),i$b(t$s)],T$8.prototype,"symbolLayers",null),e([y$5({type:l$I})],T$8.prototype,"styleOrigin",void 0),e([e$l("styleOrigin")],T$8.prototype,"readStyleOrigin",null),e([o$r("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],T$8.prototype,"writeStyleOrigin",null),e([y$5({type:c$12,json:{read:!1}})],T$8.prototype,"thumbnail",void 0),e([y$5({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],T$8.prototype,"type",void 0),T$8=e([n$e("esri.symbols.Symbol3D")],T$8);var A$a=T$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$19;let l$J=i$19=class extends a$h{constructor(){super(...arguments),this.color=new o$H("white");}clone(){return new i$19({color:s$4(this.color)})}};e([y$5(s$D)],l$J.prototype,"color",void 0),l$J=i$19=e([n$e("esri.symbols.callouts.LineCallout3DBorder")],l$J);var m$w=l$J,a$T=Object.freeze({__proto__:null,get LineCallout3DBorder(){return l$J},default:m$w});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$I=class extends a$h{constructor(r){super(r),this.visible=!0;}clone(){}};e([y$5({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t$I.prototype,"type",void 0),e([y$5({readOnly:!0})],t$I.prototype,"visible",void 0),t$I=e([n$e("esri.symbols.callouts.Callout3D")],t$I);var p$12=t$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$K;let d$y=u$K=class extends p$12{constructor(o){super(o),this.type="line",this.color=new o$H([0,0,0,1]),this.size=n$E(1),this.border=null;}get visible(){return this.size>0&&u$4(this.color)&&this.color.a>0}clone(){return new u$K({color:s$4(this.color),size:this.size,border:s$4(this.border)})}};e([e$A({line:"line"},{readOnly:!0})],d$y.prototype,"type",void 0),e([y$5(s$D)],d$y.prototype,"color",void 0),e([y$5(a$M)],d$y.prototype,"size",void 0),e([y$5({type:m$w,json:{write:!0}})],d$y.prototype,"border",void 0),e([y$5({dependsOn:["size","color"],readOnly:!0})],d$y.prototype,"visible",null),d$y=u$K=e([n$e("esri.symbols.callouts.LineCallout3D")],d$y);var j$e=d$y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$13;let i$1a=p$13=class extends a$h{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0;}clone(){return new p$13({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e([y$5(a$M)],i$1a.prototype,"screenLength",void 0),e([y$5({type:Number,json:{write:!0,default:0}})],i$1a.prototype,"minWorldLength",void 0),e([y$5({type:Number,json:{write:!0}})],i$1a.prototype,"maxWorldLength",void 0),i$1a=p$13=e([n$e("esri.symbols.support.Symbol3DVerticalOffset")],i$1a);var m$x=i$1a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$z(t){if(!t)return !1;const e=t.verticalOffset;return !!e&&!(e.screenLength<=0||e.maxWorldLength<=0)}function n$N(t){if(!t)return !1;if(!t.supportsCallout||!t.supportsCallout())return !1;const e=t.callout;return !!e&&(!!e.visible&&!!r$z(t))}const l$K={types:{key:"type",base:p$12,typeMap:{line:j$e}},json:{write:!0}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$L;const n$O=L$2.ofType({base:null,key:"type",typeMap:{text:f$z}});let f$A=u$L=class extends A$a{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new n$O,this.type="label-3d";}supportsCallout(){return !0}hasVisibleCallout(){return n$N(this)}hasVisibleVerticalOffset(){return r$z(this)}clone(){return new u$L({styleOrigin:s$4(this.styleOrigin),symbolLayers:s$4(this.symbolLayers),thumbnail:s$4(this.thumbnail),callout:s$4(this.callout),verticalOffset:s$4(this.verticalOffset)})}static fromTextSymbol(t){return new u$L({symbolLayers:[f$z.fromTextSymbol(t)]})}};e([y$5({type:m$x,json:{write:!0}})],f$A.prototype,"verticalOffset",void 0),e([y$5(l$K)],f$A.prototype,"callout",void 0),e([y$5({json:{read:!1,write:!1}})],f$A.prototype,"styleOrigin",void 0),e([y$5({type:n$O})],f$A.prototype,"symbolLayers",void 0),e([e$A({LabelSymbol3D:"label-3d"},{readOnly:!0})],f$A.prototype,"type",void 0),f$A=u$L=e([n$e("esri.symbols.LabelSymbol3D")],f$A);var b$c=f$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var y$n;const a$U=L$2.ofType({base:null,key:"type",typeMap:{line:f$y,path:c$$}}),n$P=L$2.ofType({base:null,key:"type",typeMap:{line:f$y,path:c$$}});let c$13=y$n=class extends A$a{constructor(o){super(o),this.symbolLayers=new a$U,this.type="line-3d";}clone(){return new y$n({styleOrigin:s$4(this.styleOrigin),symbolLayers:s$4(this.symbolLayers),thumbnail:s$4(this.thumbnail)})}static fromSimpleLineSymbol(o){return new y$n({symbolLayers:[f$y.fromSimpleLineSymbol(o)]})}};e([y$5({type:a$U,json:{type:n$P}})],c$13.prototype,"symbolLayers",void 0),e([e$A({LineSymbol3D:"line-3d"},{readOnly:!0})],c$13.prototype,"type",void 0),c$13=y$n=e([n$e("esri.symbols.LineSymbol3D")],c$13);var u$M=c$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$14=class extends a$L{constructor(r){super(r),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9;}hash(){return `${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e([y$5({type:Number,json:{read:r=>r&&-1*r,write:(r,t)=>t.angle=r&&-1*r}})],p$14.prototype,"angle",void 0),e([y$5({type:["simple-marker","picture-marker"],readOnly:!0})],p$14.prototype,"type",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],p$14.prototype,"xoffset",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],p$14.prototype,"yoffset",void 0),e([y$5({type:Number,cast:r=>"auto"===r?r:c$A(r),json:{write:!0}})],p$14.prototype,"size",void 0),p$14=e([n$e("esri.symbols.MarkerSymbol")],p$14);var i$1b=p$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$L;const c$14=L$2.ofType({base:null,key:"type",typeMap:{fill:h$u}});let y$o=l$L=class extends A$a{constructor(o){super(o),this.symbolLayers=new c$14,this.type="mesh-3d";}clone(){return new l$L({styleOrigin:s$4(this.styleOrigin),symbolLayers:s$4(this.symbolLayers),thumbnail:s$4(this.thumbnail)})}};e([y$5({type:c$14})],y$o.prototype,"symbolLayers",void 0),e([e$A({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],y$o.prototype,"type",void 0),y$o=l$L=e([n$e("esri.symbols.MeshSymbol3D")],y$o);var a$V=y$o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$F(a,r,t){return r.imageData?Y({mediaType:r.contentType||"image/png",isBase64:!0,data:r.imageData}):l$M(r.url,t)}function l$M(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!G(e)&&t.layer.parsedUrl?_$2(t.layer.parsedUrl.path,"images",e):n$J(e,t)}function u$N(e,a,r,n){if(K(e)){const t=X(e);a.contentType=t.mediaType,a.imageData=t.data,r&&r.imageData===a.imageData&&r.url&&m$s(r.url,a,"url",n);}else m$s(e,a,"url",n);}const m$y={json:{read:{source:["imageData","url"],reader:s$F},write:{writer(e,a,r,t){u$N(e,a,this.source,t);}}}},c$15={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,a,r){const t={};return a.imageData&&(t.imageData=a.imageData),a.contentType&&(t.contentType=a.contentType),a.url&&(t.url=l$M(a.url,r)),t}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var h$y;let u$O=h$y=class extends i$14{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null;}normalizeCtorArgs(t,o,s,r){if(t&&"string"!=typeof t&&null==t.imageData)return t;const e={};return t&&(e.url=t),o&&(e.outline=o),null!=s&&(e.width=c$A(s)),null!=r&&(e.height=c$A(r)),e}clone(){const t=new h$y({color:s$4(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",s$4(this.source)),t}hash(){return `${super.hash()}.${this.color.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e([e$A({esriPFS:"picture-fill"},{readOnly:!0})],u$O.prototype,"type",void 0),e([y$5(m$y)],u$O.prototype,"url",void 0),e([y$5({type:Number,json:{write:!0}})],u$O.prototype,"xscale",void 0),e([y$5({type:Number,json:{write:!0}})],u$O.prototype,"yscale",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],u$O.prototype,"width",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],u$O.prototype,"height",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],u$O.prototype,"xoffset",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],u$O.prototype,"yoffset",void 0),e([y$5(c$15)],u$O.prototype,"source",void 0),u$O=h$y=e([n$e("esri.symbols.PictureFillSymbol")],u$O);var a$W=u$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$N;let a$X=l$N=class extends i$1b{constructor(...r){super(...r),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null;}normalizeCtorArgs(r,t,o){if(r&&"string"!=typeof r&&null==r.imageData)return r;const e={};return r&&(e.url=r),null!=t&&(e.width=c$A(t)),null!=o&&(e.height=c$A(o)),e}readHeight(r,t){return t.size||r}readWidth(r,t){return t.size||r}clone(){const r=new l$N({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return r._set("source",s$4(this.source)),r}hash(){return `${super.hash()}.${this.height}.${this.url}.${this.width}`}};e([y$5({json:{write:!1}})],a$X.prototype,"color",void 0),e([e$A({esriPMS:"picture-marker"},{readOnly:!0})],a$X.prototype,"type",void 0),e([y$5(m$y)],a$X.prototype,"url",void 0),e([y$5(c$15)],a$X.prototype,"source",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],a$X.prototype,"height",void 0),e([e$l("height",["height","size"])],a$X.prototype,"readHeight",null),e([y$5({type:Number,cast:c$A,json:{write:!0}})],a$X.prototype,"width",void 0),e([y$5({json:{write:!1}})],a$X.prototype,"size",void 0),a$X=l$N=e([n$e("esri.symbols.PictureMarkerSymbol")],a$X);var m$z=a$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var h$z;const j$f=L$2.ofType({base:null,key:"type",typeMap:{icon:S$8,object:l$E,text:f$z}}),S$9=L$2.ofType({base:null,key:"type",typeMap:{icon:S$8,object:l$E}});let L$6=h$z=class extends A$a{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new j$f,this.type="point-3d";}writeSymbolLayers(e,t,o,r){const s=e.filter(e=>"text"!==e.type);if(r&&r.messages&&s.length<e.length){const t=e.find(e=>"text"===e.type);r.messages.push(new s$g("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:t}));}t[o]=s.map(e=>e.write({},r)).toArray();}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return !1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return !1}return !0}hasVisibleCallout(){return n$N(this)}hasVisibleVerticalOffset(){return r$z(this)}clone(){return new h$z({verticalOffset:s$4(this.verticalOffset),callout:s$4(this.callout),styleOrigin:s$4(this.styleOrigin),symbolLayers:s$4(this.symbolLayers),thumbnail:s$4(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new h$z({symbolLayers:[S$8.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new h$z({symbolLayers:[S$8.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){return new h$z({symbolLayers:[S$8.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}static fromTextSymbol(e){return new h$z({symbolLayers:[f$z.fromTextSymbol(e)]})}};e([y$5({type:m$x,json:{write:!0}})],L$6.prototype,"verticalOffset",void 0),e([y$5(l$K)],L$6.prototype,"callout",void 0),e([y$5({type:j$f,json:{type:S$9,origins:{"web-scene":{type:S$9}}}})],L$6.prototype,"symbolLayers",void 0),e([o$r("web-scene","symbolLayers")],L$6.prototype,"writeSymbolLayers",null),e([e$A({PointSymbol3D:"point-3d"},{readOnly:!0})],L$6.prototype,"type",void 0),L$6=h$z=e([n$e("esri.symbols.PointSymbol3D")],L$6);var d$z=L$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var L$7;const S$a=L$2.ofType({base:null,key:"type",typeMap:{extrude:c$U,fill:h$u,icon:S$8,line:f$y,object:l$E,text:f$z,water:n$M}}),d$A=L$2.ofType({base:null,key:"type",typeMap:{extrude:c$U,fill:h$u,icon:S$8,line:f$y,object:l$E,water:n$M}});let g$l=L$7=class extends A$a{constructor(o){super(o),this.type="polygon-3d";}writeSymbolLayers(o,e,r,t){const s=o.filter(o=>"text"!==o.type);if(t&&t.messages&&s.length<o.length){const e=o.find(o=>"text"===o.type);t.messages.push(new s$g("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:e}));}e[r]=s.map(o=>o.write({},t)).toArray();}clone(){return new L$7({styleOrigin:s$4(this.styleOrigin),symbolLayers:s$4(this.symbolLayers),thumbnail:s$4(this.thumbnail)})}static fromJSON(o){const e=new L$7;if(e.read(o),2===e.symbolLayers.length&&"fill"===e.symbolLayers.getItemAt(0).type&&"line"===e.symbolLayers.getItemAt(1).type){const t=e.symbolLayers.getItemAt(0),s=e.symbolLayers.getItemAt(1);!s.enabled||o.symbolLayers&&o.symbolLayers[1]&&!1===o.symbolLayers[1].enable||(t.outline={size:s.size,color:u$4(s.material)?s.material.color:null}),e.symbolLayers.removeAt(1);}return e}static fromSimpleFillSymbol(o){return new L$7({symbolLayers:[h$u.fromSimpleFillSymbol(o)]})}};e([y$5({type:S$a,json:{type:d$A}})],g$l.prototype,"symbolLayers",void 0),e([o$r("web-scene","symbolLayers")],g$l.prototype,"writeSymbolLayers",null),e([e$A({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],g$l.prototype,"type",void 0),g$l=L$7=e([n$e("esri.symbols.PolygonSymbol3D")],g$l);var h$A=g$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$16;const n$Q=new t$q({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let m$A=c$16=class extends i$14{constructor(...o){super(...o),this.color=new o$H([0,0,0,.25]),this.outline=new d$t,this.type="simple-fill",this.style="solid";}normalizeCtorArgs(o,r,s){if(o&&"string"!=typeof o)return o;const e={};return o&&(e.style=o),r&&(e.outline=r),s&&(e.color=s),e}clone(){return new c$16({color:s$4(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return `${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e([y$5()],m$A.prototype,"color",void 0),e([y$5()],m$A.prototype,"outline",void 0),e([e$A({esriSFS:"simple-fill"},{readOnly:!0})],m$A.prototype,"type",void 0),e([y$5({type:n$Q.apiValues,json:{read:n$Q.read,write:n$Q.write}})],m$A.prototype,"style",void 0),m$A=c$16=e([n$e("esri.symbols.SimpleFillSymbol")],m$A);var u$P=m$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$B;const u$Q=new t$q({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let h$B=m$B=class extends i$1b{constructor(...r){super(...r),this.color=new o$H([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new d$t;}normalizeCtorArgs(r,o,e,t){if(r&&"string"!=typeof r)return r;const s={};return r&&(s.style=r),null!=o&&(s.size=c$A(o)),e&&(s.outline=e),t&&(s.color=t),s}writeColor(r,o){r&&"x"!==this.style&&"cross"!==this.style&&(o.color=r.toJSON()),null===r&&(o.color=null);}set path(r){this.style="path",this._set("path",r);}clone(){return new m$B({angle:this.angle,color:s$4(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var r;return `${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(r=this.outline)?void 0:r.hash()}`}};e([y$5()],h$B.prototype,"color",void 0),e([o$r("color")],h$B.prototype,"writeColor",null),e([e$A({esriSMS:"simple-marker"},{readOnly:!0})],h$B.prototype,"type",void 0),e([y$5()],h$B.prototype,"size",void 0),e([y$5({type:u$Q.apiValues,json:{read:u$Q.read,write:u$Q.write}})],h$B.prototype,"style",void 0),e([y$5({type:String,json:{write:!0}})],h$B.prototype,"path",null),e([y$5({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d$t}},json:{default:null,write:!0}})],h$B.prototype,"outline",void 0),h$B=m$B=e([n$e("esri.symbols.SimpleMarkerSymbol")],h$B);var y$p=h$B;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$B;let c$17=d$B=class extends a$L{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new a$P,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1;}normalizeCtorArgs(t,o,e){if(t&&"string"!=typeof t)return t;const i={};return t&&(i.text=t),o&&(i.font=o),e&&(i.color=e),i}writeLineWidth(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}castLineWidth(t){return c$A(t)}writeLineHeight(t,o,e,i){i&&"string"!=typeof i?i.origin:o[e]=t;}clone(){return new d$B({angle:this.angle,backgroundColor:s$4(this.backgroundColor),borderLineColor:s$4(this.borderLineColor),borderLineSize:this.borderLineSize,color:s$4(this.color),font:this.font&&this.font.clone(),haloColor:s$4(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return `${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e([y$5({type:o$H,json:{write:!0}})],c$17.prototype,"backgroundColor",void 0),e([y$5({type:o$H,json:{write:!0}})],c$17.prototype,"borderLineColor",void 0),e([y$5({type:Number,json:{write:!0}})],c$17.prototype,"borderLineSize",void 0),e([y$5({type:a$P,json:{write:!0}})],c$17.prototype,"font",void 0),e([y$5({type:["left","right","center","justify"],json:{write:!0}})],c$17.prototype,"horizontalAlignment",void 0),e([y$5({type:Boolean,json:{write:!0}})],c$17.prototype,"kerning",void 0),e([y$5({type:o$H,json:{write:!0}})],c$17.prototype,"haloColor",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],c$17.prototype,"haloSize",void 0),e([y$5({type:Boolean,json:{write:!0}})],c$17.prototype,"rightToLeft",void 0),e([y$5({type:Boolean,json:{write:!0}})],c$17.prototype,"rotated",void 0),e([y$5({type:String,json:{write:!0}})],c$17.prototype,"text",void 0),e([e$A({esriTS:"text"},{readOnly:!0})],c$17.prototype,"type",void 0),e([y$5({type:["baseline","top","middle","bottom"],json:{write:!0}})],c$17.prototype,"verticalAlignment",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],c$17.prototype,"xoffset",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],c$17.prototype,"yoffset",void 0),e([y$5({type:Number,json:{read:t=>t&&-1*t,write:(t,o)=>o.angle=t&&-1*t}})],c$17.prototype,"angle",void 0),e([y$5({type:Number,json:{write:!0}})],c$17.prototype,"width",void 0),e([y$5({type:Number})],c$17.prototype,"lineWidth",void 0),e([o$r("lineWidth")],c$17.prototype,"writeLineWidth",null),e([i$b("lineWidth")],c$17.prototype,"castLineWidth",null),e([y$5({type:Number})],c$17.prototype,"lineHeight",void 0),e([o$r("lineHeight")],c$17.prototype,"writeLineHeight",null),c$17=d$B=e([n$e("esri.symbols.TextSymbol")],c$17);var y$q=c$17;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$18;const n$R=n$7.getLogger("esri.symbols.WebStyleSymbol");let u$R=c$18=class extends a$L{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style";}read(t,r){this.portal=r?r.portal:void 0,super.read(t,r);}clone(){return new c$18({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,r){const o=await Promise.resolve().then(function () { return styleUtils; });j$2(r);const e=o.resolveWebStyleSymbol(this,{portal:this.portal},t,r);return e.catch(t=>{n$R.error("#fetchSymbol()","Failed to create symbol from style",t);}),e}};e([y$5({json:{write:!1}})],u$R.prototype,"color",void 0),e([y$5({type:String,json:{write:!0}})],u$R.prototype,"styleName",void 0),e([y$5({type:C$2,json:{write:!1}})],u$R.prototype,"portal",void 0),e([y$5({type:String,json:{read:c$Y,write:m$s}})],u$R.prototype,"styleUrl",void 0),e([y$5({type:c$12,json:{read:!1}})],u$R.prototype,"thumbnail",void 0),e([y$5({type:String,json:{write:!0}})],u$R.prototype,"name",void 0),e([e$A({styleSymbolReference:"web-style"},{readOnly:!0})],u$R.prototype,"type",void 0),u$R=c$18=e([n$e("esri.symbols.WebStyleSymbol")],u$R);var h$C=u$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function j$g(e,s=!1,r=!1,l=!0){if(!e)return {symbol:null};let t;if(x$d(e)||e instanceof h$C)t=e.clone();else if("cim"===e.type)t=d$z.fromCIMSymbol(e);else if(e instanceof d$t)t=u$M.fromSimpleLineSymbol(e);else if(e instanceof y$p)t=d$z.fromSimpleMarkerSymbol(e);else if(e instanceof m$z)t=d$z.fromPictureMarkerSymbol(e);else if(e instanceof u$P)t=h$A.fromSimpleFillSymbol(e);else {if(!(e instanceof y$q))return {error:new s$g("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};t=l?b$c.fromTextSymbol(e):d$z.fromTextSymbol(e);}if(s&&(t.id=e.id),r&&x$d(t))for(let e=0;e<t.symbolLayers.length;++e)t.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return {symbol:t}}function w$8(e,s,r,l){const m=function(e,s,r){if(!e)return null;if(r&&"web-scene"===r.origin&&!(e instanceof A$a)&&!(e instanceof h$C)){const l="cim"!==e.type?j$g(e):{symbol:null,error:new s$g("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return l.symbol?l.symbol.write(s,r):(r.messages&&r.messages.push(new s$g("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:l.error})),null)}if(r&&"web-map"===r.origin&&"web-style"===e.type)return r.messages&&r.messages.push(new s$g("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null;return e.write(s,r)}(e,{},l);m&&(s[r]=m);}function D$5(e,s){return M$a(e,null,s)}function k$9(e){if(!e)return !1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return !0;default:return !1}}function x$d(e){if(!e)return !1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return !0;default:return !1}}const L$8={base:a$L,key:"type",typeMap:{"simple-fill":u$P,"picture-fill":a$W,"picture-marker":m$z,"simple-line":d$t,"simple-marker":y$p,text:y$q,"label-3d":b$c,"line-3d":u$M,"mesh-3d":a$V,"point-3d":d$z,"polygon-3d":h$A,"web-style":h$C,cim:d$s},errorContext:"symbol"},M$a=u$8({types:L$8}),h$D={base:a$L,key:"type",typeMap:{"simple-fill":u$P,"picture-fill":a$W,"picture-marker":m$z,"simple-line":d$t,"simple-marker":y$p,text:y$q,"line-3d":u$M,"mesh-3d":a$V,"point-3d":d$z,"polygon-3d":h$A,"web-style":h$C,cim:d$s},errorContext:"symbol"},C$6={base:a$L,key:"type",typeMap:{text:y$q,"label-3d":b$c},errorContext:"symbol"},F$7={base:a$L,key:"type",typeMap:{"line-3d":u$M,"mesh-3d":a$V,"point-3d":d$z,"polygon-3d":h$A,"web-style":h$C},errorContext:"symbol"},I$7={base:a$L,key:"type",typeMap:{"label-3d":b$c},errorContext:"symbol"},T$9=k(L$8);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$J=0;function e$M(){return t$J++}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var y$r;let h$E=y$r=class extends a$h{constructor(...t){super(...t),this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:e$M(),configurable:!0});}normalizeCtorArgs(t,e,r,s){return t&&!t.declaredClass?t:{geometry:t,symbol:e,attributes:r,popupTemplate:s}}set attributes(t){const e=this._get("attributes");e!==t&&(this._set("attributes",t),this._notifyLayer("attributes",e,t));}set geometry(t){const e=this._get("geometry");e!==t&&(this._set("geometry",t),this._notifyLayer("geometry",e,t));}set symbol(t){const e=this._get("symbol");e!==t&&(this._set("symbol",t),this._notifyLayer("symbol",e,t));}set visible(t){const e=this._get("visible");e!==t&&(this._set("visible",t),this._notifyLayer("visible",e,t));}getEffectivePopupTemplate(t=!1){return this.popupTemplate?this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:t&&"defaultPopupTemplate"in this.sourceLayer&&u$4(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null}getAttribute(t){return this.attributes&&this.attributes[t]}setAttribute(t,e){if(this.attributes){const r=this.getAttribute(t);this.attributes[t]=e,this._notifyLayer("attributes",r,e,t);}else this.attributes={[t]:e},this._notifyLayer("attributes",void 0,e,t);}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return {geometry:u$4(this.geometry)?this.geometry.toJSON():null,symbol:u$4(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new y$r(this.cloneProperties())}cloneProperties(){return {attributes:s$4(this.attributes),geometry:s$4(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:s$4(this.symbol),visible:this.visible}}_notifyLayer(t,e,r,s){if(!this.layer||!("graphicChanged"in this.layer))return;const o={graphic:this,property:t,oldValue:e,newValue:r};"attributes"===t&&(o.attributeName=s),this.layer.graphicChanged(o);}};e([y$5({value:null})],h$E.prototype,"attributes",null),e([y$5({value:null,types:i$w,json:{read:p$i}})],h$E.prototype,"geometry",null),e([y$5()],h$E.prototype,"layer",void 0),e([y$5({type:P$5})],h$E.prototype,"popupTemplate",void 0),e([y$5()],h$E.prototype,"sourceLayer",void 0),e([y$5({value:null,types:L$8})],h$E.prototype,"symbol",null),e([y$5({type:Boolean,value:!0})],h$E.prototype,"visible",null),h$E=y$r=e([n$e("esri.Graphic")],h$E),function(t){t.generateUID=e$M;}(h$E||(h$E={}));var c$19=h$E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function c$1a(n,t,r,e,o){const u=n.watch(t,(t,o,u,c)=>{r&&!r(t)||null==e||e.call(n,t,o,u,c);},o);if(Array.isArray(t))for(const o of t){const u=n.get(o);r&&r(u)&&(null==e||e.call(n,u,u,t,n));}else {const o=n.get(t);r&&r(o)&&(null==e||e.call(n,o,o,t,n));}return u}function i$1c(n,o,u,i,f){const l="function"==typeof i?i:null,s="object"==typeof i?i:null;"boolean"==typeof i&&(f=i);let a,m=!1;function p(){a&&(a.remove(),a=null);}const v=_$3();T$2(s,()=>{p(),v.reject(d$5());});const d={then:v.promise.then.bind(v.promise),catch:v.promise.catch.bind(v.promise),remove:p};return Object.freeze(d),a=c$1a(n,o,u,(t,r,e,o)=>{m=!0,p(),l&&l.call(n,t,r,e,o),v.resolve({value:t,oldValue:r,propertyName:e,target:o});},f),m&&p(),d}function f$B(n){return !!n}function l$O(n){return !n}function s$G(n){return !0===n}function a$Y(n){return !1===n}const v$e=/\?(\.|$)/g;function d$C(n,t,r,e){const o=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],u=h$F(n,t,r,e);for(const t of o){const e=t.trim().replace(v$e,"$1"),o=n.get(e);r.call(n,o,o,e,n);}return u}function h$F(n,t,r,e){return n.watch(t,r,e)}function y$s(n,t,r,e){return c$1a(n,t,f$B,r,e)}function j$h(n,t,r,e){return i$1c(n,t,f$B,r,e)}function b$d(n,t,r,e){return c$1a(n,t,l$O,r,e)}function w$9(n,t,r,e){return c$1a(n,t,s$G,r,e)}function x$e(n,t,r,e){return i$1c(n,t,s$G,r,e)}function O$4(n,t,r,e){return c$1a(n,t,a$Y,r,e)}function $$4(n,t,r,e){return i$1c(n,t,a$Y,r,e)}function q$3(n,t,r,e){let o=!1;const u=n.watch(t,(t,e,u,c)=>{o||r.call(n,t,e,u,c);},e);return {remove(){u.remove();},pause(){o=!0;},resume(){o=!1;}}}function B$5(n,t,r,e,c,i,f){const l={};function s(t){const e=l[t];e&&(i&&i(e.target,t,n,r),e.handle.remove(),delete l[t]);}const a=d$C(n,t,(t,i,f)=>{s(f),e$i(t)&&(l[f]={handle:r$d(t,r,e),target:t},c&&c(t,f,n,r));},f);return {remove(){a.remove();for(const n in l)s(n);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$1b;let i$1d=c$1b=class extends a$h{constructor(r){super(r),this.color=new o$H([0,0,0,1]);}clone(){return new c$1b(s$4({color:this.color}))}};e([y$5({type:o$H,json:{write:!0}})],i$1d.prototype,"color",void 0),i$1d=c$1b=e([n$e("esri.webmap.background.ColorBackground")],i$1d);var m$C=i$1d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$A={geometryEngineWorker:()=>import('./chunks/geometryEngineWorker-55d9cc59.js'),CSVSourceWorker:()=>import('./chunks/CSVSourceWorker-29f6a8d6.js'),EdgeProcessingWorker:()=>import('./chunks/EdgeProcessingWorker-dc40915e.js'),ElevationSamplerWorker:()=>import('./chunks/ElevationSamplerWorker-679b0229.js'),GeoJSONSourceWorker:()=>import('./chunks/GeoJSONSourceWorker-a7c72ef7.js'),LercWorker:()=>import('./chunks/LercWorker-4a3eaa42.js'),MemorySourceWorker:()=>import('./chunks/MemorySourceWorker-4394ff17.js'),PBFDecoderWorker:()=>import('./chunks/PBFDecoderWorker-89dbbd2c.js'),Pipeline:()=>import('./chunks/Pipeline-63458f69.js'),PointCloudWorker:()=>import('./chunks/PointCloudWorker-3ecb1b49.js'),RasterWorker:()=>import('./chunks/RasterWorker-6aa5c04d.js'),SceneLayerWorker:()=>import('./chunks/SceneLayerWorker-b42f69f4.js'),WorkerTileHandler:()=>import('./chunks/WorkerTileHandler-66dbfef6.js')};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var r$B;!function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.CONFIGURE=1]="CONFIGURE",t[t.CONFIGURED=2]="CONFIGURED",t[t.OPEN=3]="OPEN",t[t.OPENED=4]="OPENED",t[t.RESPONSE=5]="RESPONSE",t[t.INVOKE=6]="INVOKE",t[t.ABORT=7]="ABORT",t[t.CLOSE=8]="CLOSE",t[t.OPEN_PORT=9]="OPEN_PORT",t[t.ON=10]="ON";}(r$B||(r$B={}));let e$N=0;function n$S(){return e$N++}function s$H(t){return t&&"object"==typeof t&&("result"in t||"transferList"in t)}function a$Z(t){return t?"string"==typeof t?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i$1e(t,e,n,a){if(e.type===r$B.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==r$B.INVOKE&&e.type!==r$B.RESPONSE)return void t.postMessage(e);let i;s$H(n)?(i=f$C(n.transferList),e.data=n.result):(i=f$C(a),e.data=n),i?t.postMessage(e,i):t.postMessage(e);}function O$5(t){if(!t)return null;const r=t.data;return r?"string"==typeof r?JSON.parse(r):r:null}function f$C(r){if(!r||!r.length)return null;if(s("esri-workers-arraybuffer-transfer"))return r;const e=r.filter(t=>{return !((r=t)instanceof ArrayBuffer||r&&r.constructor&&"ArrayBuffer"===r.constructor.name);var r;});return e.length?e:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$O{constructor(t,s,e){this.resolve=t,this.reject=s,this.callback=e;}}class d$D{constructor(){this._tasks=new Array;}get length(){return this._tasks.length}push(s){return v$3((t,r)=>this._tasks.push(new e$O(t,r,s)))}unshift(s){return v$3((t,r)=>this._tasks.unshift(new e$O(t,r,s)))}process(){if(0===this._tasks.length)return !1;const t=this._tasks.shift();try{const s=t.callback();s&&"object"==typeof s&&"then"in s&&"function"==typeof s.then?s.then(t.resolve,t.reject):t.resolve(s);}catch(s){t.reject(s);}return !0}cancelAll(){const t=d$5();for(const s of this._tasks)s.reject(t);this._tasks.length=0;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$K=class extends h$c{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1;}};e([y$5()],t$K.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),t$K=e([n$e("esri.views.support.DebugFlags")],t$K);const p$15=new t$K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$P=n$7.getLogger("esri.views.support.Scheduler");var T$a;!function(e){e.REMOTE_CLIENT="remote client",e.STREAM_DATA_LOADER="stream data loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain surface",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.I3S_CONTROLLER="I3S controller",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.FEATURE_FETCH_QUEUE="feature fetch queue",e.GRAPHICS_CORE="Graphics3D",e.LABELER="labeler",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.FEATURE_QUERY_ENGINE="feature query",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.OVERLAY_MANAGER="overlay manager",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e[e.TEST_PRIO=1]="TEST_PRIO";}(T$a||(T$a={}));const p$16={[T$a.REMOTE_CLIENT]:1,[T$a.STREAM_DATA_LOADER]:1,[T$a.FEATURE_FETCH_QUEUE]:1,[T$a.ELEVATION_QUERY]:1,[T$a.TERRAIN_SURFACE]:2,[T$a.SURFACE_GEOMETRY_UPDATES]:2,[T$a.I3S_CONTROLLER]:4,[T$a.POINT_CLOUD_LAYER]:4,[T$a.FEATURE_TILE_FETCHER]:4,[T$a.GRAPHICS_CORE]:6,[T$a.LABELER]:6,[T$a.GRAPHICS_DECONFLICTOR]:6,[T$a.FILTER_VISIBILITY]:8,[T$a.FEATURE_QUERY_ENGINE]:8,[T$a.SCALE_VISIBILITY]:8,[T$a.FRUSTUM_VISIBILITY]:8,[T$a.POINT_OF_INTEREST_FREQUENT]:6,[T$a.POINT_OF_INTEREST_INFREQUENT]:30,[T$a.FEATURE_TILE_TREE]:16,[T$a.FEATURE_TILE_TREE_ACTIVE]:1,[T$a.ELEVATION_ALIGNMENT]:12,[T$a.TEXT_TEXTURE_ATLAS]:12,[T$a.TEXTURE_UNLOAD]:12,[T$a.OVERLAY_MANAGER]:12,[T$a.LINE_OF_SIGHT_TOOL]:16,[T$a.LINE_OF_SIGHT_TOOL_INTERACTIVE]:1};function g$m(e){return e in p$16?p$16[e]:"number"==typeof e?e:1}var I$8,R$6;!function(s){s.Scheduler=class{constructor(e){this._now=e,this._budget=null,this._state=1,this._tasks=new i$l,this._runQueue=new i$l,this._load=0,this._idleStateCallbacks=new i$l,this._idleUpdatesStartFired=!1,this._maxReschedule=A$b,this._forceTask=!1,this._safetyBudget=0,this._debug=!1,this._debugHandle=d$C(p$15,"SCHEDULER_LOG_SLOW_TASKS",e=>this._debug=e),this._budget=new _(e);const s=this;let i;this._test={get state(){return t$6(i)?s._state:i},set state(e){i=e;},FRAME_SAFETY_BUDGET:5,INTERACTING_BUDGET:33.333333333333336,IDLE_BUDGET:100,get budget(){return s._budget.budget},usedBudget:0,startTime:0,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e)};}destroy(){this._debugHandle&&this._debugHandle.remove();}registerTask(e,t,s){const i=g$m(e),r=new a(this,e,t,s,i);return this._tasks.push(r),r}registerIdleStateCallbacks(e,t){const s={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(s),2===this.state&&this._idleUpdatesStartFired&&s.idleBegin();const i=this;return {remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(e){i._idleUpdatesStartFired&&(s.idleEnd(),2===i._state&&e()),s.idleBegin=e;},set idleEnd(e){s.idleEnd=e;}}}get now(){return this._now()}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forEachSimple(e=>e.idleEnd())));}get state(){return t$6(this._test.state)?this._state:this._test.state}updateBudget(e){this._test.usedBudget=0,this._test.startTime=e.elapsedFrameTime,this._safetyBudget=5;let t=e.frameDuration,s=1;switch(this.state){case 2:this._safetyBudget=0,t=Math.max(100,e.frameDuration),s=30;break;case 1:t=Math.max(33.333333333333336,e.frameDuration);}return t-=e.elapsedFrameTime+this._safetyBudget,2!==this.state&&t<0&&!this._forceTask?(this._forceTask=!0,!1):(t=Math.max(t,s),this._budget.reset(t,this.state),this._maxReschedule=A$b,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forEachSimple(e=>e.idleBegin())),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating();}this._test.usedBudget=this._budget.elapsed;}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e);}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e);}_updateTask(e){this._tasks.forEachSimple(t=>{t.name===e&&t.setPriority(e);});}_getState(e){if(this._runQueue.some(t=>t.name===e))return R$6.SCHEDULED;let t=R$6.IDLE;return this._tasks.forEachSimple(s=>{s.name===e&&s.needsUpdate&&(s.schedulePriority<=1?t=R$6.READY:t!==R$6.READY&&(t=R$6.WAITING));}),t}_getRuntime(e){let t=0;return this._tasks.forEachSimple(s=>{s.name===e&&(t+=s.runtime);}),t}_runIdle(){this._run();}_runInteracting(){this._run();}_runAnimating(){this._run();}_updateLoad(){const e=this._tasks.reduce((e,t)=>t.needsUpdate?++e:e,0);this._load=.9*this._load+e*(1-.9);}_schedule(){if(this._maxReschedule<=0)return !1;for(this._runQueue.filterInPlace(e=>!!e.needsUpdate||(e.schedulePriority=e.priority,!1));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forEachSimple(s=>{if(0!==s.schedulePriority&&s.needsUpdate)switch(e=!0,t=Math.max(t,s.priority),s.schedulePriority){case 1:s.schedulePriority=0,this._runQueue.push(s);break;default:--s.schedulePriority;}}),!e)return !1;this._maxReschedule===A$b&&(this._maxReschedule=t),--this._maxReschedule;}return !0}_run(){do{for(;this._runQueue.length>0;){const e=this._runQueue.pop();this._budget.resetProgress();const t=this._budget.now();try{e.processQueue(this._budget),!this._budget.done&&e.needsUpdate&&e.update(this._budget);}catch(t){l$P.error(`Exception in task "${e.name}"`,t);}if(e.schedulePriority=e.priority,e.runtime+=this._budget.now()-t,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",e.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return}}while(this._schedule())}get test(){return this._test}};let a=class extends h$c{constructor(e,t,s,i,r){super({}),this._scheduler=e,this.name=t,this.update=s,this._needsUpdateCB=i,this._priority=r,this.runtime=0,this._queue=new d$D,this.updating=!1,this.schedulePriority=this._priority;}normalizeCtorArgs(){return {}}remove(){this.processQueue(S$b),this._scheduler.removeTask(this);}get priority(){return this._priority}setPriority(e){this.name=e,this._priority=g$m(e),0!==this.schedulePriority&&(this.schedulePriority=this._priority);}get task(){return this.name}set task(e){this.setPriority(e);}get needsUpdate(){return this._queue.length>0||this._needsUpdateCB()}schedule(e,t){return this.updating=!0,this._queue.push(()=>(j$2(t),e()))}reschedule(e,t){return this.updating=!0,this._queue.unshift(()=>(j$2(t),e()))}processQueue(e){for(;!e.done&&this._queue.process();)e.madeProgress();0===this._queue.length&&(this.updating=!1);}};e([y$5()],a.prototype,"updating",void 0),a=e([n$e("esri.views.support.SchedulerTask")],a);class _{constructor(e){this.now=e,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0;}run(e){return !this.done&&(!0===e()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0;}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e;}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this._didWork=!1;}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1;}get hasProgressed(){return this._didWork}}s.Budget=_;}(I$8||(I$8={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i";}(R$6||(R$6={}));const S$b=(()=>{const e=new I$8.Budget(()=>performance.now());return e.enabled=!1,e})(),A$b=i$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const{CLOSE:b$e,ABORT:f$D,INVOKE:v$f,RESPONSE:M$b,OPEN_PORT:k$a,ON:y$t}=r$B;class j$i{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this);}push(e){e.type===r$B.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)));}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null;}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0;}}class I$9{constructor(e,s){this._port=e,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new j$i(e=>this._onInvokeMessage(e)),this._responseQueue=[],this._client=s.client,this._onMessage=this._onMessage.bind(this),this._channel=s.channel,s.scheduler&&(this._frameTask=s.scheduler.registerTask(T$a.REMOTE_CLIENT,e=>this._update(e),()=>this._responseQueue.length>0)),this._port.addEventListener("message",this._onMessage),this._port.start();}static connect(e){const s=new MessageChannel;let t;t="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const o=new I$9(s.port1,{channel:s,client:t});return "object"==typeof t&&"remoteClient"in t&&(t.remoteClient=o),I$9.clients.set(o,t),s.port2}static loadWorker(e){const t=r$A[e];return t?t():D$1(null)}close(){this._post({type:b$e}),this._close();}isBusy(){return this._outJobs.size>0}invoke(s,i,a){const l=a&&a.signal,h=a&&a.transferList;if(!this._port)return B$2(new s$g("worker:port-closed",`Cannot call invoke('${s}'), port is closed`,{methodName:s,data:i}));const c=n$S();return v$3((e,t)=>{const o=P$1(l,()=>{var e;const s=this._outJobs.get(c);s&&(this._outJobs.delete(c),null==(e=s.abortHandle)||e.remove(),this._post({type:f$D,jobId:c}),t(d$5()));}),a={resolve:e,reject:t,abortHandle:o,debugInfo:s};this._outJobs.set(c,a),this._post({type:v$f,jobId:c,methodName:s,abortable:null!=l},i,h);})}on(e,s){const t=new MessageChannel;function o(e){s(e.data);}return this._port.postMessage({type:r$B.ON,eventType:e,port:t.port2},[t.port2]),t.port1.addEventListener("message",o),t.port1.start(),{remove(){t.port1.postMessage({type:r$B.CLOSE}),t.port1.close(),t.port1.removeEventListener("message",o);}}}openPort(){const e=new MessageChannel;return this._post({type:k$a,port:e.port2}),e.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{var s;null==(s=e.abortHandle)||s.remove(),e.reject(d$5(`Worker closing, aborting job calling '${e.debugInfo}'`));}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask&&this._frameTask.remove(),this._frameTask=null,this._responseQueue=null;}_onMessage(e){const s=O$5(e);if(s)switch(s.type){case M$b:this._onResponseMessage(s);break;case v$f:this._invokeQueue.push(s);break;case f$D:this._onAbortMessage(s);break;case b$e:this._onCloseMessage();break;case k$a:this._onOpenPortMessage(s);break;case y$t:this._onOnMessage(s);}}_onAbortMessage(e){const s=this._inJobs,t=e.jobId,o=s.get(t);this._invokeQueue.push(e),o&&(o.controller&&o.controller.abort(),s.delete(t));}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&I$9.clients.get(this)===e&&e.destroy(),I$9.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null);}_onInvokeMessage(e){const{methodName:s,jobId:t,data:o,abortable:n}=e,r=n?g$4():null,h=this._inJobs;let c,_=this._client,p=_[s];try{if(!p&&s&&-1!==s.indexOf(".")){const e=s.split(".");for(let s=0;s<e.length-1;s++)_=_[e[s]],p=_[e[s+1]];}if("function"!=typeof p)throw new TypeError(s+" is not a function");c=p.call(_,o,{client:this,signal:r?r.signal:null});}catch(e){return void this._post({type:M$b,jobId:t,error:a$Z(e)})}F$1(c)?(h.set(t,{controller:r,promise:c}),c.then(e=>{h.has(t)&&(h.delete(t),this._post({type:M$b,jobId:t},e));},e=>{h.has(t)&&(h.delete(t),L$1(e)||this._post({type:M$b,jobId:t,error:a$Z(e||{message:"Error encountered at method "+s})}));})):this._post({type:M$b,jobId:t},c);}_onOpenPortMessage(e){new I$9(e.port,{client:this._client});}_onOnMessage(e){const{port:s}=e,t=this._client.on(e.eventType,e=>{s.postMessage(e);}),o=r$d(e.port,"message",e=>{O$5(e).type===r$B.CLOSE&&(o.remove(),t.remove(),s.close());});}_onResponseMessage(e){this._frameTask?this._responseQueue.push(e):this._handleResponse(e);}_update(e){for(;!e.done&&this._responseQueue.length>0;)this._handleResponse(this._responseQueue.shift()),e.madeProgress();}_handleResponse(s){var t;const{jobId:o,error:n,data:r}=s,i=this._outJobs;if(!i.has(o))return;const a=i.get(o);i.delete(o),null==(t=a.abortHandle)||t.remove(),n?a.reject(s$g.fromJSON(JSON.parse(n))):a.resolve(r);}_post(e,s,t){return i$1e(this._port,e,s,t)}}I$9.clients=new Map;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const _$b=n$7.getLogger("esri.core.workers.Connection");class s$I{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0;}destroy(){this.close();}get closed(){return !this._clients||!this._clients.length}open(t,e){return v$3((s,l)=>{let o=!0;const h=t=>{j$2(e.signal),o&&(o=!1,t());};this._clients.length=t.length,this._clientPromises.length=t.length;for(let i=0;i<t.length;++i){const o=t[i];S$2(o)?this._clientPromises[i]=o.then(t=>(this._clients[i]=new I$9(t,e),h(s),this._clients[i]),()=>(h(l),null)):(this._clients[i]=new I$9(o,e),this._clientPromises[i]=D$1(this._clients[i]),h(s));}})}broadcast(t,e,s){const i=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const r=this._clientPromises[n];i[n]=r.then(i=>i.invoke(t,e,s));}return i}close(){for(const t of this._clientPromises)t.then(t=>t.close());this._clients.length=0,this._clientPromises.length=0;}getAvailableClient(){let t;for(let e=0;e<this._clients.length;++e){const s=this._clients[e];if(s){if(!s.isBusy())return D$1(s)}else t=t||[],t.push(this._clientPromises[e]);}return t?z$1(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,D$1(this._clients[this._clientIdx]))}invoke(t,e,s){let i=null;if(Array.isArray(s)?(_$b.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:s}):i=s,this.closed)return B$2(new Error("Connection closed"));return this.getAvailableClient().then(s=>s.invoke(t,e,i))}on(t,s){return p$9(this._clientPromises).then(()=>r$8(this._clients.map(e=>e.on(t,s))))}openPorts(){return v$3(t=>{const e=new Array(this._clientPromises.length);let s=e.length;for(let i=0;i<this._clientPromises.length;++i){this._clientPromises[i].then(n=>{e[i]=n.openPort(),0==--s&&t(e);});}})}get test(){return {numClients:this._clients.length}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$J={};function e$P(a){var e;const r={async:a.async,isDebug:a.isDebug,locale:a.locale,baseUrl:a.baseUrl,has:{...a.has},map:{...a.map},packages:a.packages&&a.packages.concat()||[],paths:{...a.paths}};return a.hasOwnProperty("async")||(r.async=!0),a.hasOwnProperty("isDebug")||(r.isDebug=!1),a.baseUrl||(r.baseUrl=s$J.baseUrl),null==(e=s$J.packages)||e.forEach(a=>{!function(a,s){for(const e of a)if(e.name===s.name)return;a.push(s);}(r.packages,a);}),r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$T{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(t=>{this[t]=(...s)=>e[t](...s);});}}const a$_=e$1.MutationObserver||e$1.WebKitMutationObserver,o$O=function(){let t;if(e$1.process&&e$1.process.nextTick)t=t=>{e$1.process.nextTick(t);};else if(e$1.Promise)t=t=>{e$1.Promise.resolve().then(t);};else if(a$_){const e=[],s=document.createElement("div");new a$_(()=>{for(;e.length>0;)e.shift()();}).observe(s,{attributes:!0}),t=t=>{e.push(t),s.setAttribute("queueStatus","1");};}return t}(),i$1f=(()=>{const t=e$1.MessageEvent;try{new t("message",{data:null});}catch{return (e,t={})=>{const{data:s,bubbles:r=!1,cancelable:n=!1}=t,a=document.createEvent("Event");return a.initEvent(e,r,n),a.data=s,a}}return (e,s)=>new t(e,s)})();class f$E{constructor(){this._dispatcher=new n$T,this._isInitialized=!1,this._workerPostMessage({type:r$B.HANDSHAKE});}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e);}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e);}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e);}postMessage(e){o$O(()=>{this._workerMessageHandler(i$1f("message",{data:e}));});}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s);}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s);}_workerPostMessage(e){o$O(()=>{this.dispatchEvent(i$1f("message",{data:e}));});}async _workerMessageHandler(e){const n=O$5(e);if(n)switch(n.type){case r$B.CONFIGURE:this._isInitialized||this._workerPostMessage({type:r$B.CONFIGURED});break;case r$B.OPEN:{const{modulePath:e,jobId:s}=n;let a=await I$9.loadWorker(e);a||(a=await import(e));const o=I$9.connect(a);this._workerPostMessage({type:r$B.OPENED,jobId:s,data:o});break}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$S=n$7.getLogger("esri.core.workers");s.add("esri-workers-arraybuffer-transfer",!s("safari")||s("safari")>=12);const{CONFIGURED:d$E,CONFIGURE:c$1c,HANDSHAKE:g$n}=r$B;let m$D;try{m$D=URL.createObjectURL(new Blob(['var esriConfig,remoteClientPath,globalId=0,outgoing=new Map,configured=!1,HANDSHAKE=0,CONFIGURE=1,CONFIGURED=2,OPEN=3,OPENED=4,RESPONSE=5,INVOKE=6,ABORT=7;function createAbortError(){var e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,t,r){var o=r&&r.signal,n=globalId++;return new Promise((function(r,i){if(o){if(o.aborted)return i(createAbortError());o.addEventListener("abort",(function(){outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=o,data:t})}))}function messageHandler(e){var t=receiveMessage(e);if(t){var r=t.jobId;switch(t.type){case CONFIGURE:var o=t.configure;if(configured)return;configured=!0,esriConfig=o.esriConfig,remoteClientPath=esriConfig.workers.remoteClientPath,self.dojoConfig=o.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(o.loaderConfig)),self.postMessage({type:CONFIGURED});break;case OPEN:var n,i=/^https?:\\/\\//i.test(t.modulePath)?t.modulePath:esriConfig.baseUrl+t.modulePath;function a(e){var t=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([remoteClientPath.replace(/\\.js$/,"")],(function(e){(n=e.default||e).loadWorker(t.modulePath).then((function(e){return e||new Promise((function(e){require([t.modulePath],e)}))})).then(a)})):"System"in self&&"function"==typeof System.import?System.import(esriConfig.baseUrl+remoteClientPath).then((function(e){return(n=e.default).loadWorker(t.modulePath)})).then((function(e){return e||System.import(i)})).then(a):(self.RemoteClient||importScripts(esriConfig.baseUrl+remoteClientPath),(n=self.RemoteClient.default||self.RemoteClient).loadWorker(t.modulePath).then(a));break;case RESPONSE:if(outgoing.has(r)){var s=outgoing.get(r);outgoing.delete(r),t.error?s.reject(JSON.parse(t.error)):s.resolve(t.data)}}}}self.addEventListener("message",messageHandler),self.postMessage({type:HANDSHAKE});'],{type:"text/javascript"}));}catch(e){}const p$17="Failed to create Worker. Fallback to execute module in main thread";async function b$f(){if(!s("esri-workers"))return h$G(new f$E);let r;if(m$D)try{r=new Worker(m$D);}catch(e){u$S.warn(p$17,event),r=new f$E;}else u$S.warn(p$17,event),r=new f$E;return h$G(r)}async function h$G(t){return v$3(s$1=>{function a(f){const u=O$5(f);if(u)switch(u.type){case g$n:!function(t){let s$1;if(null!=t$5.default){const e={...t$5};delete e.default,s$1=JSON.parse(JSON.stringify(e));}else s$1=JSON.parse(JSON.stringify(t$5));s$1.baseUrl=D(s$1.baseUrl),s$1.locale=c$t(),s$1.has={"csp-restrictions":s("csp-restrictions"),"esri-2d-debug":s("esri-2d-debug"),"esri-2d-update-debug":s("esri-2d-update-debug"),"esri-atomics":s("esri-atomics"),"esri-secure-context":s("esri-secure-context"),"esri-shared-array-buffer":s("esri-shared-array-buffer"),"esri-tiles-debug":s("esri-tiles-debug"),"esri-webgl-max-texture-size":s("esri-webgl-max-texture-size"),"esri-webgl-texture-float":s("esri-webgl-texture-float"),"esri-workers-arraybuffer-transfer":s("esri-workers-arraybuffer-transfer"),"host-webworker":1},s$1.workers.loaderUrl&&(s$1.workers.loaderUrl=D(s$1.workers.loaderUrl));s$1.workers.remoteClientPath||(s$1.workers.remoteClientPath=t$5.assetsPath+"/esri/core/workers/RemoteClient.js");const n=t$5.workers.loaderConfig,a=e$P({baseUrl:null==n?void 0:n.baseUrl,locale:c$t(),has:{"csp-restrictions":s("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==n?void 0:n.has},map:{...null==n?void 0:n.map},paths:{...null==n?void 0:n.paths},packages:(null==n?void 0:n.packages)||[]});t.postMessage({type:c$1c,configure:{esriConfig:s$1,loaderConfig:a}});}(t);break;case d$E:t.removeEventListener("message",a),t.removeEventListener("error",m),s$1(t);}}function m(e){e.preventDefault(),t.removeEventListener("message",a),t.removeEventListener("error",m),u$S.warn("Failed to create Worker. Fallback to execute module in main thread",e),(t=new f$E).addEventListener("message",a),t.addEventListener("error",m);}t.addEventListener("message",a),t.addEventListener("error",m);})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const _$c=n$7.getLogger("esri.core.workers"),{ABORT:m$E,INVOKE:u$T,OPEN:g$o,OPENED:j$j,RESPONSE:f$F}=r$B;class k$b{constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",e=>{e.preventDefault(),_$c.error(e);});}static async create(e){const t=await b$f();return new k$b(t,e)}terminate(){this.worker.terminate();}async open(e,t={}){const{signal:s}=t,n=n$S();return v$3((t,o)=>{const a={resolve:t,reject:o,abortHandle:P$1(s,()=>{this._outJobs.delete(n),this._post({type:m$E,jobId:n});})};this._outJobs.set(n,a),this._post({type:g$o,jobId:n,modulePath:e});})}_onMessage(e){const t=O$5(e);if(t)switch(t.type){case j$j:this._onOpenedMessage(t);break;case f$F:this._onResponseMessage(t);break;case m$E:this._onAbortMessage(t);break;case u$T:this._onInvokeMessage(t);}}_onAbortMessage(e){const t=this._inJobs,s=e.jobId,o=t.get(s);o&&(o.controller&&o.controller.abort(),t.delete(s));}_onInvokeMessage(e){const{methodName:t,jobId:o,data:r,abortable:l}=e,d=l?g$4():null,h=this._inJobs,p=t$9[t];let b;try{if("function"!=typeof p)throw new TypeError(t+" is not a function");b=p.call(null,r,{signal:d?d.signal:null});}catch(e){return void this._post({type:f$F,jobId:o,error:a$Z(e)})}F$1(b)?(h.set(o,{controller:d,promise:b}),b.then(e=>{h.has(o)&&(h.delete(o),this._post({type:f$F,jobId:o},e));},e=>{h.has(o)&&(h.delete(o),e||(e={message:"Error encountered at method"+t}),L$1(e)||this._post({type:f$F,jobId:o,error:a$Z(e||{message:"Error encountered at method "+t})}));})):this._post({type:f$F,jobId:o},b);}_onOpenedMessage(e){var t;const{jobId:s,data:o}=e,r=this._outJobs.get(s);r&&(this._outJobs.delete(s),null==(t=r.abortHandle)||t.remove(),r.resolve(o));}_onResponseMessage(e){var s;const{jobId:o,error:r,data:n}=e,a=this._outJobs.get(o);a&&(this._outJobs.delete(o),null==(s=a.abortHandle)||s.remove(),r?a.reject(s$g.fromJSON(JSON.parse(r))):a.resolve(n));}_post(e,t,s){return i$1e(this.worker,e,t,s)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$1d=s("esri-workers-debug")?1:s("host-browser")?navigator.hardwareConcurrency-1:0;c$1d||(c$1d=s("safari")&&s("mac")||s("trident")?7:2);let m$F=0;const l$Q=[];function u$U(){g$p();}function f$G(t,r){return p$18(t,{client:r})}async function p$18(t,r){const e=new s$I;return await e.open(t,r),e}async function w$a(n,o={}){if("string"!=typeof n)throw new s$g("workers:undefined-module","modulePath is missing");let s$1=o.strategy||"distributed";if(s("host-webworker")&&!s("esri-workers")&&(s$1="local"),"local"===s$1){let t=await I$9.loadWorker(n);t||(t=await import(n)),j$2(o.signal);const r=o.client||t;return p$18([I$9.connect(t)],{...o,client:r})}if(await g$p(),j$2(o.signal),"dedicated"===s$1){const t=m$F++%c$1d;return p$18([await l$Q[t].open(n,o)],o)}if(o.maxNumWorkers&&o.maxNumWorkers>0){const t=Math.min(o.maxNumWorkers,c$1d);if(t<c$1d){const r=new Array(t);for(let e=0;e<t;++e){const t=m$F++%c$1d;r[t]=l$Q[t].open(n,o);}return p$18(r,o)}}return p$18(l$Q.map(t=>t.open(n,o)),o)}let h$H,k$c=null;async function g$p(){if(k$c)return k$c;h$H=g$4();const t=[];for(let r=0;r<c$1d;r++){const e=k$b.create(r).then(t=>(l$Q[r]=t,t));t.push(e);}return k$c=p$9(t),k$c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function h$I(h,e){const{format:o,quality:n,rotation:r,disableSlice:a}=h||{},l=c$1e(h,e.padding),g=function(t,i){const h={x:0,y:0,width:i.width,height:i.height};if(t&&t.area){null!=t.area.x&&(h.x=Math.floor(t.area.x)),null!=t.area.y&&(h.y=Math.floor(t.area.y));const e=null!=t.area.width?Math.floor(t.area.width):null,o=null!=t.area.height?Math.floor(t.area.height):null;if(h.width=i.width-h.x,h.height=i.height-h.y,null!=e&&null!=o)h.width=Math.min(h.width,e),h.height=Math.min(h.height,o);else if(null==e&&null!=o){const t=Math.min(h.width,e);h.height=t/h.width*h.height,h.width=t;}else if(null!=e&&null==o){const t=Math.min(h.height,o);h.width=t/h.height*h.width,h.height=t;}}return function(t,i){const h=Math.floor(Math.max(t.x,0)),e=Math.floor(Math.max(t.y,0)),o=Math.floor(Math.min(t.width,i.width-h)),n=Math.floor(Math.min(t.height,i.height-e)),r={x:h,y:e,width:o,height:n},a=r.width/r.height,l=t.width/t.height;if(l===a)return r;if(l>a){const t=Math.floor(r.width/l),i=r.height-t;return {x:r.x,y:Math.floor(r.y+i/2),width:r.width,height:t}}const g=Math.floor(r.height*l),f=r.width-g;return {x:Math.floor(r.x+f/2),y:r.y,width:g,height:r.height}}(function(t,i){if(!i||null==i.width||null==i.height)return t;const h=i.width/i.height,e=t.width/t.height;if(e===h)return t;if(e<h){const i=Math.floor(t.height*h);return t.x-=(i-t.width)/2,t.width=i,t}const o=Math.floor(t.width/h);return t.y-=(o-t.height)/2,t.height=o,t}(h,t),i)}(h,{width:e.width-l.left-l.right,height:e.height-l.top-l.bottom}),{width:f,height:d}=function(t,i){if(!t)return i;const h=t.width,e=t.height;if(null!=h&&null!=e)return {width:Math.floor(h),height:Math.floor(e)};if(null==h&&null==e)return i;const o=i.width/i.height;if(null==e)return {width:Math.floor(h),height:Math.floor(h/o)};return {width:Math.floor(e*o),height:Math.floor(e)}}(h,g),u=function(i){switch(i){case"png":case"jpg":case"jpeg":return i;case null:case void 0:return w$b;default:return r$6(i),w$b}}(o),s=m$G[u];return {format:u,quality:e$z(null!=n?n:s,0,100),area:g,width:f,height:d,rotation:r,disableSlice:!!a,ignoreBackground:!(!h||!h.ignoreBackground),ignorePadding:!(!h||!h.ignorePadding)}}function e$Q(t,i){const e=h$I(t,i),o=e.area,n=e.width/o.width,r=c$1e(e,i.padding),a=r.left+r.right,l=r.top+r.bottom,g=i.width-a,f=i.height-l,d=Math.floor(g*n+a),u=Math.floor(f*n+l),s=t&&t.layers?t.layers:[],w=e.ignoreBackground,m=e.ignorePadding;return {framebufferWidth:d,framebufferHeight:u,region:{x:Math.floor(o.x*n)+r.left,y:Math.floor(o.y*n)+r.top,width:e.width,height:e.height},format:e.format,quality:e.quality,rotation:e.rotation,pixelRatio:n,layers:s,disableSlice:e.disableSlice,ignoreBackground:w,ignorePadding:m}}function o$P(t,i,h,e){e.premultipliedAlpha&&function(t){const i=t.data,h=i.length;for(let t=0;t<h;t+=4){const h=i[t+3];if(h>0){const e=h/255;i[t+0]=i[t+0]/e,i[t+1]=i[t+1]/e,i[t+2]=i[t+2]/e;}}}(t),h.width=t.width,h.height=t.height;const o=h.getContext("2d");o.putImageData(t,0,0),e.flipY&&function(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore();}(o);const r=o.getImageData(0,0,t.width,t.height),a=n$U(h,i);return h.width=0,h.height=0,{dataUrl:a,data:r}}function n$U(t,i){const h=s$K[i.format],e=i.quality/100;return t.toDataURL(h,e)}function r$C(t,i,h){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(u$V)try{return new ImageData(t,i)}catch(t){u$V=!1;}return f$H(t,i,h)}function l$R(t,i,h,e=0,o=0,n=t.width-e,r=t.height-o,a=!1){const{data:l}=t,{width:g,height:f,data:d}=i,u=n/g,c=r/f,s=Math.ceil(u/2),w=Math.ceil(c/2),m=t.width;for(let t=0;t<f;t++)for(let i=0;i<g;i++){const n=4*(i+(a?f-t-1:t)*g);let r=0,M=0,p=0,y=0,x=0,b=0;const j=(t+.5)*c;for(let n=Math.floor(t*c);n<(t+1)*c;n++){const t=Math.abs(j-(n+.5))/w,a=(i+.5)*u,g=t*t;for(let t=Math.floor(i*u);t<(i+1)*u;t++){const i=Math.abs(a-(t+.5))/s,f=Math.sqrt(g+i*i);if(f>=1)continue;let d=2*f*f*f-3*f*f+1;const u=4*(e+t+(o+n)*m);b+=d*l[u+3],M+=d,!h&&l[u+3]<255&&(d=d*l[u+3]/255),p+=d*l[u],y+=d*l[u+1],x+=d*l[u+2],r+=d;}}d[n]=p/r,d[n+1]=y/r,d[n+2]=x/r,d[n+3]=b/M;}return i}function g$q(t,i,h){if(!i)return t;const{framebufferWidth:e,framebufferHeight:o,pixelRatio:n,region:r}=t,a=c$1e(t,h),l=a.left+a.right,g=a.top+a.bottom,f=e-l,d=o-g,u=Math.min(8,Math.min((2048-l)/f,(2048-g)/d));return u<1.5?t:{...t,framebufferWidth:Math.round(f*u)+l,framebufferHeight:Math.round(d*u)+g,pixelRatio:n*u,resample:{region:{x:Math.round((r.x-a.left)*u)+a.left,y:Math.round((r.y-a.top)*u)+a.top,width:Math.round(r.width*u),height:Math.round(r.height*u)},width:e,height:o}}}function f$H(t,i,h){return h||(h=function(){d$F||(d$F=document.createElement("canvas"),d$F.width=1,d$F.height=1);return d$F}()),h.getContext("2d").createImageData(t,i)}let d$F=null,u$V=!0;function c$1e(t,i){return !i||t&&t.ignorePadding?M$c:i}const s$K={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},w$b="jpg",m$G={png:100,jpg:98,jpeg:98},M$c={top:0,right:0,bottom:0,left:0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$R(e){return "string"==typeof e?document.getElementById(e):e}function t$L(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild);}function o$Q(e,t){const n=t.parentNode;n&&n.insertBefore(e,t);}function r$D(e,t){for(;;){const n=e.firstChild;if(!n)break;t.appendChild(n);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let h$J=class extends h$c{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u$A,this.scheduleHandleId=0,this.pendingPromises=new Set;}destroy(){this.removeAll(),this.handles.destroy();}add(e,s,t,d=0){const n=0!=(1&d),i=++this.handleId;n||this.installSyncUpdatingWatch(e,s,i);const a=0!=(2&d)?d$C(e,s,t,n):e.watch(s,t,n);return this.handles.add(a,i),{remove:()=>{this.handles.remove(i);}}}addOnCollectionPropertyChange(e,s,t,d=0){const n=0!=(2&d),i=++this.handleId;return this.handles.add([B$5(e,s,"after-changes",this.createSyncUpdatingCallback()),B$5(e,s,"change",t,n?e=>{t({added:e.items,removed:[],moved:[],target:e});}:void 0)],i),{remove:()=>{this.handles.remove(i);}}}addOnCollectionChange(e,s,t=0){const d=0!=(2&t),n=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",s)],n),d&&s({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(n);}}}addPromise(e){if(!e)return e;const s=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(0!==this.pendingPromises.size||this.handles.has(c$1f)||this._set("updating",!1));}},s),this.pendingPromises.add(e),this._set("updating",!0);const t=()=>this.handles.remove(s);return e.then(t,t),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1);}installSyncUpdatingWatch(e,s,d){const n=d$3(e,s,this.createSyncUpdatingCallback());return this.handles.add(n,d),n}createSyncUpdatingCallback(){return ()=>{this.handles.remove(c$1f),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(k$3(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(c$1f));}),c$1f);}}};e([y$5({readOnly:!0})],h$J.prototype,"updating",void 0),h$J=e([n$e("esri.views.support.WatchUpdatingTracking")],h$J);const c$1f=-42;

/*!
 * @esri/arcgis-html-sanitizer - v2.4.2 - Fri Sep 04 2020 12:22:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2020 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Built-in value references. */
var getPrototype = overArg(Object.getPrototypeOf, Object);

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) ||
      objectToString.call(value) != objectTag || isHostObject(value)) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return (typeof Ctor == 'function' &&
    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);
}

var lodash_isplainobject = isPlainObject;

function createCommonjsModule(fn, basedir, module) {
	return module = {
	  path: basedir,
	  exports: {},
	  require: function (path, base) {
      return commonjsRequire(path, (base === undefined || base === null) ? module.path : base);
    }
	}, fn(module, module.exports), module.exports;
}

function commonjsRequire () {
	throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');
}

/**
 * cssfilter
 *
 * @author <leizongmin@gmail.com>
 */

function getDefaultWhiteList () {
  // 
  // true: 
  // Function: function (val) { } true
  // RegExp: regexp.test(val) true
  // 
  var whiteList = {};

  whiteList['align-content'] = false; // default: auto
  whiteList['align-items'] = false; // default: auto
  whiteList['align-self'] = false; // default: auto
  whiteList['alignment-adjust'] = false; // default: auto
  whiteList['alignment-baseline'] = false; // default: baseline
  whiteList['all'] = false; // default: depending on individual properties
  whiteList['anchor-point'] = false; // default: none
  whiteList['animation'] = false; // default: depending on individual properties
  whiteList['animation-delay'] = false; // default: 0
  whiteList['animation-direction'] = false; // default: normal
  whiteList['animation-duration'] = false; // default: 0
  whiteList['animation-fill-mode'] = false; // default: none
  whiteList['animation-iteration-count'] = false; // default: 1
  whiteList['animation-name'] = false; // default: none
  whiteList['animation-play-state'] = false; // default: running
  whiteList['animation-timing-function'] = false; // default: ease
  whiteList['azimuth'] = false; // default: center
  whiteList['backface-visibility'] = false; // default: visible
  whiteList['background'] = true; // default: depending on individual properties
  whiteList['background-attachment'] = true; // default: scroll
  whiteList['background-clip'] = true; // default: border-box
  whiteList['background-color'] = true; // default: transparent
  whiteList['background-image'] = true; // default: none
  whiteList['background-origin'] = true; // default: padding-box
  whiteList['background-position'] = true; // default: 0% 0%
  whiteList['background-repeat'] = true; // default: repeat
  whiteList['background-size'] = true; // default: auto
  whiteList['baseline-shift'] = false; // default: baseline
  whiteList['binding'] = false; // default: none
  whiteList['bleed'] = false; // default: 6pt
  whiteList['bookmark-label'] = false; // default: content()
  whiteList['bookmark-level'] = false; // default: none
  whiteList['bookmark-state'] = false; // default: open
  whiteList['border'] = true; // default: depending on individual properties
  whiteList['border-bottom'] = true; // default: depending on individual properties
  whiteList['border-bottom-color'] = true; // default: current color
  whiteList['border-bottom-left-radius'] = true; // default: 0
  whiteList['border-bottom-right-radius'] = true; // default: 0
  whiteList['border-bottom-style'] = true; // default: none
  whiteList['border-bottom-width'] = true; // default: medium
  whiteList['border-collapse'] = true; // default: separate
  whiteList['border-color'] = true; // default: depending on individual properties
  whiteList['border-image'] = true; // default: none
  whiteList['border-image-outset'] = true; // default: 0
  whiteList['border-image-repeat'] = true; // default: stretch
  whiteList['border-image-slice'] = true; // default: 100%
  whiteList['border-image-source'] = true; // default: none
  whiteList['border-image-width'] = true; // default: 1
  whiteList['border-left'] = true; // default: depending on individual properties
  whiteList['border-left-color'] = true; // default: current color
  whiteList['border-left-style'] = true; // default: none
  whiteList['border-left-width'] = true; // default: medium
  whiteList['border-radius'] = true; // default: 0
  whiteList['border-right'] = true; // default: depending on individual properties
  whiteList['border-right-color'] = true; // default: current color
  whiteList['border-right-style'] = true; // default: none
  whiteList['border-right-width'] = true; // default: medium
  whiteList['border-spacing'] = true; // default: 0
  whiteList['border-style'] = true; // default: depending on individual properties
  whiteList['border-top'] = true; // default: depending on individual properties
  whiteList['border-top-color'] = true; // default: current color
  whiteList['border-top-left-radius'] = true; // default: 0
  whiteList['border-top-right-radius'] = true; // default: 0
  whiteList['border-top-style'] = true; // default: none
  whiteList['border-top-width'] = true; // default: medium
  whiteList['border-width'] = true; // default: depending on individual properties
  whiteList['bottom'] = false; // default: auto
  whiteList['box-decoration-break'] = true; // default: slice
  whiteList['box-shadow'] = true; // default: none
  whiteList['box-sizing'] = true; // default: content-box
  whiteList['box-snap'] = true; // default: none
  whiteList['box-suppress'] = true; // default: show
  whiteList['break-after'] = true; // default: auto
  whiteList['break-before'] = true; // default: auto
  whiteList['break-inside'] = true; // default: auto
  whiteList['caption-side'] = false; // default: top
  whiteList['chains'] = false; // default: none
  whiteList['clear'] = true; // default: none
  whiteList['clip'] = false; // default: auto
  whiteList['clip-path'] = false; // default: none
  whiteList['clip-rule'] = false; // default: nonzero
  whiteList['color'] = true; // default: implementation dependent
  whiteList['color-interpolation-filters'] = true; // default: auto
  whiteList['column-count'] = false; // default: auto
  whiteList['column-fill'] = false; // default: balance
  whiteList['column-gap'] = false; // default: normal
  whiteList['column-rule'] = false; // default: depending on individual properties
  whiteList['column-rule-color'] = false; // default: current color
  whiteList['column-rule-style'] = false; // default: medium
  whiteList['column-rule-width'] = false; // default: medium
  whiteList['column-span'] = false; // default: none
  whiteList['column-width'] = false; // default: auto
  whiteList['columns'] = false; // default: depending on individual properties
  whiteList['contain'] = false; // default: none
  whiteList['content'] = false; // default: normal
  whiteList['counter-increment'] = false; // default: none
  whiteList['counter-reset'] = false; // default: none
  whiteList['counter-set'] = false; // default: none
  whiteList['crop'] = false; // default: auto
  whiteList['cue'] = false; // default: depending on individual properties
  whiteList['cue-after'] = false; // default: none
  whiteList['cue-before'] = false; // default: none
  whiteList['cursor'] = false; // default: auto
  whiteList['direction'] = false; // default: ltr
  whiteList['display'] = true; // default: depending on individual properties
  whiteList['display-inside'] = true; // default: auto
  whiteList['display-list'] = true; // default: none
  whiteList['display-outside'] = true; // default: inline-level
  whiteList['dominant-baseline'] = false; // default: auto
  whiteList['elevation'] = false; // default: level
  whiteList['empty-cells'] = false; // default: show
  whiteList['filter'] = false; // default: none
  whiteList['flex'] = false; // default: depending on individual properties
  whiteList['flex-basis'] = false; // default: auto
  whiteList['flex-direction'] = false; // default: row
  whiteList['flex-flow'] = false; // default: depending on individual properties
  whiteList['flex-grow'] = false; // default: 0
  whiteList['flex-shrink'] = false; // default: 1
  whiteList['flex-wrap'] = false; // default: nowrap
  whiteList['float'] = false; // default: none
  whiteList['float-offset'] = false; // default: 0 0
  whiteList['flood-color'] = false; // default: black
  whiteList['flood-opacity'] = false; // default: 1
  whiteList['flow-from'] = false; // default: none
  whiteList['flow-into'] = false; // default: none
  whiteList['font'] = true; // default: depending on individual properties
  whiteList['font-family'] = true; // default: implementation dependent
  whiteList['font-feature-settings'] = true; // default: normal
  whiteList['font-kerning'] = true; // default: auto
  whiteList['font-language-override'] = true; // default: normal
  whiteList['font-size'] = true; // default: medium
  whiteList['font-size-adjust'] = true; // default: none
  whiteList['font-stretch'] = true; // default: normal
  whiteList['font-style'] = true; // default: normal
  whiteList['font-synthesis'] = true; // default: weight style
  whiteList['font-variant'] = true; // default: normal
  whiteList['font-variant-alternates'] = true; // default: normal
  whiteList['font-variant-caps'] = true; // default: normal
  whiteList['font-variant-east-asian'] = true; // default: normal
  whiteList['font-variant-ligatures'] = true; // default: normal
  whiteList['font-variant-numeric'] = true; // default: normal
  whiteList['font-variant-position'] = true; // default: normal
  whiteList['font-weight'] = true; // default: normal
  whiteList['grid'] = false; // default: depending on individual properties
  whiteList['grid-area'] = false; // default: depending on individual properties
  whiteList['grid-auto-columns'] = false; // default: auto
  whiteList['grid-auto-flow'] = false; // default: none
  whiteList['grid-auto-rows'] = false; // default: auto
  whiteList['grid-column'] = false; // default: depending on individual properties
  whiteList['grid-column-end'] = false; // default: auto
  whiteList['grid-column-start'] = false; // default: auto
  whiteList['grid-row'] = false; // default: depending on individual properties
  whiteList['grid-row-end'] = false; // default: auto
  whiteList['grid-row-start'] = false; // default: auto
  whiteList['grid-template'] = false; // default: depending on individual properties
  whiteList['grid-template-areas'] = false; // default: none
  whiteList['grid-template-columns'] = false; // default: none
  whiteList['grid-template-rows'] = false; // default: none
  whiteList['hanging-punctuation'] = false; // default: none
  whiteList['height'] = true; // default: auto
  whiteList['hyphens'] = false; // default: manual
  whiteList['icon'] = false; // default: auto
  whiteList['image-orientation'] = false; // default: auto
  whiteList['image-resolution'] = false; // default: normal
  whiteList['ime-mode'] = false; // default: auto
  whiteList['initial-letters'] = false; // default: normal
  whiteList['inline-box-align'] = false; // default: last
  whiteList['justify-content'] = false; // default: auto
  whiteList['justify-items'] = false; // default: auto
  whiteList['justify-self'] = false; // default: auto
  whiteList['left'] = false; // default: auto
  whiteList['letter-spacing'] = true; // default: normal
  whiteList['lighting-color'] = true; // default: white
  whiteList['line-box-contain'] = false; // default: block inline replaced
  whiteList['line-break'] = false; // default: auto
  whiteList['line-grid'] = false; // default: match-parent
  whiteList['line-height'] = false; // default: normal
  whiteList['line-snap'] = false; // default: none
  whiteList['line-stacking'] = false; // default: depending on individual properties
  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby
  whiteList['line-stacking-shift'] = false; // default: consider-shifts
  whiteList['line-stacking-strategy'] = false; // default: inline-line-height
  whiteList['list-style'] = true; // default: depending on individual properties
  whiteList['list-style-image'] = true; // default: none
  whiteList['list-style-position'] = true; // default: outside
  whiteList['list-style-type'] = true; // default: disc
  whiteList['margin'] = true; // default: depending on individual properties
  whiteList['margin-bottom'] = true; // default: 0
  whiteList['margin-left'] = true; // default: 0
  whiteList['margin-right'] = true; // default: 0
  whiteList['margin-top'] = true; // default: 0
  whiteList['marker-offset'] = false; // default: auto
  whiteList['marker-side'] = false; // default: list-item
  whiteList['marks'] = false; // default: none
  whiteList['mask'] = false; // default: border-box
  whiteList['mask-box'] = false; // default: see individual properties
  whiteList['mask-box-outset'] = false; // default: 0
  whiteList['mask-box-repeat'] = false; // default: stretch
  whiteList['mask-box-slice'] = false; // default: 0 fill
  whiteList['mask-box-source'] = false; // default: none
  whiteList['mask-box-width'] = false; // default: auto
  whiteList['mask-clip'] = false; // default: border-box
  whiteList['mask-image'] = false; // default: none
  whiteList['mask-origin'] = false; // default: border-box
  whiteList['mask-position'] = false; // default: center
  whiteList['mask-repeat'] = false; // default: no-repeat
  whiteList['mask-size'] = false; // default: border-box
  whiteList['mask-source-type'] = false; // default: auto
  whiteList['mask-type'] = false; // default: luminance
  whiteList['max-height'] = true; // default: none
  whiteList['max-lines'] = false; // default: none
  whiteList['max-width'] = true; // default: none
  whiteList['min-height'] = true; // default: 0
  whiteList['min-width'] = true; // default: 0
  whiteList['move-to'] = false; // default: normal
  whiteList['nav-down'] = false; // default: auto
  whiteList['nav-index'] = false; // default: auto
  whiteList['nav-left'] = false; // default: auto
  whiteList['nav-right'] = false; // default: auto
  whiteList['nav-up'] = false; // default: auto
  whiteList['object-fit'] = false; // default: fill
  whiteList['object-position'] = false; // default: 50% 50%
  whiteList['opacity'] = false; // default: 1
  whiteList['order'] = false; // default: 0
  whiteList['orphans'] = false; // default: 2
  whiteList['outline'] = false; // default: depending on individual properties
  whiteList['outline-color'] = false; // default: invert
  whiteList['outline-offset'] = false; // default: 0
  whiteList['outline-style'] = false; // default: none
  whiteList['outline-width'] = false; // default: medium
  whiteList['overflow'] = false; // default: depending on individual properties
  whiteList['overflow-wrap'] = false; // default: normal
  whiteList['overflow-x'] = false; // default: visible
  whiteList['overflow-y'] = false; // default: visible
  whiteList['padding'] = true; // default: depending on individual properties
  whiteList['padding-bottom'] = true; // default: 0
  whiteList['padding-left'] = true; // default: 0
  whiteList['padding-right'] = true; // default: 0
  whiteList['padding-top'] = true; // default: 0
  whiteList['page'] = false; // default: auto
  whiteList['page-break-after'] = false; // default: auto
  whiteList['page-break-before'] = false; // default: auto
  whiteList['page-break-inside'] = false; // default: auto
  whiteList['page-policy'] = false; // default: start
  whiteList['pause'] = false; // default: implementation dependent
  whiteList['pause-after'] = false; // default: implementation dependent
  whiteList['pause-before'] = false; // default: implementation dependent
  whiteList['perspective'] = false; // default: none
  whiteList['perspective-origin'] = false; // default: 50% 50%
  whiteList['pitch'] = false; // default: medium
  whiteList['pitch-range'] = false; // default: 50
  whiteList['play-during'] = false; // default: auto
  whiteList['position'] = false; // default: static
  whiteList['presentation-level'] = false; // default: 0
  whiteList['quotes'] = false; // default: text
  whiteList['region-fragment'] = false; // default: auto
  whiteList['resize'] = false; // default: none
  whiteList['rest'] = false; // default: depending on individual properties
  whiteList['rest-after'] = false; // default: none
  whiteList['rest-before'] = false; // default: none
  whiteList['richness'] = false; // default: 50
  whiteList['right'] = false; // default: auto
  whiteList['rotation'] = false; // default: 0
  whiteList['rotation-point'] = false; // default: 50% 50%
  whiteList['ruby-align'] = false; // default: auto
  whiteList['ruby-merge'] = false; // default: separate
  whiteList['ruby-position'] = false; // default: before
  whiteList['shape-image-threshold'] = false; // default: 0.0
  whiteList['shape-outside'] = false; // default: none
  whiteList['shape-margin'] = false; // default: 0
  whiteList['size'] = false; // default: auto
  whiteList['speak'] = false; // default: auto
  whiteList['speak-as'] = false; // default: normal
  whiteList['speak-header'] = false; // default: once
  whiteList['speak-numeral'] = false; // default: continuous
  whiteList['speak-punctuation'] = false; // default: none
  whiteList['speech-rate'] = false; // default: medium
  whiteList['stress'] = false; // default: 50
  whiteList['string-set'] = false; // default: none
  whiteList['tab-size'] = false; // default: 8
  whiteList['table-layout'] = false; // default: auto
  whiteList['text-align'] = true; // default: start
  whiteList['text-align-last'] = true; // default: auto
  whiteList['text-combine-upright'] = true; // default: none
  whiteList['text-decoration'] = true; // default: none
  whiteList['text-decoration-color'] = true; // default: currentColor
  whiteList['text-decoration-line'] = true; // default: none
  whiteList['text-decoration-skip'] = true; // default: objects
  whiteList['text-decoration-style'] = true; // default: solid
  whiteList['text-emphasis'] = true; // default: depending on individual properties
  whiteList['text-emphasis-color'] = true; // default: currentColor
  whiteList['text-emphasis-position'] = true; // default: over right
  whiteList['text-emphasis-style'] = true; // default: none
  whiteList['text-height'] = true; // default: auto
  whiteList['text-indent'] = true; // default: 0
  whiteList['text-justify'] = true; // default: auto
  whiteList['text-orientation'] = true; // default: mixed
  whiteList['text-overflow'] = true; // default: clip
  whiteList['text-shadow'] = true; // default: none
  whiteList['text-space-collapse'] = true; // default: collapse
  whiteList['text-transform'] = true; // default: none
  whiteList['text-underline-position'] = true; // default: auto
  whiteList['text-wrap'] = true; // default: normal
  whiteList['top'] = false; // default: auto
  whiteList['transform'] = false; // default: none
  whiteList['transform-origin'] = false; // default: 50% 50% 0
  whiteList['transform-style'] = false; // default: flat
  whiteList['transition'] = false; // default: depending on individual properties
  whiteList['transition-delay'] = false; // default: 0s
  whiteList['transition-duration'] = false; // default: 0s
  whiteList['transition-property'] = false; // default: all
  whiteList['transition-timing-function'] = false; // default: ease
  whiteList['unicode-bidi'] = false; // default: normal
  whiteList['vertical-align'] = false; // default: baseline
  whiteList['visibility'] = false; // default: visible
  whiteList['voice-balance'] = false; // default: center
  whiteList['voice-duration'] = false; // default: auto
  whiteList['voice-family'] = false; // default: implementation dependent
  whiteList['voice-pitch'] = false; // default: medium
  whiteList['voice-range'] = false; // default: medium
  whiteList['voice-rate'] = false; // default: normal
  whiteList['voice-stress'] = false; // default: normal
  whiteList['voice-volume'] = false; // default: medium
  whiteList['volume'] = false; // default: medium
  whiteList['white-space'] = false; // default: normal
  whiteList['widows'] = false; // default: 2
  whiteList['width'] = true; // default: auto
  whiteList['will-change'] = false; // default: auto
  whiteList['word-break'] = true; // default: normal
  whiteList['word-spacing'] = true; // default: normal
  whiteList['word-wrap'] = true; // default: normal
  whiteList['wrap-flow'] = false; // default: auto
  whiteList['wrap-through'] = false; // default: wrap
  whiteList['writing-mode'] = false; // default: horizontal-tb
  whiteList['z-index'] = false; // default: auto

  return whiteList;
}


/**
 * 
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onAttr (name, value, options) {
  // do nothing
}

/**
 * 
 *
 * @param {String} name
 * @param {String} value
 * @param {Object} options
 * @return {String}
 */
function onIgnoreAttr (name, value, options) {
  // do nothing
}

var REGEXP_URL_JAVASCRIPT = /javascript\s*\:/img;

/**
 * 
 *
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function safeAttrValue(name, value) {
  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';
  return value;
}


var whiteList = getDefaultWhiteList();
var getDefaultWhiteList_1 = getDefaultWhiteList;
var onAttr_1 = onAttr;
var onIgnoreAttr_1 = onIgnoreAttr;
var safeAttrValue_1 = safeAttrValue;

var _default = {
	whiteList: whiteList,
	getDefaultWhiteList: getDefaultWhiteList_1,
	onAttr: onAttr_1,
	onIgnoreAttr: onIgnoreAttr_1,
	safeAttrValue: safeAttrValue_1
};

var util = {
  indexOf: function (arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function (arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function (str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, '');
  },
  trimRight: function (str) {
    if (String.prototype.trimRight) {
      return str.trimRight();
    }
    return str.replace(/(\s*$)/g, '');
  }
};

/**
 * cssfilter
 *
 * @author <leizongmin@gmail.com>
 */




/**
 * style
 *
 * @param {String} css
 * @param {Function} onAttr 
 *    function (sourcePosition, position, name, value, source)
 * @return {String}
 */
function parseStyle (css, onAttr) {
  css = util.trimRight(css);
  if (css[css.length - 1] !== ';') css += ';';
  var cssLength = css.length;
  var isParenthesisOpen = false;
  var lastPos = 0;
  var i = 0;
  var retCSS = '';

  function addNewAttr () {
    // 
    if (!isParenthesisOpen) {
      var source = util.trim(css.slice(lastPos, i));
      var j = source.indexOf(':');
      if (j !== -1) {
        var name = util.trim(source.slice(0, j));
        var value = util.trim(source.slice(j + 1));
        // 
        if (name) {
          var ret = onAttr(lastPos, retCSS.length, name, value, source);
          if (ret) retCSS += ret + '; ';
        }
      }
    }
    lastPos = i + 1;
  }

  for (; i < cssLength; i++) {
    var c = css[i];
    if (c === '/' && css[i + 1] === '*') {
      // 
      var j = css.indexOf('*/', i + 2);
      // 
      if (j === -1) break;
      // 
      i = j + 1;
      lastPos = i + 1;
      isParenthesisOpen = false;
    } else if (c === '(') {
      isParenthesisOpen = true;
    } else if (c === ')') {
      isParenthesisOpen = false;
    } else if (c === ';') {
      if (isParenthesisOpen) ; else {
        addNewAttr();
      }
    } else if (c === '\n') {
      addNewAttr();
    }
  }

  return util.trim(retCSS);
}

var parser = parseStyle;

/**
 * cssfilter
 *
 * @author <leizongmin@gmail.com>
 */






/**
 * 
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull (obj) {
  return (obj === undefined || obj === null);
}

/**
 * 
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject (obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * CSS
 *
 * @param {Object} options
 *   - {Object} whiteList
 *   - {Function} onAttr
 *   - {Function} onIgnoreAttr
 *   - {Function} safeAttrValue
 */
function FilterCSS (options) {
  options = shallowCopyObject(options || {});
  options.whiteList = options.whiteList || _default.whiteList;
  options.onAttr = options.onAttr || _default.onAttr;
  options.onIgnoreAttr = options.onIgnoreAttr || _default.onIgnoreAttr;
  options.safeAttrValue = options.safeAttrValue || _default.safeAttrValue;
  this.options = options;
}

FilterCSS.prototype.process = function (css) {
  // 
  css = css || '';
  css = css.toString();
  if (!css) return '';

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onAttr = options.onAttr;
  var onIgnoreAttr = options.onIgnoreAttr;
  var safeAttrValue = options.safeAttrValue;

  var retCSS = parser(css, function (sourcePosition, position, name, value, source) {

    var check = whiteList[name];
    var isWhite = false;
    if (check === true) isWhite = check;
    else if (typeof check === 'function') isWhite = check(value);
    else if (check instanceof RegExp) isWhite = check.test(value);
    if (isWhite !== true) isWhite = false;

    //  value 
    value = safeAttrValue(name, value);
    if (!value) return;

    var opts = {
      position: position,
      sourcePosition: sourcePosition,
      source: source,
      isWhite: isWhite
    };

    if (isWhite) {

      var ret = onAttr(name, value, opts);
      if (isNull(ret)) {
        return name + ':' + value;
      } else {
        return ret;
      }

    } else {

      var ret = onIgnoreAttr(name, value, opts);
      if (!isNull(ret)) {
        return ret;
      }

    }
  });

  return retCSS;
};


var css = FilterCSS;

var lib = createCommonjsModule(function (module, exports) {
/**
 * cssfilter
 *
 * @author <leizongmin@gmail.com>
 */





/**
 * XSS
 *
 * @param {String} css CSS
 * @param {Object} options whiteList, onAttr, onIgnoreAttr
 * @return {String}
 */
function filterCSS (html, options) {
  var xss = new css(options);
  return xss.process(html);
}


// 
exports = module.exports = filterCSS;
exports.FilterCSS = css;
for (var i in _default) exports[i] = _default[i];
});

var util$1 = {
  indexOf: function(arr, item) {
    var i, j;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      if (arr[i] === item) {
        return i;
      }
    }
    return -1;
  },
  forEach: function(arr, fn, scope) {
    var i, j;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i = 0, j = arr.length; i < j; i++) {
      fn.call(scope, arr[i], i, arr);
    }
  },
  trim: function(str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function(str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  }
};

/**
 * default settings
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$1 = lib.FilterCSS;
var getDefaultCSSWhiteList = lib.getDefaultWhiteList;


function getDefaultWhiteList$1() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: ["autoplay", "controls", "loop", "preload", "src"],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    sup: [],
    strong: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: ["autoplay", "controls", "loop", "preload", "src", "height", "width"]
  };
}

var defaultCSSFilter = new FilterCSS$1();

/**
 * default onTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onTag(tag, html, options) {
  // do nothing
}

/**
 * default onIgnoreTag function
 *
 * @param {String} tag
 * @param {String} html
 * @param {Object} options
 * @return {String}
 */
function onIgnoreTag(tag, html, options) {
  // do nothing
}

/**
 * default onTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default onIgnoreTagAttr function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @return {String}
 */
function onIgnoreTagAttr(tag, name, value) {
  // do nothing
}

/**
 * default escapeHtml function
 *
 * @param {String} html
 */
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}

/**
 * default safeAttrValue function
 *
 * @param {String} tag
 * @param {String} name
 * @param {String} value
 * @param {Object} cssFilter
 * @return {String}
 */
function safeAttrValue$1(tag, name, value, cssFilter) {
  // unescape attribute value firstly
  value = friendlyAttrValue(value);

  if (name === "href" || name === "src") {
    // filter `href` and `src` attribute
    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`
    value = util$1.trim(value);
    if (value === "#") return "#";
    if (
      !(
        value.substr(0, 7) === "http://" ||
        value.substr(0, 8) === "https://" ||
        value.substr(0, 7) === "mailto:" ||
        value.substr(0, 4) === "tel:" ||
        value.substr(0, 11) === "data:image/" ||
        value.substr(0, 6) === "ftp://" ||
        value.substr(0, 2) === "./" ||
        value.substr(0, 3) === "../" ||
        value[0] === "#" ||
        value[0] === "/"
      )
    ) {
      return "";
    }
  } else if (name === "background") {
    // filter `background` attribute (maybe no use)
    // `javascript:`
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    // `expression()`
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    // `url()`
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }

  // escape `<>"` before returns
  value = escapeAttrValue(value);
  return value;
}

// RegExp list
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 = /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 = /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;

/**
 * escape doube quote
 *
 * @param {String} str
 * @return {String} str
 */
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}

/**
 * unescape double quote
 *
 * @param {String} str
 * @return {String} str
 */
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}

/**
 * escape html entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {
    return code[0] === "x" || code[0] === "X"
      ? String.fromCharCode(parseInt(code.substr(1), 16))
      : String.fromCharCode(parseInt(code, 10));
  });
}

/**
 * escape html5 new danger entities
 *
 * @param {String} str
 * @return {String}
 */
function escapeDangerHtml5Entities(str) {
  return str
    .replace(REGEXP_ATTR_VALUE_COLON, ":")
    .replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}

/**
 * clear nonprintable characters
 *
 * @param {String} str
 * @return {String}
 */
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i = 0, len = str.length; i < len; i++) {
    str2 += str.charCodeAt(i) < 32 ? " " : str.charAt(i);
  }
  return util$1.trim(str2);
}

/**
 * get friendly attribute value
 *
 * @param {String} str
 * @return {String}
 */
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}

/**
 * unescape attribute value
 *
 * @param {String} str
 * @return {String}
 */
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}

/**
 * `onIgnoreTag` function for removing all the tags that are not in whitelist
 */
function onIgnoreTagStripAll() {
  return "";
}

/**
 * remove tag body
 * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)
 *
 * @param {array} tags
 * @param {function} next
 */
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function() {};
  }

  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag) return true;
    return util$1.indexOf(tags, tag) !== -1;
  }

  var removeList = [];
  var posStart = false;

  return {
    onIgnoreTag: function(tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function(html) {
      var rethtml = "";
      var lastPos = 0;
      util$1.forEach(removeList, function(pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    }
  };
}

/**
 * remove html comments
 *
 * @param {String} html
 * @return {String}
 */
function stripCommentTag(html) {
  return html.replace(STRIP_COMMENT_TAG_REGEXP, "");
}
var STRIP_COMMENT_TAG_REGEXP = /<!--[\s\S]*?-->/g;

/**
 * remove invisible characters
 *
 * @param {String} html
 * @return {String}
 */
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function(char) {
    var c = char.charCodeAt(0);
    if (c === 127) return false;
    if (c <= 31) {
      if (c === 10 || c === 13) return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}

var whiteList$1 = getDefaultWhiteList$1();
var getDefaultWhiteList_1$1 = getDefaultWhiteList$1;
var onTag_1 = onTag;
var onIgnoreTag_1 = onIgnoreTag;
var onTagAttr_1 = onTagAttr;
var onIgnoreTagAttr_1 = onIgnoreTagAttr;
var safeAttrValue_1$1 = safeAttrValue$1;
var escapeHtml_1 = escapeHtml;
var escapeQuote_1 = escapeQuote;
var unescapeQuote_1 = unescapeQuote;
var escapeHtmlEntities_1 = escapeHtmlEntities;
var escapeDangerHtml5Entities_1 = escapeDangerHtml5Entities;
var clearNonPrintableCharacter_1 = clearNonPrintableCharacter;
var friendlyAttrValue_1 = friendlyAttrValue;
var escapeAttrValue_1 = escapeAttrValue;
var onIgnoreTagStripAll_1 = onIgnoreTagStripAll;
var StripTagBody_1 = StripTagBody;
var stripCommentTag_1 = stripCommentTag;
var stripBlankChar_1 = stripBlankChar;
var cssFilter = defaultCSSFilter;
var getDefaultCSSWhiteList_1 = getDefaultCSSWhiteList;

var _default$1 = {
	whiteList: whiteList$1,
	getDefaultWhiteList: getDefaultWhiteList_1$1,
	onTag: onTag_1,
	onIgnoreTag: onIgnoreTag_1,
	onTagAttr: onTagAttr_1,
	onIgnoreTagAttr: onIgnoreTagAttr_1,
	safeAttrValue: safeAttrValue_1$1,
	escapeHtml: escapeHtml_1,
	escapeQuote: escapeQuote_1,
	unescapeQuote: unescapeQuote_1,
	escapeHtmlEntities: escapeHtmlEntities_1,
	escapeDangerHtml5Entities: escapeDangerHtml5Entities_1,
	clearNonPrintableCharacter: clearNonPrintableCharacter_1,
	friendlyAttrValue: friendlyAttrValue_1,
	escapeAttrValue: escapeAttrValue_1,
	onIgnoreTagStripAll: onIgnoreTagStripAll_1,
	StripTagBody: StripTagBody_1,
	stripCommentTag: stripCommentTag_1,
	stripBlankChar: stripBlankChar_1,
	cssFilter: cssFilter,
	getDefaultCSSWhiteList: getDefaultCSSWhiteList_1
};

/**
 * Simple HTML Parser
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */



/**
 * get tag name
 *
 * @param {String} html e.g. '<a hef="#">'
 * @return {String}
 */
function getTagName(html) {
  var i = util$1.spaceIndex(html);
  if (i === -1) {
    var tagName = html.slice(1, -1);
  } else {
    var tagName = html.slice(1, i + 1);
  }
  tagName = util$1.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/") tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/") tagName = tagName.slice(0, -1);
  return tagName;
}

/**
 * is close tag?
 *
 * @param {String} html '<a hef="#">'
 * @return {Boolean}
 */
function isClosing(html) {
  return html.slice(0, 2) === "</";
}

/**
 * parse input html and returns processed html
 *
 * @param {String} html
 * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)
 * @param {Function} escapeHtml
 * @return {String}
 */
function parseTag(html, onTag, escapeHtml) {

  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";

  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {
    var c = html.charAt(currentPos);
    if (tagStart === false) {
      if (c === "<") {
        tagStart = currentPos;
        continue;
      }
    } else {
      if (quoteStart === false) {
        if (c === "<") {
          rethtml += escapeHtml(html.slice(lastPos, currentPos));
          tagStart = currentPos;
          lastPos = currentPos;
          continue;
        }
        if (c === ">") {
          rethtml += escapeHtml(html.slice(lastPos, tagStart));
          currentHtml = html.slice(tagStart, currentPos + 1);
          currentTagName = getTagName(currentHtml);
          rethtml += onTag(
            tagStart,
            rethtml.length,
            currentTagName,
            currentHtml,
            isClosing(currentHtml)
          );
          lastPos = currentPos + 1;
          tagStart = false;
          continue;
        }
        if ((c === '"' || c === "'")) {
          var i = 1;
          var ic = html.charAt(currentPos - i);

          while ((ic === " ") || (ic === "=")) {
            if (ic === "=") {
              quoteStart = c;
              continue chariterator;
            }
            ic = html.charAt(currentPos - ++i);
          }
        }
      } else {
        if (c === quoteStart) {
          quoteStart = false;
          continue;
        }
      }
    }
  }
  if (lastPos < html.length) {
    rethtml += escapeHtml(html.substr(lastPos));
  }

  return rethtml;
}

var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9_:\.\-]/gim;

/**
 * parse input attributes and returns processed attributes
 *
 * @param {String} html e.g. `href="#" target="_blank"`
 * @param {Function} onAttr e.g. `function (name, value)`
 * @return {String}
 */
function parseAttr(html, onAttr) {

  var lastPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;

  function addAttr(name, value) {
    name = util$1.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1) return;
    var ret = onAttr(name, value || "");
    if (ret) retAttrs.push(ret);
  }

  // 
  for (var i = 0; i < len; i++) {
    var c = html.charAt(i);
    var v, j;
    if (tmpName === false && c === "=") {
      tmpName = html.slice(lastPos, i);
      lastPos = i + 1;
      continue;
    }
    if (tmpName !== false) {
      if (
        i === lastPos &&
        (c === '"' || c === "'") &&
        html.charAt(i - 1) === "="
      ) {
        j = html.indexOf(c, i + 1);
        if (j === -1) {
          break;
        } else {
          v = util$1.trim(html.slice(lastPos + 1, j));
          addAttr(tmpName, v);
          tmpName = false;
          i = j;
          lastPos = i + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j = findNextEqual(html, i);
        if (j === -1) {
          v = util$1.trim(html.slice(lastPos, i));
          addAttr(v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          i = j - 1;
          continue;
        }
      } else {
        j = findBeforeEqual(html, i - 1);
        if (j === -1) {
          v = util$1.trim(html.slice(lastPos, i));
          v = stripQuoteWrap(v);
          addAttr(tmpName, v);
          tmpName = false;
          lastPos = i + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }

  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(util$1.trim(html.slice(lastPos))));
    }
  }

  return util$1.trim(retAttrs.join(" "));
}

function findNextEqual(str, i) {
  for (; i < str.length; i++) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function findBeforeEqual(str, i) {
  for (; i > 0; i--) {
    var c = str[i];
    if (c === " ") continue;
    if (c === "=") return i;
    return -1;
  }
}

function isQuoteWrapString(text) {
  if (
    (text[0] === '"' && text[text.length - 1] === '"') ||
    (text[0] === "'" && text[text.length - 1] === "'")
  ) {
    return true;
  } else {
    return false;
  }
}

function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}

var parseTag_1 = parseTag;
var parseAttr_1 = parseAttr;

var parser$1 = {
	parseTag: parseTag_1,
	parseAttr: parseAttr_1
};

/**
 * filter xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */

var FilterCSS$2 = lib.FilterCSS;


var parseTag$1 = parser$1.parseTag;
var parseAttr$1 = parser$1.parseAttr;


/**
 * returns `true` if the input value is `undefined` or `null`
 *
 * @param {Object} obj
 * @return {Boolean}
 */
function isNull$1(obj) {
  return obj === undefined || obj === null;
}

/**
 * get attributes for a tag
 *
 * @param {String} html
 * @return {Object}
 *   - {String} html
 *   - {Boolean} closing
 */
function getAttrs(html) {
  var i = util$1.spaceIndex(html);
  if (i === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/"
    };
  }
  html = util$1.trim(html.slice(i + 1, -1));
  var isClosing = html[html.length - 1] === "/";
  if (isClosing) html = util$1.trim(html.slice(0, -1));
  return {
    html: html,
    closing: isClosing
  };
}

/**
 * shallow copy
 *
 * @param {Object} obj
 * @return {Object}
 */
function shallowCopyObject$1(obj) {
  var ret = {};
  for (var i in obj) {
    ret[i] = obj[i];
  }
  return ret;
}

/**
 * FilterXSS class
 *
 * @param {Object} options
 *        whiteList, onTag, onTagAttr, onIgnoreTag,
 *        onIgnoreTagAttr, safeAttrValue, escapeHtml
 *        stripIgnoreTagBody, allowCommentTag, stripBlankChar
 *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`
 */
function FilterXSS(options) {
  options = shallowCopyObject$1(options || {});

  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = _default$1.onIgnoreTagStripAll;
  }

  options.whiteList = options.whiteList || _default$1.whiteList;
  options.onTag = options.onTag || _default$1.onTag;
  options.onTagAttr = options.onTagAttr || _default$1.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || _default$1.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || _default$1.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || _default$1.safeAttrValue;
  options.escapeHtml = options.escapeHtml || _default$1.escapeHtml;
  this.options = options;

  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS$2(options.css);
  }
}

/**
 * start process and returns result
 *
 * @param {String} html
 * @return {String}
 */
FilterXSS.prototype.process = function(html) {
  // compatible with the input
  html = html || "";
  html = html.toString();
  if (!html) return "";

  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag = options.onTag;
  var onIgnoreTag = options.onIgnoreTag;
  var onTagAttr = options.onTagAttr;
  var onIgnoreTagAttr = options.onIgnoreTagAttr;
  var safeAttrValue = options.safeAttrValue;
  var escapeHtml = options.escapeHtml;
  var cssFilter = me.cssFilter;

  // remove invisible characters
  if (options.stripBlankChar) {
    html = _default$1.stripBlankChar(html);
  }

  // remove html comments
  if (!options.allowCommentTag) {
    html = _default$1.stripCommentTag(html);
  }

  // if enable stripIgnoreTagBody
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    var stripIgnoreTagBody = _default$1.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag
    );
    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;
  }

  var retHtml = parseTag$1(
    html,
    function(sourcePosition, position, tag, html, isClosing) {
      var info = {
        sourcePosition: sourcePosition,
        position: position,
        isClosing: isClosing,
        isWhite: whiteList.hasOwnProperty(tag)
      };

      // call `onTag()`
      var ret = onTag(tag, html, info);
      if (!isNull$1(ret)) return ret;

      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }

        var attrs = getAttrs(html);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr$1(attrs.html, function(name, value) {
          // call `onTagAttr()`
          var isWhiteAttr = util$1.indexOf(whiteAttrList, name) !== -1;
          var ret = onTagAttr(tag, name, value, isWhiteAttr);
          if (!isNull$1(ret)) return ret;

          if (isWhiteAttr) {
            // call `safeAttrValue()`
            value = safeAttrValue(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            // call `onIgnoreTagAttr()`
            var ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);
            if (!isNull$1(ret)) return ret;
            return;
          }
        });

        // build new tag html
        var html = "<" + tag;
        if (attrsHtml) html += " " + attrsHtml;
        if (attrs.closing) html += " /";
        html += ">";
        return html;
      } else {
        // call `onIgnoreTag()`
        var ret = onIgnoreTag(tag, html, info);
        if (!isNull$1(ret)) return ret;
        return escapeHtml(html);
      }
    },
    escapeHtml
  );

  // if enable stripIgnoreTagBody
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }

  return retHtml;
};

var xss = FilterXSS;

var lib$1 = createCommonjsModule(function (module, exports) {
/**
 * xss
 *
 * @author Zongmin Lei<leizongmin@gmail.com>
 */





/**
 * filter xss function
 *
 * @param {String} html
 * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }
 * @return {String}
 */
function filterXSS(html, options) {
  var xss$1 = new xss(options);
  return xss$1.process(html);
}

exports = module.exports = filterXSS;
exports.filterXSS = filterXSS;
exports.FilterXSS = xss;
for (var i in _default$1) exports[i] = _default$1[i];
for (var i in parser$1) exports[i] = parser$1[i];

// using `xss` on the WebWorker, output `filterXSS` to the globals
function isWorkerEnv() {
  return typeof self !== 'undefined' && typeof DedicatedWorkerGlobalScope !== 'undefined' && self instanceof DedicatedWorkerGlobalScope;
}
if (isWorkerEnv()) {
  self.filterXSS = module.exports;
}
});

/* Copyright (c) 2020 Environmental Systems Research Institute, Inc.
 * Apache-2.0
 *
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * The MIT License, see
 * https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 * */
/**
 * The Sanitizer Class
 *
 * @export
 * @class Sanitizer
 */
var Sanitizer = /** @class */ (function () {
    function Sanitizer(filterOptions, extendDefaults) {
        var _this = this;
        // Supported HTML Spec: https://doc.arcgis.com/en/arcgis-online/reference/supported-html.htm
        this.arcgisWhiteList = {
            a: ["href", "target", "style"],
            img: ["src", "width", "height", "border", "alt", "style"],
            video: [
                "autoplay",
                "controls",
                "height",
                "loop",
                "muted",
                "poster",
                "preload",
                "width"
            ],
            audio: ["autoplay", "controls", "loop", "muted", "preload"],
            source: ["media", "src", "type"],
            span: ["style"],
            table: ["width", "height", "cellpadding", "cellspacing", "border", "style"],
            div: ["style", "align"],
            font: ["size", "color", "style"],
            tr: ["height", "valign", "align", "style"],
            td: [
                "height",
                "width",
                "valign",
                "align",
                "colspan",
                "rowspan",
                "nowrap",
                "style"
            ],
            th: [
                "height",
                "width",
                "valign",
                "align",
                "colspan",
                "rowspan",
                "nowrap",
                "style"
            ],
            p: ["style"],
            b: [],
            strong: [],
            i: [],
            em: [],
            u: [],
            br: [],
            li: [],
            ul: [],
            ol: [],
            hr: [],
            tbody: []
        };
        this.allowedProtocols = [
            "http",
            "https",
            "mailto",
            "iform",
            "tel",
            "flow",
            "lfmobile",
            "arcgis-navigator",
            "arcgis-appstudio-player",
            "arcgis-survey123",
            "arcgis-collector",
            "arcgis-workforce",
            "arcgis-explorer",
            "arcgis-trek2there",
            "mspbi",
            "comgooglemaps",
            "pdfefile",
            "pdfehttp",
            "pdfehttps",
            "boxapp",
            "boxemm",
            "awb",
            "awbs",
            "gropen",
            "radarscope"
        ];
        this.arcgisFilterOptions = {
            allowCommentTag: true,
            safeAttrValue: function (tag, name, value, cssFilter) {
                // Take over safe attribute filtering for `a` `href`, `img` `src`,
                // and `source` `src` attributes, otherwise pass onto the
                // default `XSS.safeAttrValue` method.
                if ((tag === "a" && name === "href") ||
                    ((tag === "img" || tag === "source") && name === "src")) {
                    return _this.sanitizeUrl(value);
                }
                return lib$1.safeAttrValue(tag, name, value, cssFilter);
            }
        };
        var xssFilterOptions;
        if (filterOptions && !extendDefaults) {
            // Override the defaults
            xssFilterOptions = filterOptions;
        }
        else if (filterOptions && extendDefaults) {
            // Extend the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            Object.keys(filterOptions).forEach(function (key) {
                if (key === "whiteList") {
                    // Extend the whitelist by concatenating arrays
                    xssFilterOptions.whiteList = _this._extendObjectOfArrays([
                        _this.arcgisWhiteList,
                        filterOptions.whiteList || {}
                    ]);
                }
                else {
                    xssFilterOptions[key] = filterOptions[key];
                }
            });
        }
        else {
            // Only use the defaults
            xssFilterOptions = Object.create(this.arcgisFilterOptions);
            xssFilterOptions.whiteList = this.arcgisWhiteList;
        }
        this.xssFilterOptions = xssFilterOptions;
        // Make this readable to tests
        this._xssFilter = new lib$1.FilterXSS(xssFilterOptions);
    }
    /**
     * Sanitizes value to remove invalid HTML tags.
     *
     * Note: If the value passed does not contain a valid JSON data type (String,
     * Number, JSON Object, Array, Boolean, or null), the value will be nullified.
     *
     * @param {any} value The value to sanitize.
     * @returns {any} The sanitized value.
     * @memberof Sanitizer
     */
    Sanitizer.prototype.sanitize = function (value, options) {
        if (options === void 0) { options = {}; }
        switch (typeof value) {
            case "number":
                if (isNaN(value) || !isFinite(value)) {
                    return null;
                }
                return value;
            case "boolean":
                return value;
            case "string":
                return this._xssFilter.process(value);
            case "object":
                return this._iterateOverObject(value, options);
            default:
                if (options.allowUndefined && typeof value === "undefined") {
                    return;
                }
                return null;
        }
    };
    /**
     * Sanitizes a URL string following the allowed protocols and sanitization rules.
     *
     * @param {string} value The URL to sanitize.
     * @returns {string} The sanitized URL.
     */
    Sanitizer.prototype.sanitizeUrl = function (value) {
        var protocol = this._trim(value.substring(0, value.indexOf(":")));
        if (!(value === "/" ||
            value === "#" ||
            value[0] === "#" ||
            this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1)) {
            return "";
        }
        else {
            return lib$1.escapeAttrValue(value);
        }
    };
    /**
     * Checks if a value only contains valid HTML.
     *
     * @param {any} value The value to validate.
     * @returns {boolean}
     * @memberof Sanitizer
     */
    Sanitizer.prototype.validate = function (value, options) {
        if (options === void 0) { options = {}; }
        var sanitized = this.sanitize(value, options);
        return {
            isValid: value === sanitized,
            sanitized: sanitized
        };
    };
    /**
     * Extends an object of arrays by by concatenating arrays of the same object
     * keys. If the if the previous key's value is not an array, the next key's
     * value will replace the previous key. This method is used for extending the
     * whiteList in the XSS filter options.
     *
     * @private
     * @param {Array<{}>} objects An array of objects.
     * @returns {{}} The extended object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._extendObjectOfArrays = function (objects) {
        var finalObj = {};
        objects.forEach(function (obj) {
            Object.keys(obj).forEach(function (key) {
                if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {
                    finalObj[key] = finalObj[key].concat(obj[key]);
                }
                else {
                    finalObj[key] = obj[key];
                }
            });
        });
        return finalObj;
    };
    /**
     * Iterate over a plain object or array to deeply sanitize each value.
     *
     * @private
     * @param {object} obj The object to iterate over.
     * @returns {(object | null)} The sanitized object.
     * @memberof Sanitizer
     */
    Sanitizer.prototype._iterateOverObject = function (obj, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        try {
            var hasChanged_1 = false;
            var changedObj = void 0;
            if (Array.isArray(obj)) {
                changedObj = obj.reduce(function (prev, value) {
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        return prev.concat([value]);
                    }
                    else {
                        hasChanged_1 = true;
                        return prev.concat([validation.sanitized]);
                    }
                }, []);
            }
            else if (!lodash_isplainobject(obj)) {
                if (options.allowUndefined && typeof obj === "undefined") {
                    return;
                }
                return null;
            }
            else {
                var keys = Object.keys(obj);
                changedObj = keys.reduce(function (prev, key) {
                    var value = obj[key];
                    var validation = _this.validate(value, options);
                    if (validation.isValid) {
                        prev[key] = value;
                    }
                    else {
                        hasChanged_1 = true;
                        prev[key] = validation.sanitized;
                    }
                    return prev;
                }, {});
            }
            if (hasChanged_1) {
                return changedObj;
            }
            return obj;
        }
        catch (err) {
            return null;
        }
    };
    /**
     * Trim whitespace from the start and ends of a string.
     * @param {string} val The string to trim.
     * @returns {string} The trimmed string.
     */
    Sanitizer.prototype._trim = function (val) {
        // @ts-ignore This is used by Jest,
        // but TypeScript errors since it assumes `trim` is always available.
        return String.prototype.trim
            ? val.trim()
            : val.replace(/(^\s*)|(\s*$)/g, "");
    };
    return Sanitizer;
}());

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var o$R,s$L,a$$=function(e){o$R||function(e){if("WebkitTransition"in e.style)o$R="webkitTransitionEnd",s$L="webkitAnimationEnd";else {if(!("transition"in e.style))throw new Error("Your browser is not supported!");o$R="transitionend",s$L="animationend";}}(e);},d$G=function(e,t){return void 0===t&&(t=e+"-active"),function(n){a$$(n);var i=!1,r=function(a){i||(i=!0,n.removeEventListener(o$R,r),n.removeEventListener(s$L,r),n.classList.remove(e),n.classList.remove(t));};n.classList.add(e),n.addEventListener(o$R,r),n.addEventListener(s$L,r),requestAnimationFrame((function(){n.classList.add(t);}));}},c$1g=function(e,t){return void 0===t&&(t=e+"-active"),function(n,i){a$$(n);var r=!1,d=function(e){r||(r=!0,n.removeEventListener(o$R,d),n.removeEventListener(s$L,d),i());};n.classList.add(e),n.addEventListener(o$R,d),n.addEventListener(s$L,d),requestAnimationFrame((function(){n.classList.add(t);}));}};const l$S=s("esri-debug-messages"),u$W=n$7.getLogger("esri.widgets.support.widgetUtils");function f$I(e){const t=o$o.acquire();for(let e=0;e<arguments.length;e++){const n=arguments[e],i=typeof n;if("string"===i)t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if("object"===i)for(const e in n)n[e]&&t.push(e);}const n=t.join(" ");return o$o.release(t),n}function g$r(){return "rtl"===document.dir}function p$19(e){const t=e.getAttribute("data-node-ref");if(l$S){if(!t)return void u$W.error("[Widget] node ref not found, did you forget the 'data-node-ref' attribute?");if(!(t in this))return void u$W.error(`[Widget] cannot discard ${t} if not defined on instance.`)}this[t]=null;}function m$H(e){const t=e.getAttribute("data-node-ref");if(l$S){if(!t)return void u$W.error("[Widget] node ref not found, did you forget the 'data-node-ref' attribute?");if(!(t in this))return void u$W.error(`[Widget] cannot store ${t} if not defined on instance.`)}this[t]=e;}function h$K(e,t){return ("enter"===e?d$G:c$1g)(t)}const v$g=["h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],L$9=v$g.reduce((e,t)=>(e[t]=[],e),{}),b$g=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],w$c=new Sanitizer({whiteList:L$9,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(h$6(b$g,t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$M="http://www.w3.org/2000/svg",o$S=[];let r$E=(e,t)=>{const o={};return Object.keys(e).forEach(t=>{o[t]=e[t];}),t&&Object.keys(t).forEach(e=>{o[e]=t[e];}),o};const n$V=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),s$M=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},i$1g=(e,t,o)=>{if(""!==t.vnodeSelector)for(let r=o;r<e.length;r++)if(n$V(e[r],t))return r;return -1},p$1a=(e,t,o,r)=>{const s=e[t];if(""===s.vnodeSelector)return;const i=s.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0))for(let i=0;i<e.length;i++)if(i!==t){const t=e[i];if(n$V(t,s))throw new Error(`${o.vnodeSelector} had a ${s.vnodeSelector} child ${"added"===r?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},d$H=e=>{if(e.properties){const t=e.properties.enterAnimation;t&&t(e.domNode,e.properties);}},l$T=[];let c$1h=!1;const a$10=e=>{(e.children||[]).forEach(a$10),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode]);},f$J=()=>{c$1h=!1,l$T.forEach(a$10),l$T.length=0;},u$X=e=>{l$T.push(e),c$1h||(c$1h=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(f$J,{timeout:16}):setTimeout(f$J,16));},h$L=e=>{const t=e.domNode;if(e.properties){const o=e.properties.exitAnimation;if(o){t.style.pointerEvents="none";const r=()=>{t.parentNode&&(t.parentNode.removeChild(t),u$X(e));};return void o(t,r,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),u$X(e));},m$I=(o,r,n)=>{if(!r)return;const i=n.eventHandlerInterceptor,p=Object.keys(r),d=p.length;for(let l=0;l<d;l++){const d=p[l];let c=r[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)w$d(o,c,!0);else if("classes"===d){const e=Object.keys(c),t=e.length;for(let r=0;r<t;r++){const t=e[r];c[t]&&o.classList.add(t);}}else if("styles"===d){const e=Object.keys(c),t=e.length;for(let r=0;r<t;r++){const t=e[r],i=c[t];i&&(s$M(i),n.styleApplyer(o,t,i));}}else if("key"!==d&&null!=c){const s=typeof c;"function"===s?0===d.lastIndexOf("on",0)&&(i&&(c=i(d,c,o,r)),"oninput"===d&&function(){const e=c;c=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value;};}(),o[d]=c):n.namespace===t$M?"href"===d?o.setAttributeNS("http://www.w3.org/1999/xlink",d,c):o.setAttribute(d,c):"string"===s&&"value"!==d?"innerHTML"===d?o[d]=w$c.sanitize(c):o.setAttribute(d,c):o[d]=c;}}};let v$h,y$u=(e,t,o)=>{((e,t,o)=>{if(t)for(const r of t)g$s(r,e,void 0,o);})(e,t.children,o),t.text&&(e.textContent=t.text),m$I(e,t.properties,o),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,o,t.vnodeSelector,t.properties,t.children]);},g$s=(e,o,n,s)=>{let i,p=0;const d=e.vnodeSelector,l=o.ownerDocument;if(""===d)i=e.domNode=l.createTextNode(e.text),void 0!==n?o.insertBefore(i,n):o.appendChild(i);else {for(let c=0;c<=d.length;++c){const a=d.charAt(c);if(c===d.length||"."===a||"#"===a){const a=d.charAt(p-1),f=d.slice(p,c);"."===a?i.classList.add(f):"#"===a?i.id=f:("svg"===f&&(s=r$E(s,{namespace:t$M})),void 0!==s.namespace?i=e.domNode=l.createElementNS(s.namespace,f):(i=e.domNode=e.domNode||l.createElement(f),"input"===f&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==n?o.insertBefore(i,n):i.parentNode!==o&&o.appendChild(i)),p=c+1;}}y$u(i,e,s);}};const w$d=(e,t,o)=>{t&&t.split(" ").forEach(t=>{t&&e.classList.toggle(t,o);});};v$h=(l,c,a)=>{const f=l.domNode;let u=!1;if(l===c)return !1;let m=!1;if(""===c.vnodeSelector){if(c.text!==l.text){const e=f.ownerDocument.createTextNode(c.text);return f.parentNode.replaceChild(e,f),c.domNode=e,u=!0,u}c.domNode=f;}else 0===c.vnodeSelector.lastIndexOf("svg",0)&&(a=r$E(a,{namespace:t$M})),l.text!==c.text&&(m=!0,void 0===c.text?f.removeChild(f.firstChild):f.textContent=c.text),c.domNode=f,m=((e,t,r,s,l)=>{if(r===s)return !1;s=s||o$S;const c=(r=r||o$S).length,a=s.length;let f,u=0,m=0,y=!1;for(;m<a;){const o=u<c?r[u]:void 0,a=s[m];if(void 0!==o&&n$V(o,a))y=v$h(o,a,l)||y,u++;else {const o=i$1g(r,a,u+1);if(o>=0){for(f=u;f<o;f++)h$L(r[f]),p$1a(r,f,e,"removed");y=v$h(r[o],a,l)||y,u=o+1;}else g$s(a,t,u<c?r[u].domNode:void 0,l),d$H(a),p$1a(s,m,e,"added");}m++;}if(c>u)for(f=u;f<c;f++)h$L(r[f]),p$1a(r,f,e,"removed");return y})(c,f,l.children,c.children,a)||m,m=((o,r,n,i)=>{if(!n)return;let p=!1;const d=Object.keys(n),l=d.length;for(let c=0;c<l;c++){const l=d[c];let a=n[l];const f=r[l];if("class"===l)f!==a&&(w$d(o,f,!1),w$d(o,a,!0));else if("classes"===l){const e=o.classList,t=Object.keys(a),r=t.length;for(let o=0;o<r;o++){const r=t[o],n=!!a[r];n!==!!f[r]&&(p=!0,n?e.add(r):e.remove(r));}}else if("styles"===l){const e=Object.keys(a),t=e.length;for(let r=0;r<t;r++){const t=e[r],n=a[t];n!==f[t]&&(p=!0,n?(s$M(n),i.styleApplyer(o,t,n)):i.styleApplyer(o,t,""));}}else if(a||"string"!=typeof f||(a=""),"value"===l){const e=o[l];e!==a&&(o["oninput-value"]?e===o["oninput-value"]:a!==f)&&(o[l]=a,o["oninput-value"]=void 0),a!==f&&(p=!0);}else if(a!==f){const r=typeof a;"function"===r&&i.eventHandlerInterceptor||(i.namespace===t$M?"href"===l?o.setAttributeNS("http://www.w3.org/1999/xlink",l,a):o.setAttribute(l,a):"string"===r?"innerHTML"===l?o[l]=w$c.sanitize(a):"role"===l&&""===a?o.removeAttribute(l):o.setAttribute(l,a):o[l]!==a&&(o[l]=a),p=!0);}}return p})(f,l.properties,c.properties,a)||m,c.properties&&c.properties.afterUpdate&&c.properties.afterUpdate.apply(c.properties.bind||c.properties,[f,a,c.vnodeSelector,c.properties,c.children]);return m&&c.properties&&c.properties.updateAnimation&&c.properties.updateAnimation(f,c.properties,l.properties),u};let b$h=(e,t)=>({getLastRender:()=>e,update:o=>{if(e.vnodeSelector!==o.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");const r=e;e=o,v$h(r,o,t);},domNode:e.domNode});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const d$I={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,o,r)=>{e.style[o]=r;}};let n$W=o=>r$E(d$I,o),p$1b={create:(e,t)=>(t=n$W(t),g$s(e,document.createElement("div"),void 0,t),b$h(e,t)),append:(e,t,d)=>(d=n$W(d),g$s(t,e,void 0,d),b$h(t,d)),insertBefore:(e,t,d)=>(d=n$W(d),g$s(t,e.parentNode,e,d),b$h(t,d)),merge:(e,o,d)=>(d=n$W(d),o.domNode=e,y$u(e,o,d),b$h(o,d)),replace:(e,t,d)=>(d=n$W(d),g$s(t,e.parentNode,e,d),e.parentNode.removeChild(e),b$h(t,d))};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$N=(e,r)=>{const t=[];for(;e!==r;)t.push(e),e=e.parentNode;return t};let n$X;n$X=Array.prototype.find?(e,r)=>e.find(r):(e,r)=>e.filter(r)[0];const o$T=(e,r)=>{let t=e;return r.forEach(e=>{t=t&&t.children?n$X(t.children,r=>r.domNode===e):void 0;}),t},d$J=(e,r,n)=>{const d=function(d){n("domEvent",d);const s=r(),c=t$N(d.currentTarget,s.domNode);c.reverse();const i=o$T(s.getLastRender(),c);let p;return e.scheduleRender(),i&&(p=i.properties["on"+d.type].apply(i.properties.bind||this,arguments)),n("domEventProcessed",d),p};return ()=>d};let s$N=t=>{let n;const o=n$W(t),s=o.performanceLogger;let c,i=!0,p=!1;const l=[],a=[],u=(e,r,t)=>{let c;o.eventHandlerInterceptor=d$J(n,()=>c,s),c=e(r,t(),o),l.push(c),a.push(t);},f=()=>{if(c=void 0,i){i=!1,s("renderStart",void 0);for(let e=0;e<l.length;e++){const r=a[e]();s("rendered",void 0),l[e].update(r),s("patched",void 0);}s("renderDone",void 0),i=!0;}};return n={renderNow:f,scheduleRender:()=>{c||p||(c=requestAnimationFrame(f));},stop:()=>{c&&(cancelAnimationFrame(c),c=void 0),p=!0;},resume:()=>{p=!1,i=!0,n.scheduleRender();},append:(e,t)=>{u(p$1b.append,e,t);},insertBefore:(e,t)=>{u(p$1b.insertBefore,e,t);},merge:(e,t)=>{u(p$1b.merge,e,t);},replace:(e,t)=>{u(p$1b.replace,e,t);},detach:e=>{for(let r=0;r<a.length;r++)if(a[r]===e)return a.splice(r,1),l.splice(r,1)[0];throw new Error("renderFunction was not found")}},n};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$1i=class extends h$c{constructor(){super(...arguments),this.items=new L$2,this._watchUpdatingTracking=new h$J,this._callbacks=new Map,this._projector=s$N(),this._hiddenProjector=s$N();}get needsRender(){return this.items.length>0}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,t=>{t.added.map(t=>{const e=()=>t.render();this._callbacks.set(t,e),this._projector.append(this.surface,e);}),t.removed.map(t=>{const e=this._projector.detach(this._callbacks.get(t));this.surface.removeChild(e.domNode),this._callbacks.delete(t);});});}addItem(t){this.items.add(t);}removeItem(t){this.items.remove(t);}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy();}render(){this._projector.renderNow();}computeBoundingRect(t){const e=this._hiddenSurface,r=this._hiddenProjector;let o=null;const s=()=>(o=t.render(),o);r.append(e,s),r.renderNow();const i={left:0,top:0,right:0,bottom:0};if(o&&o.domNode){const t=o.domNode.getBoundingClientRect();i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom;}for(r.detach(s);e.firstChild;)e.removeChild(e.firstChild);return i}overlaps(t,e){const r=this.computeBoundingRect(t),o=this.computeBoundingRect(e);return Math.max(r.left,o.left)<=Math.min(r.right,o.right)&&Math.max(r.top,o.top)<=Math.min(r.bottom,o.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}renderCanvas(t){if(!this.items.some(t=>t.visible))return;const e=t.getContext("2d");e.save(),e.font="10px "+getComputedStyle(this.surface).fontFamily,this.items.forEach(t=>{e.save(),t.renderCanvas(e),e.restore();}),e.restore();}};e([y$5({readOnly:!0})],c$1i.prototype,"surface",void 0),e([y$5({readOnly:!0})],c$1i.prototype,"items",void 0),e([y$5({readOnly:!0,dependsOn:["items.length"]})],c$1i.prototype,"needsRender",null),e([y$5({readOnly:!0})],c$1i.prototype,"_watchUpdatingTracking",void 0),e([y$5({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c$1i.prototype,"updating",void 0),c$1i=e([n$e("esri.views.overlay.ViewOverlay")],c$1i);var n$Y=c$1i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$S(e,t,l,n){let o=null,u=1e3;"number"==typeof t?(u=t,n=l):(o=null!=t?t:null,u=l);let p,r=0;const a=()=>{r=0,e.apply(n,p);},c=(...e)=>{o&&o.apply(n,e),p=e,u?r||(r=setTimeout(a,u)):a();};return c.remove=()=>{r&&(clearTimeout(r),r=0);},c.forceUpdate=()=>{r&&(clearTimeout(r),a());},c.hasPendingUpdates=()=>!!r,c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$Z(){return function(n,e){if(!n[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return {value:(t=n[e],function(n,...e){!function(n){const{type:e}=n;return n instanceof KeyboardEvent||"keyup"===e||"keydown"===e||"keypress"===e}(n)?t.call(this,n,...e):"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),n.stopPropagation(),n.target.click());})};var t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$T(e){return function(s,n){s.hasOwnProperty("_messageBundleProps")||(s._messageBundleProps=s._messageBundleProps?s._messageBundleProps.slice():[]);s._messageBundleProps.push({bundlePath:e,propertyName:n});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$_(n){return n.split(",").map(n=>n.trim())}function r$F(n,r){return n.map(n=>function(n,r){if(0===n.indexOf(r))return n;return `${r}.${n}`}(n,r))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$U(o){const p="string"==typeof o?n$_(o):o;return function(r,o){r.hasOwnProperty("_renderableProps")||(r._renderableProps=r._renderableProps?r._renderableProps.slice():[]);const n=r._renderableProps;p?n.push.apply(n,r$F(p,o)):n.push(o);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$O(t){return a=>{a.hasOwnProperty("_delegatedEventNames")||(a._delegatedEventNames=a._delegatedEventNames?a._delegatedEventNames.slice():[]);const r=a._delegatedEventNames,s=Array.isArray(t)?t:n$_(t);r.push(...s);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$U=function(r,o){for(var t=0,n=r.length;t<n;t++){var d=r[t];Array.isArray(d)?e$U(d,o):null!=d&&!1!==d&&(d.hasOwnProperty("vnodeSelector")||(d={vnodeSelector:"",properties:void 0,children:void 0,text:d.toString(),domNode:null}),o.push(d));}},r$G=function(r,o){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(1===t.length&&"string"==typeof t[0])return {vnodeSelector:r,properties:o||void 0,children:void 0,text:t[0],domNode:null};var d=[];return e$U(t,d),{vnodeSelector:r,properties:o||void 0,children:d,text:void 0,domNode:null}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$O{constructor(s){this._node=s;}add(s){const{_node:e}=this;e.className.baseVal=`${e.className.baseVal} ${s}`.trim();}contains(s){return this._node.className.baseVal.split(" ").indexOf(s)>-1}remove(s){const{_node:e}=this;let t="";for(const a of e.className.baseVal.split(" "))a!==s&&(t+=a+" ");e.className.baseVal=t.trim();}toggle(s,e){const t=this.contains(s);let a;return a=t?!0!==e&&"remove":!1!==e&&"add",a&&this[a](s),void 0!==e?e:!t}}"classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get(){return new s$O(this)}});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const y$v=n$7.getLogger("esri.widgets.Widget");let v$i=0;const f$K="esri-icon-checkbox-unchecked",w$e=s$N();let b$i=class extends(_$9(i$n.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new u$A,this._projector=w$e,this.domNode=null,this.iconClass=f$K,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this._loadLocale=H$1(async()=>{this._messageBundleProps&&this._messageBundleProps.length&&await x$1(this._messageBundleProps.map(async({bundlePath:e,propertyName:t})=>{this[t]=await h$l(e);})).then(e=>{for(const t of e)t.error&&y$v.error("widget-intl:locale-error",this.declaredClass,t.error);}),await this.loadLocale();});const s="esri-widget-uid-"+Date.now().toString(16),r=this.render.bind(this);let i=!1;this.render=()=>{if(!i||this.destroyed)return null;const e=r();return e.properties?e.properties.key||(e.properties.key=s):e.properties={key:s},e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{i=!0,this._postInitialize();}));}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){return this._loadLocale()}async loadLocale(){}destroy(){this.destroyed||(this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null);}set container(e){this._get("container")||this._set("container",e);}castContainer(e){return e$R(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+v$i++}set id(e){e&&this._set("id",e);}get renderable(){return this._resourcesFetch}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||this._projector.scheduleRender();}classes(...e){return f$I.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e);}renderNow(){this._projector.renderNow();}_postInitialize(){var e,t;this.destroyed||((null==(e=this._renderableProps)?void 0:e.length)&&this._internalHandles.add(this._renderableProps.map(e=>d$C(this,e,(function(t,s){if(L$2.isCollection(s)&&this._internalHandles.remove(`${this.declaredClass}:${e}-collection-change-event-listener`),L$2.isCollection(t)){const s=t.on("change",()=>this.scheduleRender());this._internalHandles.add(s,`${this.declaredClass}:${e}-collection-change-event-listener`);}this.scheduleRender();})))),(null==(t=this._delegatedEventNames)?void 0:t.length)&&this._internalHandles.add(d$C(this,"viewModel",(e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map(t=>e.on(t,e=>{this.emit(t,e);})),"delegated-events");})),this.postInitialize(),this._internalHandles.add(f$s(async()=>{await this._loadLocale(),this.scheduleRender();})),this._internalHandles.add(j$h(this,"container",async e=>{this.destroyed||this._attach(e);})));}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0);}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1);}};e([y$5({value:null})],b$i.prototype,"container",null),e([i$b("container")],b$i.prototype,"castContainer",null),e([y$5({aliasOf:"container"})],b$i.prototype,"domNode",void 0),e([y$5()],b$i.prototype,"iconClass",void 0),e([y$5({dependsOn:["container"]})],b$i.prototype,"id",null),e([y$5()],b$i.prototype,"label",void 0),e([y$5()],b$i.prototype,"renderable",null),e([y$5()],b$i.prototype,"viewModel",void 0),e([y$5()],b$i.prototype,"visible",void 0),b$i=e([n$e("esri.widgets.Widget")],b$i);var C$7=b$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$V(e){return e&&"function"==typeof e.render}function r$H(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$1h=i=>{let p=class extends i{constructor(){super(...arguments),this.renderNodeContent=r=>e$V(r)&&!r.destroyed?r$G("div",{key:r},r.render()):r instanceof HTMLElement?r$G("div",{key:r,bind:r,afterCreate:this._attachToNode}):r$H(r)?r$G("div",{key:r,bind:r.domNode,afterCreate:this._attachToNode}):null;}_attachToNode(r){r.appendChild(this);}};return p=e([n$e("esri.widgets.Feature.ContentMixin")],p),p};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$11=39.37,c$1j=P$3,u$Y=e$m*Math.PI/200,o$V=/UNIT\[([^\]]+)\]\]$/i,l$U=o$t,m$J=u$v([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),f$L=o$B()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),U$4=e=>e*e,d$K=e=>e*e*e,B$6={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:U$4(.001)},"square-centimeters":{inBaseUnits:U$4(.01)},"square-decimeters":{inBaseUnits:U$4(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:U$4(1e3)},"square-inches":{inBaseUnits:U$4(.0254)},"square-feet":{inBaseUnits:U$4(.3048)},"square-yards":{inBaseUnits:U$4(.9144)},"square-miles":{inBaseUnits:U$4(1609.344)},"square-us-feet":{inBaseUnits:U$4(1200/3937)},acres:{inBaseUnits:.0015625*U$4(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*d$K(.001)},"cubic-centimeters":{inBaseUnits:1e3*d$K(.01)},"cubic-decimeters":{inBaseUnits:1e3*d$K(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*d$K(1e3)},"cubic-inches":{inBaseUnits:1e3*d$K(.0254)},"cubic-feet":{inBaseUnits:1e3*d$K(.3048)},"cubic-yards":{inBaseUnits:1e3*d$K(.9144)},"cubic-miles":{inBaseUnits:1e3*d$K(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},k$d=function(){const e={};for(const s in B$6)for(const t in B$6[s].units)e[t]=s;return e}();function p$1c(e){const s=k$d[e];if(s)return s;throw new Error("unknown measure")}function _$d(e,s=null){return s=s||p$1c(e),B$6[s].baseUnit===e}function w$f(e,s,t){if(s===t)return e;const n=p$1c(s);if(n!==p$1c(t))throw new Error("incompatible units");const i=_$d(s,n)?e:function(e,s,t){return e*B$6[t].units[s].inBaseUnits}(e,s,n);return _$d(t,n)?i:function(e,s,t){return e/B$6[t].units[s].inBaseUnits}(i,t,n)}function J$3(e,s,t=e$m){return w$f(e,s,"meters")/(t*Math.PI/180)}function M$d(e){return f$L.fromJSON(e.toLowerCase())||null}function N$5(e){const s=R$7(e);return s>1e5?1:s}function E$7(e){return R$7(e)>1e5?"meters":D$6(e)}function R$7(e,s=c$1j){return W$2(e,!0)||s}function W$2(e,s=!1){let t,n,i;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)i=l$U.values[l$U[t]],!i&&s&&m$J.has(t)&&(i=u$Y);else if(n&&-1!==n.search(/^PROJCS/i)){const e=o$V.exec(n);e&&e[1]&&(i=parseFloat(e[1].split(",")[1]));}return i}function D$6(e){let s,t,n;if(null!=e&&("object"==typeof e?(s=e.wkid,t=e.wkt):"number"==typeof e?s=e:"string"==typeof e&&(t=e)),s)n=l$U.units[l$U[s]];else if(t&&-1!==t.search(/^PROJCS/i)){let e=o$V.exec(t);e&&e[1]&&(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]),n=e&&e[1]);}return n?M$d(n):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const F$8=["B","kB","MB","GB","TB"];function B$7(o,i){let u=0===i?0:Math.floor(Math.log(i)/Math.log(1024));u=e$z(u,0,F$8.length-1);const e=u$t(i/Math.pow(1024,u),{maximumFractionDigits:2});return o$7(o.units.bytes[F$8[u]],{fileSize:e})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$1d;let a$12=p$1d=class extends a$h{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null;}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10;}clone(){return new p$1d(s$4({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};e([y$5({type:[String],json:{write:!0}})],a$12.prototype,"attachmentTypes",void 0),e([y$5({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],a$12.prototype,"attachmentsWhere",void 0),e([y$5({type:[String],json:{write:!0}})],a$12.prototype,"keywords",void 0),e([y$5({type:[Number],json:{write:!0}})],a$12.prototype,"globalIds",void 0),e([y$5({json:{write:!0}})],a$12.prototype,"name",void 0),e([y$5({type:Number,json:{read:{source:"resultRecordCount"}}})],a$12.prototype,"num",void 0),e([y$5({type:[Number],json:{write:!0}})],a$12.prototype,"objectIds",void 0),e([y$5({type:Boolean,json:{default:!1,write:!0}})],a$12.prototype,"returnMetadata",void 0),e([y$5({type:[Number],json:{write:!0}})],a$12.prototype,"size",void 0),e([y$5({type:Number,json:{read:{source:"resultOffset"}}})],a$12.prototype,"start",void 0),e([o$r("start"),o$r("num")],a$12.prototype,"writeStart",null),e([y$5({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],a$12.prototype,"where",void 0),a$12=p$1d=e([n$e("esri.tasks.support.AttachmentQuery")],a$12),a$12.from=d$2(a$12);var u$Z=a$12;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$P(t){const{exifInfo:a,exifName:e,tagName:r}=t;if(!a||!e||!r)return null;const o=l$9(a,n=>n.name===e);return o?function(t){const{tagName:a,tags:e}=t;if(!e||!a)return null;const r=l$9(e,n=>n.name===a);return r&&r.value||null}({tagName:r,tags:o.tags}):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var n$$;const p$1e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let d$L=n$$=class extends a$h{constructor(o){super(o),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null;}get orientationInfo(){const{exifInfo:o}=this,t=t$P({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:o});return p$1e[t]||null}clone(){return new n$$({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};e([y$5({type:String})],d$L.prototype,"contentType",void 0),e([y$5()],d$L.prototype,"exifInfo",void 0),e([y$5({readOnly:!0,dependsOn:["exifInfo"]})],d$L.prototype,"orientationInfo",null),e([y$5({type:N})],d$L.prototype,"id",void 0),e([y$5({type:String})],d$L.prototype,"globalId",void 0),e([y$5({type:String})],d$L.prototype,"keywords",void 0),e([y$5({type:String})],d$L.prototype,"name",void 0),e([y$5({json:{read:!1}})],d$L.prototype,"parentGlobalId",void 0),e([y$5({json:{read:!1}})],d$L.prototype,"parentObjectId",void 0),e([y$5({type:N})],d$L.prototype,"size",void 0),e([y$5({json:{read:!1}})],d$L.prototype,"url",void 0),d$L=n$$=e([n$e("esri.layers.support.AttachmentInfo")],d$L);var l$V=d$L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$13=t=>{let a=class extends t{destroy(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy());}get handles(){return this._get("handles")||new u$A}get updatingHandles(){return this._get("updatingHandles")||new h$J}};return e([y$5({readOnly:!0})],a.prototype,"handles",null),e([y$5({readOnly:!0})],a.prototype,"updatingHandles",null),a=e([n$e("esri.core.HandleOwner")],a),a};let d$M=class extends(a$13(h$c)){};d$M=e([n$e("esri.core.HandleOwner")],d$M);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$P=n$7.getLogger("esri.widgets.Feature.support.featureUtils"),f$M=/href=(""|'')/gi,c$1k=/(\{([^\{\r\n]+)\})/g,d$N=/\'/g,p$1f=/^\s*expression\//i,m$K=/(\n)/gi,y$w=/[\u00A0-\u9999<>\&]/gim,g$t=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,h$M=/^(?:mailto:|tel:)/,F$9=L$3("short-date-short-time");function b$j(e){if(e)return e.get("sourceLayer")||e.get("layer")}async function I$a(e,t){return "function"==typeof e?e.call(null,t):e}function w$g(e=""){if(e)return !h$M.test(e.trim().toLowerCase())}function N$6(e){return p$1f.test(e)}function j$k(e,t){const r=function(e,t){if(!N$6(t)||!e)return null;const r=t.replace(p$1f,"").toLowerCase();let n;return e.some(e=>e.name.toLowerCase()===r&&(n=e,!0)),n}(t,null==e?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function v$j(e,t){const r=C$8(t,e);return r?r.name:e}function L$a(e,t){return e&&e.map(e=>v$j(e,t))}function C$8(e,t){return e&&"function"==typeof e.getField?e.getField(t):null}function q$4(e){return (""+e).trim()}function E$8({formattedAttributes:t,template:r,fieldInfoMap:n}){return q$4(o$7(o$7(r,e=>function(e,t){const r=t.get(e.toLowerCase());return `{${r&&r.fieldName||e}}`}(e,n)),t).replace(f$M,""))}function D$7(e,t=!1){const r={...e};return Object.keys(r).forEach(e=>function(e,t,r=!1){const n=t[e];if("string"==typeof n){const i="%27",o=(r?encodeURIComponent(n):n).replace(d$N,i);t[e]=o;}}(e,r,t)),r}function x$f(e,t){return e.replace(c$1k,(e,r,n)=>{const i=C$8(t,n);return i?`{${i.name}}`:r})}function T$b(t,r,n){const i=x$f(t,n);return i?i.replace(g$t,(t,n,i)=>function(t,r,n){const i=(r=q$4(r))&&"{"!==r[0];return o$7(t,D$7(n,i))}(t,n||i,r)):i}function A$c(e,t){const r=t.fieldInfos,n=t.fieldName,i=M$e(r,n),o=null==i?void 0:i.clone(),s=t.preventPlacesFormatting,f=C$8(t.layer,n);if(f&&"date"===f.type){const e=o.format||new n$F;e.dateFormat=e.dateFormat||"short-date-short-time",o.format=e;}const c=o&&o.format;return "string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}(e,c))||null==e||null==c?e:s?u$t(e,{...s$u(c),minimumFractionDigits:0,maximumFractionDigits:20}):c.format(e)}function M$e(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let n=void 0;return e.some(e=>!(!e.fieldName||e.fieldName.toLowerCase()!==r)&&(n=e,!0)),n}function S$c(e,t){const{creatorField:r,creationDateField:n,editorField:o,editDateField:a}=e;if(!t)return;const u=t[a];if("number"==typeof u){const e=t[o];return {type:"edit",date:M$5(u,F$9),user:e}}const l=t[n];if("number"==typeof l){const e=t[r];return {type:"create",date:M$5(l,F$9),user:e}}return null}function $$5(e,t){const r=new Map;return e&&e.forEach(e=>{const n=v$j(e.fieldName,t);e.fieldName=n,r.set(n.toLowerCase(),e);}),r}function O$6(e){const t=[];if(!e)return t;const{fieldInfos:r,content:n}=e;return r&&t.push(...r),n&&Array.isArray(n)?(n.forEach(e=>{if("fields"===e.type){const r=e&&e.fieldInfos;t.push(...r);}}),t):t}function k$e(e){return e.replace(y$w,e=>`&#${e.charCodeAt(0)};`)}function U$5(e){return "string"==typeof e?e.replace(m$K,'<br class="esri-text-new-line" />'):e}function R$8(e){const{value:t,fieldName:r,fieldInfos:n,fieldInfoMap:o,layer:a,graphic:u}=e;if(null==t)return "";const l=function({fieldName:e,value:t,graphic:r,layer:n}){if(Q$2(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const i=n.getFieldDomain(e,{feature:r});return i&&"coded-value"===i.type?i.getName(t):null}({fieldName:r,value:t,graphic:u,layer:a});if(l)return l;const s=function({fieldName:e,graphic:t,layer:r}){if(Q$2(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:n}=r;if(!n||e!==n)return null;const i=r.getFeatureType(t);return i?i.name:null}({fieldName:r,graphic:u,layer:a});if(s)return s;if(o.get(r.toLowerCase()))return A$c(t,{fieldInfos:n,fieldName:r,layer:a});const f=a&&a.fieldsIndex;return f&&f.isDateField(r)?M$5(t,F$9):U$5(t)}function G$8({fieldInfos:e,graphic:t,layer:r,fieldInfoMap:n,relatedInfos:i}){const o={...t.attributes};return i.forEach(e=>B$8(o,e)),Object.keys(o).forEach(i=>{const a=o[i];o[i]=R$8({fieldName:i,fieldInfos:e,fieldInfoMap:n,layer:r,value:a,graphic:t});}),o}async function P$6({graphic:e,popupTemplate:t},i){const o=e.sourceLayer;if(!o||!t)return null;"function"==typeof o.load&&await o.load(i);const a=[e.attributes[o.objectIdField]],u=await t.getRequiredFields(o.fields);if(ce(u,e))return null;const l=await async function(e,t){const{layer:n,graphic:i,outFields:o,objectIds:a}=e,u=a[0];if("number"!=typeof u){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:n,graphic:i,objectId:u,requiredFields:o},a=new s$g("layer-query-features-invalid-objectid",e,t);throw s$P.warn(e,t),a}if("function"!=typeof n.queryFeatures){const e="The specified layer does not support the method 'queryFeatures'. The following fields will not be available.",t={layer:n,graphic:i,requiredFields:o},a=new s$g("layer-query-features-unsupported",e,t);throw s$P.warn(e,t),a}const l=n.createQuery();return l.objectIds=a,l.outFields=o,l.returnGeometry=!0,(await n.queryFeatures(l,t)).features[0]}({layer:o,graphic:e,outFields:u,objectIds:a},i);l&&(e.geometry=l.geometry,e.attributes={...e.attributes,...l.attributes});}function Q$2(e=""){return !!e&&-1!==e.indexOf("relationships/")}function z$6({attributes:e,graphic:t,relatedInfo:r}){e&&t&&r&&Object.keys(t.attributes).forEach(n=>{const i=(o={layerId:r.relation.id.toString(),fieldName:n})?`relationships/${o.layerId}/${o.fieldName}`:"";var o;e[i]=t.attributes[n];});}function B$8(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(r=>z$6({attributes:e,graphic:r,relatedInfo:t})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(r=>z$6({attributes:e,graphic:r,relatedInfo:t})));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$W={editing:!1,operations:{add:!0,update:!0,delete:!0}},u$_=L$2.ofType(l$V);let y$x=class extends d$M{constructor(t){super(t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...l$W},this.activeAttachmentInfo=null,this.attachmentInfos=new u$_,this.graphic=null,this.mode="view",this.handles.add([d$C(this,"graphic",()=>this._graphicChanged())]);}destroy(){this._attachmentLayer=null,this.graphic=null;}castAbilities(t){return {...l$W,...t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}async getAttachments(){const{_attachmentLayer:t,attachmentInfos:e}=this;if(!t||"function"!=typeof t.queryAttachments)throw new s$g("invalid-layer","getAttachments(): A valid layer is required.");const a=this._getFeatureId(),i=new u$Z({objectIds:[a],returnMetadata:!0}),r=[],s=t.queryAttachments(i).then(t=>t[a]||r).catch(()=>r);this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return e.removeAll(),o.length&&e.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:i,abilities:r}=this;if(!t)throw new s$g("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});if(!r.operations.add)throw new s$g("invalid-abilities","addAttachment(): add abilities are required.");if(!e||"function"!=typeof e.addAttachment)throw new s$g("invalid-layer","addAttachment(): A valid layer is required.");const s=e.addAttachment(i,t).then(t=>this._queryAttachment(t.objectId)),o=await s;return a.add(o),o}async deleteAttachment(t){const{_attachmentLayer:e,attachmentInfos:a,graphic:i,abilities:r}=this;if(!t)throw new s$g("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!r.operations.delete)throw new s$g("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!e||"function"!=typeof e.deleteAttachments)throw new s$g("invalid-layer","deleteAttachment(): A valid layer is required.");const s=e.deleteAttachments(i,[t.id]).then(()=>t),o=await s;return a.remove(o),o}async updateAttachment(t,e=this.activeAttachmentInfo){const{_attachmentLayer:a,attachmentInfos:i,graphic:r,abilities:s}=this;if(!t)throw new s$g("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});if(!e)throw new s$g("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!s.operations.update)throw new s$g("invalid-abilities","updateAttachment(): Update abilities are required.");const o=i.findIndex(t=>t===e);if(!a||"function"!=typeof a.updateAttachment)throw new s$g("invalid-layer","updateAttachment(): A valid layer is required.");const c=a.updateAttachment(r,e.id,t).then(t=>this._queryAttachment(t.objectId)),h=await c;return i.splice(o,1,h),h}async _queryAttachment(t){if(!t)throw new s$g("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:e}=this,a=this._getFeatureId(),i=new u$Z({objectIds:[a],attachmentsWhere:"AttachmentId="+t,returnMetadata:!0});return e.queryAttachments(i).then(t=>t[a][0])}_getFeatureId(){const{_attachmentLayer:t,graphic:e}=this;if(!t||!e)return null;const{objectIdField:a}=t,{attributes:i}=e;return i&&i[a]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}));}_setAttachmentLayer(){const{graphic:t}=this,a=b$j(t);this._attachmentLayer=a?"scene"===a.type&&u$4(a.associatedLayer)?a.associatedLayer:a:null;}};e([y$5()],y$x.prototype,"abilities",void 0),e([i$b("abilities")],y$x.prototype,"castAbilities",null),e([y$5()],y$x.prototype,"activeAttachmentInfo",void 0),e([y$5({readOnly:!0,type:u$_})],y$x.prototype,"attachmentInfos",void 0),e([y$5({type:c$19})],y$x.prototype,"graphic",void 0),e([y$5()],y$x.prototype,"mode",void 0),e([y$5({dependsOn:["graphic"],readOnly:!0})],y$x.prototype,"state",null),e([y$5({readOnly:!0,dependsOn:["graphic","graphic.layer","graphic.layer.loaded","graphic.layer.capabilities.operations.supportsResizeAttachments"]})],y$x.prototype,"supportsResizeAttachments",null),y$x=e([n$e("esri.widgets.Attachments.AttachmentsViewModel")],y$x);var A$d=y$x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$W=e$v("esri/themes/base/images/files/");function p$1g(i){const e=i.toLowerCase();return "image/bmp"===e||"image/emf"===e||"image/exif"===e||"image/gif"===e||"image/x-icon"===e||"image/jpeg"===e||"image/png"===e||"image/tiff"===e||"image/x-wmf"===e}function a$14(i){return i?"text/plain"===i?e$W+"text-32.svg":"application/pdf"===i?e$W+"pdf-32.svg":"text/csv"===i?e$W+"csv-32.svg":"application/gpx+xml"===i?e$W+"gpx-32.svg":"application/x-dwf"===i?e$W+"cad-32.svg":"application/postscript"===i||"application/json"===i||"text/xml"===i||"model/vrml"===i?e$W+"code-32.svg":"application/x-zip-compressed"===i||"application/x-7z-compressed"===i||"application/x-gzip"===i||"application/x-tar"===i||"application/x-gtar"===i||"application/x-bzip2"===i||"application/gzip"===i||"application/x-compress"===i||"application/x-apple-diskimage"===i||"application/x-rar-compressed"===i||"application/zip"===i?e$W+"zip-32.svg":-1!==i.indexOf("image/")?e$W+"image-32.svg":-1!==i.indexOf("audio/")?e$W+"sound-32.svg":-1!==i.indexOf("video/")?e$W+"video-32.svg":-1!==i.indexOf("msexcel")||-1!==i.indexOf("ms-excel")||-1!==i.indexOf("spreadsheetml")?e$W+"excel-32.svg":-1!==i.indexOf("msword")||-1!==i.indexOf("ms-word")||-1!==i.indexOf("wordprocessingml")?e$W+"word-32.svg":-1!==i.indexOf("powerpoint")||-1!==i.indexOf("presentationml")?e$W+"report-32.svg":e$W+"generic-32.svg":e$W+"generic-32.svg"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const f$N={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},y$y="esri-attachments",w$h="esri-attachments__loader-container",A$e="esri-attachments__loader",M$f="esri-attachments__container",k$f="esri-attachments__container--list",F$a="esri-attachments__container--preview",j$l="esri-attachments__actions",I$b="esri-attachments__delete-button",E$9="esri-attachments__add-attachment-button",B$9="esri-attachments__error-message",U$6="esri-attachments__items",S$d="esri-attachments__item",z$7="esri-attachments__item-button",C$9="esri-attachments__item-mask",D$8="esri-attachments__item-mask--icon",T$c="esri-attachments__image",O$7="esri-attachments__image--resizable",V$3="esri-attachments__label",x$g="esri-attachments__filename",L$b="esri-attachments__item-chevron-icon",R$9="esri-attachments__item-link",$$6="esri-attachments__item-link-overlay",H$4="esri-attachments__item-link-overlay-icon",P$7="esri-attachments__item-add-icon",G$9="esri-attachments__form-node",W$3="esri-attachments__file-fieldset",X$2="esri-attachments__file-label",q$5="esri-attachments__file-name",J$4="esri-attachments__file-input",K$1="esri-attachments__metadata",N$7="esri-attachments__metadata-fieldset",Q$3="esri-attachments__progress-bar",Y$2="esri-widget",Z$1="esri-button",tt="esri-button--disabled",et$1="esri-button--secondary",st$1="esri-button--tertiary",it$1="esri-button--third",at="esri-button--small",nt$1="esri-button--half",rt="esri-widget__content--empty",ot$1="esri-icon-right",lt$1="esri-icon-left",ct$1="esri-icon-plus",dt$1=window.CSS;let mt=class extends C$7{constructor(t,e){super(t,e),this.abilities=null,this.displayType="list",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new A$d,this.visibleElements={...f$N},this._supportsImageOrientation=dt$1&&dt$1.supports&&dt$1.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null;}initialize(){this.own(B$5(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),d$C(this,"viewModel.mode",()=>this._modeChanged()));}castVisibleElements(t){return {...f$N,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:e}=this;return this._set("submitting",!0),this._set("error",null),e.addAttachment(t).then(t=>(this._set("submitting",!1),this._set("error",null),e.mode="view",t)).catch(t=>{throw this._set("submitting",!1),this._set("error",new s$g("attachments:add-attachment",this.messages.addErrorMessage,t)),t})}deleteAttachment(t){const{viewModel:e}=this;return this._set("submitting",!0),this._set("error",null),e.deleteAttachment(t).then(t=>(this._set("submitting",!1),this._set("error",null),e.mode="view",t)).catch(t=>{throw this._set("submitting",!1),this._set("error",new s$g("attachments:delete-attachment",this.messages.deleteErrorMessage,t)),t})}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:e}=this;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(e).then(e=>(this._set("submitting",!1),this._set("error",null),t.mode="view",e)).catch(t=>{throw this._set("submitting",!1),this._set("error",new s$g("attachments:update-attachment",this.messages.updateErrorMessage,t)),t})}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return r$G("div",{class:this.classes(y$y,Y$2)},t?this.renderProgressBar():null,"loading"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?r$G("div",{key:"error-message",class:B$9},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return "add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return r$G("div",{class:w$h,key:"loader"},r$G("div",{class:A$e}))}renderProgressBar(){return this.visibleElements.progressBar?r$G("div",{class:Q$3,key:"progress-bar"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?r$G("button",{type:"button",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(Z$1,st$1,at,nt$1,t&&tt)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?r$G("button",{type:"submit",disabled:s,class:this.classes(Z$1,et$1,at,nt$1,{[tt]:s})},this.messages.add):null,n=e?r$G("span",{key:"file-name",class:q$5},e.name):null,r=r$G("form",{bind:this,afterCreate:m$H,afterRemoved:p$19,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},r$G("fieldset",{class:W$3},n,r$G("label",{class:this.classes(X$2,Z$1,et$1)},e?this.messages.changeFile:this.messages.selectFile,r$G("input",{class:J$4,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),a,i);return r$G("div",{key:"add-form-container",class:G$9},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:s,selectedFile:i,submitting:a}=this,{contentType:n,size:r,url:o}=t,{abilities:m}=s,h=a||!i,u=m.editing&&m.operations.delete&&e.deleteButton?r$G("button",{key:"delete-button",type:"button",disabled:a,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(Z$1,at,st$1,I$b,{[tt]:a})},this.messages.delete):null,_=m.editing&&m.operations.update&&e.updateButton?r$G("button",{disabled:h,key:"update-button",type:"submit",class:this.classes(Z$1,at,it$1,{[tt]:h})},this.messages.update):null,g=this.visibleElements.cancelUpdateButton?r$G("button",{disabled:a,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Z$1,at,st$1,it$1,{[tt]:a})},this.messages.cancel):null,b=i?r$G("span",{key:"file-name",class:q$5},i.name):null,v=m.editing&&m.operations.update?r$G("fieldset",{key:"file",class:W$3},b,r$G("label",{class:this.classes(X$2,Z$1,et$1)},this.messages.changeFile,r$G("input",{class:J$4,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,f=r$G("fieldset",{key:"size",class:N$7},r$G("label",null,B$7(this.messagesUnits,r))),y=r$G("fieldset",{key:"content-type",class:N$7},r$G("label",null,n)),w=r$G("form",{bind:this,afterCreate:m$H,afterRemoved:p$19,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},r$G("div",{class:K$1},f,y),v,r$G("div",{class:j$l},u,g,_));return r$G("div",{key:"edit-form-container",class:G$9},r$G("a",{class:R$9,href:o,rel:"noreferrer",target:"_blank",alt:name},this.renderImageMask({attachmentInfo:t,size:400}),r$G("div",{class:$$6},r$G("span",{class:H$4},r$G("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},r$G("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),r$G("path",{fill:"none",d:"M0 0h32v32H0z"}))))),w)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,url:a}=t,n=s&&p$1g(i),r=this._getCSSTransform(t,n),o=r?{transform:r,"image-orientation":"none"}:{},l=-1===a.indexOf("?")?"?":"&",c=n?`${a}${l}w=${e}`:a$14(i),d={[D$8]:!n},m={[O$7]:s};return r$G("div",{class:this.classes(d,C$9)},r$G("img",{styles:o,alt:"",src:c,class:this.classes(m,T$c)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:"list"===e?48:400}),o=i.editing?r$G("span",{"aria-hidden":"true",class:this.classes(L$b,g$r()?lt$1:ot$1)}):null,l=[r,r$G("label",{class:V$3},r$G("span",{class:x$g},a||this.messages.noTitle),o)],c=i.editing?r$G("button",{key:"details-button",bind:this,class:z$7,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":t.id,onclick:()=>this._startEditAttachment(t),type:"button"},l):r$G("a",{key:"details-link",class:z$7,href:n,target:"_blank"},l);return r$G("li",{class:S$d,key:t},c)}renderAttachmentContainer(){const{displayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[k$f]:"preview"!==t,[F$a]:"preview"===t},o=a.editing&&a.operations.add&&s.addButton?r$G("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Z$1,st$1,E$9),type:"button"},r$G("span",{"aria-hidden":"true",class:this.classes(P$7,ct$1)}),this.messages.add):null,l=n?r$G("ul",{class:U$6},i.toArray().map(e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t}))):r$G("div",{class:rt},this.messages.noAttachments);return r$G("div",{key:"attachments-container",class:this.classes(M$f,r)},l,o)}_modeChanged(){this._set("error",null),this._set("selectedFile",null);}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set("selectedFile",s);}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e);}_submitAddAttachment(t){t.preventDefault(),this.addAttachment();}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment();}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode="edit";}_startAddAttachment(){this.viewModel.mode="add";}_cancelForm(t){t.preventDefault(),this.viewModel.mode="view";}_getCSSTransform(t,e){const{orientationInfo:s}=t;return !this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:"",s.mirrored?"scaleX(-1)":""].join(" "):""}};e([o$M("viewModel.abilities")],mt.prototype,"abilities",void 0),e([y$5(),o$U()],mt.prototype,"displayType",void 0),e([o$M("viewModel.graphic")],mt.prototype,"graphic",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],mt.prototype,"label",void 0),e([y$5(),o$U(),e$T("esri/widgets/Attachments/t9n/Attachments")],mt.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/core/t9n/Units")],mt.prototype,"messagesUnits",void 0),e([y$5({readOnly:!0})],mt.prototype,"selectedFile",void 0),e([o$U(),y$5({readOnly:!0})],mt.prototype,"submitting",void 0),e([o$U(),y$5({readOnly:!0})],mt.prototype,"error",void 0),e([y$5({type:A$d}),o$U(["viewModel.activeAttachmentInfo","viewModel.mode","viewModel.state","viewModel.supportsResizeAttachments","viewModel.attachmentInfos","viewModel.graphic","viewModel.abilities","viewModel.abilities.editing","viewModel.abilities.operations"])],mt.prototype,"viewModel",void 0),e([y$5(),o$U()],mt.prototype,"visibleElements",void 0),e([i$b("visibleElements")],mt.prototype,"castVisibleElements",null),mt=e([n$e("esri.widgets.Attachments")],mt);var ht$1=mt;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let n$10=class extends(a$13(h$c)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(d$C(this,"creator",t=>{this._destroyContent(),this._createContent(t);}));}destroy(){this._destroyContent();}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:e}=this;t&&(I$a(e,{graphic:r}).catch(()=>null),this._set("created",null));}async _createContent(t){const{graphic:r}=this,e=I$a(t,{graphic:r}).catch(()=>null);this._loadingPromise=e,this.notifyChange("state");const o=await e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o));}};e([y$5({readOnly:!0})],n$10.prototype,"created",void 0),e([y$5()],n$10.prototype,"creator",void 0),e([y$5()],n$10.prototype,"destroyer",void 0),e([y$5({type:c$19})],n$10.prototype,"graphic",void 0),e([y$5({readOnly:!0})],n$10.prototype,"state",null),n$10=e([n$e("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n$10);var p$1h=n$10;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$X="esri-feature-content",u$$="esri-feature-content__loader-container",m$L="esri-feature-content__loader";let h$N=class extends C$7{constructor(e,r){super(e,r),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=e=>{a$e(e.querySelectorAll("a")).forEach(e=>{w$g(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank");});};}renderLoading(){return r$G("div",{class:u$$,key:"loader"},r$G("div",{class:m$L}))}renderCreated(){var e;const r=null==(e=this.viewModel)?void 0:e.created;return r?r instanceof HTMLElement?r$G("div",{key:r,bind:r,afterCreate:this._attachToNode}):e$V(r)?r$G("div",{key:r},!r.destroyed&&r.render()):r$G("div",{key:r,innerHTML:r,afterCreate:this._addTargetToAnchors}):null}render(){var e;const r=null==(e=this.viewModel)?void 0:e.state;return r$G("div",{class:l$X},"loading"===r?this.renderLoading():this.renderCreated())}_attachToNode(e){e.appendChild(this);}};e([o$M("viewModel.creator")],h$N.prototype,"creator",void 0),e([o$M("viewModel.graphic")],h$N.prototype,"graphic",void 0),e([o$U(["viewModel.created","viewModel.state"]),y$5({type:p$1h})],h$N.prototype,"viewModel",void 0),h$N=e([n$e("esri.widgets.Feature.FeatureContent")],h$N);var f$O=h$N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let l$Y=class extends h$c{constructor(o){super(o),this.attributes=null,this.expressionInfos=null,this.fieldInfos=null;}get formattedFieldInfos(){const{expressionInfos:o,fieldInfos:s}=this,r=[];return null==s||s.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const e=s.clone();e.label=j$k(e,o),r.push(e);}),r}};e([y$5()],l$Y.prototype,"attributes",void 0),e([y$5({type:[i$Z]})],l$Y.prototype,"expressionInfos",void 0),e([y$5({type:[m$l]})],l$Y.prototype,"fieldInfos",void 0),e([y$5({readOnly:!0,dependsOn:["expressionInfos","fieldInfos"]})],l$Y.prototype,"formattedFieldInfos",null),l$Y=e([n$e("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],l$Y);var n$11=l$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$Q=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a$15(a,p){if("string"!=typeof p||!p)return p;const r=function(e){let a=null;return s$Q.some(s=>(s.pattern.test(e)&&(a=s),!!a)),a}(p);if(!r)return p;const t=p.match(r.pattern),n=t&&t[2],l=o$7(o$7(r.label,{messages:a,hierPart:n}),{appName:r.appName}),i=r.target?` target="${r.target}"`:"",o="_blank"===r.target?' rel="noreferrer"':"";return p.replace(r.pattern,`<a${i} href="$1"${o}>${l}</a>`)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$12="esri-feature-fields",u$10="esri-feature-fields__field-header",m$M="esri-feature-fields__field-data",f$P="esri-feature-fields__field-data--date",c$1l="esri-widget__table";let h$O=class extends C$7{constructor(e,s){super(e,s),this.attributes=null,this.expressionInfos=null,this.fieldInfos=null,this.viewModel=new n$11,this.messages=null,this.messagesURIUtils=null;}renderFieldInfo(e,s){const{attributes:r}=this.viewModel,t=e.fieldName,o=e.label||t,i=r?null==r[t]?"":r[t]:"",d=!(!e.format||!e.format.dateFormat),a="number"==typeof i&&!d?this._forceLTR(i):a$15(this.messagesURIUtils,i),n={[f$P]:d};return r$G("tr",{key:`fields-element-info-row-${t}-${s}`},r$G("th",{key:`fields-element-info-row-header-${t}-${s}`,class:u$10,innerHTML:o}),r$G("td",{key:`fields-element-info-row-data-${t}-${s}`,class:this.classes(m$M,n),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e.length?r$G("table",{class:c$1l,summary:this.messages.fieldsSummary},r$G("tbody",null,e.map((e,s)=>this.renderFieldInfo(e,s)))):null}render(){return r$G("div",{class:n$12},this.renderFields())}_forceLTR(e){return "&lrm;"+e}};e([o$M("viewModel.attributes")],h$O.prototype,"attributes",void 0),e([o$M("viewModel.expressionInfos")],h$O.prototype,"expressionInfos",void 0),e([o$M("viewModel.fieldInfos")],h$O.prototype,"fieldInfos",void 0),e([y$5({type:n$11}),o$U(["viewModel.attributes","viewModel.formattedFieldInfos"])],h$O.prototype,"viewModel",void 0),e([y$5(),o$U(),e$T("esri/widgets/Feature/t9n/Feature")],h$O.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/widgets/support/t9n/uriUtils")],h$O.prototype,"messagesURIUtils",void 0),h$O=e([n$e("esri.widgets.Feature.FeatureFields")],h$O);var j$m=h$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$1m;const p$1i=new t$q({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let n$13=c$1m=class extends a$h{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null;}writeStatisticParameters(t,i){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(i.statisticParameters=s$4(t));}clone(){return new c$1m({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:s$4(this.statisticParameters)})}};e([y$5({type:Number,json:{write:!0}})],n$13.prototype,"maxPointCount",void 0),e([y$5({type:Number,json:{write:!0}})],n$13.prototype,"maxRecordCount",void 0),e([y$5({type:Number,json:{write:!0}})],n$13.prototype,"maxVertexCount",void 0),e([y$5({type:String,json:{write:!0}})],n$13.prototype,"onStatisticField",void 0),e([y$5({type:String,json:{write:!0}})],n$13.prototype,"outStatisticFieldName",void 0),e([y$5({type:String,json:{read:{source:"statisticType",reader:p$1i.read},write:{target:"statisticType",writer:p$1i.write}}})],n$13.prototype,"statisticType",void 0),e([y$5({type:Object})],n$13.prototype,"statisticParameters",void 0),e([o$r("statisticParameters")],n$13.prototype,"writeStatisticParameters",null),n$13=c$1m=e([n$e("esri.tasks.support.StatisticDefinition")],n$13);var m$N=n$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$R(e){return e}const r$I={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}},i$1i=o$B()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});function n$14(e,t,s){const i=new Date(e.getTime());if(t&&s){const e=r$I[s],{getter:n,setter:l,multiplier:u}=e;i[l](i[n]()+t*u);}return i}const l$Z={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function u$11(t,s){switch(s){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return r$6(s),null}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$_;let a$16=l$_=class extends a$h{constructor(t){super(t),this.end=null,this.start=null;}static get allTime(){return p$1j}static get empty(){return u$12}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null;}get isAllTime(){return this.equals(l$_.allTime)}get isEmpty(){return this.equals(l$_.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null;}clone(){return new l$_({end:this.end,start:this.start})}intersection(t){var e,r,s,n,o,i,a,p;if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return l$_.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const u=null!=(e=null==(r=this.start)?void 0:r.getTime())?e:-1/0,d=null!=(s=null==(n=this.end)?void 0:n.getTime())?s:1/0,m=null!=(o=null==(i=t.start)?void 0:i.getTime())?o:-1/0,c=null!=(a=null==(p=t.end)?void 0:p.getTime())?a:1/0;let h,y;if(m>=u&&m<=d?h=m:u>=m&&u<=c&&(h=u),d>=m&&d<=c?y=d:c>=u&&c<=d&&(y=c),!isNaN(h)&&!isNaN(y)){const t=new l$_;return t.start=h===-1/0?null:new Date(h),t.end=y===1/0?null:new Date(y),t}return l$_.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const r=new l$_,{start:s,end:n}=this;return s&&(r.start=n$14(s,t,e)),n&&(r.end=n$14(n,t,e)),r}equals(t){if(!t)return !1;const e=this.start?this.start.getTime():this.start,r=this.end?this.end.getTime():this.end,s=t.start?t.start.getTime():t.start,n=t.end?t.end.getTime():t.end;return e===s&&r===n}};e([y$5({type:Date,json:{write:{allowNull:!0}}})],a$16.prototype,"end",void 0),e([e$l("end")],a$16.prototype,"readEnd",null),e([o$r("end")],a$16.prototype,"writeEnd",null),e([y$5({dependsOn:["start","end"],readOnly:!0,json:{read:!1}})],a$16.prototype,"isAllTime",null),e([y$5({dependsOn:["start","end"],readOnly:!0,json:{read:!1}})],a$16.prototype,"isEmpty",null),e([y$5({type:Date,json:{write:{allowNull:!0}}})],a$16.prototype,"start",void 0),e([e$l("start")],a$16.prototype,"readStart",null),e([o$r("start")],a$16.prototype,"writeStart",null),a$16=l$_=e([n$e("esri.TimeExtent")],a$16);const p$1j=new a$16,u$12=new a$16({start:void 0,end:void 0});var d$O=a$16;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$1j=new t$q({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var d$P;const c$1n=new t$q({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m$O=d$P=class extends a$h{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null;}readDescription(e,{description:t}){let o;try{o=JSON.parse(t);}catch(e){}return o?o.value:null}readValueType(e,{description:t}){let o;try{o=JSON.parse(t);}catch(e){}return o?c$1n.fromJSON(o.fieldValueType):null}clone(){return new d$P({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};e([y$5({type:String,json:{write:!0}})],m$O.prototype,"alias",void 0),e([y$5({type:[String,Number],json:{write:{allowNull:!0}}})],m$O.prototype,"defaultValue",void 0),e([y$5()],m$O.prototype,"description",void 0),e([e$l("description")],m$O.prototype,"readDescription",null),e([y$5({types:m$j,json:{read:{reader:d$n},write:!0}})],m$O.prototype,"domain",void 0),e([y$5({type:Boolean,json:{write:!0}})],m$O.prototype,"editable",void 0),e([y$5({type:N,json:{write:!0}})],m$O.prototype,"length",void 0),e([y$5({type:String,json:{write:!0}})],m$O.prototype,"name",void 0),e([y$5({type:Boolean,json:{write:!0}})],m$O.prototype,"nullable",void 0),e([e$A(i$1j)],m$O.prototype,"type",void 0),e([y$5()],m$O.prototype,"valueType",void 0),e([e$l("valueType",["description"])],m$O.prototype,"readValueType",null),m$O=d$P=e([n$e("esri.layers.support.Field")],m$O);var y$z=m$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$1o;let i$1k=c$1o=class extends a$h{constructor(r){super(r),this.type="map-layer";}clone(){const{mapLayerId:r,gdbVersion:o}=this;return new c$1o({mapLayerId:r,gdbVersion:o})}};e([e$A({mapLayer:"map-layer"})],i$1k.prototype,"type",void 0),e([y$5({type:N,json:{write:!0}})],i$1k.prototype,"mapLayerId",void 0),e([y$5({type:String,json:{write:!0}})],i$1k.prototype,"gdbVersion",void 0),i$1k=c$1o=e([n$e("esri.layers.support.source.MapLayerSource")],i$1k);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$1p;let a$17=c$1p=class extends a$h{constructor(e){super(e),this.type="query-table";}clone(){var e;const{workspaceId:r,query:o,oidFields:t,spatialReference:s,geometryType:p}=this,i={workspaceId:r,query:o,oidFields:t,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:p};return new c$1p(i)}};e([e$A({queryTable:"query-table"})],a$17.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],a$17.prototype,"workspaceId",void 0),e([y$5({type:String,json:{write:!0}})],a$17.prototype,"query",void 0),e([y$5({type:String,json:{write:!0}})],a$17.prototype,"oidFields",void 0),e([y$5({type:w$5,json:{write:!0}})],a$17.prototype,"spatialReference",void 0),e([e$A(i$v)],a$17.prototype,"geometryType",void 0),a$17=c$1p=e([n$e("esri.layers.support.source.QueryTableDataSource")],a$17);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$1k;let c$1q=p$1k=class extends a$h{constructor(r){super(r),this.type="raster";}clone(){const{workspaceId:r,dataSourceName:o}=this;return new p$1k({workspaceId:r,dataSourceName:o})}};e([e$A({raster:"raster"})],c$1q.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],c$1q.prototype,"dataSourceName",void 0),e([y$5({type:String,json:{write:!0}})],c$1q.prototype,"workspaceId",void 0),c$1q=p$1k=e([n$e("esri.layers.support.source.RasterDataSource")],c$1q);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$1l;let c$1r=p$1l=class extends a$h{constructor(r){super(r),this.type="table";}clone(){const{workspaceId:r,gdbVersion:o,dataSourceName:e}=this;return new p$1l({workspaceId:r,gdbVersion:o,dataSourceName:e})}};e([e$A({table:"table"})],c$1r.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],c$1r.prototype,"workspaceId",void 0),e([y$5({type:String,json:{write:!0}})],c$1r.prototype,"gdbVersion",void 0),e([y$5({type:String,json:{write:!0}})],c$1r.prototype,"dataSourceName",void 0),c$1r=p$1l=e([n$e("esri.layers.support.source.TableDataSource")],c$1r);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var S$e;const f$Q=o$B()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let j$n=S$e=class extends a$h{constructor(e){super(e),this.type="join-table";}readLeftTableSource(e,r,o){return h$P()(e,r,o)}castLeftTableSource(e){return k(v$k(),e)}readRightTableSource(e,r,o){return h$P()(e,r,o)}castRightTableSource(e){return k(v$k(),e)}clone(){var e,r;const{leftTableKey:o,rightTableKey:t,leftTableSource:s,rightTableSource:a,joinType:p}=this,l={leftTableKey:o,rightTableKey:t,leftTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,rightTableSource:null!=(r=null==a?void 0:a.clone())?r:void 0,joinType:p};return new S$e(l)}};e([e$A({joinTable:"join-table"})],j$n.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],j$n.prototype,"leftTableKey",void 0),e([y$5({type:String,json:{write:!0}})],j$n.prototype,"rightTableKey",void 0),e([y$5({json:{write:!0}})],j$n.prototype,"leftTableSource",void 0),e([e$l("leftTableSource")],j$n.prototype,"readLeftTableSource",null),e([i$b("leftTableSource")],j$n.prototype,"castLeftTableSource",null),e([y$5({json:{write:!0}})],j$n.prototype,"rightTableSource",void 0),e([e$l("rightTableSource")],j$n.prototype,"readRightTableSource",null),e([i$b("rightTableSource")],j$n.prototype,"castRightTableSource",null),e([e$A(f$Q)],j$n.prototype,"joinType",void 0),j$n=S$e=e([n$e("esri.layers.support.source.JoinTableDataSource")],j$n);let T$d=null;function h$P(){return T$d||(T$d=u$8({types:v$k()})),T$d}let g$u=null;function v$k(){return g$u||(g$u={key:"type",base:null,typeMap:{"data-layer":D$9,"map-layer":i$1k}}),g$u}var L$c;const w$i={key:"type",base:null,typeMap:{"join-table":j$n,"query-table":a$17,raster:c$1q,table:c$1r}};let D$9=L$c=class extends a$h{constructor(e){super(e),this.type="data-layer";}clone(){const{fields:e,dataSource:r}=this;return new L$c({fields:e,dataSource:r})}};e([e$A({dataLayer:"data-layer"})],D$9.prototype,"type",void 0),e([y$5({type:[y$z],json:{write:!0}})],D$9.prototype,"fields",void 0),e([y$5({types:w$i,json:{write:!0}})],D$9.prototype,"dataSource",void 0),D$9=L$c=e([n$e("esri.layers.support.source.DataLayerSource")],D$9),D$9.from=d$2(D$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var n$15;const c$1s=new t$q({upperLeft:"upper-left",lowerLeft:"lower-left"});let m$P=n$15=class extends a$h{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1;}clone(){return new n$15(s$4({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};e([y$5({type:z$4,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$P.prototype,"extent",void 0),e([y$5({type:["view","edit"],json:{write:!0}})],m$P.prototype,"mode",void 0),e([y$5({type:String,json:{read:c$1s.read,write:c$1s.write}})],m$P.prototype,"originPosition",void 0),e([y$5({type:Number,json:{write:{overridePolicy(){return {enabled:"view"===this.mode}}}}})],m$P.prototype,"tolerance",void 0),m$P=n$15=e([n$e("esri.tasks.support.QuantizationParameters")],m$P);var a$18=m$P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var j$o;const w$j=new t$q({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S$f=new t$q({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let f$R=j$o=class extends a$h{constructor(t){super(t),this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.units=null,this.where=null;}static from(t){return y$3(j$o,t)}castDatumTransformation(t){return "number"==typeof t||"object"==typeof t?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeParameterValues(t,e){if(t){const r={};for(const e in t){const i=t[e];Array.isArray(i)?r[e]=i.map(t=>t instanceof Date?t.getTime():t):i instanceof Date?r[e]=i.getTime():r[e]=i;}e.parameterValues=r;}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1";}writeWhere(t,e){e.where=t||"1=1";}clone(){return new j$o(s$4({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))}};f$R.MAX_MAX_RECORD_COUNT_FACTOR=5,e([y$5({type:Boolean,json:{write:{writer:(t,e)=>{null!=t&&(e.cacheHint=t);}}}})],f$R.prototype,"cacheHint",void 0),e([y$5({json:{write:!0}})],f$R.prototype,"datumTransformation",void 0),e([i$b("datumTransformation")],f$R.prototype,"castDatumTransformation",null),e([y$5({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],f$R.prototype,"distance",void 0),e([y$5({type:D$9,json:{write:!0}})],f$R.prototype,"dynamicDataSource",void 0),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"gdbVersion",void 0),e([y$5({types:i$w,json:{read:p$i,write:!0}})],f$R.prototype,"geometry",void 0),e([y$5({type:Number,json:{write:!0}})],f$R.prototype,"geometryPrecision",void 0),e([y$5({type:[String],json:{write:!0}})],f$R.prototype,"groupByFieldsForStatistics",void 0),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"having",void 0),e([y$5({type:Date})],f$R.prototype,"historicMoment",void 0),e([o$r("historicMoment")],f$R.prototype,"writeHistoricMoment",null),e([y$5({type:Number,json:{write:!0}})],f$R.prototype,"maxAllowableOffset",void 0),e([y$5({type:Number,cast:t=>t<1?1:t>j$o.MAX_MAX_RECORD_COUNT_FACTOR?j$o.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],f$R.prototype,"maxRecordCountFactor",void 0),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"multipatchOption",void 0),e([y$5({type:Number,json:{read:{source:"resultRecordCount"}}})],f$R.prototype,"num",void 0),e([y$5({type:[Number],json:{write:!0}})],f$R.prototype,"objectIds",void 0),e([y$5({type:[String],json:{write:!0}})],f$R.prototype,"orderByFields",void 0),e([y$5({type:[String],json:{write:!0}})],f$R.prototype,"outFields",void 0),e([y$5({type:w$5,json:{read:{source:"outSR"},write:{target:"outSR"}}})],f$R.prototype,"outSpatialReference",void 0),e([y$5({type:[m$N],json:{write:{enabled:!0,overridePolicy(){var t;return {enabled:(null==(t=this.outStatistics)?void 0:t.length)>0}}}}})],f$R.prototype,"outStatistics",void 0),e([y$5({json:{write:!0}})],f$R.prototype,"parameterValues",void 0),e([o$r("parameterValues")],f$R.prototype,"writeParameterValues",null),e([y$5({types:L$8,json:{write:!0}})],f$R.prototype,"pixelSize",void 0),e([y$5({type:a$18,json:{write:!0}})],f$R.prototype,"quantizationParameters",void 0),e([y$5({type:[Object],json:{write:!0}})],f$R.prototype,"rangeValues",void 0),e([y$5({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return {enabled:"relation"===this.spatialRelationship}}}}})],f$R.prototype,"relationParameter",void 0),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"resultType",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f$R.prototype,"returnCentroid",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f$R.prototype,"returnDistinctValues",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:!t})}}})],f$R.prototype,"returnExceededLimitFeatures",void 0),e([y$5({type:Boolean,json:{write:!0}})],f$R.prototype,"returnGeometry",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f$R.prototype,"returnQueryGeometry",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f$R.prototype,"returnM",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],f$R.prototype,"returnZ",void 0),e([y$5({type:String,json:{read:{source:"spatialRel",reader:w$j.read},write:{target:"spatialRel",writer:w$j.write}}})],f$R.prototype,"spatialRelationship",void 0),e([y$5({type:Number,json:{read:{source:"resultOffset"}}})],f$R.prototype,"start",void 0),e([o$r("start"),o$r("num")],f$R.prototype,"writeStart",null),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"sqlFormat",void 0),e([y$5({type:String,json:{write:!0}})],f$R.prototype,"text",void 0),e([y$5({type:d$O,json:{write:!0}})],f$R.prototype,"timeExtent",void 0),e([y$5({type:String,json:{read:S$f.read,write:{writer:S$f.write,overridePolicy(t){return {enabled:t&&this.distance>0}}}}})],f$R.prototype,"units",void 0),e([y$5({type:String,json:{write:{overridePolicy(t){return {enabled:null!=t||this.start>0}}}}})],f$R.prototype,"where",void 0),e([o$r("where")],f$R.prototype,"writeWhere",null),f$R=j$o=e([n$e("esri.tasks.support.Query")],f$R);var g$v=f$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$Q=new t$q({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d$Q=class extends a$h{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null;}readFeatures(e,o){const r=w$5.fromJSON(o.spatialReference),s=[];for(let o=0;o<e.length;o++){const i=e[o],n=c$19.fromJSON(i),p=i.geometry&&i.geometry.spatialReference;u$4(n.geometry)&&!p&&(n.geometry.spatialReference=r),s.push(n);}return s}writeGeometryType(e,o,r,s){if(e)return void h$Q.write(e,o,r,s);const{features:i}=this;if(i)for(const e of i)if(e&&u$4(e.geometry))return void h$Q.write(e.geometry.type,o,r,s)}writeSpatialReference(e,o){if(e)return void(o.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)e&&u$4(e.geometry)&&e.geometry.spatialReference&&(o.spatialReference=e.geometry.spatialReference.toJSON());}toJSON(e){const t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(let o=0;o<t.features.length;o++){const r=t.features[o];if(r.geometry){const t=e&&e[o];r.geometry=t&&t.toJSON()||r.geometry;}}return t}quantize(e){const{scale:[t,r],translate:[s,i]}=e,n=this.features,p=this._getQuantizationFunction(this.geometryType,e=>Math.round((e-s)/t),e=>Math.round((i-e)/r));for(let e=0,t=n.length;e<t;e++)p(f$3(n[e].geometry))||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:o,transform:r}=this;if(!r)return this;const{translate:[s,i],scale:[n,p]}=r,l=this._getHydrationFunction(e,e=>e*n+s,e=>i-e*p);for(const{geometry:e}of o)u$4(e)&&l(e);return this.transform=null,this}_quantizePoints(e,t,o){let r,s;const i=[];for(let n=0,p=e.length;n<p;n++){const p=e[n];if(n>0){const e=t(p[0]),n=o(p[1]);e===r&&n===s||(i.push([e-r,n-s]),r=e,s=n);}else r=t(p[0]),s=o(p[1]),i.push([r,s]);}return i.length>0?i:null}_getQuantizationFunction(e,t,o){return "point"===e?e=>(e.x=t(e.x),e.y=o(e.y),e):"polyline"===e||"polygon"===e?e=>{const r=y$g(e)?e.rings:e.paths,s=[];for(let e=0,i=r.length;e<i;e++){const i=r[e],n=this._quantizePoints(i,t,o);n&&s.push(n);}return s.length>0?(y$g(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{let r;return r=this._quantizePoints(e.points,t,o),r.length>0?(e.points=r,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,o){return "point"===e?e=>{e.x=t(e.x),e.y=o(e.y);}:"polyline"===e||"polygon"===e?e=>{const r=y$g(e)?e.rings:e.paths;let s,i;for(let e=0,n=r.length;e<n;e++){const n=r[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];e>0?(s+=r[0],i+=r[1]):(s=r[0],i=r[1]),r[0]=t(s),r[1]=o(i);}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=o(e.ymin),e.xmax=t(e.xmax),e.ymax=o(e.ymax);}:"multipoint"===e?e=>{const r=e.points;let s,i;for(let e=0,n=r.length;e<n;e++){const n=r[e];e>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=o(i);}}:void 0}};e([y$5({type:String,json:{write:!0}})],d$Q.prototype,"displayFieldName",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$Q.prototype,"exceededTransferLimit",void 0),e([y$5({type:[c$19],json:{write:!0}})],d$Q.prototype,"features",void 0),e([e$l("features")],d$Q.prototype,"readFeatures",null),e([y$5({type:[y$z],json:{write:!0}})],d$Q.prototype,"fields",void 0),e([y$5({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h$Q.read}}})],d$Q.prototype,"geometryType",void 0),e([o$r("geometryType")],d$Q.prototype,"writeGeometryType",null),e([y$5({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$Q.prototype,"hasM",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],d$Q.prototype,"hasZ",void 0),e([y$5({types:i$w,json:{read:p$i,write:!0}})],d$Q.prototype,"queryGeometry",void 0),e([y$5({type:w$5,json:{write:!0}})],d$Q.prototype,"spatialReference",void 0),e([o$r("spatialReference")],d$Q.prototype,"writeSpatialReference",null),e([y$5({json:{write:!0}})],d$Q.prototype,"transform",void 0),d$Q=e([n$e("esri.tasks.support.FeatureSet")],d$Q),d$Q.prototype.toJSON.isDefaultToJSON=!0,d$Q||(d$Q={});var g$w=d$Q;

var FeatureSet = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': g$w
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$19;let d$R=a$19=class extends a$h{constructor(t){super(t),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null;}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime();}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1";}clone(){return new a$19(s$4({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};e([y$5({type:D$9,json:{write:!0}})],d$R.prototype,"dynamicDataSource",void 0),e([y$5({type:String,json:{write:!0}})],d$R.prototype,"gdbVersion",void 0),e([y$5({type:Number,json:{write:!0}})],d$R.prototype,"geometryPrecision",void 0),e([y$5({type:Date})],d$R.prototype,"historicMoment",void 0),e([o$r("historicMoment")],d$R.prototype,"_writeHistoricMoment",null),e([y$5({type:Number,json:{write:!0}})],d$R.prototype,"maxAllowableOffset",void 0),e([y$5({type:[Number],json:{write:!0}})],d$R.prototype,"objectIds",void 0),e([y$5({type:[String],json:{write:!0}})],d$R.prototype,"orderByFields",void 0),e([y$5({type:[String],json:{write:!0}})],d$R.prototype,"outFields",void 0),e([y$5({type:w$5,json:{read:{source:"outSR"},write:{target:"outSR"}}})],d$R.prototype,"outSpatialReference",void 0),e([y$5({json:{write:!0}})],d$R.prototype,"relationshipId",void 0),e([y$5({type:Number,json:{read:{source:"resultOffset"}}})],d$R.prototype,"start",void 0),e([o$r("start"),o$r("num")],d$R.prototype,"writeStart",null),e([y$5({type:Number,json:{read:{source:"resultRecordCount"}}})],d$R.prototype,"num",void 0),e([y$5({json:{write:!0}})],d$R.prototype,"returnGeometry",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$R.prototype,"returnM",void 0),e([y$5({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],d$R.prototype,"returnZ",void 0),e([y$5({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],d$R.prototype,"where",void 0),d$R=a$19=e([n$e("esri.tasks.support.RelationshipQuery")],d$R),d$R.from=d$2(d$R);var c$1t=d$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let i$1l=class extends h$c{constructor(...r){super(...r),this.requestOptions=null,this.url=null;}normalizeCtorArgs(r,s){return "string"!=typeof r?r:{url:r,...s}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(r){return r?C(r):null}_encode(r,s,o){const e={};for(const t in r){if("declaredClass"===t)continue;const i=r[t];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){e[t]=[];for(let r=0;r<i.length;r++)e[t][r]=this._encode(i[r]);}else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(o&&o[t]);e[t]=s?r:JSON.stringify(r);}else e[t]=s?i:JSON.stringify(i);else e[t]=i;}return e}};e([y$5({readOnly:!0,dependsOn:["url"]})],i$1l.prototype,"parsedUrl",null),e([y$5()],i$1l.prototype,"requestOptions",void 0),e([y$5({type:String})],i$1l.prototype,"url",void 0),i$1l=e([n$e("esri.tasks.Task")],i$1l);var p$1m=i$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$Q(t,o,r){if(!o||!r||r.vcsWkid||E$3(o,r))return null;const i=N$5(o)/N$5(r);if(1===i)return null;switch(t){case"point":case"esriGeometryPoint":return n=>{return t=i,void((e=n)&&null!=e.z&&(e.z*=t));var e,t;};case"polyline":case"esriGeometryPolyline":return n=>function(n,e){if(!n)return;for(const t of n.paths)for(const n of t)n.length>2&&(n[2]*=e);}(n,i);case"polygon":case"esriGeometryPolygon":return n=>function(n,e){if(!n)return;for(const t of n.rings)for(const n of t)n.length>2&&(n[2]*=e);}(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>function(n,e){if(!n)return;for(const t of n.points)t.length>2&&(t[2]*=e);}(n,i);default:return null}}function o$W(n,e,t){if(null==n.hasM||n.hasZ)for(const n of e)for(const e of n)e.length>2&&(e[2]*=t);}function r$J(n,t,o){if(!n&&!t||!o)return;const r=N$5(o);i$1m(n,o,r),i$1m(t,o,r);}function i$1m(n,e,t){if(n)for(const o of n)s$S(o.geometry,e,t);}function s$S(t,r,i){if(!t||!t.spatialReference||E$3(t.spatialReference,r))return;const s=N$5(t.spatialReference)/i;if(1!==s)if("x"in t)null!=t.z&&(t.z*=s);else if("rings"in t)o$W(t,t.rings,s);else if("paths"in t)o$W(t,t.paths,s);else if("points"in t&&(null==t.hasM||t.hasZ))for(const n of t.points)n.length>2&&(n[2]*=s);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$K(t,e){return e}function s$T(t,e,r,s){switch(r){case 0:return a$1a(t,e+s,0);case 1:return "lowerLeft"===t.originPosition?a$1a(t,e+s,1):function({translate:t,scale:e},r,s){return t[s]-r*e[s]}(t,e+s,1)}}function i$1n(t,e,r,i){switch(r){case 2:return a$1a(t,e,2);default:return s$T(t,e,r,i)}}function o$X(t,e,r,i){switch(r){case 2:return a$1a(t,e,3);default:return s$T(t,e,r,i)}}function n$16(t,e,r,s){switch(r){case 3:return a$1a(t,e,3);default:return i$1n(t,e,r,s)}}function a$1a({translate:t,scale:e},r,s){return t[s]+r*e[s]}class h$R{constructor(t){this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=r$K,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){};}createFeatureResult(){return {fields:[],features:[]}}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const r=t$Q(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(r)for(const e of t.features)r(e.geometry);}createSpatialReference(){return {}}addField(t,e){t.fields.push(e);const r=t.fields.map(t=>t.name);this.AttributesConstructor=function(){for(const t of r)this[t]=null;};}addFeature(t,e){t.features.push(e);}prepareFeatures(e){switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(t,e,r)=>this.addCoordinatePoint(t,e,r),this.createGeometry=t=>this.createPointGeometry(t);break;case"esriGeometryPolygon":this.addCoordinate=(t,e,r)=>this.addCoordinatePolygon(t,e,r),this.createGeometry=t=>this.createPolygonGeometry(t);break;case"esriGeometryPolyline":this.addCoordinate=(t,e,r)=>this.addCoordinatePolyline(t,e,r),this.createGeometry=t=>this.createPolylineGeometry(t);break;case"esriGeometryMultipoint":this.addCoordinate=(t,e,r)=>this.addCoordinateMultipoint(t,e,r),this.createGeometry=t=>this.createMultipointGeometry(t);break;default:r$6(e.geometryType);}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}addLength(t,e,r){0===this.lengths.length&&(this.toAddInCurrentPath=e),this.lengths.push(e);}createPointGeometry(t){const e={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(e.z=0),t.hasM&&(e.m=0),e}addCoordinatePoint(t,e,r){switch(e=this.applyTransform(this.transform,e,r,0),r){case 0:t.x=e;break;case 1:t.y=e;break;case 2:"z"in t?t.z=e:t.m=e;break;case 3:t.m=e;}}transformPathLikeValue(t,e){let r=0;return e<=1&&(r=this.previousCoordinate[e],this.previousCoordinate[e]+=t),this.applyTransform(this.transform,t,e,r)}addCoordinatePolyline(t,e,r){this.dehydratedAddPointsCoordinate(t.paths,e,r);}addCoordinatePolygon(t,e,r){this.dehydratedAddPointsCoordinate(t.rings,e,r);}addCoordinateMultipoint(t,e,r){0===r&&t.points.push([]);const s=this.transformPathLikeValue(e,r);t.points[t.points.length-1].push(s);}createPolygonGeometry(t){return {rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}createPolylineGeometry(t){return {paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}createMultipointGeometry(t){return {points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}dehydratedAddPointsCoordinate(t,e,r){if(null===this.coordinateBuffer){const t=this.lengths.reduce((t,e)=>t+e,0);this.coordinateBuffer=new Float64Array(t*this.vertexDimension);}0===r&&0==this.toAddInCurrentPath--&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this.transformPathLikeValue(e,r),i=t[t.length-1];0===r&&i.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=s;}deriveApplyTransform(t){const{hasZ:e,hasM:r}=t;return e&&r?n$16:e?i$1n:r?o$X:s$T}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function o$Y(o,i,n,m){const p="string"==typeof o?C(o):o,a=i[0].spatialReference,u={...m,query:{...p.query,f:"json",sr:JSON.stringify(a),target:JSON.stringify({geometryType:d$e(i[0]),geometries:i}),cutter:JSON.stringify(n)}},c=await j$3(p.path+"/cut",u),{cutIndexes:f,geometries:g=[]}=c.data;return {cutIndexes:f,geometries:g.map(e=>{const t=p$i(e);return t.spatialReference=a,t})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
async function i$1o(i,n,f){const m="string"==typeof i?C(i):i,p=n[0].spatialReference,a=d$e(n[0]),u={...f,query:{...m.query,f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(s$U(n))}};return function(r,t,e){const i=G$5(t);return r.map(r=>{const t=i.fromJSON(r);return t.spatialReference=e,t})}((await j$3(m.path+"/simplify",u)).data,a,p)}function s$U(r){return {geometryType:d$e(r[0]),geometries:r.map(r=>r.toJSON())}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$Q=n$7.getLogger("esri.geometry.support.normalizeUtils"),g$x={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new f$q({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:w$5.WebMercator}),minus180Line:new f$q({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:w$5.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f$q({paths:[[[180,-180],[180,180]]],spatialReference:w$5.WGS84}),minus180Line:new f$q({paths:[[[-180,-180],[-180,180]]],spatialReference:w$5.WGS84})}};function x$h(e){return "polygon"===e.type}function y$A(e){return "polyline"===e[0].type}function w$k(e){return x$h(e)?e.rings:e.paths}function R$a(e,t){return Math.ceil((e-t)/(2*t))}function d$S(e,t){const n=w$k(e);for(const e of n)for(const n of e)n[0]+=t;return e}function M$g(e,t){if(!(e instanceof f$q||e instanceof x$8)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m$Q.error(e),new s$g(e)}const n=w$k(e),s=[];for(const e of n){const n=[];s.push(n),n.push([e[0][0],e[0][1]]);for(let s=0;s<e.length-1;s++){const o=e[s][0],r=e[s][1],i=e[s+1][0],f=e[s+1][1],l=Math.sqrt((i-o)*(i-o)+(f-r)*(f-r)),c=(f-r)/l,p=(i-o)/l,a=l/t;if(a>1){for(let e=1;e<=a-1;e++){const s=e*t,i=p*s+o,f=c*s+r;n.push([i,f]);}const e=(l+Math.floor(a-1)*t)/2,s=p*e+o,i=c*e+r;n.push([s,i]);}n.push([i,f]);}}return x$h(e)?new x$8({rings:s,spatialReference:e.spatialReference}):new f$q({paths:s,spatialReference:e.spatialReference})}function L$d(e,t,n){if(t){const t=M$g(e,1e6);e=y$c(t,!0);}return n&&(e=d$S(e,n)),e}function b$k(e,t,n){if(Array.isArray(e)){const s=e[0];if(s>t){const n=R$a(s,t);e[0]=s+n*(-2*t);}else if(s<n){const t=R$a(s,n);e[0]=s+t*(-2*n);}}else {const s=e.x;if(s>t){const n=R$a(s,t);e=e.clone().offset(n*(-2*t),0);}else if(s<n){const t=R$a(s,n);e=e.clone().offset(t*(-2*n),0);}}return e}async function P$8(s,o,f){if(!Array.isArray(s))return P$8([s],o);const c=o?o.url:t$5.geometryServiceUrl;let m,x,j,M,X,k,U,W,A=0;const S=[],v=[];for(const e of s)if(t$6(e))v.push(e);else if(m||(m=e.spatialReference,x=M$4(m),j=m.isWebMercator,k=j?102100:4326,M=g$x[k].maxX,X=g$x[k].minX,U=g$x[k].plus180Line,W=g$x[k].minus180Line),x)if("mesh"===e.type)v.push(e);else if("point"===e.type)v.push(b$k(e.clone(),M,X));else if("multipoint"===e.type){const t=e.clone();t.points=t.points.map(e=>b$k(e,M,X)),v.push(t);}else if("extent"===e.type){const t=e.clone()._normalize(!1,!1,x);v.push(t.rings?new x$8(t):t);}else if(e.extent){const t=e.extent,n=R$a(t.xmin,X)*(2*M);let s=0===n?e.clone():d$S(e.clone(),n);t.offset(n,0),t.intersects(U)&&t.xmax!==M?(A=t.xmax>A?t.xmax:A,s=L$d(s,j),S.push(s),v.push("cut")):t.intersects(W)&&t.xmin!==X?(A=t.xmax*(2*M)>A?t.xmax*(2*M):A,s=L$d(s,j,360),S.push(s),v.push("cut")):v.push(s);}else v.push(e.clone());else v.push(e);let z=R$a(A,M),G=-90;const I=z,_=new f$q;for(;z>0;){const e=360*z-180;_.addPath([[e,G],[e,-1*G]]),G*=-1,z--;}if(S.length>0&&I>0){const e=function(e,t){let n=-1;for(let s=0;s<t.cutIndexes.length;s++){const o=t.cutIndexes[s],r=t.geometries[s],i=w$k(r);for(let e=0;e<i.length;e++){const t=i[e];t.some(n=>{if(n[0]<180)return !0;{let n=0;for(let e=0;e<t.length;e++){const s=t[e][0];n=s>n?s:n;}n=Number(n.toFixed(9));const s=-360*R$a(n,180);for(let n=0;n<t.length;n++){const t=r.getPoint(e,n);r.setPoint(e,n,t.clone().offset(s,0));}return !0}});}if(o===n){if("polygon"===e[0].type)for(const t of w$k(r))e[o]=e[o].addRing(t);else if(y$A(e))for(const t of w$k(r))e[o]=e[o].addPath(t);}else n=o,e[o]=r;}return e}(S,await o$Y(c,S,_,f)),t=[],o=[];for(let r=0;r<v.length;r++){const i=v[r];if("cut"!==i)o.push(i);else {const i=e.shift(),f=s[r];u$4(f)&&"polygon"===f.type&&f.rings&&f.rings.length>1&&i.rings.length>=f.rings.length?(t.push(i),o.push("simplify")):o.push(j?g$9(i):i);}}if(!t.length)return o;const r=await i$1o(c,t,f),i=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?i.push(t):i.push(j?g$9(r.shift()):r.shift());}return i}const q=[];for(let e=0;e<v.length;e++){const t=v[e];if("cut"!==t)q.push(t);else {const e=S.shift();q.push(!0===j?g$9(e):e);}}return D$1(q)}function k$g(e,t){const n=M$4(t);if(n){const[t,s]=n.valid,o=s-t;if(e<t)for(;e<t;)e+=o;if(e>s)for(;e>s;)e-=o;}return e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$R(t,o,r){if(!r||!r.features||!r.hasZ)return;const f=t$Q(r.geometryType,o,t.outSpatialReference);if(f)for(const e of r.features)f(e.geometry);}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$V=s("esri-text-decoder")?new TextDecoder("utf-8"):null,i$1p=s("safari")||s("ios")?6:s("ff")?12:32;class r$L{constructor(t,e,s=0,i=(t?t.byteLength:0)){this._tag=0,this._dataType=99,this.init(t,e,s,i);}init(t,e,s,i){this._data=t,this._dataView=e,this._pos=s,this._end=i;}clone(){return new r$L(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t;}nextTag(t){for(;;){if(this._pos===this._end)return !1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip();}return !0}next(){if(this._pos===this._end)return !1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getUint32(e+4,!0);return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+4294967296*t.getInt32(e+4,!0);return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,s=this._toString(this._data,e,e+t);return this._skip(t),s}getBytes(){const t=this._getLength(),e=this._pos,s=this._toBytes(this._data,e,e+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,s,i){const r=this.getMessage(),n=t(r,e,s,i);return r.release(),n}processMessage(t){const e=this.getMessage(),s=t(e);return e.release(),s}getMessage(){const t=this._getLength(),e=r$L.pool.acquire();return e.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){r$L.pool.release(this);}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t);}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t;}_decodeVarint(){const t=this._data;let e,s=this._pos,i=0;if(this._end-s>=10)do{if(e=t[s++],i|=127&e,0==(128&e))break;if(e=t[s++],i|=(127&e)<<7,0==(128&e))break;if(e=t[s++],i|=(127&e)<<14,0==(128&e))break;if(e=t[s++],i|=(127&e)<<21,0==(128&e))break;if(e=t[s++],i+=268435456*(127&e),0==(128&e))break;if(e=t[s++],i+=34359738368*(127&e),0==(128&e))break;if(e=t[s++],i+=4398046511104*(127&e),0==(128&e))break;if(e=t[s++],i+=562949953421312*(127&e),0==(128&e))break;if(e=t[s++],i+=72057594037927940*(127&e),0==(128&e))break;if(e=t[s++],i+=0x8000000000000000*(127&e),0==(128&e))break;throw new Error("Varint too long!")}while(0);else {let r=1;for(;s!==this._end&&(e=t[s],0!=(128&e));)++s,i+=(127&e)*r,r*=128;if(s===this._end)throw new Error("Varint overrun!");++s,i+=e*r;}return this._pos=s,i}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,r){if((r=Math.min(this._end,r))-e>i$1p&&s$V){const i=t.subarray(e,r);return s$V.decode(i)}let n="",a="";for(let s=e;s<r;++s){const e=t[s];128&e?a+="%"+e.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(e),a="");}return a.length&&(n+=decodeURIComponent(a)),n}_toBytes(t,e,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,e,s-e)}}r$L.pool=new t$e(r$L,null,t=>{t._data=null,t._dataView=null;});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$W=n$7.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),a$1b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],n$17=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],o$Z=["upperLeft","lowerLeft"];function c$1u(e){return e>=a$1b.length?null:a$1b[e]}function i$1q(e){return e>=o$Z.length?null:o$Z[e]}function l$$(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function g$y(e,t,r){const s=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addCoordinatePoint(s,e.getSInt64(),n++);break}case 1:case 2:default:e.skip();}return s}function u$13(e,t,r){const s=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const r=e.getUInt32(),a=e.pos()+r;let n=0;for(;e.pos()<a;)t.addLength(s,e.getUInt32(),n++);break}case 3:{const r=e.getUInt32(),n=e.pos()+r;let o=0;for(;e.pos()<n;)t.addCoordinate(s,e.getSInt64(),o),o++,o===a&&(o=0);break}case 1:default:e.skip();}return s}function p$1n(e,t,r){var s;r.queryGeometry=t.createGeometry(r),r.queryGeometryType=l$$(t,0);let a=!1;for(;e.next();)switch(e.tag()){case 2:{const s=e.getUInt32(),a=e.pos()+s;let n=0;for(;e.pos()<a;)t.addLength(r.queryGeometry,e.getUInt32(),n++);break}case 3:{const s=e.getUInt32(),a=e.pos()+s;let n=0;for(;e.pos()<a;)t.addCoordinate(r.queryGeometry,e.getSInt64(),n),n++,2===n&&(n=0);break}case 1:r.queryGeometryType=l$$(t,e.getEnum()),a=!0;break;default:e.skip();}const n=null==(s=r.queryGeometry)?void 0:s.lengths;!a&&n&&n.length&&n[0]>1&&(r.queryGeometryType=l$$(t,3));}function y$B(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function b$l(e){const r={type:c$1u(0)};for(;e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.type=c$1u(e.getEnum());break;case 3:r.alias=e.getString();break;case 4:r.sqlType=(a=e.getEnum())>=n$17.length?null:n$17[a];break;case 5:try{r.domain=JSON.parse(e.getString());}catch(e){s$W.error(new s$g("query:parsing-pbf","Failed to parse domain",{error:e})),r.domain=null;}break;case 6:r.defaultValue=e.getString();break;default:e.skip();}var a;return r}function k$h(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.isSystemMaintained=e.getBool();break;default:e.skip();}return t}function f$S(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.minServerGen=e.getUInt64();break;case 2:t.serverGen=e.getUInt64();break;default:e.skip();}return t}function d$T(e,t,r,s){const a=t.createFeature(r);let n=0;for(;e.next();)switch(e.tag()){case 1:{const t=s[n++].name;a.attributes[t]=e.processMessage(y$B);break}case 2:a.geometry=e.processMessageWithArgs(u$13,t,r);break;case 4:a.centroid=e.processMessageWithArgs(g$y,t,r);break;default:e.skip();}return a}function m$R(e){const t=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip();}return t}function T$e(e){const t=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip();}return t}function h$S(e){const t={originPosition:i$1q(0)};for(;e.next();)switch(e.tag()){case 1:t.originPosition=i$1q(e.getEnum());break;case 2:t.scale=e.processMessage(m$R);break;case 3:t.translate=e.processMessage(T$e);break;default:e.skip();}return t}function q$6(e){const t={};for(;e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip();}return t}function I$c(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip();}return r}function F$b(e,t){const r=t.createFeatureResult();r.geometryType=l$$(t,0);let s=!1;for(;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(q$6);break;case 7:r.geometryType=l$$(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(I$c,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(h$S);break;case 9:{const t=e.getBool();r.exceededTransferLimit=t;break}case 13:t.addField(r,e.processMessage(b$l));break;case 15:s||(t.prepareFeatures(r),s=!0),t.addFeature(r,e.processMessageWithArgs(d$T,t,r,r.fields));break;case 2:r.uniqueIdField=e.processMessage(k$h);break;case 6:r.serverGens=e.processMessage(f$S);break;default:e.skip();}return t.finishFeatureResult(r),r}function S$g(e,t){const r={};for(;e.next();)switch(e.tag()){case 4:e.processMessageWithArgs(p$1n,t,r);break;case 1:r.featureResult=e.processMessageWithArgs(F$b,t);break;case 2:case 3:default:e.skip();}return r}function w$l(e,a){try{const t=2,s=new r$L(new Uint8Array(e),new DataView(e)),n={};for(;s.next();)switch(s.tag()){case t:n.queryResult=s.processMessageWithArgs(S$g,a);break;default:s.skip();}return n}catch(e){const r=new s$g("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s$W.error(r),{queryResult:{featureResult:a.createFeatureResult()}}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$S(t,r){const u=w$l(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e]);}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$T(n){const o={};for(const e in n){if("declaredClass"===e)continue;const r=n[e];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t$T(r[n]);}else "object"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r;}return o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function y$C(t,e){const r=t.geometry,n=t.toJSON(),o=n;if(r&&(o.geometry=JSON.stringify(r),o.geometryType=d$e(r),o.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(o.objectIds=n.objectIds.join(",")),n.orderByFields&&(o.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&((null==e?void 0:e.returnCountOnly)||(null==e?void 0:e.returnExtentOnly)||(null==e?void 0:e.returnIdsOnly))?delete o.outFields:-1!==n.outFields.indexOf("*")?o.outFields="*":o.outFields=n.outFields.join(","),n.outSR?o.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(o.outSR=o.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(o.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(o.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(o.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(o.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(o.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(o.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const t=n.timeExtent,{start:e,end:r}=t;null==e&&null==r||(o.time=e===r?e:`${null==e?"null":e},${null==r?"null":r}`),delete n.timeExtent;}return o}async function m$S(t,e,r,n){var o;const i=(null==(o=e.timeExtent)?void 0:o.isEmpty)?{data:{features:[]}}:await g$z(t,e,"json",n);return t$R(e,r,i.data),i}async function d$U(t,e,r,o){var i;if(null==(i=e.timeExtent)?void 0:i.isEmpty)return D$1({data:r.createFeatureResult()});const s=await c$1v(t,e,o),u=s;return u.data=t$S(s.data,r),u}function c$1v(t,e,r){return g$z(t,e,"pbf",r)}function p$1o(t,e,r){var o;return (null==(o=e.timeExtent)?void 0:o.isEmpty)?D$1({data:{objectIds:[]}}):g$z(t,e,"json",r,{returnIdsOnly:!0})}function f$T(t,e,r){var o;return (null==(o=e.timeExtent)?void 0:o.isEmpty)?D$1({data:{count:0}}):g$z(t,e,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function S$h(t,e,r){var o;return (null==(o=e.timeExtent)?void 0:o.isEmpty)?D$1({data:{count:0,extent:null}}):g$z(t,e,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(t=>{const e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error("Layer does not support extent calculation.");if(e.hasOwnProperty("count"))throw new Error("Layer does not support extent calculation.");return t})}function g$z(n,i,u,a={},m){const d="string"==typeof n?C(n):n,c=i.geometry?[i.geometry]:[];return a.responseType="pbf"===u?"array-buffer":"json",P$8(c,null,a).then(r=>{const n=r&&r[0];u$4(n)&&((i=i.clone()).geometry=n);const s=t$T({...d.query,f:u,...m,...y$C(i,m)});return j$3(_$2(d.path,"query"),{...a,query:{...a.query,...s}})})}

var query = /*#__PURE__*/Object.freeze({
    __proto__: null,
    executeQuery: m$S,
    executeQueryForCount: f$T,
    executeQueryForExtent: S$h,
    executeQueryForIds: p$1o,
    executeQueryPBF: d$U,
    executeQueryPBFBuffer: c$1v,
    queryToQueryStringParameters: y$C,
    runQuery: g$z
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$_(o){const r=i$g&&i$g.findCredential(o);return r&&r.token?pt(o,"token",r.token):o}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$18(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(",")),o.keywords&&(o.keywords=o.keywords.join(",")),o.globalIds&&(o.globalIds=o.globalIds.join(",")),o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.size&&(o.size=o.size.join(",")),o}function a$1c(o,e){const n={};for(const a of o){const{parentObjectId:o,parentGlobalId:c,attachmentInfos:i}=a;for(const a of i){const{id:i}=a,m=L(o$_(`${e}/${o}/attachments/${i}`)),l=l$V.fromJSON(a);l.set({url:m,parentObjectId:o,parentGlobalId:c}),n[o]?n[o].push(l):n[o]=[l];}}return n}function c$1w(t,r,s){let a={query:t$T({...t.query,f:"json",...n$18(r)})};return s&&(a={...s,...a}),j$3(t.path+"/queryAttachments",a)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$$(e,t){const o=e.toJSON();return o.objectIds&&(o.objectIds=o.objectIds.join(",")),o.orderByFields&&(o.orderByFields=o.orderByFields.join(",")),o.outFields&&!(null==t?void 0:t.returnCountOnly)?-1!==o.outFields.indexOf("*")?o.outFields="*":o.outFields=o.outFields.join(","):delete o.outFields,o.outSpatialReference&&(o.outSR=o.outSR.wkid||JSON.stringify(o.outSR.toJSON()),delete o.outSpatialReference),o.dynamicDataSource&&(o.layer=JSON.stringify({source:o.dynamicDataSource}),delete o.dynamicDataSource),o}async function r$M(e,t,o){const r=await d$V(e,t,o),n=r.data,a=n.geometryType,s=n.spatialReference,i={};for(const e of n.relatedRecordGroups){const t={fields:void 0,objectIdFieldName:void 0,geometryType:a,spatialReference:s,hasZ:!!n.hasZ,hasM:!!n.hasM,features:e.relatedRecords};if(null!=e.objectId)i[e.objectId]=t;else for(const o in e)e.hasOwnProperty(o)&&"relatedRecords"!==o&&(i[e[o]]=t);}return {...r,data:i}}async function n$19(e,t,o){const r=await d$V(e,t,o,{returnCountOnly:!0}),n=r.data,a={};for(const e of n.relatedRecordGroups)null!=e.objectId&&(a[e.objectId]=e.count);return {...r,data:a}}async function d$V(r,n,d={},a){const s=t$T({...r.query,f:"json",...a,...o$$(n,a)});return j$3(r.path+"/queryRelatedRecords",{...d,query:{...d.query,...s}})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let g$A=class extends p$1m{constructor(t){super(t),this.dynamicDataSource=null,this.format="json",this.gdbVersion=null,this.sourceSpatialReference=null;}execute(t,e){return this.executeJSON(t,e).then(t=>g$w.fromJSON(t))}async executeJSON(t,e){const r={...this.requestOptions,...e},o=this._normalizeQuery(t);if("pbf"===this.format){const t=!o.quantizationParameters,{data:e}=await d$U(this.parsedUrl,o,new h$R({sourceSpatialReference:this.sourceSpatialReference,applyTransform:t}),r);return e}const{data:s}=await m$S(this.parsedUrl,o,this.sourceSpatialReference,r);return s}executeForCount(t,e){return f$T(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then(t=>t.data.count)}executeForExtent(t,e){return S$h(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then(t=>({count:t.data.count,extent:z$4.fromJSON(t.data.extent)}))}executeForIds(t,e){return p$1o(this.parsedUrl,this._normalizeQuery(t),{...this.requestOptions,...e}).then(t=>t.data.objectIds)}executeRelationshipQuery(t,e){return t=c$1t.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),r$M(this.parsedUrl,t,{...this.requestOptions,...e}).then(t=>{const e=t.data,r={};return Object.keys(e).forEach(t=>r[t]=g$w.fromJSON(e[t])),r})}executeRelationshipQueryForCount(t,e){return t=c$1t.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),n$19(this.parsedUrl,t,{...this.requestOptions,...e}).then(t=>t.data)}executeAttachmentQuery(t,e){return c$1w(this.parsedUrl,u$Z.from(t),{...this.requestOptions,...e}).then(t=>a$1c(t.data.attachmentGroups,this.parsedUrl.path))}_normalizeQuery(t){const e=g$v.from(t);if(!this.gdbVersion&&!this.dynamicDataSource)return e;const r=e===t?e.clone():e;return r.gdbVersion=t.gdbVersion||this.gdbVersion,r.dynamicDataSource=t.dynamicDataSource?D$9.from(t.dynamicDataSource):this.dynamicDataSource,r}};e([y$5({type:D$9})],g$A.prototype,"dynamicDataSource",void 0),e([y$5()],g$A.prototype,"format",void 0),e([y$5()],g$A.prototype,"gdbVersion",void 0),e([y$5()],g$A.prototype,"sourceSpatialReference",void 0),g$A=e([n$e("esri.tasks.QueryTask")],g$A);var D$a=g$A;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$14=n$7.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),c$1x=new Map;function f$U(e){if(!Q$2(e))return null;const[t,r]=e.split("/").slice(1);return {layerId:t,fieldName:r}}function d$W(e,t){const r=function(e,t){if(!t.relationships)return null;let r=null;const{relationships:s}=t;return s.some(t=>t.id===parseInt(e,10)&&(r=t,!0)),r}(e,t);if(!r)return;const s=`${t.url}/${r.relatedTableId}`;return {url:s,queryTask:new D$a({url:s,sourceSpatialReference:t.spatialReference}),relation:r,relatedFields:[],outStatistics:[]}}function p$1p(e,t){if(!t)return;if(!e)return;const{features:r,statsFeatures:s}=e,i=r&&r.value;t.relatedFeatures=i?i.features:[];const n=s&&s.value;t.relatedStatsFeatures=n?n.features:[];}function m$T({relatedInfos:e,layer:i},n){const o={};return e.forEach((e,r)=>{const{relation:a}=e;if(!a){const e=new s$g("relation-required","A relation is required on a layer to retrieve related records.");throw u$14.error(e),e}const{relatedTableId:l}=a;if("number"!=typeof l){const e=new s$g("A related table ID is required on a layer to retrieve related records.");throw u$14.error(e),e}const f=`${i.url}/${l}`,d=c$1x.get(f),p=d||function(e,t){return j$3(e,{query:{f:"json"},signal:t&&t.signal})}(f,n);d||c$1x.set(f,p),o[r]=p;}),x$1(o)}function y$D({graphic:e,relatedInfos:t},s){const i={};return t.forEach((t,o)=>{t.layerInfo&&(i[o]=async function(e,t,s){const i=b$j(e).layerId.toString(),{layerInfo:o,queryTask:a,relation:u}=t,c=function(e,t){let r;return e&&e.relationships&&e.relationships.some(e=>""+e.relatedTableId===t&&(r=e,!0)),r}(o,i);if(c){const{keyField:i}=u,{keyField:l}=c,f="string"===function(e,t){let r=void 0;return e.fields.some(e=>e.name===t.keyField&&(r=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(e.type)?"number":"string",!0)),r}(o,c)?`${l}='${e.attributes[i]}'`:`${l}=${e.attributes[i]}`,d=a.execute(new g$v({where:f,outFields:t.relatedFields}),s),p=t.outStatistics&&t.outStatistics.length>0&&o.supportsStatistics?a.execute(new g$v({where:f,outFields:t.relatedFields,outStatistics:t.outStatistics}),s):null,m={features:d};return p&&(m.statsFeatures=p),x$1(m)}return null}(e,t,s));}),x$1(i)}function F$c({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const s=new m$N({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let I$d=class extends h$c{constructor(t){super(t),this.activeMediaInfoIndex=0,this.attributes=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null;}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t);}next(){this._pageContentElementMedia(1);}previous(){this._pageContentElementMedia(-1);}_setContentElementMedia(t){const{formattedMediaInfoCount:e}=this,o=(t+e)%e;this.activeMediaInfoIndex=o;}_pageContentElementMedia(t){const{activeMediaInfoIndex:e}=this,o=e+t;this._setContentElementMedia(o);}_formatMediaInfos(){const{attributes:t,mediaInfos:e,formattedAttributes:o,fieldInfoMap:r,layer:a}=this,i={...o,...t};return null==e?void 0:e.map(e=>{if(!e)return null;const n=e.title?T$b(e.title,i,a):"";e.title=n?E$8({formattedAttributes:o,template:n,fieldInfoMap:r}):"";const d=e.caption?T$b(e.caption,i,a):"";e.caption=d?E$8({formattedAttributes:o,template:d,fieldInfoMap:r}):"";const p=e.altText?T$b(e.altText,i,a):"";if(e.altText=p?E$8({formattedAttributes:o,template:p,fieldInfoMap:r}):"","image"===e.type){const{value:t}=e;return this._setImageValue({value:t,formattedAttributes:o,layer:a}),e.value.sourceURL?e:void 0}if("pie-chart"===e.type||"line-chart"===e.type||"column-chart"===e.type||"bar-chart"===e.type){const{value:r}=e;return this._setChartValue({value:r,chartType:e.type,attributes:t,formattedAttributes:o,layer:a}),e}return null}).filter(Boolean)}_setImageValue(t){const{fieldInfoMap:e}=this,{value:o,formattedAttributes:r,layer:a}=t,{linkURL:i,sourceURL:s}=o;if(s){const t=x$f(s,a);o.sourceURL=E$8({formattedAttributes:r,template:t,fieldInfoMap:e});}if(i){const t=x$f(i,a);o.linkURL=E$8({formattedAttributes:r,template:t,fieldInfoMap:e});}}_setChartValue(t){const{value:e,attributes:o,formattedAttributes:r,chartType:a,layer:i}=t,{popupTemplate:s,relatedInfos:l}=this,{fields:n,normalizeField:u}=e;e.fields=L$a(n,i),u&&(e.normalizeField=v$j(u,i));if(!n.some(t=>!!(null!=r[t]||Q$2(t)&&l.size)))return;const m=null==s?void 0:s.fieldInfos;n.forEach(t=>{if(Q$2(t))return void(e.series=[...e.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:t,formattedAttributes:r,chartType:a,value:e})]);const i=this._getChartOption({value:e,attributes:o,chartType:a,formattedAttributes:r,fieldName:t,fieldInfos:m});e.series.push(i);});}_getRelatedChartInfos(t){var e;const{fieldInfos:o,fieldName:r,formattedAttributes:a,chartType:i,value:s}=t,l=[],n=f$U(r),{layerId:d,fieldName:p}=n,f=null==(e=this.relatedInfos)?void 0:e.get(d.toString());if(!f)return l;const{relatedFeatures:u,relation:m}=f;if(!m||!u)return l;const{cardinality:c}=m;u.forEach(t=>{const{attributes:e}=t;e&&Object.keys(e).forEach(t=>{t===p&&l.push(this._getChartOption({value:s,attributes:e,formattedAttributes:a,fieldName:r,chartType:i,relatedFieldName:t,fieldInfos:o}));});});return "one-to-many"===c||"many-to-many"===c?l:[l[0]]}_getTooltip({label:t,value:e,chartType:o}){return "pie-chart"===o?t:`${t}: ${e}`}_getChartOption(t){var e;const{value:o,attributes:r,formattedAttributes:s,fieldName:l,relatedFieldName:n,fieldInfos:d,chartType:I}=t,{layer:v}=this,{normalizeField:y,tooltipField:M}=o,b=y?Q$2(y)?r[f$U(y).fieldName]:r[y]:null,g=n&&void 0!==r[n]?r[n]:void 0!==r[l]?r[l]:s[l],_=void 0===g?null:g&&b?g/b:g,T=new c$H({value:_});if(Q$2(l)){const t=f$U(l),e=f$U(M),o=e?e.fieldName:null,a=A$c(_,{fieldInfos:d,fieldName:n,layer:v,preventPlacesFormatting:!!b}),i=t?t.label||t.fieldName:n,s=o&&void 0!==r[o]?r[o]:i;return T.tooltip=this._getTooltip({label:s,value:a,chartType:I}),T}const A=M$e(d,l),C=v$j(l,v),j=M&&void 0!==s[M]?s[M]:j$k(A||new m$l({fieldName:C}),null==(e=this.popupTemplate)?void 0:e.expressionInfos),x=s[C];return T.tooltip=this._getTooltip({label:j,value:x,chartType:I}),T}};e([y$5()],I$d.prototype,"activeMediaInfoIndex",void 0),e([y$5({readOnly:!0,dependsOn:["formattedMediaInfos","activeMediaInfoIndex"]})],I$d.prototype,"activeMediaInfo",null),e([y$5()],I$d.prototype,"attributes",void 0),e([y$5()],I$d.prototype,"fieldInfoMap",void 0),e([y$5()],I$d.prototype,"formattedAttributes",void 0),e([y$5({readOnly:!0,dependsOn:["attributes","fieldInfoMap","formattedAttributes","mediaInfos","popupTemplate","layer","relatedInfos"]})],I$d.prototype,"formattedMediaInfos",null),e([y$5()],I$d.prototype,"layer",void 0),e([y$5({readOnly:!0,dependsOn:["formattedMediaInfos"]})],I$d.prototype,"formattedMediaInfoCount",null),e([y$5()],I$d.prototype,"mediaInfos",void 0),e([y$5()],I$d.prototype,"popupTemplate",void 0),e([y$5()],I$d.prototype,"relatedInfos",void 0),I$d=e([n$e("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],I$d);var v$l=I$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$U=!!Map.prototype.entries?function(r,t){const e=r.entries();for(let r=e.next();!r.done;r=e.next())if(t(r.value[1],r.value[0]))return !0;return !1}:function(r,t){let e=!0;return r.forEach((r,n)=>{e&&(e=!t(r,n));}),!e},e$X=!!Map.prototype.values,n$1a=!!Map.prototype.keys,o$10=!!Array.from;function u$15(r){const t=[];return r.forEach((r,e)=>t.push([e,r])),t}const a$1d=e$X&&o$10?function(r){return Array.from(r.values())}:function(r){const t=new Array(r.size);let e=0;return r.forEach(r=>t[e++]=r),t},f$V=n$1a&&o$10?function(r){return Array.from(r.keys())}:function(r){const t=new Array(r.size);let e=0;return r.forEach((r,n)=>t[e++]=n),t},i$1r=e$X?function(r){return new Map(r)}:function(r){const t=new Map;for(const e of r)t.set(e[0],e[1]);return t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const f$W=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004c"],e$Y=[...f$W.slice(30,39),...f$W.slice(28,30).reverse()],b$m=[{name:"default",colors:e$Y},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ad00f2","#c461eb","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const c$1y=i$1r([["ar",()=>import('./chunks/ar-ec7d4ac1.js').then((function(n){return n.a}))],["bs-ba",()=>import('./chunks/bs_BA-c8e8236f.js').then((function(n){return n.b}))],["ca-es",()=>import('./chunks/ca_ES-290dd4a6.js').then((function(n){return n.c}))],["cs-cz",()=>import('./chunks/cs_CZ-1a047642.js').then((function(n){return n.c}))],["da-dk",()=>import('./chunks/da_DK-937298eb.js').then((function(n){return n.d}))],["de-de",()=>import('./chunks/de_DE-660fdf5f.js').then((function(n){return n.d}))],["de-ch",()=>import('./chunks/de_CH-c617fd57.js').then((function(n){return n.d}))],["el-gr",()=>import('./chunks/el_GR-74d630c5.js').then((function(n){return n.e}))],["en-us",()=>import('./chunks/en_US-cca47258.js').then((function(n){return n.e}))],["en-ca",()=>import('./chunks/en_CA-f23dad29.js').then((function(n){return n.e}))],["es-es",()=>import('./chunks/es_ES-1f866265.js').then((function(n){return n.e}))],["et-ee",()=>import('./chunks/et_EE-f3ef8453.js').then((function(n){return n.e}))],["fi-fi",()=>import('./chunks/fi_FI-782cbbc7.js').then((function(n){return n.f}))],["fr-fr",()=>import('./chunks/fr_FR-051408c2.js').then((function(n){return n.f}))],["he-il",()=>import('./chunks/he_IL-34b6e723.js').then((function(n){return n.h}))],["hr-hr",()=>import('./chunks/hr_HR-9bce1edd.js').then((function(n){return n.h}))],["hu-hu",()=>import('./chunks/hu_HU-c89fff5b.js').then((function(n){return n.h}))],["id-id",()=>import('./chunks/id_ID-3b8b8228.js').then((function(n){return n.i}))],["it-it",()=>import('./chunks/it_IT-ad96fa28.js').then((function(n){return n.i}))],["ja-jp",()=>import('./chunks/ja_JP-192de881.js').then((function(n){return n.j}))],["ko-kr",()=>import('./chunks/ko_KR-d7b98c00.js').then((function(n){return n.k}))],["lt-lt",()=>import('./chunks/lt_LT-6f936be7.js').then((function(n){return n.l}))],["lv-lv",()=>import('./chunks/lv_LV-23f5511e.js').then((function(n){return n.l}))],["nb-no",()=>import('./chunks/nb_NO-f2d7ac1b.js').then((function(n){return n.n}))],["nl-nl",()=>import('./chunks/nl_NL-c3748339.js').then((function(n){return n.n}))],["pl-pl",()=>import('./chunks/pl_PL-98dca442.js').then((function(n){return n.p}))],["pt-br",()=>import('./chunks/pt_BR-ea6b084b.js').then((function(n){return n.p}))],["pt-pt",()=>import('./chunks/pt_PT-929f423e.js').then((function(n){return n.p}))],["ro-ro",()=>import('./chunks/ro_RO-1208d08a.js').then((function(n){return n.r}))],["ru-ru",()=>import('./chunks/ru_RU-744b4b87.js').then((function(n){return n.r}))],["sl-sl",()=>import('./chunks/sl_SL-601093fe.js').then((function(n){return n.s}))],["sr-rs",()=>import('./chunks/sr_RS-b0b71291.js').then((function(n){return n.s}))],["sv-se",()=>import('./chunks/sv_SE-2f3756af.js').then((function(n){return n.s}))],["th-th",()=>import('./chunks/th_TH-e31f6381.js').then((function(n){return n.t}))],["tr-tr",()=>import('./chunks/tr_TR-2a6020cf.js').then((function(n){return n.t}))],["uk-ua",()=>import('./chunks/uk_UA-2b6eada4.js').then((function(n){return n.u}))],["vi-vn",()=>import('./chunks/vi_VN-3cab6e63.js').then((function(n){return n.v}))],["zh-cn",()=>import('./chunks/zh_Hans-b186cc09.js').then((function(n){return n.z}))],["zh-hk",()=>import('./chunks/zh_Hant-cedaf4a0.js').then((function(n){return n.z}))],["zh-tw",()=>import('./chunks/zh_Hant-cedaf4a0.js').then((function(n){return n.z}))]]);function h$T(n){return n?c$1y.has(n.toLowerCase())?n.toLowerCase():function(n){const r=n.split("-")[0].toLowerCase(),s=f$V(c$1y);let u=null;for(const n of s)if(u$2(n,r)){u=n;break}return u}(n)||"en-us":"en-us"}let _$e,p$1q;async function f$X(t=c$t()){if(t=h$T(t),_$e&&t===p$1q)return _$e;_$e=import('./chunks/index2-9dc5a95b.js').then((function(n){return n.i})),p$1q=t;try{const[r,u]=await p$9([_$e,c$1y.get(p$1q)()]);if(p$1q===t&&(r.am4core.options.defaultLocale=u.default),r.am4core.options.suppressWarnings=!s("esri-debug-messages"),r.am4core.options.autoDispose=!0,"function"!=typeof Object.assign){const n=await import('./chunks/object-db146a42.js');Object.defineProperty(Object,"assign",{value:n.assign,writable:!0,configurable:!0});}}catch{return _$e=null,p$1q=null,null}return _$e}function m$U(n,t="default"){const s=l$9(b$m,n=>n.name===t);return s?s.colors.map(t=>n.color(t)):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const f$Y="esri-feature-media",v$m="esri-feature-media__container",_$f="esri-feature-media__item-container",M$h="esri-feature-media__item",I$e="esri-feature-media__item-title",w$m="esri-feature-media__item-caption",g$B="esri-feature-media__previous",y$E="esri-feature-media__previous-icon",b$n="esri-feature-media__previous-icon--rtl",x$i="esri-feature-media__next",C$a="esri-feature-media__next-icon",T$f="esri-feature-media__next-icon--rtl",j$p="esri-feature-media__chart",k$i="esri-feature-media__button",F$d="esri-feature-media__icon",L$e="esri-icon-left-triangle-arrow",S$i="esri-icon-right-triangle-arrow";let P$9=class extends C$7{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.viewModel=new v$l,this.messages=null;}initialize(){this.own(d$C(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()));}destroy(){this._clearMediaRefreshTimer();}render(){return r$G("div",{bind:this,class:f$Y,onkeyup:this._handleMediaKeyup},this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?r$G("div",{key:"media-element-container",class:v$m},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{formattedMediaInfoCount:i}=this.viewModel,{value:r,refreshInterval:s,altText:a,title:o,type:n}=e,{sourceURL:l,linkURL:c}=r,p=w$g(c)?"_blank":"_self",h="_blank"===p?"noreferrer":"",m=s?t:null,f=m?m.timestamp:0,v=m?m.sourceURL:l,_=r$G("img",{alt:a||o,key:`media-${n}-${i}-${f}`,src:v}),M=c?r$G("a",{title:o,href:c,rel:h,target:p},_):null;return M||_}renderChartMediaInfo(e){const{formattedMediaInfoCount:t}=this.viewModel;return r$G("div",{key:`media-${e.type}-${t}`,bind:this,class:j$p,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?"image"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel,t=e.title?r$G("div",{key:"media-title",class:I$e,innerHTML:e.title}):null,i=e.caption?r$G("div",{key:"media-caption",class:w$m,innerHTML:e.caption}):null;return r$G("div",{key:"media-container",class:_$f},t,i,r$G("div",{key:"media-item-container",class:M$h},this.renderMediaInfoType()))}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t="previous"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(k$i,g$B):this.classes(k$i,x$i),s=t?this.classes(F$d,y$E,L$e):this.classes(F$d,C$a,S$i),a=t?this.classes(F$d,b$n,S$i):this.classes(F$d,T$f,L$e),o=t?"media-previous":"media-next",n=t?this._previous:this._next;return r$G("button",{type:"button",key:o,title:i,"aria-label":i,tabIndex:0,class:r,bind:this,onkeydown:n,onclick:n},r$G("span",{"aria-hidden":"true",class:s}),r$G("span",{"aria-hidden":"true",class:a}))}_next(){this.viewModel.next();}_previous(){this.viewModel.previous();}async _getChartDependencies(e){const t=await f$X(),{activeMediaInfo:i}=this.viewModel;this._renderChart({chartDiv:e,mediaInfo:i,chartsModule:t});}_handleMediaKeyup(e){const t=i$j(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next());}_renderChart(e){const{chartsModule:t,chartDiv:i,mediaInfo:r}=e,{value:s,type:a}=r,{am4core:o}=t,n=m$U(o);o.useTheme(t.am4themes_animated),o.useTheme((function(e){e instanceof o.ColorSet&&n&&(e.list=n);}));const l="pie-chart"===a?this._createPieChart(e):this._createXYChart(e);i.setAttribute("aria-label",r.altText||r.title),l.data=s.series.map(e=>({tooltip:e.tooltip,value:e.value})).filter(e=>"pie-chart"!==a||e.value>0);}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7});}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,a=r.create(t,s.PieChart);a.rtl=g$r();const n=a.series.push(new s.PieSeries);return n.labels.template.disabled=!0,n.ticks.template.disabled=!0,n.dataFields.value="value",n.dataFields.category="tooltip",this._customizeChartTooltip(n.tooltip,r),a}_getMinSeriesValue(e){let t=0;return e.forEach(e=>t=Math.min(e.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.xAxes.push(new o.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,a),n.tooltip.events.on("sizechanged",()=>{n.tooltip.dy=-n.tooltip.contentHeight;});const l=e.yAxes.push(new o.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,a),d.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueY="value",c.dataFields.categoryX="tooltip",e.cursor=new o.XYCursor,s.series.length>15&&(e.scrollbarX=new a.Scrollbar);}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.yAxes.push(new o.CategoryAxis);n.dataFields.category="tooltip",n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,a),n.tooltip.events.on("sizechanged",()=>{n.tooltip.dx=n.tooltip.contentWidth;});const l=e.xAxes.push(new o.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,a),d.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueX="value",c.dataFields.categoryY="tooltip",e.cursor=new o.XYCursor,s.series.length>15&&(e.scrollbarY=new a.Scrollbar);}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.xAxes.push(new o.CategoryAxis);n.dataFields.category="tooltip",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,a),n.tooltip.events.on("sizechanged",()=>{n.tooltip.dy=-n.tooltip.contentHeight;});const l=e.yAxes.push(new o.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=.05,l.renderer.maxLabelPosition=.95,l.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(l.tooltip,a),d.wrap=!0;const c=e.series.push(new o.LineSeries);c.dataFields.categoryX="tooltip",c.dataFields.valueY="value",e.cursor=new o.XYCursor,s.series.length>15&&(e.scrollbarX=new a.Scrollbar);}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:a,am4charts:n}=i,l=a.create(t,n.XYChart);return l.rtl=g$r(),"column-chart"===s&&this._createColumnChart(l,e),"bar-chart"===s&&this._createBarChart(l,e),"line-chart"===s&&this._createLineChart(l,e),l}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null);}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender();}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e);}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL);},r);this._refreshTimer=s;}_getImageSource(e,t){const i=-1!==e.indexOf("?")?"&":"?",[r,s=""]=e.split("#");return `${r}${i}timestamp=${t}${s?"#":""}${s}`}};e([o$M("viewModel.attributes")],P$9.prototype,"attributes",void 0),e([o$M("viewModel.activeMediaInfoIndex")],P$9.prototype,"activeMediaInfoIndex",void 0),e([o$M("viewModel.fieldInfoMap")],P$9.prototype,"fieldInfoMap",void 0),e([o$M("viewModel.layer")],P$9.prototype,"layer",void 0),e([o$M("viewModel.mediaInfos")],P$9.prototype,"mediaInfos",void 0),e([o$M("viewModel.popupTemplate")],P$9.prototype,"popupTemplate",void 0),e([o$M("viewModel.relatedInfos")],P$9.prototype,"relatedInfos",void 0),e([y$5({type:v$l}),o$U(["viewModel.formattedMediaInfos","viewModel.activeMediaInfoIndex","viewModel.activeMediaInfo"])],P$9.prototype,"viewModel",void 0),e([y$5(),o$U(),e$T("esri/widgets/Feature/t9n/Feature")],P$9.prototype,"messages",void 0),P$9=e([n$e("esri.widgets.Feature.FeatureMedia")],P$9);var A$f=P$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$X=["$datastore","$map","$layer"],o$11=n$7.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");async function i$1s({expressionAttributes:e,info:r,arcadeUtils:i,spatialReference:n,map:c,graphic:p}){const l="expression/"+r.name,u=i.createSyntaxTree(r.expression),f=s$X.filter(e=>i.hasVariable(u,e));await i.loadScriptDependencies(u,!0,f);const m=i.getViewInfo({spatialReference:n}),d=i.createExecContext(p,m);d.useAsync=!0,function({arcadeUtils:e,featureSetVars:r,context:t,viewInfo:a,map:s,graphic:o}){r.forEach(r=>{const i=r.toLowerCase(),n={map:s,spatialReference:a.sr};"$map"===i&&(t.vars[i]=e.convertMapToFeatureSetCollection(n)),"$layer"===i&&(t.vars[i]=e.convertFeatureLayerToFeatureSet(o.sourceLayer,a.sr)),"$datastore"===i&&(t.vars[i]=e.convertServiceUrlToWorkspace(o.sourceLayer.url,a.sr));});}({arcadeUtils:i,featureSetVars:f,context:d,viewInfo:m,map:c,graphic:p});const g=i.createFunction(u,d),y=await i.executeAsyncFunction(g,d).catch(e=>o$11.error("arcade-execution-error",{error:e,graphic:p,expressionInfo:r}));var h;e[l]="string"==typeof y?U$5(k$e(y)):Array.isArray(y)?function(e){return `<ul class="esri-widget__list">${e.map(e=>`<li>${"string"==typeof e?U$5(k$e(e)):e}</li>`).join("")}</ul>`}(y):y&&"esri.arcade.Dictionary"===y.declaredClass?`<table class="esri-widget__table">${(h=y).keys().map(e=>{const r=h.field(e);return `<tr><th>${e}</th><td>${"string"==typeof r?U$5(k$e(r)):r}</td></tr>`}).join("")}</table>`:y;}async function n$1b({popupTemplate:e,spatialReference:t,graphic:a,map:s}){const o=e.expressionInfos,n=[],c={};if(!o||!o.length)return c;const p=await import('./chunks/arcadeUtils-22bba5b8.js').then(function (n) { return n.ap; });for(const e of o)n.push(i$1s({expressionAttributes:c,info:e,arcadeUtils:p,spatialReference:t,map:s,graphic:a}));return await x$1(n),c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const V$4=n$7.getLogger("esri.widgets.FeatureViewModel");let P$a=class extends h$c{constructor(e){super(e),this._handles=new u$A,this._featureAbortController=null,this._graphicChangedThrottled=e$S(this._graphicChanged,1,this),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.graphic=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._handles.add(d$C(this,"_effectivePopupTemplate",()=>this._graphicChangedThrottled()));}destroy(){this._clear(),this._cancelFeatureQuery(),this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear();}get _effectivePopupTemplate(){var e;return (null==(e=this._graphic)?void 0:e.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled))||null}get _graphic(){var e;return (null==(e=this.graphic)?void 0:e.clone())||null}get _fieldInfoMap(){return $$5(O$6(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return b$j(this._graphic)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){void 0!==e?this._override("spatialReference",e):this._clearOverride("spatialReference");}get map(){return this.get("view.map")||null}set map(e){void 0!==e?this._override("map",e):this._clearOverride("map");}get waitingForContent(){return !!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof v$l&&r.setActiveMedia(t);}nextMedia(e){const t=this.contentViewModels[e];t instanceof v$l&&t.next();}previousMedia(e){const t=this.contentViewModels[e];t instanceof v$l&&t.previous();}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null);}async _graphicChanged(){this._cancelFeatureQuery(),this._clear();const{_graphic:e}=this;if(!e)return;const t=g$4();this._featureAbortController=t;try{await this._queryFeature({signal:t.signal});}catch(t){V$4.error("error","error loading popupTemplate for graphic",{error:t,graphic:e});}this._featureAbortController=null;}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null;}_compileContent(e){if(this._destroyContentViewModels(),this._graphic)return Array.isArray(e)?e.map((e,t)=>"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):void 0):"string"==typeof e?this._compileText(new i$Y({text:e}),0).text:e}_destroyContentViewModels(){this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[]);}_compileAttachments(e,t){const{graphic:r}=this;return this.contentViewModels[t]=new A$d({graphic:r}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:o,destroyer:i}=e;return this.contentViewModels[t]=new p$1h({graphic:r,creator:o,destroyer:i}),e}_compileFields(e,t){const{_effectivePopupTemplate:r,formattedAttributes:o}=this,i=e.clone(),s=(null==e?void 0:e.fieldInfos)||(null==r?void 0:r.fieldInfos),a=null==r?void 0:r.expressionInfos,n={...o.global,...o.content[t]},p=new n$11({attributes:n,expressionInfos:a,fieldInfos:s});return this.contentViewModels[t]=p,i.fieldInfos=p.formattedFieldInfos.slice(0),i}_compileMedia(e,t){const{_graphic:r,_fieldInfoMap:o,_effectivePopupTemplate:i,relatedInfos:s,_sourceLayer:a}=this,n=this.formattedAttributes.global,p=e.clone(),{mediaInfos:l}=p,c=new v$l({activeMediaInfoIndex:p.activeMediaInfoIndex||0,attributes:r.attributes,layer:a,fieldInfoMap:o,formattedAttributes:n,mediaInfos:l,popupTemplate:i,relatedInfos:s});return p.mediaInfos=c.formattedMediaInfos.slice(0),this.contentViewModels[t]=c,p}_compileText(e,t){const r=e.clone(),{_graphic:o,_fieldInfoMap:i,_sourceLayer:s}=this;if(r&&r.text){const{attributes:e}=o,t=this.formattedAttributes.global,a=T$b(r.text,{...t,...e},s);r.text=E$8({formattedAttributes:t,template:a,fieldInfoMap:i});}return this.contentViewModels[t]=new p$1h({graphic:o,creator:r.text}),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_graphic:t}=this;if(!e)return;const{lastEditInfoEnabled:r}=e,o=t.get("sourceLayer.editFieldsInfo");return r&&o?S$c(o,t.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r}=this,{attributes:o}=this._graphic,i=this.formattedAttributes.global;if(e){const s=T$b(e,{...i,...o},r);return E$8({formattedAttributes:i,template:s,fieldInfoMap:t})}return ""}async _getTitle(){const{_effectivePopupTemplate:e,_graphic:t}=this,r=null==e?void 0:e.title;return I$a(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,_graphic:t}=this,r=null==e?void 0:e.content;return I$a(r,{graphic:t})}async _createFormattedExpressions({spatialReference:e,graphic:t,map:r}){const o=await n$1b({popupTemplate:this._effectivePopupTemplate,spatialReference:e,graphic:t,map:r});t.attributes={...t.attributes,...o};}async _queryFeature(e){const{_featureAbortController:t,_graphic:r,_effectivePopupTemplate:o,spatialReference:i,map:a}=this,{content:{value:n},title:{value:p}}=await x$1({content:this._getContent(),title:this._getTitle()});t===this._featureAbortController&&r&&(await x$1([this._checkForRelatedFeatures(e),this._createFormattedExpressions({spatialReference:i,graphic:r,map:a}),P$6({graphic:r,popupTemplate:o},e)]),t===this._featureAbortController&&r&&(this._set("formattedAttributes",this._createFormattedAttributes(n)),this._set("title",this._compileTitle(p)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(n)||null)));}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,_graphic:r,relatedInfos:o,_sourceLayer:i,_fieldInfoMap:s}=this,a=null==t?void 0:t.fieldInfos,n={global:G$8({fieldInfos:a,graphic:r,layer:i,fieldInfoMap:s,relatedInfos:o}),content:[]};return Array.isArray(e)&&e.forEach((e,t)=>{"fields"===e.type&&e.fieldInfos&&(n.content[t]=G$8({fieldInfos:e.fieldInfos,graphic:r,layer:i,fieldInfoMap:s,relatedInfos:o}));}),n}_checkForRelatedFeatures(e){const{_graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,O$6(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:o,_sourceLayer:i}=this;if(o.clear(),!i)return;const s=t.filter(e=>e&&Q$2(e.fieldName));if(!s||!s.length)return;t.forEach(e=>this._configureRelatedInfo(e,i));const a=await m$T({relatedInfos:o,layer:i},r);Object.keys(a).forEach(e=>{var t;const r=o.get(e.toString()),i=null==(t=a[e])?void 0:t.value;r&&i&&(r.layerInfo=i.data);});const n=await y$D({graphic:e,relatedInfos:o},r);return Object.keys(n).forEach(e=>{var t;p$1p(null==(t=n[e])?void 0:t.value,o.get(e.toString()));}),n}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,o=f$U(e.fieldName);if(!o)return;const{layerId:i,fieldName:s}=o;if(!i)return;const a=r.get(i.toString())||d$W(i,t);a&&(F$c({relatedInfo:a,fieldName:s,fieldInfo:e}),this.relatedInfos.set(i,a));}};e([y$5()],P$a.prototype,"_featureAbortController",void 0),e([y$5({readOnly:!0,dependsOn:["_graphic","_graphic.sourceLayer.popupTemplate.title","_graphic.sourceLayer.popupTemplate.content","_graphic.sourceLayer.popupTemplate.expressionInfos","_graphic.sourceLayer.popupTemplate.fieldInfos","_graphic.sourceLayer.popupTemplate.lastEditInfoEnabled","_graphic.sourceLayer.popupTemplate.outFields","_graphic.sourceLayer.popupTemplate.relatedRecordsInfo","_graphic.popupTemplate.title","_graphic.popupTemplate.content","_graphic.popupTemplate.expressionInfos","_graphic.popupTemplate.fieldInfos","_graphic.popupTemplate.lastEditInfoEnabled","_graphic.popupTemplate.outFields","_graphic.popupTemplate.relatedRecordsInfo","defaultPopupTemplateEnabled"]})],P$a.prototype,"_effectivePopupTemplate",null),e([y$5({readOnly:!0,dependsOn:["graphic"]})],P$a.prototype,"_graphic",null),e([y$5({readOnly:!0,dependsOn:["_effectivePopupTemplate","_sourceLayer"]})],P$a.prototype,"_fieldInfoMap",null),e([y$5({readOnly:!0,dependsOn:["_graphic.layer","_graphic.sourceLayer"]})],P$a.prototype,"_sourceLayer",null),e([y$5({readOnly:!0})],P$a.prototype,"content",void 0),e([y$5({readOnly:!0})],P$a.prototype,"contentViewModels",void 0),e([y$5({type:Boolean})],P$a.prototype,"defaultPopupTemplateEnabled",void 0),e([y$5({readOnly:!0})],P$a.prototype,"formattedAttributes",void 0),e([y$5({type:c$19})],P$a.prototype,"graphic",void 0),e([y$5({readOnly:!0})],P$a.prototype,"lastEditInfo",void 0),e([y$5()],P$a.prototype,"relatedInfos",void 0),e([y$5({dependsOn:["view"]})],P$a.prototype,"spatialReference",null),e([y$5({readOnly:!0})],P$a.prototype,"title",void 0),e([y$5({dependsOn:["view"]})],P$a.prototype,"map",null),e([y$5({readOnly:!0,dependsOn:["_featureAbortController"]})],P$a.prototype,"waitingForContent",null),e([y$5()],P$a.prototype,"view",void 0),P$a=e([n$e("esri.widgets.FeatureViewModel")],P$a);var R$b=P$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const f$Z="esri-icon-loading-indicator esri-rotating",g$C="esri-widget",w$n="esri-feature",_$g="esri-feature__size-container",M$i="esri-feature__title",j$q="esri-feature__main-container",b$o="esri-feature__content-element",E$a="esri-feature__text",C$b="esri-feature__last-edited-info",W$4="esri-feature__attachments",F$e="esri-feature__loading-container",x$j="esri-feature__loading-spinner",k$j={title:!0,content:!0,lastEditedInfo:!0};let U$7=class extends(i$1h(C$7)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.label=void 0,this.messages=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...k$j},this.map=null,this.view=null,this.viewModel=new R$b;}initialize(){this.own(d$C(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()));}destroy(){this._destroyContentWidgets();}castVisibleElements(e){return {...k$j,...e}}render(){const{waitingForContent:e}=this.viewModel;return r$G("div",{class:this.classes(w$n,g$C)},r$G("div",{class:_$g},this.renderTitle(),e?this.renderLoading():this.renderContentContainer()))}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t);}nextMedia(e){this.viewModel.nextMedia(e);}previousMedia(e){this.viewModel.previousMedia(e);}renderLoading(){return r$G("div",{key:"loading-container",class:F$e},r$G("span",{class:this.classes(f$Z,x$j)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?r$G("div",{class:j$q},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?r$G("h4",{class:M$i,innerHTML:t}):null}renderContent(){const e=this.viewModel.content;if(!e)return null;if(Array.isArray(e))return e.length?r$G("div",{key:"content-content-elements"},e.map(this.renderContentElement,this)):null;if("string"==typeof e){const e=this._contentWidgets[0];return !e||e.destroyed?null:r$G("div",{key:"content-content"},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:s}=this;if("boolean"!=typeof s.content&&!s.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:s,attachmentInfos:i}=t.viewModel;return "loading"===s||i.length>0?r$G("div",{key:this._buildKey("attachments-element",e),class:this.classes(W$4,b$o)},r$G("h2",null,this.messages.attach),t.render()):null}renderCustom(e,t){const{creator:s}=e,i=this._contentWidgets[t];return !i||i.destroyed?null:s?r$G("div",{key:this._buildKey("custom-element",t),class:b$o},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:r$G("div",{key:this._buildKey("fields-element",e),class:b$o},t.render())}renderMedia(e){const t=this._contentWidgets[e];return !t||t.destroyed?null:r$G("div",{key:this._buildKey("media-element",e),class:b$o},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:s}=this.viewModel;if(!s||!e.lastEditedInfo)return null;const{date:i,user:r}=s,o="edit"===s.type?r?t.lastEditedByUser:t.lastEdited:r?t.lastCreatedByUser:t.lastCreated,l=s$v(o,{date:i,user:r});return r$G("div",{key:"edit-info-element",class:this.classes(C$b,b$o)},l)}renderText(e,t){const s=e.text,i=this._contentWidgets[t];return !i||i.destroyed?null:s?r$G("div",{key:this._buildKey("text-element",t),class:this.classes(b$o,E$a)},i.render()):null}_buildKey(e,...t){return `${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidgets(){this._contentWidgets.forEach(e=>{e.viewModel=null,e&&!e.destroyed&&e.destroy();}),this._contentWidgets=[];}_setupContentWidgets(){this._destroyContentWidgets();const e=this.get("viewModel.content"),{contentViewModels:t}=this.viewModel;if(Array.isArray(e))e.forEach((e,s)=>{"attachments"===e.type&&(this._contentWidgets[s]=new ht$1({displayType:e.displayType,viewModel:t[s]})),"fields"===e.type&&(this._contentWidgets[s]=new j$m({viewModel:t[s]})),"media"===e.type&&(this._contentWidgets[s]=new A$f({viewModel:t[s]})),"text"===e.type&&(this._contentWidgets[s]=new f$O({viewModel:t[s]})),"custom"===e.type&&(this._contentWidgets[s]=new f$O({viewModel:t[s]}));},this);else {const e=t[0];e&&!e.destroyed&&(this._contentWidgets[0]=new f$O({viewModel:e}));}this.scheduleRender();}};e([o$M("viewModel.graphic")],U$7.prototype,"graphic",void 0),e([o$M("viewModel.defaultPopupTemplateEnabled")],U$7.prototype,"defaultPopupTemplateEnabled",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],U$7.prototype,"label",void 0),e([y$5(),o$U(),e$T("esri/widgets/Feature/t9n/Feature")],U$7.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/widgets/support/t9n/uriUtils")],U$7.prototype,"messagesURIUtils",void 0),e([o$M("viewModel.spatialReference")],U$7.prototype,"spatialReference",void 0),e([o$M("viewModel.title")],U$7.prototype,"title",void 0),e([y$5(),o$U()],U$7.prototype,"visibleElements",void 0),e([i$b("visibleElements")],U$7.prototype,"castVisibleElements",null),e([o$M("viewModel.map")],U$7.prototype,"map",void 0),e([o$M("viewModel.view")],U$7.prototype,"view",void 0),e([y$5({type:R$b}),o$U(["viewModel.waitingForContent","viewModel.content","viewModel.lastEditInfo","viewModel.contentViewModels"])],U$7.prototype,"viewModel",void 0),U$7=e([n$e("esri.widgets.Feature")],U$7);var T$g=U$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$1z=class extends i$n.EventedAccessor{constructor(...e){super(...e),this._anchorHandles=new u$A,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([h$F(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),h$F(this,["view","view.ready"],()=>this._wireUpView())]);}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null;}_wireUpView(){const e="view";this._anchorHandles.remove(e),this._viewpointHandle=null;if(!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,o="3d"===t.type?"camera":"viewpoint",i=q$3(t,o,()=>this._viewpointChange());this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint();}_viewpointChange(){this._setScreenLocation(),this.emit("view-change");}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint();}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:o}=this;if(!e)return;t&&o?e.resume():e.pause();}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:o}=this,i=this.get("view.ready"),s=o&&e&&i?t.toScreen(e):null;this._set("screenLocation",s);}};e([y$5()],c$1z.prototype,"location",void 0),e([y$5({readOnly:!0})],c$1z.prototype,"screenLocation",void 0),e([y$5()],c$1z.prototype,"screenLocationEnabled",void 0),e([y$5()],c$1z.prototype,"view",void 0),c$1z=e([n$e("esri.widgets.support.AnchorElementViewModel")],c$1z);var a$1e=c$1z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$V=class extends a$1e{constructor(r){super(r),this.visible=!1;}};e([y$5()],t$V.prototype,"visible",void 0),t$V=e([n$e("esri.widgets.CompassViewModel")],t$V);var p$1r=t$V;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$1f="esri-spinner",m$V="esri-spinner--start",h$U="esri-spinner--finish";let d$X=class extends C$7{constructor(i,o){super(i,o),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new p$1r,this.visible=!1;}initialize(){this.own([h$F(this,"visible",i=>this._visibleChange(i))]);}destroy(){this._animationPromise=null;}show(i){const{location:o,promise:e}=i;o&&(this.viewModel.location=o),this.visible=!0;const s=()=>this.hide();e&&e.catch(()=>{}).then(s);}hide(){this.visible=!1;}render(){const{visible:i}=this,{screenLocation:o}=this.viewModel,e=!!o,s={[m$V]:i&&e,[h$U]:!i&&e},t=this._getPositionStyles();return r$G("div",{class:this.classes(a$1f,s),styles:t})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const o=O$1(this._animationDelay);this._animationPromise=o,o.catch(()=>{}).then(()=>{this._animationPromise===o&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null);});}_getPositionStyles(){const{screenLocation:i,view:o}=this.viewModel;if(!o||!i)return {};const{padding:e}=o;return {left:i.x-e.left+"px",top:i.y-e.top+"px"}}};e([o$M("viewModel.location")],d$X.prototype,"location",void 0),e([o$M("viewModel.view")],d$X.prototype,"view",void 0),e([y$5({type:p$1r}),o$U(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],d$X.prototype,"viewModel",void 0),e([o$M("viewModel.visible")],d$X.prototype,"visible",void 0),d$X=e([n$e("esri.widgets.Spinner")],d$X);var v$n=d$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$Y{constructor(t=(t=>f$t(t))){this._peeker=t,this._items=new Set;}get length(){return this._items.size}clear(){this._items.clear();}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t);}contains(t){return this._items.has(t)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(A(e)),e}remove(t){this._items.delete(t);}filter(t){return this._items.forEach(e=>{t(e)||this._items.delete(e);}),this}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$W=s("mac")?"Meta":"Ctrl",o$12={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let r=48;r<58;r++)o$12[r]=String.fromCharCode(r);for(let r=1;r<25;r++)o$12[111+r]="F"+r;for(let r=65;r<91;r++)o$12[r]=[String.fromCharCode(r+32),String.fromCharCode(r)];function a$1g(r){if(void 0!==r.key)return i$j(r);const t=o$12[r.keyCode];return Array.isArray(t)?r.shiftKey?t[1]:t[0]:t}function n$1c(r){switch(r){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return !0}return !1}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$Z{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t;}matches(e){if(e.type!==this.eventType)return !1;if(0===this.keyModifiers.length)return !0;const t=e.modifiers;for(const e of this.keyModifiers)if(!t.has(e))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1d=n$7.getLogger("esri.views.input.InputHandler");class i$1t{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e;}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const e of t)this._incomingEventMatches.push(e.match);}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return !1}onInstall(e){this._manager?n$1d.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(e=>this._handleEvent(e)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e);}onUninstall(){}registerIncoming(e,n,i){let a;"function"==typeof n?(i=n,a=[]):a=n||[];const o="string"==typeof e?new e$Z(e,a):e,h=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null;},r=e=>{const t=this._incoming[e.match.eventType];if(t){const n=t.indexOf(e);t.splice(n,1),h(),this._manager&&this._manager.updateDependencies();}},g=new s$Z(o,i,{onPause:r,onRemove:r,onResume:e=>{const t=this._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),h(),this._manager&&this._manager.updateDependencies());}});let c=this._incoming[o.eventType];return c||(c=[],this._incoming[o.eventType]=c),c.push(g),h(),this._manager&&this._manager.updateDependencies(),g}registerOutgoing(e){if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new a$1h(e,{onEmit:(e,t,n,i)=>{this._manager.emit(e.eventType,t,n,i);},onRemove:e=>{delete this._outgoing[e.eventType],this._manager.updateDependencies();}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager.setPointerCapture(e,!0);}stopCapturingPointer(e){this._manager.setPointerCapture(e,!1);}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs();}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):n$1d.error("This InputHandler is not registered with an InputManager");}_handleEvent(e){const t=this._incoming[e.type];if(t)for(const n of t)if(n.match.matches(e)&&(n.callback(e),e.shouldStopPropagation()))break}}class s$Z{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n;}pause(){this._handler.onPause(this);}resume(){this._handler.onResume(this);}remove(){this._handler.onRemove(this);}get callback(){return this._callback}}class a$1h{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t;}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n);}remove(){this._removed=!0,this._handler.onRemove(this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$X extends i$1t{constructor(e){super(!0),this._onChange=e,this._value="mouse",this.registerIncoming("pointer-down",e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");}),this._moveHandler=this.registerIncoming("pointer-move",e=>{const t="touch"===e.data.native.pointerType;this._setValue(t?"touch":"mouse");}),this._moveHandler.pause();}_setValue(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$V=n$7.getLogger("esri.views.input.InputManager");let l$10=class extends h$c{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=t$W,this.latestPointerType="mouse",this.test={timestamp:void 0};}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers();}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null;}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,r=c$1A.INTERNAL){if(this._nameToGroup[e])return void h$V.error("There is already an InputHandler group registered under the name `"+e+"`");if(0===t.length)return void h$V.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map(e=>({handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let e=i.handlers.length-1;e>=0;e--){const t=i.handlers[e];this._handlers.push(t),t.handler.onInstall({updateDependencies:()=>{this.updateDependencies();},emit:(e,r,i,s,n)=>{this._emitInputEvent(t.priorityIndex+1,e,r,i,n,s);},setPointerCapture:(e,r)=>{this._setPointerCapture(i,t,e,r);},setEventCallback:e=>{t.eventCallback=e;},setUninstallCallback:e=>{t.uninstallCallback=e;},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs");}});}this.updateDependencies();}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(e=>{e.removed=!0,e.uninstallCallback();}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):h$V.error("There is no InputHandler group registered under the name `"+e+"`");}hasHandlers(e){return void 0!==this._nameToGroup[e]}updateDependencies(){const e=new Set,t=new Set;this._handlersPriority=[];for(let e=this._handlers.length-1;e>=0;e--){const t=this._handlers[e];t.priorityIndex=e,this._handlersPriority.push(t);}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s)for(const t of i.handler.outgoingEventTypes)if(e.has(t)){s=!0;break}if(s)for(const r of i.handler.incomingEventMatches){e.add(r.eventType);for(const e of r.keyModifiers)n$1c(e)||t.add(e);}i.active=s;}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents);}_setLatestPointerType(e){this._set("latestPointerType",e);}_onEventReceived(e,t){if("pointer-capture-lost"===e){const e=t;this._pointerCaptures.delete(e.native.pointerId);}this._updateKeyModifiers(e,t);const r=null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i);}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const e=new Set;this._activeKeyModifiers.forEach(t=>{e.add(t);}),this._activeKeyModifiers=e,r=!0;}},s=(e,t)=>{t&&!this._activeKeyModifiers.has(e)?(i(),this._activeKeyModifiers.add(e)):!t&&this._activeKeyModifiers.has(e)&&(i(),this._activeKeyModifiers.delete(e));};if("key-down"===e||"key-up"===e){const r=t.key;this._keyModifiers.has(r)&&s(r,"key-down"===e);}const n=t.native;s("Alt",!(!n||!n.altKey)),s("Ctrl",!(!n||!n.ctrlKey)),s("Shift",!(!n||!n.shiftKey)),s("Meta",!(!n||!n.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey));}_installRecognizers(){this._latestPointerTypeHandler=new t$X(e=>this._setLatestPointerType(e)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,c$1A.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],c$1A.INTERNAL);}_setPointerCapture(e,t,r,i){const s=e.name+"-"+t.priorityIndex,n=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,n),i?(n.add(s),1===n.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):n.has(s)&&(n.delete(s),0===n.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)));}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies();}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i);}_emitInputEvent(e,t,r,i,s,n){const o=void 0!==i?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=void 0!==s&&s,d={event:new p$1s(t,r,o,n||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(d):this._doNewPropagation(d);}_doNewPropagation(e){this._currentPropagation={events:new s$Y,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e);const t=this._currentPropagation;for(;this._currentPropagation.events.length>0;){const{event:e,priorityIndex:r}=this._currentPropagation.events.pop(),i=e.data&&e.data.eventId;if(!(null!=i&&this._stoppedPropagationEventIds.has(i)))for(t.currentHandler=this._handlersPriority[r];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else if(t.currentHandler.active&&t.currentHandler.eventCallback(e),e.shouldStopPropagation()){null!=i&&this._stoppedPropagationEventIds.add(i);break}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1];}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null;}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const e of t.handler.incomingEventMatches){if(r.eventType!==e.eventType)continue;const t=r.keyModifiers.filter(t=>-1!==e.keyModifiers.indexOf(t));if(t.length===r.keyModifiers.length!==(t.length===e.keyModifiers.length))return r.keyModifiers.length>e.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let e=0;for(;e<t.length&&this._compareHandlerPriority(r,t[e])>=0;)e++;t.splice(e,0,r);}return t}get debug(){const e=e=>{const t=this._setPointerCapture;this._setPointerCapture=()=>{},e(),this._setPointerCapture=t;};return {injectEvent:(t,r)=>{e(()=>{this._onEventReceived(t,r);});},disablePointerCapture:e}}};e([y$5({readOnly:!0})],l$10.prototype,"hasPendingInputs",null),e([y$5()],l$10.prototype,"eventSource",void 0),e([y$5()],l$10.prototype,"recognizers",void 0),e([y$5({readOnly:!0})],l$10.prototype,"latestPointerType",void 0),l$10=e([n$e("esri.views.input.InputManager")],l$10);class p$1s{constructor(e,t,r,i,s){this.type=e,this.data=t,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._stopPropagation=!1;}stopPropagation(){this._stopPropagation=!0;}shouldStopPropagation(){return this._stopPropagation}preventDefault(){this.data.native.preventDefault();}}const c$1A={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$Y(n){return n&&"function"==typeof n.highlight}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$13="esri-icon-trash",n$1e=new c$N({id:"zoom-to-feature",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),s$_=new c$N({id:"remove-selected-feature",title:"{messages.remove}",className:o$13}),c$1B=function(r){const{event:o,view:a}=r,{action:c}=o,m=a&&a.popup;if(!c)return B$2(new s$g("trigger-action:missing-arguments","Event has no action"));if(!m)return B$2(new s$g("trigger-action:missing-arguments","view.popup is missing"));const{disabled:u,id:g}=c;if(!g)return B$2(new s$g("trigger-action:invalid-action","action.id is missing"));if(u)return B$2(new s$g("trigger-action:invalid-action","Action is disabled"));if(g===n$1e.id)return m.viewModel.zoomToLocation();if(g===s$_.id){m.close();const{selectedFeature:r}=m;if(!r)return B$2(new s$g("trigger-action:"+s$_.id,"selectedFeature is required",{selectedFeature:r}));const{sourceLayer:o}=r;return o?o.remove(r):a.graphics.remove(r),D$1()}return D$1()};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$_=e$1=>{let t=class extends e$1{constructor(...o){super(...o),this.goToOverride=null,this.view=null;}callGoTo(o){const{view:r}=this;return this.goToOverride?this.goToOverride(r,o):r.goTo(o.target,o.options)}};return e([y$5()],t.prototype,"goToOverride",void 0),e([y$5()],t.prototype,"view",void 0),t=e([n$e("esri.widgets.support.GoTo")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const O$8=L$2.ofType({key:"type",defaultKeyValue:"button",base:c$M,typeMap:{button:c$N,toggle:a$K}}),x$k=n$7.getLogger("esri.widgets.Popup.PopupViewModel");let V$5=class extends(e$_(a$1e)){constructor(e){super(e),this._handles=new u$A,this._pendingPromises=new Set,this._zoomToLocation=null,this._fetchFeaturesController=null,this.actions=new O$8([n$1e.clone()]),this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.content=null,this.featureViewModels=[],this.highlightEnabled=!0,this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4;}initialize(){this._handles.add([d$C(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),h$F(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),h$F(this,"view.animation.state",e=>this._animationStateChange(e)),h$F(this,"location",e=>this._locationChange(e)),h$F(this,"selectedFeature",e=>this._selectedFeatureChange(e)),this.on("trigger-action",e=>c$1B({event:e,view:this.view})),O$4(this,"waitingForResult",()=>this._waitingForResultChange()),h$F(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs())]);}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.view=null;}get active(){return !(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new O$8;e.removeAll();const t=this.selectedFeature&&("function"==typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),o=t&&t.actions,i=t&&t.overwriteActions?o:o?o.concat(this.actions):this.actions;return i&&i.filter(Boolean).forEach(t=>e.add(t)),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:o,promiseCount:i,selectedFeatureIndex:s}=this,n=i&&t.length;n&&o&&-1===s?this.selectedFeatureIndex=0:n&&-1!==s||(this.selectedFeatureIndex=t.length?0:-1);}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=g$9(e)),this._set("location",e);}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return !(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(e=>{this._pendingPromises.add(e);e.then(t=>{this._pendingPromises.has(e)&&this._updateFeatures(t),this._updatePendingPromises(e);},()=>this._updatePendingPromises(e));}),this.notifyChange("pendingPromisesCount");}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;if(-1===t)return null;return e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return "number"==typeof e?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e);}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=this._getSelectedTarget();if(!t){const o=new s$g("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return x$k.error(o),B$2(o)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null});}fetchFeatures(e,t){const{view:o}=this;if(!o||!e){const t=new s$g("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:o});return x$k.error(t),B$2(t)}return o.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:o}=t;delete t.fetchFeatures,o&&this._setFetchFeaturesPromises(t.location),this.set(t);}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t});}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}zoomToLocation(){const{location:e,selectedFeature:t,view:o,zoomFactor:i}=this,s=this._getSelectedTarget();if(!s){const e=new s$g("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:o});return x$k.error(e),B$2(e)}const n=o.scale/i,l=this.get("selectedFeature.geometry")||e,u=l&&"point"===l.type&&this._isZoomScreenSize(t);n$1e.active=!0,n$1e.disabled=!0;const c=this.callGoTo({target:{target:s,scale:u?n:void 0}}).catch(()=>{n$1e.active=!1,n$1e.disabled=!1,this._zoomToLocation=null;}).then(()=>{u&&(this.location=l);});return this._zoomToLocation=c,c}_animationStateChange(e){this._zoomToLocation||(n$1e.disabled="waiting-for-target"===e);}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:o}=this;o&&e&&(!t||t.geometry)&&this.centerAtLocation();}_selectedFeatureChange(e){if(!e)return;const{location:o,updateLocationEnabled:i,view:s}=this;!i&&o||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=s.center.clone();}):this.location=f$3(this._getPointFromGeometry(e.geometry));}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1);}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(e=>{const{clientOnlyGraphics:t,promisesPerLayerView:o}=e,i=D$1(t),s=o.map(e=>e.promise);this.promises=[i,...s];})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[]);}_updateFeatureVMs(){const{features:e,featureViewModels:t}=this;if(this._destroyFeatureVMs(),!e||!e.length)return;const o=t.slice(0),i=[];e.forEach((e,t)=>{if(!e)return;let s=null;if(o.some((t,i)=>(t&&t.graphic===e&&(s=t,o.splice(i,1)),!!s)),s)i[t]=s;else {var n,r;const o=new R$b({defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,graphic:e,spatialReference:null==(n=this.view)?void 0:n.spatialReference,map:null==(r=this.view)?void 0:r.map});i[t]=o;}}),o.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",i);}_getScreenPoint(e){const{view:t}=this;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}_getSelectedTarget(){const{selectedFeature:e,location:t,view:o}=this;if(!o)return null;if("3d"===o.type)return e||t;return this.get("selectedFeature.geometry")||t}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:o}=this;if(t.remove(e),o&&this.view){const o=this.view.on("click",e=>{"mouse"===e.pointerType&&0!==e.button||this._fetchFeaturesAndOpen(e);},c$1A.WIDGET);t.add(o,e);}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult");}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const o=g$4(),{signal:i}=o;this._fetchFeaturesController=o,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:i,event:t});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult");}),s}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:o}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then(e=>{const{clientOnlyGraphics:t,promisesPerLayerView:s,location:n}=e,r=[D$1(t),...s.map(e=>e.promise)];return i.popup.open({location:n||o,promises:r}),e});}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"));}_autoClose(){this.autoCloseEnabled&&(this.visible=!1);}_isZoomScreenSize(e){const{view:t}=this;if("3d"!==t.type||!e||"esri.Graphic"!==e.declaredClass)return !0;const o=t.getViewForGraphic(e);if(o&&"whenGraphicBounds"in o){let t=!1;return o.whenGraphicBounds(e,{useViewElevation:!0}).then(e=>{t=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5];}).catch(()=>{const t=new s$g("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});x$k.error(t);}),t}return !0}_getPointFromGeometry(e){return t$6(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:o,view:i,visible:s}=this;if(!(t&&i&&o&&s))return;const{layer:n}=t;if(!(n&&n instanceof b$6))return;const r=this._getLayerView(i,n);this._highlightPromise=r;const a=await r;if(!(a&&t$Y(a)&&this._highlightPromise===r&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const l="objectIdField"in n&&n.objectIdField,u=t.attributes,c=u&&l&&u[l],h=a.highlight(c||t);this._handles.add(h,e);}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const o=e.filter(e=>-1===t.indexOf(e));this.features=t.concat(o);}};e([y$5({type:O$8})],V$5.prototype,"actions",void 0),e([y$5({readOnly:!0,dependsOn:["visible","waitingForResult"]})],V$5.prototype,"active",null),e([y$5({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length","selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],V$5.prototype,"allActions",null),e([y$5({type:Boolean})],V$5.prototype,"defaultPopupTemplateEnabled",void 0),e([y$5()],V$5.prototype,"autoCloseEnabled",void 0),e([y$5()],V$5.prototype,"autoOpenEnabled",void 0),e([y$5()],V$5.prototype,"content",void 0),e([y$5({readOnly:!0,dependsOn:["features"]})],V$5.prototype,"featureCount",null),e([y$5()],V$5.prototype,"features",null),e([y$5({readOnly:!0})],V$5.prototype,"featureViewModels",void 0),e([y$5()],V$5.prototype,"highlightEnabled",void 0),e([y$5({type:_$7})],V$5.prototype,"location",null),e([y$5({readOnly:!0,dependsOn:["promises"]})],V$5.prototype,"pendingPromisesCount",null),e([y$5({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],V$5.prototype,"waitingForResult",null),e([y$5({readOnly:!0,dependsOn:["promises"]})],V$5.prototype,"promiseCount",null),e([y$5()],V$5.prototype,"promises",null),e([y$5({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],V$5.prototype,"selectedFeature",null),e([y$5({value:-1})],V$5.prototype,"selectedFeatureIndex",null),e([y$5({readOnly:!0,dependsOn:["featureViewModels","selectedFeatureIndex"]})],V$5.prototype,"selectedFeatureViewModel",null),e([y$5({readOnly:!0,dependsOn:["view.ready"]})],V$5.prototype,"state",null),e([y$5()],V$5.prototype,"title",void 0),e([y$5()],V$5.prototype,"updateLocationEnabled",void 0),e([y$5()],V$5.prototype,"view",void 0),e([y$5()],V$5.prototype,"visible",void 0),e([y$5()],V$5.prototype,"zoomFactor",void 0),e([y$5()],V$5.prototype,"centerAtLocation",null),e([y$5()],V$5.prototype,"zoomToLocation",null),V$5=e([n$e("esri.widgets.Popup.PopupViewModel")],V$5);var L$f=V$5;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const O$9="esri-icon-left-triangle-arrow",E$b="esri-icon-right-triangle-arrow",I$f="esri-icon-maximize",N$8="esri-icon-dock-bottom",P$b="esri-icon-dock-left",B$a="esri-icon-dock-right",S$j="esri-icon-close",V$6="esri-icon-minimize",D$b="esri-icon-check-mark",j$r="esri-icon-loading-indicator",U$8="esri-icon-default-action",L$g="esri-icon-handle-horizontal",T$h="esri-rotating",W$5="esri-popup",R$c="esri-widget",H$5="esri-popup__main-container",z$8="esri-popup__loading-container",K$2="esri-popup--is-collapsible",q$7="esri-popup--is-collapsed",$$7="esri-popup--shadow",G$a="esri-popup--is-docked",J$5="esri-popup--is-docked-top-left",Q$4="esri-popup--is-docked-top-center",X$3="esri-popup--is-docked-top-right",Y$3="esri-popup--is-docked-bottom-left",Z$2="esri-popup--is-docked-bottom-center",ee$1="esri-popup--is-docked-bottom-right",te$1="esri-popup--aligned-top-center",ie="esri-popup--aligned-bottom-center",oe="esri-popup--aligned-top-left",ne$1="esri-popup--aligned-bottom-left",se$1="esri-popup--aligned-top-right",re$1="esri-popup--aligned-bottom-right",le$1="esri-popup--feature-menu-open",ae$1="esri-popup--actions-menu-open",ue$1="esri-popup--feature-updated",de$1="esri-popup__header",ce$1="esri-popup__header-buttons",pe="esri-popup__header-container",he="esri-popup__header-container--button",ge="esri-popup__header-title",_e="esri-popup__content",ve="esri-popup__footer",me="esri-popup__footer--has-pagination",fe$1="esri-popup__footer--has-actions",be="esri-popup__footer--has-actions-menu",we="esri-popup__button",Me="esri-popup__button--disabled",ye="esri-popup__button--dock",ke="esri-popup__icon",Ae="esri-popup__icon--dock-icon",Ce="esri-popup__inline-actions-container",Fe="esri-popup__actions-menu-button",xe="esri-popup__actions",Oe="esri-popup__action",Ee="esri-popup__action-image",Ie="esri-popup__action-text",Ne="esri-popup__action-toggle",Pe="esri-popup__action-toggle--on",Be="esri-popup__pointer",Se="esri-popup__pointer-direction",Ve="esri-popup__navigation",De="esri-popup__pagination-previous",je="esri-popup__pagination-next",Ue="esri-popup__pagination-previous-icon",Le="esri-popup__pagination-previous-icon--rtl",Te="esri-popup__pagination-next-icon",We="esri-popup__pagination-next-icon--rtl",Re="esri-popup__feature-menu",He="esri-popup__feature-menu-list",ze="esri-popup__feature-menu-item",Ke="esri-popup__feature-menu-viewport",qe="esri-popup__feature-menu-header",$e="esri-popup__feature-menu-item--selected",Ge="esri-popup__feature-menu-button",Je="esri-popup__feature-menu-title",Qe={buttonEnabled:!0,position:"auto",breakpoint:{width:544}};function Xe(e,t){return void 0===t?"esri-popup__"+e:`esri-popup__${e}-${t}`}const Ye=n$7.getLogger("esri.widgets.Popup"),Ze={closeButton:!0,featureNavigation:!0};let et$2=class extends(i$1h(C$7)){constructor(e,t){super(e,t),this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new u$A,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._displaySpinnerThrottled=e$S(()=>this._displaySpinner(),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new L$f,this.visible=null,this.visibleElements={...Ze},this._addSelectedFeatureIndexHandle(),this.own([h$F(this,"viewModel.screenLocation",()=>this._positionContainer()),h$F(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),h$F(this,"viewModel.screenLocation",(e,t)=>{!!e!=!!t&&this.reposition();}),h$F(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),h$F(this,"spinnerEnabled",e=>this._spinnerEnabledChange(e)),h$F(this,"viewModel.view.size",(e,t)=>this._updateDockEnabledForViewSize(e,t)),h$F(this,"viewModel.view",(e,t)=>this._viewChange(e,t)),h$F(this,"viewModel.view.ready",(e,t)=>this._viewReadyChange(e,t)),h$F(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled();}),h$F(this,"selectedFeatureWidget.viewModel.title",e=>this._setTitleFromFeatureWidget(e)),h$F(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],()=>this._setContentFromFeatureWidget()),O$4(this,"collapsed",()=>{var e,t;"xsmall"===(null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation();}),B$5(this,"viewModel.allActions","change",()=>this._watchActions()),d$C(this,"viewModel.allActions",()=>this._watchActions())]);}destroy(){this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles&&this._handles.destroy(),this._handles=null;}get actionsMenuId(){return this.id+"-actions-menu"}get actionsMenuButtonId(){return this.id+"-actions-menu-button"}get featureMenuId(){return this.id+"-feature-menu"}get titleId(){return this.id+"-popup-title"}get contentId(){return this.id+"-popup-content"}get hasContent(){var e,t,i,o,n;return !!(this.selectedFeatureWidget?(null==(e=this.selectedFeatureWidget)||null==(t=e.viewModel)?void 0:t.waitingForContent)||(null==(i=this.selectedFeatureWidget)||null==(o=i.viewModel)?void 0:o.content):null==(n=this.viewModel)?void 0:n.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return !!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e);}get actionsMenuOpen(){return !!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Qe}set dockOptions(e){const t={...Qe},i=this.get("viewModel.view.breakpoints"),o={};i&&(o.width=i.xsmall,o.height=i.xsmall);const n={...t,...e},s={...t.breakpoint,...o},{breakpoint:r}=n;!0===r?n.breakpoint=s:"object"==typeof r&&(n.breakpoint={...s,...r}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition();}set featureNavigationEnabled(e){t$c(Ye,"featureNavigationEnabled",{replacement:"visibleElements.featureNavigation",version:"4.15"}),this.visibleElements={...this.visibleElements,featureNavigation:e};}get selectedFeatureWidget(){const{_feature:e,visibleElements:t}=this,{selectedFeatureViewModel:i}=this.viewModel,o={...t,title:!1};return i?(e?(e.viewModel=i,e.visibleElements=o):this._feature=new T$g({viewModel:i,visibleElements:o}),this._feature):null}castVisibleElements(e){return {...Ze,...e}}blur(){const{active:e}=this.viewModel;e||Ye.warn("Popup can only be blurred when currently active."),this._blurContainer=!0,this.scheduleRender();}clear(){this.viewModel.clear();}close(){this.visible=!1;}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||Ye.warn("Popup can only be focused when currently active."),this._focusContainer=!0,this.scheduleRender();}next(){return this.viewModel.next()}open(e){var t,i;this._handles.remove("selected-index");const o=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:o};"xsmall"===(null==(t=this.viewModel)||null==(i=t.view)?void 0:i.widthBreakpoint)&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._addSelectedFeatureIndexHandle();}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment();}triggerAction(e){this.viewModel.triggerAction(e);}render(){var e,t,i,o;const{actionsMenuOpen:n,dockEnabled:s,featureMenuVisible:r,dividedActions:l,currentAlignment:a,currentDockPosition:u}=this,{active:d}=this.viewModel,{menuActions:c}=l,p=d&&c.length>1&&n,h=d&&s,g=d&&!s,_=null==(e=this.selectedFeature)||null==(t=e.layer)?void 0:t.title,v=null==(i=this.selectedFeature)||null==(o=i.layer)?void 0:o.id,m={[te$1]:"top-center"===a,[ie]:"bottom-center"===a,[oe]:"top-left"===a,[ne$1]:"bottom-left"===a,[se$1]:"top-right"===a,[re$1]:"bottom-right"===a,[G$a]:h,[$$7]:g,[J$5]:"top-left"===u,[Q$4]:"top-center"===u,[X$3]:"top-right"===u,[Y$3]:"bottom-left"===u,[Z$2]:"bottom-center"===u,[ee$1]:"bottom-right"===u,[le$1]:r,[ae$1]:p};return r$G("div",{class:this.classes(W$5,m),role:"presentation","data-layer-title":_,"data-layer-id":v,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},d?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return r$G("span",{"aria-hidden":"true",class:this.classes(ke,j$r,T$h)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?r$G("div",{key:Xe("loading-container"),role:"presentation",class:z$8,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=g$r(),t={[E$b]:e,[Le]:e,[O$9]:!e,[Ue]:!e};return r$G("span",{"aria-hidden":"true",class:this.classes(ke,t)})}renderPreviousButton(){const{messages:e}=this;return r$G("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(we,De),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=g$r(),t={[O$9]:e,[We]:e,[E$b]:!e,[Te]:!e};return r$G("span",{"aria-hidden":"true",class:this.classes(ke,t)})}renderNextButton(){const{messages:e}=this;return r$G("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(we,je),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:o,selectedFeatureIndex:n}=this.viewModel;return r$G("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(we,Ge),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e,"aria-label":i.menu,title:i.menu},this._getPageText(o,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[V$6]:e,[Ae]:!e,[B$a]:!e&&("top-right"===t||"bottom-right"===t),[P$b]:!e&&("top-left"===t||"bottom-left"===t),[I$f]:!e&&"top-center"===t,[N$8]:!e&&"bottom-center"===t};return r$G("span",{"aria-hidden":"true",class:this.classes(i,ke)})}renderDockButton(){var e,t,i;const{dockEnabled:o,messages:n}=this,s=null==(e=this.viewModel)||null==(t=e.view)?void 0:t.widthBreakpoint,r=o?n.undock:n.dock;return "xsmall"!==s&&(null==(i=this.dockOptions)?void 0:i.buttonEnabled)?r$G("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(we,ye)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:o,messagesCommon:n}=this,s=i?o?n.expand:n.collapse:"",r={[he]:i};return e?r$G("div",{class:this.classes(pe,r),key:e,enterAnimation:this._createFeatureUpdatedAnimation(),id:t,role:i?"button":"heading","aria-label":s,title:s,tabIndex:i?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},r$G("h2",{class:ge,innerHTML:e})):null}renderCloseIcon(){return r$G("span",{"aria-hidden":"true",class:this.classes(ke,S$j)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?r$G("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:we,"aria-label":t.close,title:t.close},this.renderCloseIcon()):null}renderHeader(){return r$G("header",{class:de$1},this.renderTitle(),r$G("div",{class:ce$1},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:o}=this.viewModel;return t&&!i?r$G("article",{key:o,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:_e},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o,messagesCommon:n}=this,s=i?n.close:n.open,{menuActions:r}=o;return r.length?r$G("div",{key:Xe("actions-menu-button"),class:this.classes(we,Fe),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},r$G("span",{"aria-hidden":"true",class:L$g})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:o}=this,{menuActions:n,inlineActions:s}=o;return n.length&&i?r$G("ul",{id:e,role:"menu","aria-labelledby":t,key:Xe("actions"),class:xe,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map((e,t)=>this.renderAction({action:e,index:t+s.length,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return !!e.length&&e.toArray().map((e,t)=>this.renderAction({action:e,index:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,o=!!t.length;return i||o?r$G("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":o.toString(),class:Ce},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?r$G("section",{key:Xe("navigation"),class:this.classes(Ve)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:o}=t,n=!!i.length,s=!!o.length,r={[me]:e,[fe$1]:n,[be]:s};return e||n?r$G("div",{key:Xe("feature-buttons"),class:this.classes(ve,r)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t}=this.viewModel,i=s$v(e.selectedFeatures,{total:t.length});return r$G("section",{key:Xe("menu"),class:Re},r$G("h2",{class:qe},i),r$G("nav",{class:Ke,afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},this.renderFeatureMenu()))}renderPointer(){return this.dockEnabled?null:r$G("div",{key:Xe("pointer"),class:Be,role:"presentation"},r$G("div",{class:this.classes(Se,$$7)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:o,contentId:n,collapsible:s,hasContent:r,contentCollapsed:l}=this,{title:a}=this.viewModel,u="bottom-left"===t||"bottom-center"===t||"bottom-right"===t||"top-left"===i||"top-center"===i||"top-right"===i,d="top-left"===t||"top-center"===t||"top-right"===t||"bottom-left"===i||"bottom-center"===i||"bottom-right"===i,c={[$$7]:e,[K$2]:s,[q$7]:l};return r$G("div",{class:this.classes(H$5,R$c,c),tabIndex:-1,role:"dialog","aria-labelledby":a?o:"","aria-describedby":r&&!l?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},u?this.renderFooter():null,u?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=null==(e=this.viewModel)?void 0:e.content;return t?"string"==typeof t?r$G("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return r$G("span",{key:"text",class:Ie},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),o={[j$r]:e.active,[T$h]:e.active,[ke]:!!t,[Ee]:!e.active&&!!i};return t&&(o[t]=!e.active),r$G("span",{key:"icon","aria-hidden":"true",class:this.classes(ke,o),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,index:i,type:o}=e,n=this._getActionTitle(t),s={[Oe]:"toggle"!==t.type,[Ne]:"toggle"===t.type,[Pe]:"toggle"===t.type&&t.value,[Me]:t.disabled},r=[this.renderActionIcon(t),this.renderActionText(n)],l="menu-item"===o?r$G("li",{key:t,role:"menuitem",tabIndex:0,title:n,"aria-label":n,class:this.classes(we,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r):r$G("div",{key:t,role:"button",tabIndex:0,title:n,"aria-label":n,class:this.classes(we,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":i,onclick:this._triggerAction,onkeydown:this._triggerAction},r);return t.visible?l:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:o}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,r=e===s,l={[$e]:r},a=r?r$G("span",{key:Xe("feature-menu-selected-feature-"+n),title:i.selectedFeature,"aria-label":i.selectedFeature,class:D$b}):null,u=r$G("span",{innerHTML:e.title||o.untitled});return r$G("li",{role:"menuitem",tabIndex:-1,key:Xe("feature-menu-feature-"+n),class:this.classes(l,ze),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},r$G("span",{class:Je},u,a))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?r$G("ol",{class:He,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.map((e,t)=>this.renderFeatureMenuItem(e,t))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:o}=this,{id:n}=e,s=null==i?void 0:i.attributes,r="zoom-to-feature"===n?s$v(e.title,{messages:t}):"remove-selected-feature"===n?s$v(e.title,{messages:o}):e.title;return r&&s?s$v(r,s):r}_getActionClass(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{className:o,image:n}=e,s=n||o?o:U$8;return s&&i?s$v(s,i):s}_getActionImage(e){const{selectedFeature:t}=this,i=null==t?void 0:t.attributes,{image:o}=e;return o&&i?s$v(o,i):o}_createFeatureUpdatedAnimation(){return h$K("enter",ue$1)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if("number"!=typeof e)return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(e=>{this._handles.add(h$F(e,["active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),t);});}_divideActions(){const{allActions:e}=this.viewModel,t=this._getInlineActionCount(),i=null===t,o=0===t;return {inlineActions:i?e.slice(0):o?new L$2:e.slice(0,t),menuActions:i?new L$2:o?e.slice(0):e.slice(t)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0;}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0;}_setTitleFromFeatureWidget(e){const{selectedFeatureWidget:t}=this;t&&(this.viewModel.title=e||"");}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e);}_handleFeatureMenuKeyup(e){"Escape"===i$j(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender());}_handleActionMenuKeyup(e){"Escape"===i$j(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender());}_handleFeatureMenuItemKeyup(e){const t=i$j(e),{_featureMenuNode:i}=this,o=e.currentTarget["data-feature-index"];if(!i)return;const n=i.querySelectorAll("li"),s=n.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();n[n.length-1].focus();}else {e.stopPropagation();n[0].focus();}else {e.stopPropagation();n[(o+1+s)%s].focus();}else {e.stopPropagation();n[(o-1+s)%s].focus();}}_handleActionMenuItemKeyup(e){const t=i$j(e),{_actionsMenuNode:i}=this,o=e.currentTarget["data-action-index"];if(!i)return;const n=i.querySelectorAll("li"),s=n.length;if("ArrowUp"!==t)if("ArrowDown"!==t)if("Home"!==t)if("End"!==t);else {e.stopPropagation();n[n.length-1].focus();}else {e.stopPropagation();n[0].focus();}else {e.stopPropagation();n[(o+1+s)%s].focus();}else {e.stopPropagation();n[(o-1+s)%s].focus();}}_handleMainKeyup(e){const t=i$j(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next());}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t);}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide());}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide();}_getIconStyles(e){return {"background-image":e?`url(${e})`:""}}_addSelectedFeatureIndexHandle(){const e=h$F(this,"viewModel.selectedFeatureIndex",(e,t)=>this._selectedFeatureIndexUpdated(e,t));this._handles.add(e,"selected-index");}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&-1!==e&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1);}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null;}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:o,side:n,view:s}=e;if(isNaN(i)||isNaN(t)||!s||!o)return !1;const r=s.padding;return "right"===n&&o.x+i/2>s.width-r.right||("left"===n&&o.x-i/2<r.left||("top"===n&&o.y-t<r.top||"bottom"===n&&o.y+t>s.height-r.bottom))}_calculateAutoAlignment(e){if("auto"!==e)return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:o,viewModel:n}=this,{screenLocation:s,view:r}=n;if(!s||!r||!i)return "top-center";if(!this._isScreenLocationWithinView(s,r))return this._get("currentAlignment")||"top-center";function l(e){return parseInt(e.replace(/[^-\d\.]/g,""),10)}const a=o?window.getComputedStyle(o,null):null,u=a?l(a.getPropertyValue("max-height")):0,d=a?l(a.getPropertyValue("height")):0,{height:c,width:p}=i.getBoundingClientRect(),h=p+t,g=Math.max(c,u,d)+t,_=this._isOutsideView({popupHeight:g,popupWidth:h,screenLocation:s,side:"right",view:r}),v=this._isOutsideView({popupHeight:g,popupWidth:h,screenLocation:s,side:"left",view:r}),m=this._isOutsideView({popupHeight:g,popupWidth:h,screenLocation:s,side:"top",view:r}),f=this._isOutsideView({popupHeight:g,popupWidth:h,screenLocation:s,side:"bottom",view:r});return v?m?"bottom-right":"top-right":_?m?"bottom-left":"top-left":m?f?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return "function"==typeof e?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment());}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition());}_calculatePositionResult(e){const t=["left","right"];return g$r()&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return "function"==typeof e?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(e=this.dockOptions)?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if("auto"!==e)return e;const i=null==(t=this.viewModel)?void 0:t.view,o=g$r()?"top-left":"top-right";if(!i)return o;const n=i.padding||{left:0,right:0,top:0,bottom:0},s=i.width-n.left-n.right,{breakpoints:r}=i;return r&&s<=r.xsmall?"bottom-center":o}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),o=this._calculatePositionStyle(t,i);o&&(e.style.top=o.top,e.style.left=o.left,e.style.bottom=o.bottom,e.style.right=o.right);}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return "top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+i:e}_calculateAlignmentPosition(e,t,i,o){const{currentAlignment:n,_pointerOffsetInPx:s}=this,r=o/2,l=i.height-t,a=i.width-e,{padding:u}=this.view;return "bottom-center"===n?{top:t+s-u.top,left:e-r-u.left}:"top-left"===n?{bottom:l+s-u.bottom,right:a+s-u.right}:"bottom-left"===n?{top:t+s-u.top,right:a+s-u.right}:"top-right"===n?{bottom:l+s-u.bottom,left:e+s-u.left}:"bottom-right"===n?{top:t+s-u.top,left:e+s-u.left}:"top-center"===n?{bottom:l+s-u.bottom,left:e-r-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:o}=this;if(!o)return;if(i)return {left:"",top:"",right:"",bottom:""};if(!e||!t)return;const n=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,o,n);return s?{top:void 0!==s.top?s.top+"px":"auto",left:void 0!==s.left?s.left+"px":"auto",bottom:void 0!==s.bottom?s.bottom+"px":"auto",right:void 0!==s.right?s.right+"px":"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear());}_viewReadyChange(e,t){if(e){const e=this.get("viewModel.view");this._wireUpView(e);}else t&&(this.close(),this.clear());}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions);}_dockingThresholdCrossed(e,t,i){const[o,n]=e,[s,r]=t,{width:l,height:a}=i;return o<=l&&s>l||o>l&&s<=l||n<=a&&r>a||n>a&&r<=a}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},o=i.left+i.right,n=i.top+i.bottom,s=[],r=[];s[0]=e[0]-o,s[1]=e[1]-n,r[0]=t[0]-o,r[1]=t[1]-n;const{dockOptions:l}=this,a=l.breakpoint;this._dockingThresholdCrossed(s,r,a)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition();}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus());}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");if(t.length){t[0].focus();}}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus());}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus());}_featureMenuViewportNodeUpdated(e){e&&(e.scrollTop=0);}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i;}_shouldDockAtCurrentViewSize(e){const t=e.breakpoint,{width:i,height:o}=this.get("viewModel.view.ui");if(isNaN(i)||isNaN(o))return !1;const n=t.hasOwnProperty("width")&&i<=t.width,s=t.hasOwnProperty("height")&&o<=t.height;return n||s}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e));}_getPageText(e,t){return this.featureNavigationVisible?s$v(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,"popup-spinner"),e.destroy(),this._spinner=null);}_createSpinner(e){e&&(this._spinner=new v$n({view:e}),e.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}));}_toggleCollapsed(){this.collapsed=!this.collapsed;}_close(){this.close(),this.view&&this.view.focus();}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender();}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e;}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e;}_triggerAction(e){const t=e.currentTarget["data-action-index"],i=this.viewModel.allActions.getItemAt(t);i&&"toggle"===i.type&&(i.value=!i.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(t);}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender();}_next(){this.next();}_previous(){this.previous();}};e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],et$2.prototype,"actionsMenuId",null),e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],et$2.prototype,"actionsMenuButtonId",null),e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],et$2.prototype,"featureMenuId",null),e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],et$2.prototype,"titleId",null),e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],et$2.prototype,"contentId",null),e([y$5({readOnly:!0,dependsOn:["selectedFeatureWidget","selectedFeatureWidget.viewModel","selectedFeatureWidget.viewModel.waitingForContent","selectedFeatureWidget.viewModel.content","viewModel.content"]}),o$U()],et$2.prototype,"hasContent",null),e([y$5({readOnly:!0,dependsOn:["viewModel.active","viewModel.featureCount","visibleElements.featureNavigation"]}),o$U()],et$2.prototype,"featureNavigationVisible",null),e([y$5({readOnly:!0,dependsOn:["collapseEnabled","viewModel.title","hasContent"]}),o$U()],et$2.prototype,"collapsible",null),e([y$5({readOnly:!0,dependsOn:["featureNavigationVisible","featureMenuOpen"]}),o$U()],et$2.prototype,"featureMenuVisible",null),e([y$5({readOnly:!0,dependsOn:["collapsible","featureMenuVisible","collapsed"]}),o$U()],et$2.prototype,"contentCollapsed",null),e([y$5({readOnly:!0,dependsOn:["featureNavigationVisible","maxInlineActions","viewModel.allActions","viewModel.allActions.length"]}),o$U()],et$2.prototype,"dividedActions",null),e([o$M("viewModel.actions"),o$U()],et$2.prototype,"actions",void 0),e([y$5({dependsOn:["viewModel.active"]}),o$U()],et$2.prototype,"actionsMenuOpen",null),e([y$5()],et$2.prototype,"alignment",void 0),e([o$M("viewModel.autoCloseEnabled")],et$2.prototype,"autoCloseEnabled",void 0),e([o$M("viewModel.autoOpenEnabled")],et$2.prototype,"autoOpenEnabled",void 0),e([o$M("viewModel.defaultPopupTemplateEnabled")],et$2.prototype,"defaultPopupTemplateEnabled",void 0),e([o$M("viewModel.content"),o$U()],et$2.prototype,"content",void 0),e([y$5(),o$U()],et$2.prototype,"collapsed",void 0),e([y$5(),o$U()],et$2.prototype,"collapseEnabled",void 0),e([y$5({readOnly:!0,dependsOn:["dockEnabled","alignment","viewModel.active"]}),o$U()],et$2.prototype,"currentAlignment",null),e([y$5({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions","viewModel.active"]}),o$U()],et$2.prototype,"currentDockPosition",null),e([y$5(),o$U()],et$2.prototype,"dockOptions",null),e([y$5(),o$U()],et$2.prototype,"dockEnabled",void 0),e([o$M("viewModel.featureCount"),o$U()],et$2.prototype,"featureCount",void 0),e([y$5(),o$U()],et$2.prototype,"featureMenuOpen",void 0),e([o$M("viewModel.features"),o$U()],et$2.prototype,"features",void 0),e([y$5(),o$U()],et$2.prototype,"featureNavigationEnabled",null),e([o$M("viewModel.goToOverride")],et$2.prototype,"goToOverride",void 0),e([o$M("viewModel.highlightEnabled")],et$2.prototype,"highlightEnabled",void 0),e([o$M("viewModel.location"),o$U()],et$2.prototype,"location",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],et$2.prototype,"label",void 0),e([y$5(),o$U()],et$2.prototype,"maxInlineActions",void 0),e([y$5(),o$U(),e$T("esri/widgets/Popup/t9n/Popup")],et$2.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/t9n/common")],et$2.prototype,"messagesCommon",void 0),e([o$M("viewModel.promises")],et$2.prototype,"promises",void 0),e([o$M("viewModel.selectedFeature"),o$U()],et$2.prototype,"selectedFeature",void 0),e([o$M("viewModel.selectedFeatureIndex"),o$U()],et$2.prototype,"selectedFeatureIndex",void 0),e([y$5({readOnly:!0,dependsOn:["viewModel.selectedFeatureViewModel","visibleElements"]}),o$U()],et$2.prototype,"selectedFeatureWidget",null),e([y$5()],et$2.prototype,"spinnerEnabled",void 0),e([o$M("viewModel.title"),o$U()],et$2.prototype,"title",void 0),e([o$M("viewModel.updateLocationEnabled")],et$2.prototype,"updateLocationEnabled",void 0),e([o$M("viewModel.view")],et$2.prototype,"view",void 0),e([y$5({type:L$f}),o$U(["viewModel.active","viewModel.view.widthBreakpoint","viewModel.allActions","viewModel.screenLocation","viewModel.screenLocationEnabled","viewModel.state","viewModel.pendingPromisesCount","viewModel.promiseCount","viewModel.waitingForResult"]),t$O(["triggerAction","trigger-action"])],et$2.prototype,"viewModel",void 0),e([o$M("viewModel.visible"),o$U()],et$2.prototype,"visible",void 0),e([y$5(),o$U()],et$2.prototype,"visibleElements",void 0),e([i$b("visibleElements")],et$2.prototype,"castVisibleElements",null),e([n$Z()],et$2.prototype,"_toggleCollapsed",null),e([n$Z()],et$2.prototype,"_close",null),e([n$Z()],et$2.prototype,"_toggleDockEnabled",null),e([n$Z()],et$2.prototype,"_toggleFeatureMenu",null),e([n$Z()],et$2.prototype,"_toggleActionsMenu",null),e([n$Z()],et$2.prototype,"_triggerAction",null),e([n$Z()],et$2.prototype,"_selectFeature",null),e([n$Z()],et$2.prototype,"_next",null),e([n$Z()],et$2.prototype,"_previous",null),et$2=e([n$e("esri.widgets.Popup")],et$2);var tt$1=et$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$16=[0,0];function l$11(e){const t=(e.ownerDocument||window.document).defaultView,s=e.getBoundingClientRect();return u$16[0]=s.left+t.pageXOffset,u$16[1]=s.top+t.pageYOffset,u$16}function p$1t(e){e&&(t$L(e),e.parentNode&&e.parentNode.removeChild(e));}const c$1C=h=>{let u=class extends h{constructor(...e){super(...e),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",e=>{const t=this.surface;t&&t.setAttribute("data-cursor",e);}),this.watch("interacting",e=>{const t=this.surface;t&&t.setAttribute("data-interacting",e.toString());})]);}initialize(){this.handles.add(this.watch("ui",(e,t)=>this._handleUIChange(e,t))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))]);}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null);}set container(e){const t=this._get("container");if(t===e)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),t&&(t.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),p$1t(this.root),this._set("root",null),r$D(this.userContent,t),p$1t(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view");const t=document.createElement("div");t.className="esri-view-user-storage",r$D(e,t),e.appendChild(t),this._set("userContent",t);const r=document.createElement("div");r.className="esri-view-root",e.insertBefore(r,e.firstChild),this._set("root",r);const h=document.createElement("div");h.className="esri-view-surface",h.setAttribute("role","application"),h.tabIndex=0,r.appendChild(h),this._set("surface",h);const d=new n$Y;r.appendChild(d.surface),this._set("overlay",d),d.watch("needsRender",e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=v$6({render:()=>{this.overlay.render();}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null);}),this.forceDOMReadyCycle(),this.handles.add(d$C(this,"size",e=>{const[t,s]=e,i="esri-view-surface--inset-outline";t>=document.body.clientWidth||s>=document.body.clientHeight?h.classList.add(i):h.classList.remove(i);}),s),this._set("container",e),this._startMeasuring();}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null);}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get popup(){return this._get("popup")||new tt$1({view:this})}set popup(e){const t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e);}get size(){return [this.width,this.height]}blur(){this.surface&&this.surface.blur();}focus(){this.surface&&this.surface.focus();}pageToContainer(e,t,s){const i=this.position;return e-=i[0],t-=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}containerToPage(e,t,s){const i=this.position;return e+=i[0],t+=i[1],s?(s[0]=e,s[1]=t):s=[e,t],s}_handleUIChange(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e);}_wireUI(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([d$C(this,"root",t=>{e.container=t?function(e){const t=document.createElement("div");return e.appendChild(t),t}(t):null;}),d$C(this,"popup",(t,s)=>{const i="popup";s&&e.remove(s,i),t&&(t.view=e.view,e.add(t,{key:i,position:"manual"}));})],"ui"));}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1);}_startMeasuring(){const e=this._freqInfo;e.freq=16,e.time=750,this.handles.add([(()=>{const t=()=>{e.freq=16,e.time=750;};return window.addEventListener("resize",t),{remove(){window.removeEventListener("resize",t);}}})(),v$6({prepare:e=>{const t=this._measure(),s=this._freqInfo;if(s.time+=e.deltaTime,t&&(s.freq=16,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const i=this._position();s.freq=i||t?16:Math.min(750,2*s.freq),!t&&s.freq>=512&&this._get("resizing")&&this._set("resizing",!1);}})],"measuring"),this._measure(),this._position();}_measure(){const e=this.container,t=e?e.clientWidth:0,s=e?e.clientHeight:0;if(0===t||0===s)return this.suspended||this._set("suspended",!0),!1;const i=this.width,o=this.height;return t===i&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:o,width:t,height:s}),!0)}_position(){const e=this.container,t=this.position,s=l$11(e);return (!t||s[0]!==t[0]||s[1]!==t[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return e([y$5({value:null,cast:e=>e$R(e)})],u.prototype,"container",null),e([y$5({readOnly:!0,dependsOn:["surface"]})],u.prototype,"focused",null),e([y$5({readOnly:!0})],u.prototype,"height",void 0),e([y$5({type:tt$1})],u.prototype,"popup",null),e([y$5({type:n$Y})],u.prototype,"overlay",void 0),e([y$5({readOnly:!0})],u.prototype,"position",void 0),e([y$5({readOnly:!0})],u.prototype,"resizing",void 0),e([y$5({readOnly:!0})],u.prototype,"root",void 0),e([y$5({value:null,dependsOn:["width","height"],readOnly:!0})],u.prototype,"size",null),e([y$5({readOnly:!0})],u.prototype,"surface",void 0),e([y$5({readOnly:!0})],u.prototype,"suspended",void 0),e([y$5()],u.prototype,"ui",void 0),e([y$5({readOnly:!0})],u.prototype,"userContent",void 0),e([y$5({readOnly:!0})],u.prototype,"width",void 0),e([y$5()],u.prototype,"widthBreakpoint",void 0),u=e([n$e("esri.views.DOMContainer")],u),u};function m$W(e){return e&&"focus"in e}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$12={widthBreakpoint:{getValue(e){const i=e.viewSize[0],s=e.breakpoints,r=this.values;return i<=s.xsmall?r.xsmall:i<=s.small?r.small:i<=s.medium?r.medium:i<=s.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const i=e.viewSize[1],s=e.breakpoints,r=this.values;return i<=s.xsmall?r.xsmall:i<=s.small?r.small:i<=s.medium?r.medium:i<=s.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const i=e.viewSize,s=i[0],r=i[1],t=this.values;return r>=s?t.portrait:t.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h$W={xsmall:544,small:768,medium:992,large:1200};function o$14(e,i){return i?l$12[e].valueToClassName[i].split(" "):[]}const n$1f=n=>{let m=class extends n{constructor(...e){super(...e),this._breakpointsHandles=new u$A,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=h$W;}initialize(){this._breakpointsHandles.add(d$C(this,["breakpoints","size"],this._updateClassNames));}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null);}set breakpoints(e){if(e===this._get("breakpoints"))return;const i=function(e){const i=e;return i&&i.xsmall<i.small&&i.small<i.medium&&i.medium<i.large}(e);if(!i){const e=JSON.stringify(h$W,null,2);console.warn("provided breakpoints are not valid, using defaults:"+e);}e=i?e:h$W,this._set("breakpoints",{...e});}_updateClassNames(){if(!this.container)return;const e=o$o.acquire(),i=o$o.acquire();let s,t=!1;for(s in l$12){const r=this[s],a=l$12[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==a&&(t=!0,this[s]=a,o$14(s,r).forEach(e=>i.push(e)),o$14(s,a).forEach(i=>e.push(i)));}t&&(this._applyClassNameChanges(e,i),o$o.release(e),o$o.release(i));}_applyClassNameChanges(e,i){const s=this.container;s&&(i.forEach(e=>s.classList.remove(e)),e.forEach(e=>s.classList.add(e)));}_removeActiveClassNames(){const e=this.container;if(!e)return;let i;for(i in l$12)o$14(i,this[i]).forEach(i=>e.classList.remove(i));}};return e([y$5()],m.prototype,"breakpoints",null),e([y$5()],m.prototype,"orientation",void 0),e([y$5()],m.prototype,"widthBreakpoint",void 0),e([y$5()],m.prototype,"heightBreakpoint",void 0),m=e([n$e("esri.views.BreakpointsOwner")],m),m};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$$=class extends h$c{constructor(o){super(o),this.factor=1.5,this.offsetX=0,this.offsetY=0,this.position=null,this.visible=!1;}get version(){return (this._get("version")||0)+1}};e([y$5({type:Number})],e$$.prototype,"factor",void 0),e([y$5({type:Number})],e$$.prototype,"offsetX",void 0),e([y$5({type:Number})],e$$.prototype,"offsetY",void 0),e([y$5()],e$$.prototype,"position",void 0),e([y$5({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],e$$.prototype,"version",null),e([y$5({type:Boolean})],e$$.prototype,"visible",void 0),e$$=e([n$e("esri.views.Magnifier")],e$$);var i$1u=e$$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1g(){return [0,0,0]}function r$N(n){return [n[0],n[1],n[2]]}function t$Z(n,r,t){return [n,r,t]}function e$10(n){const r=[0,0,0],t=Math.min(3,n.length);for(let e=0;e<t;++e)r[e]=n[e];return r}function u$17(n,r){return new Float64Array(n,r,3)}function a$1i(){return [0,0,0]}function o$15(){return t$Z(1,1,1)}function s$$(){return t$Z(1,0,0)}function c$1D(){return t$Z(0,1,0)}function i$1v(){return t$Z(0,0,1)}const f$_=[0,0,0],l$13=o$15(),_$h=s$$(),N$9=c$1D(),O$a=i$1v();var U$9=Object.freeze({__proto__:null,create:n$1g,clone:r$N,fromValues:t$Z,fromArray:e$10,createView:u$17,zeros:a$1i,ones:o$15,unitX:s$$,unitY:c$1D,unitZ:i$1v,ZEROS:f$_,ONES:l$13,UNIT_X:_$h,UNIT_Y:N$9,UNIT_Z:O$a});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$1j=1e-6,t$_=Math.random,e$11=Math.PI/180,n$1h=180/Math.PI;function r$O(a){return a*e$11}function s$10(a){return a*n$1h}function o$16(a,t){return Math.abs(a-t)<=1e-6*Math.max(1,Math.abs(a),Math.abs(t))}var u$18=Object.freeze({__proto__:null,EPSILON:1e-6,RANDOM:t$_,toRadian:r$O,toDegree:s$10,equals:o$16});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$11(t){const n=t[0],a=t[1],s=t[2];return Math.sqrt(n*n+a*a+s*s)}function r$P(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function o$17(t,n,a,s){return t[0]=n,t[1]=a,t[2]=s,t}function u$19(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t}function c$1E(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t}function e$12(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t}function i$1w(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t}function h$X(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function M$j(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function f$$(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t}function l$14(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t}function m$X(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function d$Y(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function b$p(t,n,a,s){return t[0]=n[0]+a[0]*s,t[1]=n[1]+a[1]*s,t[2]=n[2]+a[2]*s,t}function q$8(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return Math.sqrt(a*a+s*s+r*r)}function x$l(t,n){const a=n[0]-t[0],s=n[1]-t[1],r=n[2]-t[2];return a*a+s*s+r*r}function p$1u(t){const n=t[0],a=t[1],s=t[2];return n*n+a*a+s*s}function v$o(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function g$D(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function j$s(t,n){const a=n[0],s=n[1],r=n[2];let o=a*a+s*s+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function z$9(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function _$i(t,n,a){const s=n[0],r=n[1],o=n[2],u=a[0],c=a[1],e=a[2];return t[0]=r*e-o*c,t[1]=o*u-s*e,t[2]=s*c-r*u,t}function y$F(t,n,a,s){const r=n[0],o=n[1],u=n[2];return t[0]=r+s*(a[0]-r),t[1]=o+s*(a[1]-o),t[2]=u+s*(a[2]-u),t}function A$g(t,n,a,s,r,o){const u=o*o,c=u*(2*o-3)+1,e=u*(o-2)+o,i=u*(o-1),h=u*(3-2*o);return t[0]=n[0]*c+a[0]*e+s[0]*i+r[0]*h,t[1]=n[1]*c+a[1]*e+s[1]*i+r[1]*h,t[2]=n[2]*c+a[2]*e+s[2]*i+r[2]*h,t}function D$c(t,n,a,s,r,o){const u=1-o,c=u*u,e=o*o,i=c*u,h=3*o*c,M=3*e*u,f=e*o;return t[0]=n[0]*i+a[0]*h+s[0]*M+r[0]*f,t[1]=n[1]*i+a[1]*h+s[1]*M+r[1]*f,t[2]=n[2]*i+a[2]*h+s[2]*M+r[2]*f,t}function E$c(t,n){n=n||1;const s=2*t$_()*Math.PI,r=2*t$_()-1,o=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(s)*o,t[1]=Math.sin(s)*o,t[2]=r*n,t}function I$g(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=a[0]*s+a[4]*r+a[8]*o+a[12],t[1]=a[1]*s+a[5]*r+a[9]*o+a[13],t[2]=a[2]*s+a[6]*r+a[10]*o+a[14],t}function L$h(t,n,a){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0]+r*a[3]+o*a[6],t[1]=s*a[1]+r*a[4]+o*a[7],t[2]=s*a[2]+r*a[5]+o*a[8],t}function P$c(t,n,a){const s=a[0],r=a[1],o=a[2],u=a[3],c=n[0],e=n[1],i=n[2];let h=r*i-o*e,M=o*c-s*i,f=s*e-r*c,l=r*f-o*M,m=o*h-s*f,d=s*M-r*h;const b=2*u;return h*=b,M*=b,f*=b,l*=2,m*=2,d*=2,t[0]=c+h+l,t[1]=e+M+m,t[2]=i+f+d,t}function O$b(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),o[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function Q$5(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),o[1]=r[1],o[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function R$d(t,n,a,s){const r=[],o=[];return r[0]=n[0]-a[0],r[1]=n[1]-a[1],r[2]=n[2]-a[2],o[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),o[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),o[2]=r[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t}function k$k(t,n){r$P(w$o,t),r$P(B$b,n),j$s(w$o,w$o),j$s(B$b,B$b);const a=z$9(w$o,B$b);return a>1?0:a<-1?Math.PI:Math.acos(a)}const w$o=n$1g(),B$b=n$1g();function C$c(t){return "vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F$f(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function G$b(t,a){const s=t[0],r=t[1],o=t[2],u=a[0],c=a[1],e=a[2];return Math.abs(s-u)<=a$1j*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=a$1j*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-e)<=a$1j*Math.max(1,Math.abs(o),Math.abs(e))}let H$6=c$1E,J$6=e$12,K$3=i$1w,N$a=q$8,X$4=x$l,Y$4=s$11,Z$3=p$1u;var S$k=Object.freeze({__proto__:null,length:s$11,copy:r$P,set:o$17,add:u$19,subtract:c$1E,multiply:e$12,divide:i$1w,ceil:h$X,floor:M$j,min:f$$,max:l$14,round:m$X,scale:d$Y,scaleAndAdd:b$p,distance:q$8,squaredDistance:x$l,squaredLength:p$1u,negate:v$o,inverse:g$D,normalize:j$s,dot:z$9,cross:_$i,lerp:y$F,hermite:A$g,bezier:D$c,random:E$c,transformMat4:I$g,transformMat3:L$h,transformQuat:P$c,rotateX:O$b,rotateY:Q$5,rotateZ:R$d,angle:k$k,str:C$c,exactEquals:F$f,equals:G$b,sub:H$6,mul:J$6,div:K$3,dist:N$a,sqrDist:X$4,len:Y$4,sqrLen:Z$3});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function q$9(n,i){const o=s$11(n),s=g$g(n[2]/o),a=Math.atan2(n[1]/o,n[0]/o);return o$17(i,o,s,a),i}function j$t(t,n,i){const o=i[0]-n[0],r=i[1]-n[1],s=i[2]-n[2];let a=o*o+r*r+s*s;return a?(a=1/Math.sqrt(a),t[0]=o*a,t[1]=r*a,t[2]=s*a,t):(t[0]=0,t[1]=0,t[2]=0,t)}class v$p{constructor(t,n){this.min=t,this.max=n,this.range=n-t;}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,i,o=0,r=!1){return (i-=o)<t?i+=this.ndiff(t-i):i>n&&(i-=this.ndiff(i-n)),r&&i===n&&(i=t),i+o}normalize(t,n=0,i=!1){return this._normalize(this.min,this.max,t,n,i)}clamp(t,n=0){return e$z(t-n,this.min,this.max)+n}monotonic(t,n,i){return t<n?n:n+this.ndiff(t-n,i)}minimalMonotonic(t,n,i){return this._normalize(t,t+this.range,n,i)}center(t,n,i){return n=this.monotonic(t,n,i),this.normalize((t+n)/2,i)}diff(t,n,i){return this.monotonic(t,n,i)-t}shortestSignedDiff(t,n){t=this.normalize(t);const i=(n=this.normalize(n))-t,o=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(i)<Math.abs(o)?i:o}contains(t,n,i){return n=this.minimalMonotonic(t,n),(i=this.minimalMonotonic(t,i))>t&&i<n}}function U$a(t){for(const n in t){const i=t[n];i instanceof Function&&(t[n]=i.bind(t));}return t}const y$G=U$a(new v$p(0,2*Math.PI)),A$h=U$a(new v$p(-Math.PI,Math.PI)),B$c=U$a(new v$p(0,360));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$1a;let m$Y=u$1a=class extends a$h{constructor(...o){super(...o),this.position=new _$7([0,0,0]),this.heading=0,this.tilt=0,this.fov=55;}normalizeCtorArgs(o,r,t,e){if(o&&"object"==typeof o&&("x"in o||Array.isArray(o))){const i={position:o};return null!=r&&(i.heading=r),null!=t&&(i.tilt=t),null!=e&&(i.fov=e),i}return o}writePosition(o,t,e,i){const s=o.clone();s.x=a$6(o.x||0),s.y=a$6(o.y||0),s.z=o.hasZ?a$6(o.z||0):o.z,t[e]=s.write(null,i);}readPosition(o,t){const e=new _$7;return e.read(o,t),e.x=a$6(e.x||0),e.y=a$6(e.y||0),e.z=e.hasZ?a$6(e.z||0):e.z,e}equals(o){return !!o&&(this.tilt===o.tilt&&this.heading===o.heading&&this.fov===o.fov&&this.position.equals(o.position))}clone(){return new u$1a({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};e([y$5({type:_$7,json:{write:{isRequired:!0}}})],m$Y.prototype,"position",void 0),e([o$r("position")],m$Y.prototype,"writePosition",null),e([e$l("position")],m$Y.prototype,"readPosition",null),e([y$5({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),i$b(o=>B$c.normalize(a$6(o)))],m$Y.prototype,"heading",void 0),e([y$5({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),i$b(o=>e$z(a$6(o),-180,180))],m$Y.prototype,"tilt",void 0),e([y$5({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],m$Y.prototype,"fov",void 0),m$Y=u$1a=e([n$e("esri.Camera")],m$Y);var d$Z=m$Y;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$1F;let m$Z=c$1F=class extends a$h{constructor(r){super(r),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null;}castRotation(r){return (r%=360)<0&&(r+=360),r}clone(){return new c$1F({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})}};function n$1i(){return {enabled:!this.camera}}e([y$5({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:n$1i}}}}})],m$Z.prototype,"rotation",void 0),e([i$b("rotation")],m$Z.prototype,"castRotation",null),e([y$5({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:n$1i}}}}})],m$Z.prototype,"scale",void 0),e([y$5({types:i$w,json:{read:p$i,write:!0,origins:{"web-scene":{read:p$i,write:{overridePolicy:n$1i}}}}})],m$Z.prototype,"targetGeometry",void 0),e([y$5({type:d$Z,json:{write:!0}})],m$Z.prototype,"camera",void 0),m$Z=c$1F=e([n$e("esri.Viewpoint")],m$Z);var l$15=m$Z;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$Q(n=I$h){return [n[0],n[1],n[2],n[3]]}function i$1x(n){return [n[0],n[1],n[2],n[3]]}function e$13(n,t,i,e,u=r$Q()){return u[0]=n,u[1]=t,u[2]=i,u[3]=e,u}function u$1b(n,t=r$Q()){return t[0]=n.xmin,t[1]=n.ymin,t[2]=n.xmax,t[3]=n.ymax,t}function a$1k(n,r){return new z$4({xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:r})}function h$Y(n){return n[0]>=n[2]?0:n[2]-n[0]}function x$m(n){return n[1]>=n[3]?0:n[3]-n[1]}function F$g(n,t){return Math.max(t[0],n[0])<=Math.min(t[2],n[2])&&Math.max(t[1],n[1])<=Math.min(t[3],n[3])}function j$u(n,t){return t[0]>=n[0]&&t[2]<=n[2]&&t[1]>=n[1]&&t[3]<=n[3]}function E$d(n,t,r=n){return r[0]=n[0]-t,r[1]=n[1]-t,r[2]=n[2]+t,r[3]=n[3]+t,r}function A$i(n){return 4===n.length}const H$7=[1/0,1/0,-1/0,-1/0],I$h=[0,0,0,0];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$16;let p$1v=l$16=class extends a$h{constructor(e){super(e),this.level=0,this.levelValue=null,this.resolution=0,this.scale=0;}clone(){return new l$16({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}};e([y$5({type:N,json:{write:!0}})],p$1v.prototype,"level",void 0),e([y$5({type:String,json:{write:!0}})],p$1v.prototype,"levelValue",void 0),e([y$5({type:Number,json:{write:!0}})],p$1v.prototype,"resolution",void 0),e([y$5({type:Number,json:{write:!0}})],p$1v.prototype,"scale",void 0),p$1v=l$16=e([n$e("esri.layers.support.LOD")],p$1v);var i$1y=p$1v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var v$q;const w$p=new t$q({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let j$v=v$q=class extends a$h{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null;}static create(e={size:256,spatialReference:w$5.WebMercator}){const t=e.resolutionFactor||1,o=e.scales,r=e.size||256,s=e.spatialReference||w$5.WebMercator;if(!T$4(s)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push({level:t,scale:r,resolution:r});}else {let t=5e-4;for(let o=23;o>=0;o--)e.unshift({level:o,scale:t,resolution:t}),t*=2;}return new v$q({dpi:96,lods:e,origin:new _$7(0,0,s),size:[r,r],spatialReference:s})}const i=M$4(s),l=e.origin?new _$7({x:e.origin.x,y:e.origin.y,spatialReference:s}):new _$7(i?{x:i.origin[0],y:i.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),n=1/(39.37*R$7(s)*96),u=[];if(o)for(let e=0;e<o.length;e++){const t=o[e],r=t*n;u.push({level:e,scale:t,resolution:r});}else {let e=S$3(s)?512/r*591657527.5917094:256/r*591657527.591555;const o=Math.ceil(24/t);u.push({level:0,scale:e,resolution:e*n});for(let r=1;r<o;r++){const o=e/Math.pow(2,t),s=o*n;u.push({level:r,scale:o,resolution:s}),e=o;}}return new v$q({dpi:96,lods:u,origin:l,size:[r,r],spatialReference:s})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=M$4(e);return e.isWrappable&&Math.abs(o.origin[0]-t.x)<=o.dx}return !1}readOrigin(e,t){return _$7.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[];this._levelToLOD={},e&&(t=-1/0,o=1/0,e.forEach(e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,this._levelToLOD[e.level]=e;})),this._set("scales",r),this._set("minScale",t),this._set("maxScale",o),this._set("lods",e),this._initializeUpsampleLevels();}readSize(e,t){return [t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0];}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];{const o=Math.round(e-.5),r=Math.round(e);return t[r]+(r-e)*(t[o]-t[r])}}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+1-(e-s)/(o-s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,r){const s=this.lodAt(e);if(!s)return null;let i,l;if("number"==typeof t)i=t,l=o;else if(E$3(t.spatialReference,this.spatialReference))i=t.x,l=t.y,r=o;else {const e=h$d(t,this.spatialReference);if(!e)return null;i=e.x,l=e.y,r=o;}const n=s.resolution*this.size[0],p=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:r$Q()}),r.level=e,r.row=Math.floor((this.origin.y-l)/p+.001),r.col=Math.floor((i-this.origin.x)/n+.001),this.updateTileInfo(r),r}updateTileInfo(e){const t=this.lodAt(e.level);if(!t)return;const o=t.resolution*this.size[0],r=t.resolution*this.size[1];e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=r$Q()),e.extent[0]=this.origin.x+e.col*o,e.extent[1]=this.origin.y-(e.row+1)*r,e.extent[2]=e.extent[0]+o,e.extent[3]=e.extent[1]+r;}upsampleTile(e){const t=this._upsampleLevels[e.level];return !(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:o}=this.lodAt(t.level),r=o*this.size[0],s=o*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return v$q.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r;}}};e([y$5({type:Number,json:{write:!0}})],j$v.prototype,"compressionQuality",void 0),e([y$5({type:Number,json:{write:!0}})],j$v.prototype,"dpi",void 0),e([y$5({type:String,json:{read:w$p.read,write:w$p.write,origins:{"web-scene":{read:!1,write:!1}}}})],j$v.prototype,"format",void 0),e([y$5({readOnly:!0,dependsOn:["spatialReference","origin"]})],j$v.prototype,"isWrappable",null),e([y$5({type:_$7,json:{write:!0}})],j$v.prototype,"origin",void 0),e([e$l("origin")],j$v.prototype,"readOrigin",null),e([y$5({type:[i$1y],value:null,json:{write:!0}})],j$v.prototype,"lods",null),e([y$5({readOnly:!0})],j$v.prototype,"minScale",void 0),e([y$5({readOnly:!0})],j$v.prototype,"maxScale",void 0),e([y$5({readOnly:!0})],j$v.prototype,"scales",void 0),e([y$5({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],j$v.prototype,"size",void 0),e([e$l("size",["rows","cols"])],j$v.prototype,"readSize",null),e([o$r("size",{cols:{type:N},rows:{type:N}})],j$v.prototype,"writeSize",null),e([y$5({type:w$5,json:{write:!0}})],j$v.prototype,"spatialReference",void 0),j$v=v$q=e([n$e("esri.layers.support.TileInfo")],j$v);var x$n=j$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$1w;const d$_=o$B()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),u$1c=d$_.jsonValues.slice();O$2(u$1c,"orthometric");const g$E=o$B()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let m$_=p$1w=class extends a$h{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null;}writeHeightModel(e,t,r){return d$_.write(e,t,r)}readHeightModel(e,t,r){const o=d$_.read(e);return o||(r&&r.messages&&r.messages.push(function(e,t){return new t$8("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(e,{context:r})),null)}readHeightUnit(e,t,r){const o=g$E.read(e);return o||(r&&r.messages&&r.messages.push(y$H(e,{context:r})),null)}readHeightUnitService(e,t,r){const o=M$d(e)||g$E.read(e);return o||(r&&r.messages&&r.messages.push(y$H(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new p$1w({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return !!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=E$7(t);return new p$1w({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new p$1w;return t.read(e,{origin:"web-scene"}),t}};function y$H(e,t){return new t$8("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}e([y$5({type:d$_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:u$1c,default:"ellipsoidal"}}}})],m$_.prototype,"heightModel",void 0),e([o$r("web-scene","heightModel")],m$_.prototype,"writeHeightModel",null),e([e$l(["web-scene","service"],"heightModel")],m$_.prototype,"readHeightModel",null),e([y$5({type:g$E.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g$E.jsonValues,write:g$E.write}}}})],m$_.prototype,"heightUnit",void 0),e([e$l("web-scene","heightUnit")],m$_.prototype,"readHeightUnit",null),e([e$l("service","heightUnit")],m$_.prototype,"readHeightUnitService",null),e([y$5({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],m$_.prototype,"vertCRS",void 0),e([e$l("service","vertCRS",["vertCRS","ellipsoid","geoid"])],m$_.prototype,"readVertCRS",null),m$_=p$1w=e([n$e("esri.geometry.HeightModelInfo")],m$_);var f$10=m$_;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$17=L$2.ofType(c$19);let p$1x=class extends l$17{constructor(r){super(r),this.on("before-add",r=>{r.item||r.preventDefault();}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",({item:r})=>{r.layer=null;});}destroy(){this._unownAll();}get owner(){return this._get("owner")}set owner(r){r!==this._get("owner")&&(this._unownAll(),this._set("owner",r),this._ownAll());}_createNewInstance(r){return new l$17(r)}_ownAll(){this.items.forEach(r=>this._own(r));}_own(r){r.layer&&"remove"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner;}_unownAll(){this.items.forEach(r=>this._unown(r));}_unown(r){r.layer===this.owner&&(r.layer=null);}};e([y$5()],p$1x.prototype,"owner",null),p$1x=e([n$e("esri.support.GraphicsCollection")],p$1x);const h$Z={type:p$1x,cast:t$s,set(r){const o=n$u(r,this._get("graphics"),p$1x);o.owner=this,this._set("graphics",o);}};var m$$=p$1x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$1y=class extends h$c{constructor(e){super(e),this.view=null,this.baseLayerViews=new L$2,this.referenceLayerViews=new L$2,this._loadingHandle=d$C(this,"view.map.basemap",e=>{e&&e.load().catch(()=>{});});}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);}get suspended(){return !this.view||this.view.suspended}get updating(){return (!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}};e([y$5({constructOnly:!0})],p$1y.prototype,"view",void 0),e([y$5({readOnly:!0})],p$1y.prototype,"baseLayerViews",void 0),e([y$5({readOnly:!0})],p$1y.prototype,"referenceLayerViews",void 0),e([y$5({readOnly:!0,dependsOn:["view.suspended"]})],p$1y.prototype,"suspended",null),e([y$5({type:Boolean,readOnly:!0,dependsOn:["view.suspended","view.map.basemap.loaded"]})],p$1y.prototype,"updating",null),p$1y=e([n$e("esri.views.BasemapView")],p$1y);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$10=n$7.getLogger("esri.views.LayerViewManager"),f$11=new Map;f$11.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews"),f$11.set("view.map.ground.layers","view.groundView.layerViews"),f$11.set("view.map.layers","view.layerViews"),f$11.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");class v$r{constructor(e,r,i){this.layer=e,this.view=r,this.layerViewImporter=i,this._controller=g$4(),this._deferred=_$3(),this._started=!1,this.done=!1,T$2(this._controller.signal,()=>{const r=new s$g("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r);});}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null;}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:t}=this;this._map=t.map;try{var a,o;let l,n;if(await i.load({signal:e}),"prefetchResources"in i&&await i.prefetchResources({signal:e}),i.createLayerView)l=await i.createLayerView(t,{signal:e});else {if(!this.layerViewImporter.hasLayerViewModule(i))throw new s$g("layer:view-not-supported","No layerview implementation was found");const r=await this.layerViewImporter.importLayerView(i);j$2(e),l="default"in r?new r.default({layer:i,view:t}):new r({layer:i,view:t});}const h=()=>{u$4(n)&&(n.remove(),n=null),l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0;};n=T$2(e,h),j$2(e);try{await l.when();}catch(e){throw h(),e}if(!(null==(a=this._map)||null==(o=a.allLayers)?void 0:o.includes(i)))return this._deferred.reject(new s$g("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i})),void h();this.layerView=l,i.emit("layerview-create",{view:t,layerView:l}),t.emit("layerview-create",{layer:i,layerView:l}),this.done=!0,this._deferred.resolve(l);}catch(e){i.emit("layerview-create-error",{view:t,error:e}),t.emit("layerview-create-error",{layer:i,error:e}),this.done=!0,this._deferred.reject(new s$g("layerview:create-error","layerview creation failed",{layer:i,error:e}));}}}let g$F=class extends d$M{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new h$J,this.view=null,this._preloadLayerViewModules=()=>{const e=this.view,r=this.get("view.map.allLayers");e&&r&&r.forEach(e=>{this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);});},this._reschedule=()=>{this.handles.remove("reschedule"),this.handles.add(k$3(this._doWork),"reschedule"),this.notifyChange("updating");},this._doWork=()=>{var e,r,i;const t=this.get("view.map");if(this._map!==t&&(this.clear(),this._map=t),!this.handles.has("reschedule"))return;this.handles.remove("reschedule"),this.handles.remove("collection-change");const a=t&&t.allLayers;if(!a)return;a.forEach(this._createLayerView,this),this._refreshCollections();const s=[];this._layerLayerViewInfoMap.forEach((e,r)=>{a.includes(r)||s.push(e);});for(const e of s)this._layerLayerViewInfoMap.delete(e.layer),e.destroy();const o=[null==(e=t.ground)?void 0:e.layers,null==(r=t.basemap)?void 0:r.baseLayers,null==(i=t.basemap)?void 0:i.referenceLayers,t.layers].filter(e=>!!e);this.handles.add(o.map(e=>this._watchUpdatingTracking.addOnCollectionChange(e,this._reschedule)),"collection-change"),this.notifyChange("updating");},this.handles.add([B$5(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),this.watch(["view.map.basemap","view.map.ground","view.map.layers","view.ready"],this._reschedule,!0)]);}initialize(){this._preloadLayerViewModules();}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this.view=null,this._map=null;}get updating(){if(this.handles.has("reschedule")||this._watchUpdatingTracking.updating)return !0;let e=!0;return this._layerLayerViewInfoMap.forEach(r=>e=e&&r.done),!e}clear(){this.destroyed||(this._layerLayerViewInfoMap.forEach(e=>e.destroy()),this._layerLayerViewInfoMap.clear(),this._refreshCollections());}whenLayerView(e){return this._reschedule(),this._doWork(),this._layerLayerViewInfoMap.has(e)?this._layerLayerViewInfoMap.get(e).promise:B$2(new s$g("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e}))}_refreshCollections(){f$11.forEach((e,r)=>{this._populateLayerViewsOwners(this.get(r),this.get(e),this.view);});}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void(r&&r.removeAll());let t=0;e.forEach(e=>{const a=this._layerLayerViewInfoMap.get(e);if(!a||!a.layerView)return;const s=a.layerView;s.layer=e,s.parent=i,r.getItemAt(t)!==s&&r.splice(t,0,s),e.layers&&this._populateLayerViewsOwners(e.layers,s.layerViews,s),t+=1;}),t<r.length&&r.splice(t,r.length);}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),void this.notifyChange("updating");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new v$r(e,this.view,this.layerViewImporter);r.promise.then(()=>{this._refreshCollections(),this.notifyChange("updating");},r=>{var i,t;r&&(L$1(r)||"cancelled:layerview-create"===r.name)||m$10.error(`Failed to create layerview for layer title:'${null!=(i=e.title)?i:"no title"}', id:'${null!=(t=e.id)?t:"no id"}' of type '${e.type}'.`,{layer:e,error:r});this._refreshCollections(),this.notifyChange("updating");}),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating");}};e([y$5({readOnly:!0})],g$F.prototype,"_watchUpdatingTracking",void 0),e([y$5()],g$F.prototype,"layerViewImporter",void 0),e([y$5({readOnly:!0,dependsOn:["_watchUpdatingTracking.updating"]})],g$F.prototype,"updating",null),e([y$5()],g$F.prototype,"view",void 0),g$F=e([n$e("esri.views.LayerViewManager")],g$F);var _$j=g$F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$1z=i=>{let p=class extends i{constructor(){super(...arguments),this.refreshTimestamp=null,this.refreshDebounced=H$1(async(r,e)=>{let s;"number"==typeof r?s=r:(s=Date.now(),e=r),this._set("refreshTimestamp",s),this.doRefresh&&await this.doRefresh(e);},2e3);}refresh(r=Date.now()){this._set("refreshTimestamp",r),this.doRefresh&&this.doRefresh();}};return e([y$5()],p.prototype,"layer",void 0),e([o$M("layer.refreshInterval")],p.prototype,"refreshInterval",void 0),e([y$5({readOnly:!0})],p.prototype,"refreshTimestamp",void 0),p=e([n$e("esri.layers.mixins.RefreshableLayerView")],p),p};function p$1z(r){return "refresh"in r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let o$18=class extends h$c{constructor(){super(...arguments),this._handles=new u$A,this._currentTick=0;}initialize(){this._handles.add([this.view.allLayerViews.on("after-changes",()=>{this.notifyChange("tickInterval"),this._handles.remove("layerViewsUpdating"),this._handles.add(this._getLayerViewHandles(),"layerViewsUpdating");}),this.watch("tickInterval",()=>this._restartTicking()),this.watch("view.ready",()=>this._restartTicking())]),this._restartTicking();}destroy(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0);}get tickInterval(){const e=this.view.allLayerViews.filter(e=>p$1z(e));return this._getCommonInterval(e)}_restartTicking(){this._currentTick=0,this._intervalID&&clearInterval(this._intervalID),this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(()=>{const e=Date.now();this._currentTick+=this.tickInterval,this.view.allLayerViews.forEach(r=>{if(p$1z(r)){const t=Math.round(6e4*r.refreshInterval),s=this._currentTick%t==0,i=e-r.refreshTimestamp<6e3;t&&s&&!i&&r.refresh(e);}});},this.tickInterval));}_getLayerViewHandles(){const e=[],r=()=>this.notifyChange("tickInterval");return this.view.allLayerViews.forEach(t=>{p$1z(t)&&t.layer&&e.push(t.watch("refreshInterval",r),t.layer.on("refresh",()=>{t.refresh(Date.now());}));}),e}_getCommonInterval(e){const r=(e,t)=>isNaN(e)||isNaN(t)?0:t<=0?e:r(t,e%t);return e.toArray().reduce((e,t)=>r(Math.round(6e4*t.refreshInterval),e),0)}};e([y$5()],o$18.prototype,"view",void 0),e([y$5({readOnly:!0})],o$18.prototype,"tickInterval",null),o$18=e([n$e("esri.views.RefreshManager")],o$18);var n$1j=o$18;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$1A=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],o$19={};function s$12(t){return !!o$19[t]}i$1A.forEach(t=>{o$19[t]=!0;});class p$1A{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null;}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:t,priority:e},a)=>this.inputManager.installHandlers(a,[t],e));}disconnect(){this.inputManager&&this.handlers.forEach((t,e)=>this.inputManager.uninstallHandlers(e)),this.inputManager=null;}destroy(){this.disconnect(),this.handlers.clear(),this.view=null;}on(t,e,a,n){const i=Array.isArray(t)?t:t.split(",");if(!function(t){for(const e of t)if(!s$12(e))return !1;return !0}(i))return i.some(s$12)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,p;Array.isArray(e)?p=e:(o=e,p=[]),"function"==typeof a?o=a:n=a,n=null!=n?n:c$1A.DEFAULT;const c=this.createUniqueGroupName(),u=new l$18(this.view,i,p,o);this.handlers.set(c,{handler:u,priority:n});for(const t of i){const e=this.handlerCounts.get(t)||0;this.handlerCounts.set(t,e+1);}return this.inputManager&&this.inputManager.installHandlers(c,[u],n),{remove:()=>this.removeHandler(c,i)}}hasHandler(t){return !!this.handlerCounts.get(t)}removeHandler(t,e){if(this.handlers.has(t)){this.handlers.delete(t);for(const t of e){const e=this.handlerCounts.get(t);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",t):1===e?this.handlerCounts.delete(t):this.handlerCounts.set(t,e-1);}}this.inputManager&&this.inputManager.uninstallHandlers(t);}createUniqueGroupName(){return this.counter+=1,"viewEvents_"+this.counter}}class l$18 extends i$1t{constructor(e,a,n,r){super(!0),this.view=e;for(const e of a)switch(e){case"click":this.registerIncoming("click",n,t=>r(this.wrapClick(t)));break;case"double-click":this.registerIncoming("double-click",n,t=>r(this.wrapDoubleClick(t)));break;case"immediate-click":this.registerIncoming("immediate-click",n,t=>r(this.wrapImmediateClick(t)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,t=>r(this.wrapImmediateDoubleClick(t)));break;case"hold":this.registerIncoming("hold",n,t=>r(this.wrapHold(t)));break;case"drag":this.registerIncoming("drag",n,t=>{const e=this.wrapDrag(t);e&&r(e);});break;case"key-down":this.registerIncoming("key-down",n,t=>r(this.wrapKeyDown(t)));break;case"key-up":this.registerIncoming("key-up",n,t=>r(this.wrapKeyUp(t)));break;case"pointer-down":this.registerIncoming("pointer-down",n,t=>r(this.wrapPointer(t,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,t=>r(this.wrapPointer(t,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,t=>r(this.wrapPointer(t,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,t=>r(this.wrapPointerDrag(t)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,t=>r(this.wrapMouseWheel(t)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,t=>r(this.wrapPointer(t,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,t=>r(this.wrapPointer(t,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,t=>{r(this.wrapGamepad(t));});break;case"focus":this.registerIncoming("focus",n,t=>{r(this.wrapFocus(t));});break;case"blur":this.registerIncoming("blur",n,t=>{r(this.wrapBlur(t));});break;default:r$6(e);}}wrapFocus(t){return {type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapBlur(t){return {type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapClick(t){const{pointerType:e,button:n,buttons:r,x:i,y:o,native:s,eventId:p}=t.data,{cancelable:l,timestamp:c}=t;return {type:"click",pointerType:e,button:n,buttons:r,x:i,y:o,native:s,timestamp:c,screenPoint:r$u(i,o),mapPoint:this.getMapPoint(i,o),eventId:p,cancelable:l,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,{cancelable:p,timestamp:l}=t;return {type:"double-click",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapImmediateClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:l,timestamp:c}=t;return {type:"immediate-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapImmediateDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:l,timestamp:c}=t;return {type:"immediate-double-click",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapHold(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o}=t.data,{cancelable:s,timestamp:p}=t;return {type:"hold",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:p,mapPoint:this.getMapPoint(r,i),cancelable:s,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}getMapPoint(t,e){return this.view.toMap(r$u(t,e),{exclude:[]})}wrapDrag(t){const a=t.data,{x:n,y:r}=a.center,{action:i,pointerType:o,button:s}=a;if("start"===i&&(this.latestDragStart=a),!this.latestDragStart)return;const p=a.pointer.native,l=a.buttons,{cancelable:c,timestamp:u}=t,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return "end"===i&&(this.latestDragStart=void 0),{type:"drag",action:i,x:n,y:r,origin:m,pointerType:o,button:s,buttons:l,radius:a.radius,angle:b$5(a.angle),native:p,timestamp:u,cancelable:c,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapKeyDown(t){const{key:e,repeat:a,native:n}=t.data,{cancelable:r,timestamp:i}=t;return {type:"key-down",key:e,repeat:a,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapKeyUp(t){const{key:e,native:a}=t.data,{cancelable:n,timestamp:r}=t;return {type:"key-up",key:e,native:a,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapPointer(t,e){const{x:a,y:n,button:r,buttons:i,native:o,eventId:s}=t.data,p=o.pointerId,l=o.pointerType,{cancelable:c,timestamp:u}=t;return {type:e,x:a,y:n,pointerId:p,pointerType:l,button:r,buttons:i,native:o,timestamp:u,eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapPointerDrag(t){const{x:e,y:a,buttons:n,native:r,eventId:i}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,l=t.data.action,c={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return {type:"pointer-drag",x:e,y:a,pointerId:s,pointerType:p,button:o,buttons:n,action:l,origin:c,native:r,timestamp:m,eventId:i,cancelable:u,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapMouseWheel(t){const{cancelable:e,data:a,timestamp:n}=t,{x:r,y:i,deltaY:o,native:s}=a;return {type:"mouse-wheel",x:r,y:i,deltaY:o,native:s,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}wrapGamepad(t){const{action:e,state:a,device:n}=t.data,{cancelable:r,timestamp:i}=t,{buttons:o,axes:s}=a;return {type:"gamepad",device:n,timestamp:i,action:e,buttons:o,axes:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),preventDefault:()=>t.preventDefault()}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function i$1B(t,e){const o=t.view;o&&(e&&o.ready&&o.activeTool!==t?(o.activeTool=t,m$W(o)&&o.focus()):e||o.activeTool!==t||(o.activeTool=null));}function n$1k(e,o,a){const i=e.activeTool;o!==i&&(u$4(i)&&i.deactivate&&i.deactivate(),a(o),u$4(o)&&o.activate&&o.activate());}function c$1G(){const t=new L$2;return t.on("after-add",t=>{const e=t.item;e.view&&e.view.ready&&e.attach();}),t.on("after-remove",t=>{const e=t.item;i$1B(e,!1),e.destroyed||e.detach();}),t}function r$R(t){return !1!==t.visible&&!1!==t.editable&&(null==t.hasEditableFlag||t.hasEditableFlag(1))}function l$19(t){return t$6(t)?{}:"function"==typeof t?t():t}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function p$1B(t){return "mouse"===t}function c$1H(t){return "mouse"!==t.pointerType||0===t.button}function u$1d(t){return !!t.native.shiftKey}const d$$={manipulator:null,tool:null};class g$G{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToActiveTool=null,this._cursor=null;}get cursor(){return this._cursor}handleInputEvent(a,s){const l=()=>a.stopPropagation();switch(a.type){case"pointer-move":p$1B(a.pointerType)&&this._pointerLocations.set(a.pointerId,{x:a.x,y:a.y,pointerType:a.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(l(),"end"===a.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!c$1H(a)||u$1d(a))break;const e=h$r(a),i=this._intersect(e,a.pointerType,s.forEachTool);if(t$6(i))break;const r=this._findManipulatorByKey(i,s.forEachTool);u$4(r)&&r.interactive&&r.grabbable&&!r.grabbing&&(this._grabbedManipulators.set(a.pointerId,{key:i,start:e}),1===this._grabbedManipulators.size&&(this._revertToActiveTool=s.activeTool,s.setActiveTool(i.tool)),r.grabbing=!0,r.events.emit("grab-changed",{action:"start",screenPoint:e}),l());break}case"pointer-up":this._handlePointerEnd(a,s);break;case"pointer-drag":{if(!c$1H(a))break;const o=this._grabbedManipulators.get(a.pointerId),p=this._draggedManipulators.get(a.pointerId),u=o$8(o||p,({key:t})=>t),d=this._findManipulatorByKey(u,s.forEachTool);if(t$6(d))break;const h=h$r(a);h.x=e$z(h.x,0,s.view.width),h.y=e$z(h.y,0,s.view.height);const g=f$3(o||p).start,y={action:a.action,start:g,screenPoint:h};switch(a.action){case"start":case"update":"update"!==y.action&&1!==this._grabbedManipulators.size||(d.dragging=!0,p||(y.action="start"),d.events.emit("drag",y),this._draggedManipulators.set(a.pointerId,{key:f$3(u),start:g}));break;case"end":d.dragging=!1,p&&d.events.emit("drag",y),this._draggedManipulators.delete(a.pointerId),this._handlePointerEnd(a,s);}l();break}case"immediate-click":{const t=h$r(a),e=this._intersect(t,a.pointerType,s.forEachTool),i=this._findToolAndManipulatorByKey(e,s.forEachTool,d$$);if(u$1d(a)||s.forEachTool(t=>{if((!i||d$$.tool!==t||!t.selectionManagementDisabled)&&t.manipulators){let e=!1;t.manipulators.forEach(({manipulator:t})=>{t.selected&&(t.selected=!1,e=!0);}),e&&t.manipulatorSelectionChanged&&t.manipulatorSelectionChanged();}}),!i)break;const{manipulator:o,tool:r}=d$$;if(!o.interactive)break;o.selectable&&!r.selectionManagementDisabled&&(o.selected=!o.selected,r.manipulatorSelectionChanged&&r.manipulatorSelectionChanged());const p=a.native.shiftKey;o.events.emit("immediate-click",{screenPoint:t,button:a.button,pointerType:a.pointerType,shiftKey:p,stopPropagation:l});break}case"click":{const e=h$r(a),i=this._intersect(e,a.pointerType,s.forEachTool),o=this._findManipulatorByKey(i,s.forEachTool);if(t$6(o)||!o.interactive)break;const r=a.native.shiftKey;o.events.emit(a.type,{screenPoint:e,button:a.button,pointerType:a.pointerType,shiftKey:r}),l();break}case"double-click":{const e=h$r(a),i=this._intersect(e,a.pointerType,s.forEachTool),o=this._findManipulatorByKey(i,s.forEachTool);if(t$6(o)||!o.interactive)break;const r=a.native.shiftKey;o.events.emit("double-click",{screenPoint:e,button:a.button,pointerType:a.pointerType,shiftKey:r,stopPropagation:l});break}case"immediate-double-click":{const e=h$r(a),i=this._intersect(e,a.pointerType,s.forEachTool),o=this._findManipulatorByKey(i,s.forEachTool);if(t$6(o)||!o.interactive)break;const r=a.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:e,button:a.button,pointerType:a.pointerType,shiftKey:r,stopPropagation:l});break}}this._updateCursor(s.forEachTool);}_handlePointerEnd(t,r){const a=o$8(this._grabbedManipulators.get(t.pointerId),({key:t})=>t),s=this._findManipulatorByKey(a,r.forEachTool);if(u$4(s)&&!s.dragging){const e=u$4(r.creatingTool)&&r.creatingTool===f$3(a).tool;1!==this._grabbedManipulators.size||0!==this._draggedManipulators.size||e||(r.setActiveTool(this._revertToActiveTool),this._revertToActiveTool=null),s.grabbing&&(s.grabbing=!1,s.events.emit("grab-changed",{action:"end",screenPoint:h$r(t)})),this._grabbedManipulators.delete(t.pointerId);}}_cursorFromMap(t,e){let i=null;return t$U(t,({key:t})=>{const r=this._findManipulatorByKey(t,e);return !!(u$4(r)&&r.interactive&&"cursor"in r&&r.cursor)&&(i=r.cursor,!0)}),i}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null;}clearPointers(e,i,r=!0,n){const a=i=>i.tool===e&&(t$6(n)||i.manipulatorId===n);this._grabbedManipulators.forEach(({key:t},e)=>{if(a(t)){this._grabbedManipulators.delete(e);const r=this._findManipulatorByKey(t,i);u$4(r)&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",screenPoint:null}));}}),this._draggedManipulators.forEach(({key:t},e)=>{if(a(t)){this._draggedManipulators.delete(e);const r=this._findManipulatorByKey(t,i);u$4(r)&&(r.dragging=!1,r.events.emit("drag",{action:"cancel",screenPoint:null,start:null}));}}),r&&this._hoveredManipulators.forEach(({key:t},e)=>{if(a(t)){this._hoveredManipulators.delete(e);const r=this._findManipulatorByKey(t,i);u$4(r)&&(r.hovering=!1);}}),this._updateCursor(i);}_intersect(e,i,o){let r=null;return o(o=>{if(null==o.manipulators||!r$R(o))return !1;const n=o.manipulators.intersect(e,i);return !t$6(n)&&(r={manipulatorId:n,tool:o},!0)}),r}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((e,i)=>{this._updateHoveredStateForPointerAtScreenPosition(r$u(e.x,e.y),i,e.pointerType,t);});}handleHoverEvent(t,e){"pointer-up"!==t.type&&"immediate-click"!==t.type&&"pointer-move"!==t.type||!p$1B(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(h$r(t),t.pointerId,t.pointerType,e);}_updateHoveredStateForPointerAtScreenPosition(t,r,n,a){const s=this._intersect(t,n,a);let l=this._findManipulatorByKey(s,a);const p=o$8(this._hoveredManipulators.get(r),({key:t})=>t),c=this._findManipulatorByKey(p,a);u$4(l)&&!l.interactive&&(l=null),c!==l&&(u$4(c)&&(c.hovering=!1),u$4(l)?(l.hovering=!0,this._hoveredManipulators.set(r,{key:f$3(s)})):this._hoveredManipulators.delete(r),this._updateCursor(a));}_findManipulatorByKey(t,e){return this._findToolAndManipulatorByKey(t,e,d$$)?d$$.manipulator:null}_findToolAndManipulatorByKey(e,i,r){return t$6(e)?null:(r.tool=null,r.manipulator=null,i(t=>{if(t!==e.tool||null==t.manipulators||!r$R(t))return !1;const i=t.manipulators.findById(e.manipulatorId);return !!u$4(i)&&(r.manipulator=i,r.tool=t,!0)}),null!=r.manipulator)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const j$w=n$7.getLogger("esri.views.ToolViewManager");let y$I=class extends h$c{constructor(t){super(t),this._handles=new u$A,this._creatingTool=null,this._manipulatorState=new g$G,this.tools=c$1G(),this.cursor=null,this._forEachTool=t=>{if(!u$4(this._creatingTool)||!t(this._creatingTool))for(const o of this.tools.items)if(t(o))return};}initialize(){this._handles.add([this.view.on(i$1A,t=>{this._handleInputEvent(t);},c$1A.TOOL),this.tools.on("before-add",t=>{const o=t.item;null==o||this.tools.includes(o)?t.preventDefault():null==o.created||o.created||(j$w.error("tools","Tool can not be added to view before it has been created"),t.preventDefault());}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._forEachTool);}),this.tools.on("change",()=>{this._refreshToolWatchers();})]);}destroy(){this._forEachTool(t=>t.destroy()),this._handles.destroy(),this._handles=null;}set activeTool(t){!u$4(t)||this.view.ready?(n$1k(this,t,o=>{this._set("activeTool",o),this._removeIncompleteTools(t),this._forEachTool(t=>{const o=t$6(this.activeTool)||t===this.activeTool;t.setEditableFlag&&t.setEditableFlag(1,o);const i=r$R(t);!t$6(this.activeTool)&&i||this._manipulatorState.clearPointers(t,this._forEachTool,!i);}),this._updateCursor();}),this._creatingTool!==t&&this._rejectCreatingTool()):j$w.error("#activeTool=","cannot set active tool while view is not ready");}async createTool(t,e,i){await this.view.whenReady();const r="Tool creation was interrupted by another tool being created";if(y$8(i))throw d$5(r);const s=new t({...l$19(e),view:this.view}),c=T$2(i,()=>this.activeTool=null);return this._rejectCreatingTool(r),this._creatingTool=s,s.attach(),this._refreshToolWatchers(),i$1B(s,!0),await s.when(),u$4(c)&&c.remove(),this._creatingTool=null,this.tools.add(s),s instanceof h$c&&null!=s.completed&&j$h(s,"completed").then(()=>{i$1B(s,!1);}),s}attach(){this._forEachTool(t=>t.attach()),"3d"===this.view.type?this._handles.add([this.view.state.watch("camera",()=>{this.forEachManipulator(t=>{null!=t.onViewChange&&t.onViewChange();});}),this.view.elevationProvider.on("elevation-change",t=>{this.forEachManipulator(o=>{null!=o.onElevationChange&&o.onElevationChange(t);});})],"manipulators"):this._handles.add(this.view.watch("extent",()=>{this.forEachManipulator(t=>{null!=t.onViewChange&&t.onViewChange();});}));}detach(){this.activeTool=null,this._forEachTool(t=>{t.detach(),t.destroy();}),this.tools.removeAll(),this._handles.remove("manipulators");}forEachManipulator(t){this._forEachTool(o=>{o.manipulators&&o.manipulators.forEach(({manipulator:e})=>t(e,o));});}_handleInputEvent(t){let e=!1;const i={...t,stopPropagation:()=>{e=!0,t.stopPropagation();}};u$4(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(t=>{!e&&!1!==t.visible&&t.handleInputEvent&&t.handleInputEvent(i);}),!e&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t;},creatingTool:this._creatingTool,view:this.view}),!e&&u$4(this.activeTool)&&this.activeTool.handleInputEventAfter&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor();}_refreshToolWatchers(){this._handles.remove("tools"),this._forEachTool(t=>{if(t instanceof h$c){const o=h$F(t,["cursor","visible","editable"],()=>{r$R(t)||this._manipulatorState.clearPointers(t,this._forEachTool),this._updateCursor();});this._handles.add(o,"tools");}t.manipulators&&this._handles.add(t.manipulators.on("change",o=>{o.removed.forEach(({id:o})=>{this._manipulatorState.clearPointers(t,this._forEachTool,!0,o);}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();}),"tools");}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor();}_updateCursor(){let t=null;this._forEachTool(o=>null!=o.cursor&&!1!==o.visible&&(t=o.cursor,!0)),t||(t=this._manipulatorState.cursor),this._get("cursor")!==t&&this._set("cursor",t);}_rejectCreatingTool(t){const o=this._creatingTool;t$6(o)||(this._manipulatorState.clearPointers(o,this._forEachTool),o.rejectCreation&&o.rejectCreation(d$5(t)),o.destroy(),this._creatingTool=null,this._refreshToolWatchers());}_removeIncompleteTools(t){this.tools.filter(o=>(t$6(t)||o!==t)&&null!=o.completed&&!o.completed).forEach(t=>{this.tools.remove(t);});}};e([y$5({constructOnly:!0,nonNullable:!0})],y$I.prototype,"view",void 0),e([y$5({value:null})],y$I.prototype,"activeTool",null),e([y$5({readOnly:!0,type:L$2})],y$I.prototype,"tools",void 0),e([y$5({readOnly:!0})],y$I.prototype,"cursor",void 0),y$I=e([n$e("esri.views.ToolViewManager")],y$I);var C$d=y$I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let o$1a=class extends h$c{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":i$1C.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index;}get native(){return (navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return p$1C[this.deviceType]}};e([y$5({nonNullable:!0,readOnly:!0})],o$1a.prototype,"nativeIndex",void 0),e([y$5({type:String,readOnly:!0})],o$1a.prototype,"deviceType",null),e([y$5({type:Number,readOnly:!0})],o$1a.prototype,"axisThreshold",null),o$1a=e([n$e("esri.views.input.gamepad.GamepadInputDevice")],o$1a);const i$1C=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),p$1C={standard:.15,spacemouse:.025,unknown:0};var n$1l=o$1a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$1I=class extends h$c{constructor(...o){super(...o),this.devices=new L$2,this.enabledFocusMode="document";}};e([y$5({type:L$2.ofType(n$1l),readOnly:!0})],c$1I.prototype,"devices",void 0),e([y$5({type:["document","view","none"]})],c$1I.prototype,"enabledFocusMode",void 0),c$1I=e([n$e("esri.views.input.gamepad.GamepadSettings")],c$1I);var i$1D=c$1I;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$1D=class extends h$c{constructor(){super(...arguments),this.gamepad=new i$1D;}};e([y$5({readOnly:!0})],p$1D.prototype,"gamepad",void 0),p$1D=e([n$e("esri.views.input.Input")],p$1D);var c$1J=p$1D;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let s$13=class extends h$c{constructor(o){super(o),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1;}};e([y$5({type:Boolean,nonNullable:!0})],s$13.prototype,"enabled",void 0),e([y$5({type:n$1l})],s$13.prototype,"device",void 0),e([y$5({type:["pan","zoom"],nonNullable:!0})],s$13.prototype,"mode",void 0),e([y$5({type:["forward-down","forward-up"],nonNullable:!0})],s$13.prototype,"tiltDirection",void 0),e([y$5({type:Number,nonNullable:!0})],s$13.prototype,"velocityFactor",void 0),s$13=e([n$e("esri.views.navigation.gamepad.GamepadSettings")],s$13);var i$1E=s$13;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$1E=class extends h$c{constructor(o){super(o),this.browserTouchPanEnabled=!0,this.gamepad=new i$1E,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0;}};e([y$5({type:Boolean})],p$1E.prototype,"browserTouchPanEnabled",void 0),e([y$5({type:i$1E,nonNullable:!0})],p$1E.prototype,"gamepad",void 0),e([y$5({type:Boolean})],p$1E.prototype,"momentumEnabled",void 0),e([y$5({type:Boolean})],p$1E.prototype,"mouseWheelZoomEnabled",void 0),p$1E=e([n$e("esri.views.navigation.Navigation")],p$1E);var a$1l=p$1E;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1e=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer","VectorTileServer"],l$1a=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${u$1e.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),a$1m=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${u$1e.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");function c$1K(e){return !!l$1a.test(e)}function f$12(r){const t=C(r),n=t.path.match(l$1a)||t.path.match(a$1m);if(!n)return null;const[,s,i,o,u]=n,c=i.indexOf("/");return {title:p$1F(-1!==c?i.slice(c+1):i),serverType:o,sublayer:null!=u&&""!==u?parseInt(u,10):null,url:{path:s}}}function p$1F(e){return (e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function d$10(e,r){const t=[];if(e){const r=f$12(e);r&&r.title&&t.push(r.title);}if(r){const e=p$1F(r);t.push(e);}if(2===t.length){if(-1!==t[0].toLowerCase().indexOf(t[1].toLowerCase()))return t[0];if(-1!==t[1].toLowerCase().indexOf(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function v$s(e){if(!e)return !1;const r=-1!==(e=e.toLowerCase()).indexOf(".arcgis.com/"),t=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features");return r&&t}function w$q(e,n){return e?lt(ht(e,n)):e}function x$o(n,s,i){if(!s)return {url:s};s=ht(s,i);const o=f$12(C(s).path);let u;return o&&null!=o.sublayer&&(null==n.layerId&&(u=o.sublayer),s=o.url.path),{url:lt(s),layerId:u}}function h$_(e,r,t,s,i){m$s(r,s,"url",i),s.url&&null!=e.layerId&&(s.url=_$2(s.url,t,e.layerId.toString()));}function O$c(e){if(!e)return !1;const r=e.toLowerCase(),t=-1!==r.indexOf("/services/"),n=-1!==r.indexOf("/mapserver/wmsserver"),s=-1!==r.indexOf("/imageserver/wmsserver"),i=-1!==r.indexOf("/wmsserver");return t&&(n||s||i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function s$14(e){const t=e.url&&f$12(e.url);return !(null==(e.spatialReference&&e.spatialReference.vcsWkid)&&t&&"ImageServer"===t.serverType)&&c$1L(e)&&e.heightModelInfo?e.heightModelInfo:h$$(e)?f$10.deriveUnitFromSR(m$11,e.spatialReference):null}function c$1L(e){return "heightModelInfo"in e}function l$1b(t){if("unknown"===t.type||!("capabilities"in t))return !1;switch(t.type){case"csv":case"feature":case"geojson":case"ogc-feature":return !0;case"imagery":case"map-image":case"tile":case"vector-tile":case null:return !1;default:return r$6(t),!1}}function h$$(e){return l$1b(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):f$13(e)}function u$1f(e){return null!=e.layers||f$13(e)||l$1b(e)||c$1L(e)}function f$13(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return !0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wms":case"wmts":case null:return !1;default:r$6(t);}return !1}const m$11=new f$10({heightModel:"gravity-related-height"});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var _$k;const m$12=n$7.getLogger("esri.views.support.DefaultsFromMap");let S$l=_$k=class extends h$c{constructor(){super(...arguments),this._handles=new u$A,this._waitTask=null,this._extentProjectController=null,this._spatialReferenceCandidates=null,this._extentCandidates=null,this.logDebugInformation=!1,this.isSpatialReferenceDone=!1,this.isTileInfoDone=!1,this.isHeightModelInfoSearching=!1,this.spatialReference=null,this.extent=null,this.heightModelInfo=null,this.vcsWkid=null,this.latestVcsWkid=null,this.mapCollectionPaths=_$k.DefaultMapCollectionPaths.slice(),this.tileInfo=null;}initialize(){this.watch("mapCollectionPaths",()=>{this._running&&(this.reset(),this.start());});}destroy(){this._set("view",null),this._handles&&(this._handles.destroy(),this._handles=null),this._cancelLoading();}get _running(){return !!(this._handles&&this._handles.size>0)}reset(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._spatialReferenceCandidates=null,this._extentCandidates=null;}start(){this._handles.removeAll();const e=this._updateLayerChange.bind(this);for(const t of this.mapCollectionPaths)this._handles.add(B$5(this.view,"map."+t,"change",e,e,e,!0));this._handles.add(y$s(this,"isSpatialReferenceDone",()=>this._updateTileInfo(),!0));}_ownerNameFromCollectionName(e){const t=e.lastIndexOf(".");return -1===t?"view":"view."+e.slice(0,t)}_ensureLoadedOwnersFromCollectionName(e){const t=this._ownerNameFromCollectionName(e).split(".");let i;for(let s=0;s<t.length&&(i=this.get(t.slice(0,s+1).join(".")),i);s++)if(i.load&&!i.isFulfilled())return {collectionName:e,owner:null,loading:i.load().catch(()=>{})};return {collectionName:e,owner:i}}_cancelLoading(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null);}_updateWhen(e){let t=!0,i=!1;const s=e.catch(()=>{}).then(()=>{t?i=!0:s===this._waitTask&&this._update();});return t=!1,i||(this._waitTask=s),i}_updateLayerChange(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update();}_update(){if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");const e=this._processMapCollections(e=>this._processSpatialReferenceSource(e));if(this._debugLog(`Search ended with status '${I$i(e)}'`),0!==e){let e=null,t=this._spatialReferenceCandidates;if(!t||t.length<1?(e=this.defaultSpatialReference,this._debugLog(`No spatial reference found, locking to default (${y$J(e)})`)):(this.defaultSpatialReference&&t.length>1&&c$b(t,e=>e.equals(this.defaultSpatialReference))>-1&&(t=[this.defaultSpatialReference]),e=t[0],this._debugLog("Locking to "+y$J(e))),this._set("spatialReference",e),e)if(this.extent)this._set("isSpatialReferenceDone",!0);else {const t=this.logDebugInformation;this.logDebugInformation=!1,this._processMapCollections(t=>this._findExtent(t,e)),this.logDebugInformation=t,this._projectExtentCandidate().catch(()=>{}).then(()=>this._set("isSpatialReferenceDone",!0));}else this._set("isSpatialReferenceDone",!0);}}if(null==this.heightModelInfo&&this.view.isHeightModelInfoRequired){this._debugLog("Starting search for height model info...");const e=this._processMapCollections(e=>this._processHeightModelInfoSource(e),e=>u$1f(e));this._debugLog("Search ended with status "+I$i(e)),this._set("isHeightModelInfoSearching",0===e);}this._updateTileInfo();}}_processMapCollections(e,t){this._preloadMapCollections(t);let i=2;return this._forAllMapCollectionSources(e=>{if(2!==i)return !1;const{collectionName:t}=e;return this._debugLog(`Processing collection ${t}...`),!(e.loading&&!this._updateWhen(e.loading))||(this._debugLog(`Collection ${e.collectionName} owner is loading -> wait`),i=0,!1)},s=>{if(2!==i)return !1;return null!=t&&!t(s)?(this._debugLog(`Source ${s.id} is skipped due to predicate`),!1):!s.load||s.isFulfilled()||this._updateWhen(s.load())?!((!s.load||s.isResolved())&&e(s))||(i=1,!1):(this._debugLog(`Source ${s.id} is loading -> wait`),i=0,!1)}),i}_preloadMapCollections(e){let t=10;const i=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources(()=>!0,s=>{if(0===t)return !1;return !(null!=e&&!e(s))&&(s.load&&!s.isFulfilled()&&(this.logDebugInformation=i,this._debugLog("Pre-loading source "+s.id),this.logDebugInformation=!1,s.load().catch(()=>{}),t--),!0)}),this.logDebugInformation=i;}_forAllMapCollectionSources(e,t){for(const i of this.mapCollectionPaths){const s="map."+i,o=this._ensureLoadedOwnersFromCollectionName(s);if(!1===e(o))continue;const n=o.owner;if(!n||n.isRejected&&n.isRejected()){this._debugLog(`Collection ${s} owner is invalid or rejected -> skip`);continue}const a=this.view.get(s);a?this._forEachSource(a,t):this._debugLog(`Collection ${s} does not exist -> skip`);}}_forEachSource(e,t){for(const i of e.items)!1!==t(i)&&"layers"in i&&i.layers&&this._forEachSource(i.layers,t);}_processSpatialReferenceSource(e){let t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=d$7(t,this._spatialReferenceCandidates,(e,t)=>e.equals(t)),t.length>0?this._spatialReferenceCandidates=t:this._debugLog(`Layer ${e.id} is ignored because its supported spatial\n          references are not compatible with the previous candidates`)):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)}_findExtent(e,t){const i="fullExtents"in e&&e.fullExtents||(e.fullExtent?[e.fullExtent]:[]),s=l$9(i,e=>e.spatialReference.equals(t));if(s)return this._set("extent",s),!0;if(this._getSupportedSpatialReferences(e).length>0){const t=i.map(t=>({extent:t,layer:e})),s=this._extentCandidates||[];this._extentCandidates=s.concat(t);}return !1}async _projectExtentCandidate(){if(!this._extentCandidates||!this._extentCandidates.length)return;const e=this.spatialReference,t=l$9(this._extentCandidates,t=>f$i(t.extent.spatialReference,e));if(t)this._set("extent",h$d(t.extent,e));else {const t=this._extentCandidates[0];this._extentProjectController=g$4();const i=await import('./chunks/geometryServiceUtils-d67ddfa5.js');try{const s=await i.projectGeometry(t.extent,e,t.layer.portalItem,this._extentProjectController.signal);this._set("extent",s);}catch{}this._extentProjectController=null;}}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return this._debugLog(`Layer ${e.id} is ignored because it does not have any spatial references`),[];const i=t.filter(t=>this.view.isSpatialReferenceSupported(t,e,e=>this._debugLog(e)));return 0===i.length?this._debugLog(`Layer ${e.id} has spatial references but none of them are supported (or layer doesn't require locking)`):this._debugLog(`Layer ${e.id} has spatial references. Resulting candidate set: ${i.map(y$J).join(", ")}`),i}_processHeightModelInfoSource(e){const t=s$14(e);return !!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)}_updateTileInfo(){if(null!=this.tileInfo)return;if(!this.view.isTileInfoRequired())return void this._set("isTileInfoDone",!0);if(!this.isSpatialReferenceDone)return;const e=this.get("view.map");if(!e)return void this._debugLog("updateTileInfo: no map");const t=e.basemap,i=e.get("layers.0");let s=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");const e=t&&t.get("baseLayers.0");if(e&&"failed"!==e.loadStatus){if(!e.loaded)return this._updateWhen(e.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");s="tileInfo"in e&&e.tileInfo;}else {if(!i||"failed"===i.loadStatus)return this._debugLog("updateTileInfo: no tileInfo"),void this._set("isTileInfoDone",!0);if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}}else if(i&&"failed"!==i.loadStatus){if(!i.loaded)return this._updateWhen(i.load()),void this._debugLog("updateTileInfo: first operational layer still loading");s="tileInfo"in i&&i.tileInfo;}s&&!s.spatialReference.equals(this.spatialReference)&&(s=null),this._debugLog("updateTileInfo: setting "+s),this._set("tileInfo",s),this._set("isTileInfoDone",!0);}_debugLog(e){this.logDebugInformation&&m$12.info(e);}};function y$J(e){return e?JSON.stringify(e.toJSON()):"undefined"}function I$i(e){switch(e){case 0:return "Waiting";case 1:return "Found";case 2:return "Exhausted"}}S$l.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],e([y$5()],S$l.prototype,"logDebugInformation",void 0),e([y$5({readOnly:!0})],S$l.prototype,"isSpatialReferenceDone",void 0),e([y$5({readOnly:!0})],S$l.prototype,"isTileInfoDone",void 0),e([y$5({readOnly:!0})],S$l.prototype,"isHeightModelInfoSearching",void 0),e([y$5({constructOnly:!0})],S$l.prototype,"view",void 0),e([y$5({readOnly:!0})],S$l.prototype,"spatialReference",void 0),e([y$5({readOnly:!0})],S$l.prototype,"extent",void 0),e([y$5({readOnly:!0})],S$l.prototype,"heightModelInfo",void 0),e([y$5({readOnly:!0})],S$l.prototype,"vcsWkid",void 0),e([y$5({readOnly:!0})],S$l.prototype,"latestVcsWkid",void 0),e([y$5()],S$l.prototype,"mapCollectionPaths",void 0),e([y$5()],S$l.prototype,"defaultSpatialReference",void 0),e([y$5({readOnly:!0})],S$l.prototype,"tileInfo",void 0),S$l=_$k=e([n$e("esri.views.support.DefaultsFromMap")],S$l);var b$q=S$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var W$6;const q$a=n$7.getLogger("esri.views.View");let z$a=W$6=class extends(a$13(i$n.EventedMixin(_$9(h$c)))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new l$t({root:this,rootCollectionNames:["basemapView.baseLayerViews","groundView?.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:e=>e.layerViews}),this.animation=null,this.basemapView=null,this.defaultsFromMap=new b$q({view:this}),this.fatalError=null,this.extent=null,this.graphics=new m$$,this.navigating=!1,this.layerViews=new L$2,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.renderContext=null,this.input=new c$1J,this.navigation=new a$1l,this.layerViewManager=null,this.refreshManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new p$1A(this),this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",e=>{e?(this._currentSpatialReference=this.spatialReference,W$6.views.add(this)):(this._currentSpatialReference=null,W$6.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?(this.layerViewManager.clear(),this.toolViewManager.detach(),this._teardown()):e&&!this.ready&&(this._startup(),this.toolViewManager.attach());},!0));}initialize(){let e;this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,j$h(this,"ready")))),this.basemapView=new p$1y({view:this}),this.layerViewManager=new _$j({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)}}),this.refreshManager=new n$1j({view:this}),this.toolViewManager=new C$d({view:this}),this._resetInitialViewPropertiesFromContent(),d$C(this.defaultsFromMap,"isSpatialReferenceDone",t=>{const i=!!(this.map&&this.map.allLayers.length>0);if(t&&!this.spatialReference&&i||!e){if(t&&!this.spatialReference&&i&&!e){const t=e=O$1(this.spatialReferenceWarningDelay);e.then(()=>{t===e&&q$a.warn("#spatialReference","no spatial reference could be derived from the currently added map layers");}).catch(()=>{});}}else e=null;},!0);}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics.destroy(),this.graphics=null,this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager.destroy(),this.toolViewManager=null,this.refreshManager.destroy(),this.refreshManager=null,this.layerViewManager.destroy(),this.layerViewManager=null,this.basemapView.destroy(),this.basemapView=null,this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,null==e||e.destroy();}_startup(){this._set("ready",!0);}_teardown(){this._set("ready",!1);}whenReady(){return D$1()}toMap(){return q$a.error("#toMap()","Not implemented on this instance of View"),null}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return !!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!h$i.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)}set map(e){var t;e!==this._get("map")&&((null==(t=e)?void 0:t.destroyed)&&(q$a.warn("#map","The provided map is already destroyed",{map:e}),e=null),h$i.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e));}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){this._userSpatialReference=e,this._set("spatialReference",e);}get stationary(){return !this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap&&this.defaultsFromMap.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return u$4(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor");}get size(){return [this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.get("defaultsFromMap.spatialReference")}getDefaultHeightModelInfo(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null}importLayerView(e){throw new s$g("importLayerView() not implemented")}hasLayerViewModule(e){return !1}async validate(){}invalidate(){this._isValid=!1;}isSpatialReferenceSupported(e,t,i){return !0}isTileInfoRequired(){return !1}when(e,t){return this.isResolved()&&!this.ready&&q$a.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),super.when(e,t)}forceReadyCycle(){this.ready&&(this._readyCycleForced=!0,$$4(this,"preconditionsReady",()=>this._readyCycleForced=!1));}createTool(e,t,i){return this.toolViewManager.createTool(e,t,i)}tryFatalErrorRecovery(){this.fatalError=null;}_resetInitialViewPropertiesFromContent(){if(!this.defaultsFromMap)return;const e=()=>this.defaultsFromMap&&this.defaultsFromMap.start();this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([h$F(this,"spatialReference",(t,i)=>{E$3(t,i)||e();}),h$F(this,"initialExtentRequired",e),k$3(e)],"defaultsFromMap");}};z$a.views=new L$2,e([o$M("toolViewManager.activeTool")],z$a.prototype,"activeTool",void 0),e([y$5({readOnly:!0})],z$a.prototype,"allLayerViews",void 0),e([y$5()],z$a.prototype,"animation",void 0),e([y$5()],z$a.prototype,"basemapView",void 0),e([y$5()],z$a.prototype,"defaultsFromMap",void 0),e([y$5()],z$a.prototype,"fatalError",void 0),e([y$5({type:z$4})],z$a.prototype,"extent",void 0),e([y$5(h$Z)],z$a.prototype,"graphics",void 0),e([y$5({readOnly:!0,type:f$10,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],z$a.prototype,"heightModelInfo",null),e([y$5({readOnly:!0,dependsOn:["navigating"]})],z$a.prototype,"interacting",null),e([y$5({readOnly:!0})],z$a.prototype,"navigating",void 0),e([y$5({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","initialExtentRequired","initialExtent","defaultsFromMap.isSpatialReferenceDone","defaultsFromMap.isTileInfoDone"]})],z$a.prototype,"preconditionsReady",null),e([y$5({type:L$2,readOnly:!0})],z$a.prototype,"layerViews",void 0),e([y$5({value:null,type:f$v})],z$a.prototype,"map",null),e([y$5()],z$a.prototype,"padding",void 0),e([y$5({readOnly:!0})],z$a.prototype,"ready",void 0),e([y$5({type:w$5,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]})],z$a.prototype,"spatialReference",null),e([y$5()],z$a.prototype,"spatialReferenceWarningDelay",void 0),e([y$5({dependsOn:["animation","navigating","resizing"]})],z$a.prototype,"stationary",null),e([y$5({type:d$O})],z$a.prototype,"timeExtent",void 0),e([o$M("toolViewManager.tools")],z$a.prototype,"tools",void 0),e([y$5()],z$a.prototype,"toolViewManager",void 0),e([y$5({readOnly:!0})],z$a.prototype,"type",void 0),e([y$5({type:Number})],z$a.prototype,"scale",void 0),e([y$5({readOnly:!0})],z$a.prototype,"updating",void 0),e([y$5({readOnly:!0})],z$a.prototype,"initialExtentRequired",void 0),e([y$5({readOnly:!0,type:z$4,dependsOn:["defaultsFromMap.extent"]})],z$a.prototype,"initialExtent",null),e([y$5({dependsOn:["toolViewManager.cursor"]})],z$a.prototype,"cursor",null),e([y$5()],z$a.prototype,"renderContext",void 0),e([y$5({readOnly:!0})],z$a.prototype,"input",void 0),e([y$5({type:a$1l,nonNullable:!0})],z$a.prototype,"navigation",void 0),e([y$5()],z$a.prototype,"layerViewManager",void 0),e([y$5()],z$a.prototype,"width",void 0),e([y$5()],z$a.prototype,"height",void 0),e([y$5({readOnly:!0})],z$a.prototype,"resizing",void 0),e([y$5({value:null,dependsOn:["width","height"],readOnly:!0})],z$a.prototype,"size",null),e([y$5({readOnly:!0})],z$a.prototype,"suspended",void 0),e([y$5({readOnly:!0})],z$a.prototype,"viewEvents",void 0),e([y$5()],z$a.prototype,"_isValid",void 0),e([y$5()],z$a.prototype,"_readyCycleForced",void 0),e([y$5()],z$a.prototype,"_currentSpatialReference",void 0),z$a=W$6=e([n$e("esri.views.View")],z$a);var H$8=z$a;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$14{constructor(t,e,l,o){this.set(t,e,l,o);}static getId(t,e,l,o){return "object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${l}/${o}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t);}acquire(t,e,l,o){this.set(t,e,l,o);}contains(t){const e=t.level-this.level;return this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new e$14(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0;}set(t,e,l,o){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,l,o,s]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(l),this.col=parseFloat(o),this.world=parseFloat(s);}else this.level=+t,this.row=+e,this.col=+l,this.world=+o||0;return this}toString(){return `${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new e$14(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,l=this.row<<1,o=this.col<<1,s=this.world;return [new e$14(t,l,o,s),new e$14(t,l,o+1,s),new e$14(t,l+1,o,s),new e$14(t,l+1,o+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}e$14.pool=new t$e(e$14,null,null,25,50);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$1n=a=>{let o=class extends a{async fetchPopupFeatures(e,r){await this.when();const{location:s,queryArea:a,layerViewsAndGraphics:o,clientOnlyGraphics:c}=await this._prepareFetchPopupFeatures(e,r),u=D$1(c),n=this._queryLayerPopupFeatures({queryArea:a,layerViewsAndGraphics:o,options:r}),l=n.map(e=>e.promise);return {location:s,clientOnlyGraphics:c,allGraphicsPromise:q$1([u,...l]).then(A$5),promisesPerLayerView:n}}_queryLayerPopupFeatures({queryArea:e,layerViewsAndGraphics:s,options:i}){return s.map(({layerView:s,graphics:p})=>{const t={clientGraphics:p,event:u$4(i)?i.event:null,signal:u$4(i)?i.signal:null,defaultPopupTemplateEnabled:!!u$4(i)&&!!i.defaultPopupTemplateEnabled},a=s.fetchPopupFeatures(e,t);return {layerView:s,promise:a}})}_isValidPopupGraphic(e,s){return e&&!!e.getEffectivePopupTemplate(u$4(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(e,r){const{clientGraphics:s,queryArea:i,location:p}=await this._popupHitTestGraphics(e,r),t=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:a,clientOnlyGraphics:o}=this._graphicsPerFetchPopupLayerView(s,t);return {clientOnlyGraphics:o,layerViewsAndGraphics:a,queryArea:i,location:p}}async _popupHitTestGraphics(e,r){const{results:s,mapPoint:i}=await this.popupHitTest(e),p=s.filter(e=>this._isValidPopupGraphic(e.graphic,r)),t=p.length?p[0].mapPoint:null;return {clientGraphics:p.map(e=>e.graphic),queryArea:i,location:i||t}}_getFetchPopupLayerViews(){const e=[];return this.allLayerViews.forEach(r=>{this._isValidPopupLayerView(r)&&e.push(r);}),u$4(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&e.push(this.graphicsView),e.reverse()}_isValidPopupLayerView(e){return u$4(e)&&(!("layer"in e)||!e.suspended)&&"fetchPopupFeatures"in e}_graphicsPerFetchPopupLayerView(e,r){const s=[],i=new Map,p=r.map(e=>{const r=[];return "layer"in e?i.set(e.layer,r):i.set(e.graphics,r),{layerView:e,graphics:r}});for(const r of e){const e=i.get(r.layer)||null;e?e.push(r):s.push(r);}return {layerViewsAndGraphics:p,clientOnlyGraphics:s}}};return o=e([n$e("esri.views.PopupView")],o),o};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let n$1m=class extends u$p{constructor(t){super(t),this.state="running",this.target=null;}initialize(){this.addResolvingPromise(v$3((t,s)=>this._dfd={resolve:t,reject:s}));}get done(){return "finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new s$g("ViewAnimation stopped")));}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve());}update(t,s){s||(s=F$1(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",s);}};e([y$5({readOnly:!0,dependsOn:["state"]})],n$1m.prototype,"done",null),e([y$5({readOnly:!0,type:String})],n$1m.prototype,"state",void 0),e([y$5()],n$1m.prototype,"target",void 0),n$1m=e([n$e("esri.views.ViewAnimation")],n$1m),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};}(n$1m||(n$1m={}));var a$1o=n$1m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1n(){return [0,0]}function r$S(n){return [n[0],n[1]]}function t$$(n,r){return [n,r]}function e$15(n){const r=[0,0],t=Math.min(2,n.length);for(let e=0;e<t;++e)r[e]=n[e];return r}function a$1p(n,r){return new Float64Array(n,r,2)}function u$1g(){return [0,0]}function o$1b(){return t$$(1,1)}function s$15(){return t$$(1,0)}function c$1M(){return t$$(0,1)}const f$14=[0,0],i$1F=o$1b(),l$1c=s$15(),_$l=c$1M();var O$d=Object.freeze({__proto__:null,create:n$1n,clone:r$S,fromValues:t$$,fromArray:e$15,createView:a$1p,zeros:u$1g,ones:o$1b,unitX:s$15,unitY:c$1M,ZEROS:f$14,ONES:i$1F,UNIT_X:l$1c,UNIT_Y:_$l});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function a$1q(t,n){return t[0]=n[0],t[1]=n[1],t}function r$T(t,n,a){return t[0]=n,t[1]=a,t}function s$16(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t}function o$1c(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function u$1h(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function c$1N(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function e$16(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function i$1G(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function f$15(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t}function M$k(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t}function h$10(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function l$1d(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t}function m$13(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t}function d$11(t,n){const a=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(a*a+r*r)}function q$b(t,n){const a=n[0]-t[0],r=n[1]-t[1];return a*a+r*r}function b$r(t){const n=t[0],a=t[1];return Math.sqrt(n*n+a*a)}function x$p(t){const n=t[0],a=t[1];return n*n+a*a}function p$1G(t,n){return t[0]=-n[0],t[1]=-n[1],t}function v$t(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function g$H(t,n){const a=n[0],r=n[1];let s=a*a+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=n[0]*s,t[1]=n[1]*s),t}function _$m(t,n){return t[0]*n[0]+t[1]*n[1]}function j$x(t,n,a){const r=n[0]*a[1]-n[1]*a[0];return t[0]=t[1]=0,t[2]=r,t}function y$K(t,n,a,r){const s=n[0],o=n[1];return t[0]=s+r*(a[0]-s),t[1]=o+r*(a[1]-o),t}function z$b(t,a){a=a||1;const r=2*t$_()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t}function A$j(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s,t[1]=a[1]*r+a[3]*s,t}function D$d(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[2]*s+a[4],t[1]=a[1]*r+a[3]*s+a[5],t}function E$e(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[3]*s+a[6],t[1]=a[1]*r+a[4]*s+a[7],t}function I$j(t,n,a){const r=n[0],s=n[1];return t[0]=a[0]*r+a[4]*s+a[12],t[1]=a[1]*r+a[5]*s+a[13],t}function L$i(t,n,a,r){const s=n[0]-a[0],o=n[1]-a[1],u=Math.sin(r),c=Math.cos(r);return t[0]=s*c-o*u+a[0],t[1]=s*u+o*c+a[1],t}function O$e(t,n){const a=t[0],r=t[1],s=n[0],o=n[1];let u=a*a+r*r;u>0&&(u=1/Math.sqrt(u));let c=s*s+o*o;c>0&&(c=1/Math.sqrt(c));const e=(a*s+r*o)*u*c;return e>1?0:e<-1?Math.PI:Math.acos(e)}function P$d(t){return "vec2("+t[0]+", "+t[1]+")"}function k$l(t,n){return t[0]===n[0]&&t[1]===n[1]}function w$r(n,a){const r=n[0],s=n[1],o=a[0],u=a[1];return Math.abs(r-o)<=a$1j*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-u)<=a$1j*Math.max(1,Math.abs(s),Math.abs(u))}const B$d=b$r,C$e=o$1c,F$h=u$1h,G$c=c$1N,H$9=d$11,J$7=q$b,K$4=x$p;var N$b=Object.freeze({__proto__:null,copy:a$1q,set:r$T,add:s$16,subtract:o$1c,multiply:u$1h,divide:c$1N,ceil:e$16,floor:i$1G,min:f$15,max:M$k,round:h$10,scale:l$1d,scaleAndAdd:m$13,distance:d$11,squaredDistance:q$b,length:b$r,squaredLength:x$p,negate:p$1G,inverse:v$t,normalize:g$H,dot:_$m,cross:j$x,lerp:y$K,random:z$b,transformMat2:A$j,transformMat2d:D$d,transformMat3:E$e,transformMat4:I$j,rotate:L$i,angle:O$e,str:P$d,exactEquals:k$l,equals:w$r,len:B$d,sub:C$e,mul:F$h,div:G$c,dist:H$9,sqrDist:J$7,sqrLen:K$4});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function a$1r(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t}function n$1o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s$17(t,a,n,s,r,o,u){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=u,t}function r$U(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5];let e=n*o-s*r;return e?(e=1/e,t[0]=o*e,t[1]=-s*e,t[2]=-r*e,t[3]=n*e,t[4]=(r*c-o*u)*e,t[5]=(s*u-n*c)*e,t):null}function o$1d(t){return t[0]*t[3]-t[1]*t[2]}function u$1i(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],h=n[0],M=n[1],i=n[2],f=n[3],b=n[4],l=n[5];return t[0]=s*h+o*M,t[1]=r*h+u*M,t[2]=s*i+o*f,t[3]=r*i+u*f,t[4]=s*b+o*l+c,t[5]=r*b+u*l+e,t}function c$1O(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],h=Math.sin(n),M=Math.cos(n);return t[0]=s*M+o*h,t[1]=r*M+u*h,t[2]=s*-h+o*M,t[3]=r*-h+u*M,t[4]=c,t[5]=e,t}function e$17(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],h=n[0],M=n[1];return t[0]=s*h,t[1]=r*h,t[2]=o*M,t[3]=u*M,t[4]=c,t[5]=e,t}function h$11(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],h=n[0],M=n[1];return t[0]=s,t[1]=r,t[2]=o,t[3]=u,t[4]=s*h+o*M+c,t[5]=r*h+u*M+e,t}function M$l(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=-n,t[3]=s,t[4]=0,t[5]=0,t}function i$1H(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t}function f$16(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t}function b$s(t){return "mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function l$1e(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function m$14(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t}function p$1H(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t}function d$12(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t}function x$q(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t}function w$s(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]}function y$L(a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],h=n[0],M=n[1],i=n[2],f=n[3],b=n[4],l=n[5];return Math.abs(s-h)<=a$1j*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(r-M)<=a$1j*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-i)<=a$1j*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(u-f)<=a$1j*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(c-b)<=a$1j*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(e-l)<=a$1j*Math.max(1,Math.abs(e),Math.abs(l))}let q$c=u$1i,_$n=p$1H;var j$y=Object.freeze({__proto__:null,copy:a$1r,identity:n$1o,set:s$17,invert:r$U,determinant:o$1d,multiply:u$1i,rotate:c$1O,scale:e$17,translate:h$11,fromRotation:M$l,fromScaling:i$1H,fromTranslation:f$16,str:b$s,frob:l$1e,add:m$14,subtract:p$1H,multiplyScalar:d$12,multiplyScalarAndAdd:x$q,exactEquals:w$s,equals:y$L,mul:q$c,sub:_$n});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$18(){return [1,0,0,1,0,0]}function r$V(e){return [e[0],e[1],e[2],e[3],e[4],e[5]]}function n$1p(e,r,n,t,a,o){return [e,r,n,t,a,o]}function t$10(e,r){return new Float64Array(e,r,6)}var a$1s=Object.freeze({__proto__:null,create:e$18,clone:r$V,fromValues:n$1p,createView:t$10});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const U$b=180/Math.PI;function W$7(t,e,n,r){return r&&n&&!r.equals(n)&&f$i(r,n)&&r.isWebMercator?r.isWebMercator?function(t,e){let n=e[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(r$O(n)),r$T(t,r$O(e[0])*e$m,.5*e$m*Math.log((1+n)/(1-n)))}(t,e):function(t,e,n){const r=s$10(e[0]/e$m);return r$T(t,n?r:r-360*Math.floor((r+180)/360),s$10(.5*Math.PI-2*Math.atan(Math.exp(-1*e[1]/e$m))))}(t,e):a$1q(t,e)}function E$f(t){return t.wkid?t:t.spatialReference||w$5.WGS84}function Q$6(t,e){return e.type?r$T(t,e.x,e.y):a$1q(t,e)}function B$e(t){return R$7(t)}function D$e(t,e){return Math.max(t.width/e[0],t.height/e[1])*ot$2(t.spatialReference)}async function T$i(o,a,i,c){let p,g;if(!o)return null;if(Array.isArray(o)&&!o.length)return null;if(L$2.isCollection(o)&&(o=o.toArray()),Array.isArray(o)&&o.length&&"object"==typeof o[0]){const e=o.every(t=>"attributes"in t),n=o.some(t=>!t.geometry);let s=o;if(e&&n&&a&&a.allLayerViews){const e=new Map;for(const t of o){const n=t.layer,r=e.get(n)||[],o=t.attributes[n.objectIdField];null!=o&&r.push(o),e.set(n,r);}const n=[];e.forEach((t,e)=>{const r=a.allLayerViews.find(t=>t.layer.id===e.id);if("queryFeatures"in r){const o=e.createQuery();o.objectIds=t,o.returnGeometry=!0,n.push(r.queryFeatures(o));}});const i=await p$9(n),c=[];for(const e of i)if(e&&e.features&&e.features.length)for(const n of e.features)u$4(n.geometry)&&c.push(n.geometry);s=c;}for(const t of s)c=await T$i(t,a,i,c);return c}if(Array.isArray(o)&&2===o.length&&"number"==typeof o[0]&&"number"==typeof o[1])p=new _$7(o);else if(o instanceof c$k)p=o;else if("geometry"in o)if(o.geometry)p=o.geometry;else if(o.layer){const t=o.layer,n=a.allLayerViews.find(e=>e.layer.id===t.id);if("queryFeatures"in n){const r=t.createQuery();r.objectIds=[o.attributes[t.objectIdField]],r.returnGeometry=!0;const a=await n.queryFeatures(r);p=w(a,"features",0,"geometry");}}if(t$6(p))return null;if(g="point"===p.type?new z$4({xmin:p.x,ymin:p.y,xmax:p.x,ymax:p.y,spatialReference:p.spatialReference}):p.extent,!g)return null;const x=f$i(g,i);if(!g.spatialReference.equals(i)&&x)g=h$d(g,i);else if(!x)return null;return c=c?c.union(g):g.clone()}async function H$a(t,e){if(!t||!e)return new l$15({targetGeometry:new _$7,scale:0,rotation:0});let n=e.spatialReference;const{constraints:r,padding:o,viewpoint:a,size:i}=e,s=[o?i[0]-o.left-o.right:i[0],o?i[1]-o.top-o.bottom:i[1]];let c=null;t instanceof l$15?c=t:t.viewpoint?c=t.viewpoint:t.target&&"esri.Viewpoint"===t.target.declaredClass&&(c=t.target);let y=null;c&&c.targetGeometry?y=c.targetGeometry:t instanceof z$4?y=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(y=await T$i(t.center,e,n)||await T$i(t.extent,e,n)||await T$i(t.target,e,n)||await T$i(t,e,n)),!y&&a&&a.targetGeometry?y=a.targetGeometry:!y&&e.extent&&(y=e.extent);const p=E$f(y);if(n||(n=E$f(e.spatialReference||e.extent||y)),!f$i(y,n)&&p&&!p.equals(n))return null;const g=Q$6(n$1n(),y.center?y.center:y),h=new _$7(W$7(g,g,p,n),n);let w=null;w=c&&c.targetGeometry&&"point"===c.targetGeometry.type?c.scale:t.hasOwnProperty("scale")&&t.scale?t.scale:t.hasOwnProperty("zoom")&&-1!==t.zoom&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(y)||"point"===y.type||"extent"===y.type&&0===y.width&&0===y.height?e.extent&&f$i(e.extent,n)?D$e(h$d(e.extent,n),s):e.extent?D$e(e.extent,s):a.scale:f$i(y.extent,n)?D$e(h$d(y.extent,n),s):D$e(y.extent,s);const d=function(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return {min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(t=>"layer"in t)){let e=0,n=0;for(const r of t){const t=r.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,n=t.maxScale>n?t.maxScale:n);}return e&&n?{min:e,max:n}:null}}}(t);d&&(d.min&&d.min>w?w=d.min:d.max&&d.max<w&&(w=d.max));let G=0;c?G=c.rotation:t.hasOwnProperty("rotation")?G=t.rotation:a&&(G=a.rotation);let j=new l$15({targetGeometry:h,scale:w,rotation:G});return r&&(j=r.fit(j),r.constrainByGeometry(j),r.rotationEnabled||(j.rotation=G)),j}function J$8(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function K$5(t,e,n){return n?r$T(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):l$1d(t,e,.5)}const X$5=function(){const t=n$1n();return function(e,n,r){const o=n.targetGeometry;Q$6(t,o);const a=.5*nt$2(n);return e.xmin=t[0]-a*r[0],e.ymin=t[1]-a*r[1],e.xmax=t[0]+a*r[0],e.ymax=t[1]+a*r[1],e.spatialReference=o.spatialReference,e}}();function Y$5(t,e,n,r,o){return pt$1(t,e,n.center),t.scale=D$e(n,r),o&&o.constraints&&o.constraints.constrain(t),t}const tt$2=function(){const t=n$1n();return function(e,n,r){return C$e(e,function(t,e){return l$1d(t,e,.5)}(e,n),K$5(t,n,r))}}(),et$3=function(){const t=e$18(),e=n$1n();return function(n,r,o,a){const i=nt$2(r),s=rt$1(r);return r$T(e,i,i),i$1H(t,e),c$1O(t,t,s),h$11(t,t,tt$2(e,o,a)),h$11(t,t,[0,a.top-a.bottom]),r$T(n,t[4],t[5])}}();function nt$2(t){return t.scale*(e=t.targetGeometry.spatialReference,T$4(e)?1/(39.37*B$e(e)*96):1);var e;}function rt$1(t){return r$O(t.rotation)||0}function ot$2(t){return T$4(t)?39.37*B$e(t)*96:1}const at$1=function(){const t=n$1n(),e=n$1n(),n=n$1n();return function(r,o,a,i,s,c){return p$1G(t,o),l$1d(e,a,.5*c),r$T(n,1/i*c,-1/i*c),n$1o(r),h$11(r,r,e),s&&c$1O(r,r,s),e$17(r,r,n),h$11(r,r,t),r}}(),it$2=function(){const t=n$1n();return function(e,n,r,o){const a=nt$2(n),i=rt$1(n);return Q$6(t,n.targetGeometry),at$1(e,t,r,a,i,o)}}(),st$2=function(){const t=n$1n();return function(e,n,r,o){const a=nt$2(n);return Q$6(t,n.targetGeometry),at$1(e,t,r,a,0,o)}}();function ct$2(t){if(t.isWrappable){const e=M$4(t);return e.valid[1]-e.valid[0]}return 0}function ut$1(t,e){return Math.round(ct$2(t)/e)}function ft$1(t,e){return H$a(t,e)}const lt$2=function(){const t=n$1n(),e=n$1n(),n=[0,0,0];return function(r,o,a){o$1c(t,r,o),g$H(t,t),o$1c(e,r,a),g$H(e,e),j$x(n,t,e);let i=Math.acos(_$m(t,e)/(b$r(t)*b$r(e)))*U$b;return n[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),mt$1=function(){const t=n$1n();return function(e,n,r,o){const a=e.targetGeometry;return J$8(e,n),et$3(t,n,r,o),a.x+=t[0],a.y+=t[1],e}}(),pt$1=function(){const t=n$1n();return function(e,n,r){J$8(e,n);const o=e.targetGeometry,a=E$f(r),i=E$f(o);return Q$6(t,r),W$7(t,t,a,i),o.x=t[0],o.y=t[1],e}}();const xt=function(){const t=n$1n();return function(e,n,r,o,a){a||(a="center"),C$e(t,r,o),l$1d(t,t,.5);const i=t[0],s=t[1];switch(a){case"center":r$T(t,0,0);break;case"left":r$T(t,-i,0);break;case"top":r$T(t,0,s);break;case"right":r$T(t,i,0);break;case"bottom":r$T(t,0,-s);break;case"top-left":r$T(t,-i,s);break;case"bottom-left":r$T(t,-i,-s);break;case"top-right":r$T(t,i,s);break;case"bottom-right":r$T(t,i,-s);}return kt(e,n,t),e}}();function ht$2(t,e,n){return J$8(t,e),t.rotation+=n,t}function bt(t,e,n){return J$8(t,e),t.rotation=n,t}const wt=function(){const t=n$1n();return function(e,n,r,o,a){return J$8(e,n),isNaN(r)||0===r||(Mt(t,o,n,a),e.scale=n.scale*r,Rt(t,t,e,a),kt(e,e,r$T(t,t[0]-o[0],o[1]-t[1]))),e}}();function dt$2(t,e,n){return J$8(t,e),t.scale=n,t}const Gt=function(){const t=n$1n();return function(e,n,r,o,a,i){return J$8(e,n),isNaN(r)||0===r||(Mt(t,a,n,i),e.scale=n.scale*r,e.rotation+=o,Rt(t,t,e,i),kt(e,e,r$T(t,t[0]-a[0],a[1]-t[1]))),e}}(),jt=function(){const t=n$1n(),e=n$1n();return function(n,r,o,a,i,s,c){return tt$2(e,s,c),s$16(t,i,e),a?Gt(n,r,o,a,t,s):wt(n,r,o,t,s)}}(),Mt=function(){const t=e$18();return function(e,n,r,o){return D$d(e,n,function(t,e,n,r){return it$2(t,e,n,r),r$U(t,t)}(t,r,o,1))}}(),Rt=function(){const t=e$18();return function(e,n,r,o){return D$d(e,n,it$2(t,r,o,1))}}(),kt=function(){const t=n$1n(),e=e$18();return function(n,r,o){J$8(n,r);const a=nt$2(r),i=n.targetGeometry;return M$l(e,rt$1(r)),e$17(e,e,t$$(a,a)),D$d(t,o,e),i.x+=t[0],i.y+=t[1],n}}();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$19(e,t,n,r){const a=3*e,i=3*(n-e)-a,u=1-a-i,s=3*t,o=3*(r-t)-s,f=1-s-o;function c(e){return ((u*e+i)*e+a)*e}return function(e,t=1e-6){return n=function(e,t){let n,r,s,o,f,l;for(s=e,l=0;l<8;l++){if(o=c(s)-e,Math.abs(o)<t)return s;if(f=(3*u*(b=s)+2*i)*b+a,Math.abs(f)<1e-6)break;s-=o/f;}var b;if(n=0,r=1,s=e,s<n)return n;if(s>r)return r;for(;n<r;){if(o=c(s),Math.abs(o-e)<t)return s;e>o?n=s:r=s,s=.5*(r-n)+n;}return s}(e,t),((f*n+o)*n+s)*n;var n;}}const t$11=/^cubic-bezier\((.*)\)/,n$1q={};function r$W(r){let a=n$1q[r]||null;if(!a){const n=t$11.exec(r);if(n){const t=n[1].split(",").map(e=>parseFloat(e.trim()));4!==t.length||t.some(e=>isNaN(e))||(a=e$19.apply(e$19,t));}}return a}n$1q.ease=e$19(.25,.1,.25,1),n$1q.linear=e$19(0,0,1,1),n$1q.easeIn=n$1q["ease-in"]=e$19(.42,0,1,1),n$1q.easeOut=n$1q["ease-out"]=e$19(0,0,.58,1),n$1q.easeInOut=n$1q["ease-in-out"]=e$19(.42,0,.58,1);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class u$1j{constructor(t,i,s,e){const o=t.targetGeometry,n=i.targetGeometry;e?"string"==typeof e&&(e=r$W(e)||n$1q.ease):e=n$1q.ease,this.easing=e,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360);}applyRatio(t,i){const s=this.easing(i);let e,o,n,a;i>=1?(e=this.tCenterX,o=this.tCenterY,n=this.tRotation,a=this.tScale):(e=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,n=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),t.targetGeometry.x=e,t.targetGeometry.y=o,t.scale=a,t.rotation=n;}}let c$1P=class extends h$c{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=n$1q.ease,this.view=null,this.viewpoint=null,this.viewpoint=new l$15({targetGeometry:new _$7,scale:0,rotation:0}),this._updateTask=v$6({postRender:this._postRender.bind(this)}),this._updateTask.pause();}destroy(){this._updateTask.remove(),this._updateTask=null;}animate(t,i,s){this.stop();const e=this.viewpoint;J$8(e,i),this.transition=new u$1j(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null);};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new a$1o({target:t.clone()}),e=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null);};return s.when(e,e),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null);}_postRender(t){const i=this.animation;if(i&&i.state!==a$1o.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else {const t=(performance.now()-this._startTime)/this.transition.duration,i=t>=1;this.transition.applyRatio(this.viewpoint,t),i&&this.animation.finish();}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone());}else this._updateTask.pause();}};e([y$5()],c$1P.prototype,"animation",void 0),e([y$5()],c$1P.prototype,"duration",void 0),e([y$5()],c$1P.prototype,"transition",void 0),e([y$5()],c$1P.prototype,"easing",void 0),e([y$5()],c$1P.prototype,"view",void 0),e([y$5()],c$1P.prototype,"viewpoint",void 0),c$1P=e([n$e("esri.views.2d.AnimationManager")],c$1P);var l$1f=c$1P;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class O$f{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions;},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:t,graphicsView:a,labelManager:s,layerViews:i,state:{id:r}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),u$4(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),u$4(a)&&(a.lastUpdateId!==r&&(a.viewChange(),a.lastUpdateId=r),a.updateRequested&&a.processUpdate(this._updateParameters)),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause();};}destroy(){this.stop();}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",e=>{this.stationary=e,this.requestFrame();}),this._frameTaskHandle=v$6(this);}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1);}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame());}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume();}_updateLayerView(e){const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$12(){return Promise.all([import('./chunks/webgl-1e700212.js'),import('./chunks/mapViewDeps-b33d8571.js')])}const s$18=()=>t$12().then(()=>import('./chunks/TileLayerView2D-f8402433.js')),a$1t=()=>t$12().then(()=>import('./chunks/FeatureLayerView2D-37d6c704.js')),i$1I={"base-dynamic":()=>t$12().then(()=>import('./chunks/BaseDynamicLayerView2D-cfc7f02b.js')),"base-tile":s$18,"bing-maps":s$18,csv:a$1t,"geo-rss":()=>t$12().then(()=>import('./chunks/GeoRSSLayerView2D-1a47bf7f.js')),feature:a$1t,geojson:a$1t,graphics:()=>t$12().then(()=>import('./chunks/GraphicsLayerView2D-f3089d87.js')),group:()=>t$12().then(()=>import('./chunks/GroupLayerView2D-ac3ea365.js')),imagery:()=>t$12().then(()=>import('./chunks/ImageryLayerView2D-4d66d2d7.js')),"imagery-tile":()=>t$12().then(()=>import('./chunks/ImageryTileLayerView2D-7553fc1b.js')),kml:()=>t$12().then(()=>import('./chunks/KMLLayerView2D-722beb1d.js')),"map-image":()=>t$12().then(()=>import('./chunks/MapImageLayerView2D-7e852c7a.js')),"map-notes":()=>t$12().then(()=>import('./chunks/MapNotesLayerView2D-71ca5628.js')),"ogc-feature":a$1t,"open-street-map":s$18,route:()=>t$12().then(()=>import('./chunks/RouteLayerView2D-46242599.js')),stream:()=>t$12().then(()=>import('./chunks/StreamLayerView2D-8b0daba1.js')),tile:s$18,"vector-tile":()=>t$12().then(()=>import('./chunks/VectorTileLayerView2D-fd1a051c.js')),wcs:()=>t$12().then(()=>import('./chunks/ImageryTileLayerView2D-7553fc1b.js')),"web-tile":s$18,wms:()=>t$12().then(()=>import('./chunks/WMSLayerView2D-84c3ca73.js')),wmts:()=>t$12().then(()=>import('./chunks/WMTSLayerView2D-a4343e50.js')),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};const o$1e={hasLayerViewModule:r=>u$4(i$1I[r.type]),importLayerView:t=>{const s=i$1I[t.type];if(!u$4(s))throw function(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",s=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new s$g(s+":view-not-supported",t+" is not supported in 2D")}(t);return s(t)}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let r$X,n$1r=null;function _$o(){return !!n$1r}function P$e(){return !!s("esri-wasm")}function s$19(){return r$X||(r$X=v$3((e,t)=>{import('./chunks/pe-wasm-aa6aed4c.js').then((function(e){return e.p})).then(({default:r})=>{r({locateFile:e=>e$v("esri/geometry/support/"+e),onAbort:e=>{t(new Error(e));}}).then(t=>{y$M(t),e();});});}),r$X)}var i$1J,E$g,u$1k;!function(e){function t(e,t,o){n$1r.ensureCache.prepare();const r=d$13(o),_=o===r,P=n$1r.ensureFloat64(r),s=n$1r._pe_geog_to_proj(n$1r.getPointer(e),t,P);return s&&R$e(o,t,P,_),s}function o(e,t,o){return r(e,t,o,0)}function r(e,t,o,r){n$1r.ensureCache.prepare();const _=d$13(o),P=o===_,s=n$1r.ensureFloat64(_),i=n$1r._pe_proj_to_geog_center(n$1r.getPointer(e),t,s,r);return i&&R$e(o,t,s,P),i}e.geogToProj=t,e.projGeog=function(e,r,n,_){switch(_){case E$g.PE_TRANSFORM_P_TO_G:return o(e,r,n);case E$g.PE_TRANSFORM_G_TO_P:return t(e,r,n)}return 0},e.projToGeog=o,e.projToGeogCenter=r;}(i$1J||(i$1J={})),function(e){e.init=function(){e.PE_BUFFER_MAX=n$1r.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=n$1r.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=n$1r.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=n$1r.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=n$1r.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=n$1r.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=n$1r.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=n$1r.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=n$1r.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=n$1r.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=n$1r.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=n$1r.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=n$1r.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=n$1r.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=n$1r.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=n$1r.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=n$1r.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=n$1r.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=n$1r.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=n$1r.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=n$1r.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=n$1r.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=n$1r.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=n$1r.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=n$1r.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=n$1r.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=n$1r.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=n$1r.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=n$1r.PeDefs.prototype.PE_HORIZON_DELTA;};}(E$g||(E$g={})),function(e){const t={},o={};function r(e,o){let r=null,P=t[e];if(P||(P={},t[e]=P),P.hasOwnProperty(String(o)))r=P[o];else {const t=n$1r.PeFactory.prototype.factoryByType(e,o);n$1r.compare(t,n$1r.NULL)||(r=t,P[o]=r);}return r=_(r),r}function _(e){if(e){const t=e.getType();switch(t){case E$g.PE_TYPE_GEOGCS:e=n$1r.castObject(e,n$1r.PeGeogcs);break;case E$g.PE_TYPE_PROJCS:e=n$1r.castObject(e,n$1r.PeProjcs);break;case E$g.PE_TYPE_GEOGTRAN:e=n$1r.castObject(e,n$1r.PeGeogtran);break;default:t&E$g.PE_TYPE_UNIT&&(e=n$1r.castObject(e,n$1r.PeUnit));}}return e}e.initialize=function(){n$1r.PeFactory.prototype.initialize(null);},e.coordsys=function(e){return r(E$g.PE_TYPE_COORDSYS,e)},e.factoryByType=r,e.fromString=function(e,t){let r=null,P=o[e];if(P||(P={},o[e]=P),P.hasOwnProperty(t))r=P[t];else {const o=n$1r.PeFactory.prototype.fromString(e,t);n$1r.compare(o,n$1r.NULL)||(r=o,P[t]=r);}return r=_(r),r},e.geogcs=function(e){return r(E$g.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return r(E$g.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return n$1r.PeFactory.prototype.getCode(e)},e.projcs=function(e){return r(E$g.PE_TYPE_PROJCS,e)},e.unit=function(e){return r(E$g.PE_TYPE_UNIT,e)};}(u$1k||(u$1k={}));let p$1I=null;var c$1Q,a$1u,g$I,f$17,T$j,O$g,S$m,l$1g,N$c;function y$M(e){function t(e,t,o){e[t]=o(e[t]);}n$1r=e,E$g.init(),c$1Q.init(),T$j.init(),S$m.init(),l$1g.init(),p$1I=class extends n$1r.PeGCSExtent{destroy(){n$1r.destroy(this);}};const o=[n$1r.PeDatum,n$1r.PeGeogcs,n$1r.PeGeogtran,n$1r.PeObject,n$1r.PeParameter,n$1r.PePrimem,n$1r.PeProjcs,n$1r.PeSpheroid,n$1r.PeUnit];for(const e of o)t(e.prototype,"getName",e=>function(){return e.call(this,new Array(E$g.PE_NAME_MAX))});for(const e of [n$1r.PeGeogtran,n$1r.PeProjcs])t(e.prototype,"getParameters",e=>function(){const t=new Array(E$g.PE_PARM_MAX);let o=e.call(this);for(let e=0;e<t.length;e++){const r=n$1r.getValue(o,"*");t[e]=r?n$1r.wrapPointer(r,n$1r.PeParameter):null,o+=Int32Array.BYTES_PER_ELEMENT;}return t});t(n$1r.PeHorizon.prototype,"getCoord",e=>function(){const t=this.getSize();if(!t)return null;const o=[];return R$e(o,t,e.call(this)),o}),t(n$1r.PeGTlistExtendedEntry.prototype,"getEntries",e=>{const t=n$1r._pe_getPeGTlistExtendedGTsSize();return function(){let o=null;const r=e.call(this);if(!n$1r.compare(r,n$1r.NULL)){o=[r];const e=this.getSteps();if(e>1){const _=n$1r.getPointer(r);for(let r=1;r<e;r++)o.push(n$1r.wrapPointer(_+t*r,n$1r.PeGTlistExtendedGTs));}}return o}});const r=n$1r._pe_getPeHorizonSize(),_=e=>function(){let t=this._cache;if(t||(t=new Map,this._cache=t),t.has(e))return t.get(e);let o=null;const _=e.call(this);if(!n$1r.compare(_,n$1r.NULL)){o=[_];const e=_.getNump();if(e>1){const t=n$1r.getPointer(_);for(let _=1;_<e;_++)o.push(n$1r.wrapPointer(t+r*_,n$1r.PeHorizon));}}return t.set(e,o),o};t(n$1r.PeProjcs.prototype,"horizonGcsGenerate",_),t(n$1r.PeProjcs.prototype,"horizonPcsGenerate",_),n$1r.PeObject.prototype.toString=function(e=E$g.PE_STR_OPTS_NONE){n$1r.ensureCache.prepare();const t=n$1r.getPointer(this),o=n$1r.ensureInt8(new Array(E$g.PE_BUFFER_MAX));return n$1r.UTF8ToString(n$1r._pe_object_to_string_ext(t,e,o))};}function M$m(e){if(!e)return;const t=n$1r.getClass(e);if(!t)return;const o=n$1r.getCache(t);if(!o)return;const r=n$1r.getPointer(e);r&&delete o[r];}function A$k(e,t){const o=[],r=new Array(t);for(let t=0;t<e;t++)o.push(n$1r.ensureInt8(r));return o}function d$13(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(e=>{t.push(e[0],e[1]);})):t=e,t}function R$e(e,t,o,r=!1){if(r)for(let r=0;r<2*t;r++)e[r]=n$1r.getValue(o+r*Float64Array.BYTES_PER_ELEMENT,"double");else {const r=0===e.length;for(let _=0;_<t;_++)r&&(e[_]=new Array(2)),e[_][0]=n$1r.getValue(o,"double"),e[_][1]=n$1r.getValue(o+Float64Array.BYTES_PER_ELEMENT,"double"),o+=2*Float64Array.BYTES_PER_ELEMENT;}}!function(e){let t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=n$1r.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=n$1r._pe_getPeGTlistExtendedEntrySize();},e.getGTlist=function(e,o,r,_,P,s){let i=null;const E=new n$1r.PeInteger(s);try{const u=n$1r.PeGTlistExtended.prototype.getGTlist(e,o,r,_,P,E);if((s=E.val)&&(i=[u],s>1)){const e=n$1r.getPointer(u);for(let o=1;o<s;o++)i.push(n$1r.wrapPointer(e+t*o,n$1r.PeGTlistExtendedEntry));}}finally{n$1r.destroy(E);}return i};}(c$1Q||(c$1Q={})),function(e){e.destroy=function(e){if(e&&e.length){for(const t of e)M$m(t),t.getEntries().forEach(e=>{M$m(e);const t=e.getGeogtran();M$m(t),t.getParameters().forEach(M$m),[t.getGeogcs1(),t.getGeogcs2()].forEach(e=>{M$m(e);const t=e.getDatum();M$m(t),M$m(t.getSpheroid()),M$m(e.getPrimem()),M$m(e.getUnit());});});n$1r.PeGTlistExtendedEntry.prototype.Delete(e[0]);}};}(a$1u||(a$1u={})),function(e){e.geogToGeog=function(e,t,o,r,_){n$1r.ensureCache.prepare();const P=d$13(o),s=o===P,i=n$1r.ensureFloat64(P);let E=0;r&&(E=n$1r.ensureFloat64(r));const u=n$1r._pe_geog_to_geog(n$1r.getPointer(e),t,i,E,_);return u&&R$e(o,t,i,s),u};}(g$I||(g$I={})),function(e){function t(e,t,o,r,_,P){let s,i;switch(n$1r.ensureCache.prepare(),e){case"dd":s=n$1r._pe_geog_to_dd,i=E$g.PE_DD_MAX;break;case"ddm":s=n$1r._pe_geog_to_ddm,i=E$g.PE_DDM_MAX;break;case"dms":s=n$1r._pe_geog_to_dms,i=E$g.PE_DMS_MAX;}let u=0;t&&(u=n$1r.getPointer(t));const p=d$13(r),c=n$1r.ensureFloat64(p),a=A$k(o,i),g=s(u,o,c,_,n$1r.ensureInt32(a));if(g)for(let e=0;e<o;e++)P[e]=n$1r.UTF8ToString(a[e]);return g}function o(e,t,o,r,_){let P;switch(n$1r.ensureCache.prepare(),e){case"dd":P=n$1r._pe_dd_to_geog;break;case"ddm":P=n$1r._pe_ddm_to_geog;break;case"dms":P=n$1r._pe_dms_to_geog;}let s=0;t&&(s=n$1r.getPointer(t));const i=r.map(e=>n$1r.ensureString(e)),E=n$1r.ensureInt32(i),u=n$1r.ensureFloat64(new Array(2*o)),p=P(s,o,E,u);return p&&R$e(_,o,u),p}e.geog_to_dms=function(e,o,r,n,_){return t("dms",e,o,r,n,_)},e.dms_to_geog=function(e,t,r,n){return o("dms",e,t,r,n)},e.geog_to_ddm=function(e,o,r,n,_){return t("ddm",e,o,r,n,_)},e.ddm_to_geog=function(e,t,r,n){return o("ddm",e,t,r,n)},e.geog_to_dd=function(e,o,r,n,_){return t("dd",e,o,r,n,_)},e.dd_to_geog=function(e,t,r,n){return o("dd",e,t,r,n)};}(f$17||(f$17={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=n$1r.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=n$1r.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=n$1r.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=n$1r.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=n$1r.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES;},e.geog_to_mgrs_extended=function(e,t,o,r,_,P,s){n$1r.ensureCache.prepare();let i=0;e&&(i=n$1r.getPointer(e));const u=d$13(o),p=n$1r.ensureFloat64(u),c=A$k(t,E$g.PE_MGRS_MAX),a=n$1r.ensureInt32(c),g=n$1r._pe_geog_to_mgrs_extended(i,t,p,r,_,P,a);if(g)for(let e=0;e<t;e++)s[e]=n$1r.UTF8ToString(c[e]);return g},e.mgrs_to_geog_extended=function(e,t,o,r,_){n$1r.ensureCache.prepare();let P=0;e&&(P=n$1r.getPointer(e));const s=o.map(e=>n$1r.ensureString(e)),i=n$1r.ensureInt32(s),E=n$1r.ensureFloat64(new Array(2*t)),u=n$1r._pe_mgrs_to_geog_extended(P,t,i,r,E);return u&&R$e(_,t,E),u};}(T$j||(T$j={})),function(e){e.geog_to_usng=function(e,t,o,r,_,P,s){n$1r.ensureCache.prepare();let i=0;e&&(i=n$1r.getPointer(e));const u=d$13(o),p=n$1r.ensureFloat64(u),c=A$k(t,E$g.PE_MGRS_MAX),a=n$1r.ensureInt32(c),g=n$1r._pe_geog_to_usng(i,t,p,r,_,P,a);if(g)for(let e=0;e<t;e++)s[e]=n$1r.UTF8ToString(c[e]);return g},e.usng_to_geog=function(e,t,o,r){n$1r.ensureCache.prepare();let _=0;e&&(_=n$1r.getPointer(e));const P=o.map(e=>n$1r.ensureString(e)),s=n$1r.ensureInt32(P),i=n$1r.ensureFloat64(new Array(2*t)),E=n$1r._pe_usng_to_geog(_,t,s,i);return E&&R$e(r,t,i),E};}(O$g||(O$g={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=n$1r.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=n$1r.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=n$1r.PeNotationUtm.prototype.PE_UTM_OPTS_NS;},e.geog_to_utm=function(e,t,o,r,_){n$1r.ensureCache.prepare();let P=0;e&&(P=n$1r.getPointer(e));const s=d$13(o),i=n$1r.ensureFloat64(s),u=A$k(t,E$g.PE_UTM_MAX),p=n$1r.ensureInt32(u),c=n$1r._pe_geog_to_utm(P,t,i,r,p);if(c)for(let e=0;e<t;e++)_[e]=n$1r.UTF8ToString(u[e]);return c},e.utm_to_geog=function(e,t,o,r,_){n$1r.ensureCache.prepare();let P=0;e&&(P=n$1r.getPointer(e));const s=o.map(e=>n$1r.ensureString(e)),i=n$1r.ensureInt32(s),E=n$1r.ensureFloat64(new Array(2*t)),u=n$1r._pe_utm_to_geog(P,t,i,r,E);return u&&R$e(_,t,E),u};}(S$m||(S$m={})),function(e){const t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=n$1r.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=n$1r.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=n$1r.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=n$1r.PePCSInfo.prototype.PE_POLE_POINT;},e.generate=function(o,r=e.PE_PCSINFO_OPTION_DOMAIN){let _,P;return t.has(o)&&(P=t.get(o),P[r]&&(_=P[r])),_||(_=n$1r.PePCSInfo.prototype.generate(o,r),P||(P=[],t.set(o,P)),P[r]=_),_};}(l$1g||(l$1g={})),function(e){e.version_string=function(){return n$1r.PeVersion.prototype.version_string()};}(N$c||(N$c={}));var D$f=Object.freeze({__proto__:null,get _pe(){return n$1r},isLoaded:_$o,isSupported:P$e,load:s$19,get PeCSTransformations(){return i$1J},get PeDefs(){return E$g},get PeFactory(){return u$1k},get PeGCSExtent(){return p$1I},get PeGTlistExtended(){return c$1Q},get PeGTlistExtendedEntry(){return a$1u},get PeGTTransformations(){return g$I},get PeNotationDms(){return f$17},get PeNotationMgrs(){return T$j},get PeNotationUsng(){return O$g},get PeNotationUtm(){return S$m},get PePCSInfo(){return l$1g},get PeVersion(){return N$c},_init:y$M});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let s$1a=0;class t$13{constructor(t=null){this.uid=s$1a++,t?(this._wkt=void 0!==t.wkt?t.wkt:null,this._wkid=void 0!==t.wkid?t.wkid:-1,this._isInverse=void 0!==t.isInverse&&!0===t.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1);}static fromGE(s){const i=new t$13;return i._wkt=s.wkt,i._wkid=s.wkid,i._isInverse=s.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=s$1a++;}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=s$1a++;}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=s$1a++;}getInverse(){const s=new t$13;return s._wkt=this.wkt,s._wkid=this._wkid,s._isInverse=!this.isInverse,s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$1b{constructor(s){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,s&&s.steps)for(const i of s.steps)i instanceof t$13?this.steps.push(i):this.steps.push(new t$13({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}));}static cacheKey(t,s){return [void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():"",void 0!==s.wkid&&null!==s.wkid?s.wkid.toString():"-1",void 0!==s.wkt&&null!==s.wkt?s.wkt.toString():""].join(",")}static fromGE(i){const e=new s$1b;let n="";for(const s of i.steps){const i=t$13.fromGE(s);e.steps.push(i),n+=i.uid.toString()+",";}return e._cached_projection={},e._gtlistentry=null,e._chain=n,e}getInverse(){const t=new s$1b;t.steps=[];for(let s=this.steps.length-1;s>=0;s--){const i=this.steps[s];t.steps.push(i.getInverse());}return t}getGTListEntry(){let t="";for(const s of this.steps)t+=s.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,e){this._cached_projection[s$1b.cacheKey(t,i)]=e;}getCachedGeTransformation(t,i){let e="";for(const t of this.steps)e+=t.uid.toString()+",";e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e);const n=this._cached_projection[s$1b.cacheKey(t,i)];return void 0===n?null:n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let u$1l=null,i$1K=null;function s$1c(){return !!u$1l&&_$o()}function a$1v(){return P$e()}let c$1R=null;function f$18(){return c$1R||(c$1R=p$9([s$19(),import('./chunks/geometryEngineBase-6905755d.js').then((function(n){return n.g})),import('./chunks/hydrated-235c749c.js')]).then(([,n,{hydratedAdapter:t}])=>{i$1K=t,u$1l=n.default,u$1l._enableProjection(D$f);}),c$1R)}function p$1J(n,t,e=null){return n instanceof Array?0===n.length?[]:h$12(i$1K,n,n[0].spatialReference,t,e):h$12(i$1K,[n],n.spatialReference,t,e)[0]}const m$15={};function h$12(n,t,e,r,o=null){if(null===o){const n=s$1b.cacheKey(e,r);void 0!==m$15[n]?o=m$15[n]:(null===(o=d$14(e,r,null))&&(o=new s$1b),m$15[n]=o);}return u$1l._project(n,t,e,r,o)}function d$14(n,t,e=null){const r=u$1l._getTransformation(i$1K,n,t,e,null==e?void 0:e.spatialReference);return null!==r?s$1b.fromGE(r):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$1f(o,i){const{spatialReference:m}=i,r=[i.x,i.y];let s=Number.POSITIVE_INFINITY,x=0,c=0;const a=[0,0],f="extent"===o.type?[[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]]]:o.rings;for(const t of f)for(let o=0;o<t.length-1;o++){o$x(a,r,t,o);const i=d$11(r,a);i<s&&(s=i,x=a[0],c=a[1]);}return {coordinate:new _$7({x:x,y:c,spatialReference:m}),distance:s}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var y$N;const u$1m=n$7.getLogger("esri.views.MapView");let g$J=y$N=class extends h$c{constructor(e){super(e),this.geometry=null,this.spatialReference=null;}get normalizedGeometry(){return this.geometry&&this.spatialReference?this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:f$i(this.geometry,this.spatialReference)?h$d(this.geometry,this.spatialReference):s$1c()?p$1J(this.geometry,this.spatialReference):(u$1m.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null):null}constrain(e,r){if(!this.normalizedGeometry)return e;const t=e.targetGeometry;if("extent"===this.normalizedGeometry.type?t$n(this.normalizedGeometry,t):f$k(this.normalizedGeometry,t))return e;const{coordinate:o}=o$1f(this.normalizedGeometry,t);return o?(e.targetGeometry=o,e):e}clone(){var e,r;return new y$N({geometry:null==(e=this.geometry)?void 0:e.clone(),spatialReference:null==(r=this.spatialReference)?void 0:r.clone()})}};e([y$5({constructOnly:!0})],g$J.prototype,"geometry",void 0),e([y$5({readOnly:!0,dependsOn:["geometry","spatialReference"]})],g$J.prototype,"normalizedGeometry",null),e([y$5({constructOnly:!0})],g$J.prototype,"spatialReference",void 0),g$J=y$N=e([n$e("esri.views.2d.constraints.GeometryConstraint")],g$J);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$1a;let i$1L=e$1a=class extends h$c{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0;}constrain(o,r){return this.enabled&&r?(this.rotationEnabled||(o.rotation=r.rotation),o):o}clone(){return new e$1a({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};e([y$5()],i$1L.prototype,"enabled",void 0),e([y$5()],i$1L.prototype,"rotationEnabled",void 0),i$1L=e$1a=e([n$e("esri.views.2d.constraints.RotationConstraint")],i$1L);var a$1w=i$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$1x;let c$1S=a$1x=class extends h$c{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0;}initialize(){let e,{lods:t,minScale:o,maxScale:s,minZoom:i,maxZoom:a}=this,c=-1,r=-1,l=!1,n=!1;if(0!==o&&0!==s&&o<s&&([o,s]=[s,o]),!t||!t.length)return this._set("effectiveMinScale",o),void this._set("effectiveMaxScale",s);t=t.map(e=>e.clone()),t.sort((e,t)=>t.scale-e.scale),t.forEach((e,t)=>e.level=t);for(const i of t)!l&&o>0&&o>=i.scale&&(c=i.level,l=!0),!n&&s>0&&s>=i.scale&&(r=e?e.level:-1,n=!0),e=i;-1===i&&(i=0===o?0:c),-1===a&&(a=0===s?t.length-1:r),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),o=t[i].scale,s=t[a].scale,t.splice(0,i),t.splice(a-i+1,t.length),t.forEach((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale;}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",a),this._set("effectiveMinScale",o),this._set("effectiveMaxScale",s);}constrain(e,t){if(t&&e.scale===t.scale)return e;const o=this.effectiveMinScale,s=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,c=0!==s&&e.scale<s,r=0!==o&&e.scale>o;if(c||r){const c=r?o:s;if(a){const o=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*o,i.y=a.y+(i.y-a.y)*o;}e.scale=c;}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),o=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(o>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const o=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[o]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return -1;const t=this._scales;let o,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(o=t[i],s=t[i+1],s===e){return i+this.effectiveMinZoom+1}if(o>e&&s<e){return i+this.effectiveMinZoom+1-(e-s)/(o-s)}}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o-1)}clone(){return new a$1x({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,o)=>Math.abs(o-e)<=Math.abs(t-e)?o:t,this._scales[0])),this._lodByScale[e].scale}};e([y$5({readOnly:!0})],c$1S.prototype,"effectiveLODs",void 0),e([y$5({readOnly:!0})],c$1S.prototype,"effectiveMinZoom",void 0),e([y$5({readOnly:!0})],c$1S.prototype,"effectiveMaxZoom",void 0),e([y$5({readOnly:!0})],c$1S.prototype,"effectiveMinScale",void 0),e([y$5({readOnly:!0})],c$1S.prototype,"effectiveMaxScale",void 0),e([y$5({type:[i$1y]})],c$1S.prototype,"lods",void 0),e([y$5()],c$1S.prototype,"minZoom",void 0),e([y$5()],c$1S.prototype,"maxZoom",void 0),e([y$5()],c$1S.prototype,"minScale",void 0),e([y$5()],c$1S.prototype,"maxScale",void 0),e([y$5()],c$1S.prototype,"snapToZoom",void 0),c$1S=a$1x=e([n$e("esri.views.2d.constraints.ZoomConstraint")],c$1S);var r$Y=c$1S;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const p$1K={base:null,key:"type",typeMap:{extent:z$4,polygon:x$8}};let c$1T=class extends i$n.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0;}initialize(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0);}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null);}set geometry(o){o?this._set("geometry",o):this._set("geometry",null);}get _defaultLODs(){const o=this.get("view.defaultsFromMap.tileInfo"),e=this.get("view.spatialReference");return o&&e&&o.spatialReference.equals(e)?o.lods:null}get _geometry(){return new g$J({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new a$1w({rotationEnabled:this.rotationEnabled})}get _zoom(){return new r$Y({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}canZoomInTo(o){const e=this.effectiveMaxScale;return 0===e||o>=e}canZoomOutTo(o){const e=this.effectiveMinScale;return 0===e||o<=e}constrain(o,e){return this._zoom.constrain(o,e),this._rotation.constrain(o,e),this._geometry.constrain(o,e),o}constrainByGeometry(o){return this._geometry.constrain(o)}fit(o){return this._zoom.fit(o)}zoomToScale(o){return this._zoom.zoomToScale(o)}scaleToZoom(o){return this._zoom.scaleToZoom(o)}snapScale(o){return this._zoom.snapToClosestScale(o)}snapToNextScale(o){return this._zoom.snapToNextScale(o)}snapToPreviousScale(o){return this._zoom.snapToPreviousScale(o)}};e([y$5({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],c$1T.prototype,"effectiveLODs",void 0),e([y$5({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],c$1T.prototype,"effectiveMinScale",void 0),e([y$5({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],c$1T.prototype,"effectiveMaxScale",void 0),e([y$5({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],c$1T.prototype,"effectiveMinZoom",void 0),e([y$5({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],c$1T.prototype,"effectiveMaxZoom",void 0),e([y$5({types:p$1K,value:null})],c$1T.prototype,"geometry",null),e([y$5({type:[i$1y]})],c$1T.prototype,"lods",void 0),e([y$5()],c$1T.prototype,"minScale",void 0),e([y$5()],c$1T.prototype,"maxScale",void 0),e([y$5()],c$1T.prototype,"minZoom",void 0),e([y$5()],c$1T.prototype,"maxZoom",void 0),e([y$5()],c$1T.prototype,"rotationEnabled",void 0),e([y$5()],c$1T.prototype,"snapToZoom",void 0),e([y$5()],c$1T.prototype,"view",void 0),e([y$5({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],c$1T.prototype,"_defaultLODs",null),e([y$5({type:g$J,dependsOn:["geometry","view.spatialReference"]})],c$1T.prototype,"_geometry",null),e([y$5({type:a$1w,dependsOn:["rotationEnabled"]})],c$1T.prototype,"_rotation",null),e([y$5({readOnly:!0,type:r$Y,dependsOn:["lods","minZoom","maxZoom","minScale","maxScale","snapToZoom","_defaultLODs"]})],c$1T.prototype,"_zoom",null),c$1T=e([n$e("esri.views.2d.MapViewConstraints")],c$1T);var f$19=c$1T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function a$1y(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t}function n$1s(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t}function s$1d(t,a,n,s,r,o,u,c,e,M){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=u,t[6]=c,t[7]=e,t[8]=M,t}function r$Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o$1g(t,a){if(t===a){const n=a[1],s=a[2],r=a[5];t[1]=a[3],t[2]=a[6],t[3]=n,t[5]=a[7],t[6]=s,t[7]=r;}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t}function u$1n(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],M=a[7],h=a[8],i=h*u-c*M,f=-h*o+c*e,b=M*o-u*e;let l=n*i+s*f+r*b;return l?(l=1/l,t[0]=i*l,t[1]=(-h*s+r*M)*l,t[2]=(c*s-r*u)*l,t[3]=f*l,t[4]=(h*n-r*e)*l,t[5]=(-c*n+r*o)*l,t[6]=b*l,t[7]=(-M*n+s*e)*l,t[8]=(u*n-s*o)*l,t):null}function c$1U(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],M=a[7],h=a[8];return t[0]=u*h-c*M,t[1]=r*M-s*h,t[2]=s*c-r*u,t[3]=c*e-o*h,t[4]=n*h-r*e,t[5]=r*o-n*c,t[6]=o*M-u*e,t[7]=s*e-n*M,t[8]=n*u-s*o,t}function e$1b(t){const a=t[0],n=t[1],s=t[2],r=t[3],o=t[4],u=t[5],c=t[6],e=t[7],M=t[8];return a*(M*o-u*e)+n*(-M*r+u*c)+s*(e*r-o*c)}function M$n(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],M=a[6],h=a[7],i=a[8],f=n[0],b=n[1],l=n[2],m=n[3],p=n[4],x=n[5],d=n[6],w=n[7],y=n[8];return t[0]=f*s+b*u+l*M,t[1]=f*r+b*c+l*h,t[2]=f*o+b*e+l*i,t[3]=m*s+p*u+x*M,t[4]=m*r+p*c+x*h,t[5]=m*o+p*e+x*i,t[6]=d*s+w*u+y*M,t[7]=d*r+w*c+y*h,t[8]=d*o+w*e+y*i,t}function h$13(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],M=a[6],h=a[7],i=a[8],f=n[0],b=n[1];return t[0]=s,t[1]=r,t[2]=o,t[3]=u,t[4]=c,t[5]=e,t[6]=f*s+b*u+M,t[7]=f*r+b*c+h,t[8]=f*o+b*e+i,t}function i$1M(t,a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],M=a[6],h=a[7],i=a[8],f=Math.sin(n),b=Math.cos(n);return t[0]=b*s+f*u,t[1]=b*r+f*c,t[2]=b*o+f*e,t[3]=b*u-f*s,t[4]=b*c-f*r,t[5]=b*e-f*o,t[6]=M,t[7]=h,t[8]=i,t}function f$1a(t,a,n){const s=n[0],r=n[1],o=n[2];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t[6]=o*a[6],t[7]=o*a[7],t[8]=o*a[8],t}function b$t(t,a,n){const s=n[0],r=n[1];return t[0]=s*a[0],t[1]=s*a[1],t[2]=s*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t}function l$1h(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t}function m$16(t,a){const n=Math.sin(a),s=Math.cos(a);return t[0]=s,t[1]=n,t[2]=0,t[3]=-n,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function p$1L(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x$r(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t}function d$15(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=n+n,c=s+s,e=r+r,M=n*u,h=s*u,i=s*c,f=r*u,b=r*c,l=r*e,m=o*u,p=o*c,x=o*e;return t[0]=1-i-l,t[3]=h-x,t[6]=f+p,t[1]=h+x,t[4]=1-M-l,t[7]=b-m,t[2]=f-p,t[5]=b+m,t[8]=1-M-i,t}function w$t(t,a){const n=a[0],s=a[1],r=a[2],o=a[4],u=a[5],c=a[6],e=a[8],M=a[9],h=a[10],i=h*u-c*M,f=-h*o+c*e,b=M*o-u*e,l=n*i+s*f+r*b;if(!l)return null;const m=1/l;return t[0]=i*m,t[1]=(-h*s+r*M)*m,t[2]=(c*s-r*u)*m,t[3]=f*m,t[4]=(h*n-r*e)*m,t[5]=(-c*n+r*o)*m,t[6]=b*m,t[7]=(-M*n+s*e)*m,t[8]=(u*n-s*o)*m,t}function y$O(t,a){const n=a[0],s=a[1],r=a[2],o=a[3],u=a[4],c=a[5],e=a[6],M=a[7],h=a[8],i=a[9],f=a[10],b=a[11],l=a[12],m=a[13],p=a[14],x=a[15],d=n*c-s*u,w=n*e-r*u,y=n*M-o*u,j=s*e-r*c,q=s*M-o*c,_=r*M-o*e,g=h*m-i*l,v=h*p-f*l,A=h*x-b*l,E=i*p-f*m,F=i*x-b*m,S=f*x-b*p;let z=d*S-w*F+y*E+j*A-q*v+_*g;return z?(z=1/z,t[0]=(c*S-e*F+M*E)*z,t[1]=(e*A-u*S-M*v)*z,t[2]=(u*F-c*A+M*g)*z,t[3]=(r*F-s*S-o*E)*z,t[4]=(n*S-r*A+o*v)*z,t[5]=(s*A-n*F-o*g)*z,t[6]=(m*_-p*q+x*j)*z,t[7]=(p*y-l*_-x*w)*z,t[8]=(l*q-m*y+x*d)*z,t):null}function j$z(t,a,n){return t[0]=2/a,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function q$d(t){return "mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function _$p(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function g$K(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t[8]=a[8]+n[8],t}function v$u(t,a,n){return t[0]=a[0]-n[0],t[1]=a[1]-n[1],t[2]=a[2]-n[2],t[3]=a[3]-n[3],t[4]=a[4]-n[4],t[5]=a[5]-n[5],t[6]=a[6]-n[6],t[7]=a[7]-n[7],t[8]=a[8]-n[8],t}function A$l(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*n,t}function E$h(t,a,n,s){return t[0]=a[0]+n[0]*s,t[1]=a[1]+n[1]*s,t[2]=a[2]+n[2]*s,t[3]=a[3]+n[3]*s,t[4]=a[4]+n[4]*s,t[5]=a[5]+n[5]*s,t[6]=a[6]+n[6]*s,t[7]=a[7]+n[7]*s,t[8]=a[8]+n[8]*s,t}function F$i(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]}function S$n(a,n){const s=a[0],r=a[1],o=a[2],u=a[3],c=a[4],e=a[5],M=a[6],h=a[7],i=a[8],f=n[0],b=n[1],l=n[2],m=n[3],p=n[4],x=n[5],d=n[6],w=n[7],y=n[8];return Math.abs(s-f)<=a$1j*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(r-b)<=a$1j*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-l)<=a$1j*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-m)<=a$1j*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-p)<=a$1j*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(e-x)<=a$1j*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(M-d)<=a$1j*Math.max(1,Math.abs(M),Math.abs(d))&&Math.abs(h-w)<=a$1j*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(i-y)<=a$1j*Math.max(1,Math.abs(i),Math.abs(y))}let z$c=M$n,B$f=v$u;var k$m=Object.freeze({__proto__:null,fromMat4:a$1y,copy:n$1s,set:s$1d,identity:r$Z,transpose:o$1g,invert:u$1n,adjoint:c$1U,determinant:e$1b,multiply:M$n,translate:h$13,rotate:i$1M,scale:f$1a,scaleByVec2:b$t,fromTranslation:l$1h,fromRotation:m$16,fromScaling:p$1L,fromMat2d:x$r,fromQuat:d$15,normalFromMat4Legacy:w$t,normalFromMat4:y$O,projection:j$z,str:q$d,frob:_$p,add:g$K,subtract:v$u,multiplyScalar:A$l,multiplyScalarAndAdd:E$h,exactEquals:F$i,equals:S$n,mul:z$c,sub:B$f});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1t(){const n=new Float32Array(6);return n[0]=1,n[3]=1,n}function t$14(n){const t=new Float32Array(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function r$_(n,t,r,a,o,e){const c=new Float32Array(6);return c[0]=n,c[1]=t,c[2]=r,c[3]=a,c[4]=o,c[5]=e,c}function a$1z(n,t){return new Float32Array(n,t,6)}function o$1h(n,t,r,a){const o=t[a],e=t[a+1];n[a]=r[0]*o+r[2]*e+r[4],n[a+1]=r[1]*o+r[3]*e+r[5];}function e$1c(n,t,r,a=0,e=0,c=2){const s=e||t.length/c;for(let e=a;e<s;e++){o$1h(n,t,r,e*c);}}var c$1V=Object.freeze({__proto__:null,create:n$1t,clone:t$14,fromValues:r$_,createView:a$1z,transform:o$1h,transformMany:e$1c});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$$(){const r=new Float32Array(9);return r[0]=1,r[4]=1,r[8]=1,r}function n$1u(r){const n=new Float32Array(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function e$1d(r,n,e,t,a,o,c,u,s){const l=new Float32Array(9);return l[0]=r,l[1]=n,l[2]=e,l[3]=t,l[4]=a,l[5]=o,l[6]=c,l[7]=u,l[8]=s,l}function t$15(r,n){return new Float32Array(r,n,9)}var a$1A=Object.freeze({__proto__:null,create:r$$,clone:n$1u,fromValues:e$1d,createView:t$15});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1v(){return new Float32Array(2)}function r$10(n){const r=new Float32Array(2);return r[0]=n[0],r[1]=n[1],r}function t$16(n,r){const t=new Float32Array(2);return t[0]=n,t[1]=r,t}function e$1e(n,r){return new Float32Array(n,r,2)}function a$1B(){return n$1v()}function o$1i(){return t$16(1,1)}function u$1o(){return t$16(1,0)}function s$1e(){return t$16(0,1)}const c$1W=a$1B(),f$1b=o$1i(),i$1N=u$1o(),l$1i=s$1e();var _$q=Object.freeze({__proto__:null,create:n$1v,clone:r$10,fromValues:t$16,createView:e$1e,zeros:a$1B,ones:o$1i,unitX:u$1o,unitY:s$1e,ZEROS:c$1W,ONES:f$1b,UNIT_X:i$1N,UNIT_Y:l$1i});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1w(n){return n instanceof Float32Array&&n.length>=2}function r$11(n){return Array.isArray(n)&&n.length>=2}function t$17(t){return n$1w(t)||r$11(t)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var b$u;const U$c=[0,0];let G$d=b$u=class extends a$h{constructor(...t){super(...t),this._viewpoint2D={center:n$1n(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new z$4,this.id=0,this.inverseTransform=e$18(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=e$18(),this.transformNoRotation=e$18(),this.displayMat3=r$$(),this.displayViewMat3=r$$(),this.viewMat3=r$$(),this.viewMat2d=n$1t(),this.worldScreenWidth=0,this.size=[0,0];}set pixelRatio(t){this._set("pixelRatio",t),this._update();}set size(t){this._set("size",t),this._update();}set viewpoint(t){if(t){const s=this._viewpoint2D,i=t.targetGeometry;s.center[0]=i.x,s.center[1]=i.y,s.rotation=t.rotation,s.scale=t.scale,s.spatialReference=i.spatialReference;}this._update();}copy(t){const s=this.size,i=this.viewpoint;return i&&s?(this.viewpoint=J$8(i,t.viewpoint),this._set("size",a$1q(s,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new b$u({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,s,i){return t$17(s)?D$d(t,s,this.inverseTransform):(U$c[0]=s,U$c[1]=i,D$d(t,U$c,this.inverseTransform))}toScreen(t,s,i){return t$17(s)?D$d(t,s,this.transform):(U$c[0]=s,U$c[1]=i,D$d(t,U$c,this.transform))}toScreenNoRotation(t,s,i){return t$17(s)?D$d(t,s,this.transformNoRotation):(U$c[0]=s,U$c[1]=i,D$d(t,U$c,this.transformNoRotation))}getScreenTransform(t,s){const{center:i}=this._viewpoint2D,e=this._get("pixelRatio")||1,o=this._get("size");return at$1(t,i,o,s,0,e),t}_update(){const{center:t,spatialReference:s,scale:i,rotation:e}=this._viewpoint2D,r=this._get("pixelRatio")||1,p=this._get("size"),w=new l$15({targetGeometry:new _$7(t[0],t[1],s),scale:i,rotation:e});if(this._set("viewpoint",w),!p||!s||!i)return;this.resolution=nt$2(w),this.rotation=e,this.scale=i,this.spatialReference=s,a$1q(this.center,t);const y=0!==p[0]?2/p[0]:0,R=0!==p[1]?-2/p[1]:0;s$1d(this.displayMat3,y,0,0,0,R,0,-1,1,1);const x=r$Z(this.viewMat3),N=t$16(p[0]/2,p[1]/2),T=t$16(-p[0]/2,-p[1]/2),V=r$O(e);h$13(x,x,N),i$1M(x,x,V),h$13(x,x,T),M$n(this.displayViewMat3,this.displayMat3,x);const b=n$1o(this.viewMat2d);return h$11(b,b,N),c$1O(b,b,V),h$11(b,b,T),X$5(this.extent,w,p),it$2(this.transform,w,p,r),r$U(this.inverseTransform,this.transform),st$2(this.transformNoRotation,w,p,r),this.worldScreenWidth=ut$1(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};e([y$5({readOnly:!0})],G$d.prototype,"id",void 0),e([y$5({value:1,json:{write:!0}})],G$d.prototype,"pixelRatio",null),e([y$5({json:{write:!0}})],G$d.prototype,"size",null),e([y$5({type:l$15,json:{write:!0}})],G$d.prototype,"viewpoint",null),G$d=b$u=e([n$e("esri.views.2d.ViewState")],G$d);var O$h=G$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let c$1X=class extends h$c{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0;}};e([y$5()],c$1X.prototype,"left",void 0),e([y$5()],c$1X.prototype,"top",void 0),e([y$5()],c$1X.prototype,"right",void 0),e([y$5()],c$1X.prototype,"bottom",void 0),c$1X=e([n$e("esri.views.2d.PaddedViewState.Padding")],c$1X);let h$14=class extends O$h{constructor(...t){super(...t),this.paddedViewState=new O$h,this._updateContent=(()=>{const t=n$1n();return ()=>{const e=this._get("size"),o=this._get("padding");if(!e||!o)return;const s=this.paddedViewState;r$T(t,o.left+o.right,o.top+o.bottom),o$1c(t,e,t),a$1q(s.size,t);const i=s.viewpoint;i&&(this.viewpoint=i);}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new c$1X,this.size=[0,0];}set padding(t){this._set("padding",t||new c$1X);}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,mt$1(e,t,this._get("size"),this._get("padding"));const o=this._viewpoint2D,s=e.targetGeometry;o.center[0]=s.x,o.center[1]=s.y,o.rotation=e.rotation,o.scale=e.scale,o.spatialReference=s.spatialReference,this._update();}}};e([y$5()],h$14.prototype,"paddedViewState",void 0),e([y$5({type:c$1X})],h$14.prototype,"padding",null),e([y$5()],h$14.prototype,"viewpoint",null),h$14=e([n$e("esri.views.2d.PaddedViewState")],h$14);var m$17=h$14;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class u$1p{constructor(e,s){this.item=e,this.controller=s,this.promise=null;}}class l$1j{constructor(s){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,s.concurrency&&(this.concurrency=s.concurrency),this._queue=new s$Y(s.peeker),this.process=s.process;const t=s.scheduler;s.task&&u$4(t)&&(this._task=t.registerTask(s.task,e=>this.update(e),()=>this.needsUpdate()));}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null);}get length(){return this._processingItems.size+this._queue.length}abort(e){const s=this._controllers.get(e);s&&s.abort();}clear(){this._queue.clear();const e=[];this._controllers.forEach(s=>e.push(s)),this._controllers.clear(),e.forEach(e=>e.abort()),this._processingItems.clear(),this._cancelNext();}forEach(e){this._deferreds.forEach((s,t)=>e(t));}get(e){const s=this._deferreds.get(e);return s?s.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext());}push(s,o){const n=this.get(s);if(n)return n;let u;const l=g$4();let _=null;o&&(_=T$2(o,()=>l.abort()));const a=()=>{d.remove(),u$4(_)&&_.remove(),this._deferreds.delete(s),this._controllers.delete(s),this._queue.remove(s),this._processingItems.delete(s),this._scheduleNext();},d=P$1(l.signal,()=>{const e=this._processingItems.get(s);e&&e.controller.abort(),a(),u.reject(d$5());});return u=_$3(),this._deferreds.set(s,u),this._controllers.set(s,l),u.promise.then(a,a),this._queue.push(s),this._scheduleNext(),u.promise}reset(){const e=[];this._processingItems.forEach(s=>e.push(s)),this._processingItems.clear();for(const s of e)this._queue.push(s.item),s.controller.abort();this._scheduleNext();}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}needsUpdate(){return !this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}update(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress();}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=k$3(()=>{this._schedule=null,this._next();}));}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop());}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null);}_processResult(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(s));}_processError(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(s));}_canProcessFulfillment(e){return !!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(t$6(e))return;let r;const i=g$4(),h=new u$1p(e,i);this._processingItems.set(e,h);try{r=this.process(e,i.signal);}catch(e){this._processError(h,e);}var c;(c=r)&&"function"==typeof c.then?(h.promise=r,r.then(e=>this._processResult(h,e),e=>this._processError(h,e))):this._processResult(h,r);}get test(){return {update:e=>this.update(e)}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1q=new Set,c$1Y=[],h$15=new Map,a$1C=[0,0];let p$1M=class extends h$c{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:t,process:e}=this;this._peekByScaleFirst,this._peekByCenterFirst,this._queue=new l$1j({concurrency:t,process:(t,s)=>{const r=this._keyToItem.get(t);return e(r,{signal:s})},peeker:t=>f$t(t)});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const e="string"==typeof t?t:t.id;this._queue.abort(e);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(t){return "string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const e="string"==typeof t?t:t.id;return this.has(e)&&this._queue.isOngoing(e)}pause(){this._queue.pause();}push(t,e){const s=t.key.id+"-"+e;if(this.has(s))return this.get(s);const r=this._queue.push(s),o=()=>{this._keyToItem.delete(s),this.notifyChange("updating");};return this._keyToItem.set(s,t),r.then(o,o),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating");}resume(){this._queue.resume();}_peekByScaleFirst(t){if(!this.state)return f$t(t);const e=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;t.forEach(t=>{const e=this._keyToItem.get(t),o=this.tileInfoView.getTileScale(e.key);h$15.has(o)||(h$15.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),h$15.get(o).push(e.key),u$1q.add(o);});let i=this.state.scale;var n,a;h$15.has(i)||(a=u$1q,(n=c$1Y).length=0,a.forEach(t=>n.push(t)),c$1Y.sort(),i=c$1Y.reduce((t,e)=>Math.abs(e-i)<Math.abs(t-i)?e:t,c$1Y[0])),i=Math.min(i,s),i=Math.max(i,r);const p=h$15.get(i),l=e.getClosestInfoForScale(i),y=l.getColumnForX(this.state.center[0]),g=l.getRowForY(this.state.center[1]);return p.sort((t,e)=>{const s=l.denormalizeCol(t.col,t.world),r=l.denormalizeCol(e.col,e.world);return Math.sqrt((y-s)*(y-s)+(g-t.row)*(g-t.row))-Math.sqrt((y-r)*(y-r)+(g-e.row)*(g-e.row))}),u$1q.clear(),h$15.clear(),p[0].id}_peekByCenterFirst(t){if(!this.state)return f$t(t);const e=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return t.forEach(t=>{const o=this._keyToItem.get(t);e.getTileCoords(a$1C,o.key);const u=d$11(a$1C,s);u<r&&(r=u,n=o.key);}),n.id}};e([y$5({constructOnly:!0})],p$1M.prototype,"concurrency",void 0),e([y$5({constructOnly:!0})],p$1M.prototype,"process",void 0),e([y$5()],p$1M.prototype,"state",void 0),e([y$5({constructOnly:!0})],p$1M.prototype,"strategy",void 0),e([y$5({constructOnly:!0})],p$1M.prototype,"tileInfoView",void 0),e([y$5({readOnly:!0})],p$1M.prototype,"updating",null),p$1M=e([n$e("esri.views.2d.tiling.PagedTileQueue")],p$1M);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function o$1j(t,r){return [t,r]}function i$1O(t,r,o){return t[0]=r,t[1]=o,t}const e$1f=new e$14("0/0/0/0");class s$1f{constructor(t,r,o,i,e,s,n,l,h,a,u,m){this.level=t,this.resolution=r,this.scale=o,this.origin=i,this.first=e,this.last=s,this.size=n,this.norm=l,this.worldStart=h,this.worldEnd=a,this.worldSize=u,this.wrap=m;}static create(r,e,n){const l=M$4(r.spatialReference),h=o$1j(r.origin.x,r.origin.y),a=o$1j(r.size[0]*e.resolution,r.size[1]*e.resolution),u=o$1j(-1/0,-1/0),m=o$1j(1/0,1/0),g=o$1j(1/0,1/0);let w,d,c,f;return n&&(i$1O(u,Math.max(0,Math.floor((n.xmin-h[0])/a[0])),Math.max(0,Math.floor((h[1]-n.ymax)/a[1]))),i$1O(m,Math.max(0,Math.floor((n.xmax-h[0])/a[0])),Math.max(0,Math.floor((h[1]-n.ymin)/a[1]))),i$1O(g,m[0]-u[0]+1,m[1]-u[1]+1)),r.isWrappable?(w=o$1j(Math.ceil(Math.round((l.valid[1]-l.valid[0])/e.resolution)/r.size[0]),g[1]),d=o$1j(Math.floor((l.origin[0]-h[0])/a[0]),u[1]),c=o$1j(w[0]+d[0]-1,m[1]),f=!0):(d=u,c=m,w=g,f=!1),new s$1f(e.level,e.resolution,e.scale,h,u,m,g,a,d,c,w,f)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return (t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return (this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,o=!1){e$1f.set(r);const i=o?e$1f.col:this.denormalizeCol(e$1f.col,e$1f.world),s=e$1f.row;return function(t,r,o,i,e){t[0]=r,t[1]=o,t[2]=i,t[3]=e;}(t,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),t}getTileCoords(t,r,o=!1){e$1f.set(r);const s=o?e$1f.col:this.denormalizeCol(e$1f.col,e$1f.world);return Array.isArray(t)?i$1O(t,this.getXForColumn(s),this.getYForRow(e$1f.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(e$1f.row)),t}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class l$1k{constructor(){this.spans=[];}acquire(o){this.lodInfo=o;}release(){this.lodInfo=null,this.spans.length=0;}forEach(o,l){const{spans:s,lodInfo:t}=this,{level:e}=t;if(0!==s.length)for(const{row:r,colFrom:n,colTo:c}of s)for(let s=n;s<=c;s++)o.call(l,e,r,t.normalizeCol(s),t.getWorldForColumn(s));}}l$1k.pool=new t$e(l$1k);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$1g{constructor(o,t,s){this.row=o,this.colFrom=t,this.colTo=s;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$1P=new e$14("0/0/0/0");class n$1x{constructor(e,t,o,l,s,i,n,r){this.x=e,this.ymin=t,this.ymax=o,this.invM=l,this.leftAdjust=s,this.rightAdjust=i,this.leftBound=n,this.rightBound=r;}static create(e,t){e[1]>t[1]&&([e,t]=[t,e]);const[o,l]=e,[s,i]=t,r=s-o,a=i-l,h=0!==a?r/a:0,c=(Math.ceil(l)-l)*h,f=(Math.floor(l)-l)*h;return new n$1x(o,Math.floor(l),Math.ceil(i),h,r<0?c:f,r<0?f:c,r<0?s:o,r<0?o:s)}incrRow(){this.x+=this.invM;}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const r$12=[[0,0],[0,0],[0,0],[0,0]];class a$1D{constructor(e,t){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const l=e.lods.slice();l.sort((function(e,t){return t.scale-e.scale}));const s=this._lodInfos=l.map(l=>s$1f.create(e,l,t));l.forEach((e,t)=>{this._infoByLevel[e.level]=s[t],this._infoByScale[e.scale]=s[t],this.scales[t]=e.scale;},this),this._wrap=e.isWrappable;}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel["number"==typeof e?e:e.level]}getTileBounds(e,t,o=!1){i$1P.set(t);const l=this._infoByLevel[i$1P.level];return l?l.getTileBounds(e,i$1P,o):e}getTileCoords(e,t,o=!1){i$1P.set(t);const l=this._infoByLevel[i$1P.level];return l?l.getTileCoords(e,i$1P,o):e}getTileCoverage(e,t=192,o="closest"){const i="closest"===o?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),a=l$1k.pool.acquire(i),h=this._wrap;let c,f,u,m=1/0,g=-1/0;const d=a.spans;r$12[0][0]=r$12[0][1]=r$12[1][1]=r$12[3][0]=-t,r$12[1][0]=r$12[2][0]=e.size[0]+t,r$12[2][1]=r$12[3][1]=e.size[1]+t;for(const t of r$12)e.toMap(t,t),t[0]=i.getColumnForX(t[0]),t[1]=i.getRowForY(t[1]);const y=[];let _=3;for(let e=0;e<4;e++){if(r$12[e][1]===r$12[_][1]){_=e;continue}const t=n$1x.create(r$12[e],r$12[_]);m=Math.min(t.ymin,m),g=Math.max(t.ymax,g),void 0===y[t.ymin]&&(y[t.ymin]=[]),y[t.ymin].push(t),_=e;}if(null==m||null==g||g-m>100)return null;let v=[];for(c=m;c<g;){null!=y[c]&&(v=v.concat(y[c])),f=1/0,u=-1/0;for(let e=v.length-1;e>=0;e--){const t=v[e];f=Math.min(f,t.getLeftCol()),u=Math.max(u,t.getRightCol());}if(f=Math.floor(f),u=Math.floor(u),c>=i.first[1]&&c<=i.last[1])if(h)if(i.size[0]<i.worldSize[0]){const e=Math.floor(u/i.worldSize[0]);for(let t=Math.floor(f/i.worldSize[0]);t<=e;t++)d.push(new s$1g(c,Math.max(i.getFirstColumnForWorld(t),f),Math.min(i.getLastColumnForWorld(t),u)));}else d.push(new s$1g(c,f,u));else f>i.last[0]||u<i.first[0]||(f=Math.max(f,i.first[0]),u=Math.min(u,i.last[0]),d.push(new s$1g(c,f,u)));c+=1;for(let e=v.length-1;e>=0;e--){const t=v[e];t.ymax>=c?t.incrRow():v.splice(e,1);}}return a}getTileParentId(e){i$1P.set(e);const t=this._infoByLevel[i$1P.level],o=this._lodInfos.indexOf(t)-1;return o<0?null:(this._getTileIdAtLOD(i$1P,this._lodInfos[o],i$1P),i$1P.id)}getTileResolution(e){const t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){i$1P.set(t);const o=this._infoByLevel[i$1P.level],l=e.lodInfo;if(l.resolution>o.resolution){this._getTileIdAtLOD(i$1P,l,i$1P);const t=l.denormalizeCol(i$1P.col,i$1P.world);for(const o of e.spans)if(o.row===i$1P.row&&o.colFrom<=t&&o.colTo>=t)return !0}if(l.resolution<o.resolution){const[t,s,n,r]=e.spans.reduce((e,t)=>(e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e),[1/0,-1/0,1/0,-1/0]),a=o.denormalizeCol(i$1P.col,i$1P.world),h=l.getColumnForX(o.getXForColumn(a)),c=l.getRowForY(o.getYForRow(i$1P.row)),f=l.getColumnForX(o.getXForColumn(a+1))-1,u=l.getRowForY(o.getYForRow(i$1P.row+1))-1;return !(h>r||f<n||c>s||u<t)}const s=l.denormalizeCol(i$1P.col,i$1P.world);return e.spans.some(e=>e.row===i$1P.row&&e.colFrom<=s&&e.colTo>=s)}normalizeBounds(t,o,l){if(t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],this._wrap){const o=M$4(this.tileInfo.spatialReference),s=-l*(o.valid[1]-o.valid[0]);t[0]+=s,t[2]+=s;}return t}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let o=1;o<t.length-1;o++)if(e>t[o]+1e-6)return this._infoByScale[t[o-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce((t,o)=>Math.abs(o-e)<Math.abs(t-e)?o:t,t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let o=t.length-1;o>=0;o--)if(e<t[o]){if(o===t.length-1)return this._infoByScale[t[t.length-1]].level;return this._infoByScale[t[o]].level+(t[o]-e)/(t[o]-t[o+1])}return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,t,o){const l=this._infoByLevel[o.level];return e.set(o),t.resolution<l.resolution?null:(t.resolution===l.resolution||(e.level=t.level,e.col=Math.floor(o.col*l.resolution/t.resolution+.01),e.row=Math.floor(o.row*l.resolution/t.resolution+.01)),e)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1r=new Set,c$1Z=[],h$16=new Map,a$1E=[0,0];let p$1N=class extends h$c{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null;}initialize(){const{concurrency:t,process:e,strategy:s}=this;this._queue=new l$1j({concurrency:t,process:(t,s)=>{const r=this._keyToItem.get(t);return e(r,{signal:s})},peeker:"scale-first"===s?t=>this._peekByScaleFirst(t):t=>this._peekByCenterFirst(t)});}destroy(){this.clear(),this._queue.destroy(),this._queue=null;}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(t){const e="string"==typeof t?t:t.id;this._queue.abort(e);}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating");}has(t){return "string"==typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const e="string"==typeof t?t:t.id;return this.has(e)&&this._queue.isOngoing(e)}pause(){this._queue.pause();}push(t){const e=t.key.id;if(this.has(e))return this.get(e);const s=this._queue.push(e),r=()=>{this._keyToItem.delete(e),this.notifyChange("updating");};return this._keyToItem.set(e,t),s.then(r,r),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating");}resume(){this._queue.resume();}_peekByScaleFirst(t){if(!this.state)return f$t(t);const e=this.tileInfoView;let s=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;t.forEach(t=>{const e=this._keyToItem.get(t),o=this.tileInfoView.getTileScale(e.key);h$16.has(o)||(h$16.set(o,[]),s=Math.max(o,s),r=Math.min(o,r)),h$16.get(o).push(e.key),u$1r.add(o);});let i=this.state.scale;var n,a;h$16.has(i)||(a=u$1r,(n=c$1Z).length=0,a.forEach(t=>n.push(t)),c$1Z.sort(),i=c$1Z.reduce((t,e)=>Math.abs(e-i)<Math.abs(t-i)?e:t,c$1Z[0])),i=Math.min(i,s),i=Math.max(i,r);const p=h$16.get(i),l=e.getClosestInfoForScale(i),y=l.getColumnForX(this.state.center[0]),g=l.getRowForY(this.state.center[1]);return p.sort((t,e)=>{const s=l.denormalizeCol(t.col,t.world),r=l.denormalizeCol(e.col,e.world);return Math.sqrt((y-s)*(y-s)+(g-t.row)*(g-t.row))-Math.sqrt((y-r)*(y-r)+(g-e.row)*(g-e.row))}),u$1r.clear(),h$16.clear(),p[0].id}_peekByCenterFirst(t){if(!this.state)return f$t(t);const e=this.tileInfoView,s=this.state.center;let r=Number.POSITIVE_INFINITY,n=null;return t.forEach(t=>{const o=this._keyToItem.get(t);e.getTileCoords(a$1E,o.key);const u=d$11(a$1E,s);u<r&&(r=u,n=o.key);}),n.id}};e([y$5({constructOnly:!0})],p$1N.prototype,"concurrency",void 0),e([y$5({constructOnly:!0})],p$1N.prototype,"process",void 0),e([y$5()],p$1N.prototype,"state",void 0),e([y$5({constructOnly:!0})],p$1N.prototype,"strategy",void 0),e([y$5({constructOnly:!0})],p$1N.prototype,"tileInfoView",void 0),e([y$5({readOnly:!0})],p$1N.prototype,"updating",null),p$1N=e([n$e("esri.views.2d.tiling.TileQueue")],p$1N);var l$1l=p$1N;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$18(e,t){e.delete(t);}class t$19{constructor(e,t,i){this.maxSize=e,this.tileInfoView=t,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[];}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return null;const r=i.key.level,s=this._tileKeysPerLevel[r];t$18(this._tilePerId,e);for(let t=0;t<s.length;t++)if(s[t].id===e){s.splice(t,1);break}return i.visible=!0,i}add(e){e.visible=!1;const t=e.key,i=t.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,e);const r=t.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(t);}prune(e,t,i){let r=this._tilePerId.size;if(r<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&s>=0;)s!==e&&(r=this._pruneAroundCenterTile(r,t,i,s)),s--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,t,i,e));}_pruneAroundCenterTile(t,i,r,s){const l=this._tileKeysPerLevel[s];if(!l||0===l.length)return t;const{size:n,origin:h}=this.tileInfoView.tileInfo,o=r*n[0],u=r*n[1],d=[0,0],_=[0,0];for(l.sort((t,r)=>(d[0]=h.x+o*(t.col+.5),d[1]=h.y-u*(t.row+.5),_[0]=h.x+o*(r.col+.5),_[1]=h.y-u*(r.row+.5),q$b(d,i)-q$b(_,i)));l.length>0;){const e=l.pop();if(this._removeTile(e.id),--t===this.maxSize)break}return t}_removeTile(e){const i=this._tilePerId.get(e);this.removedFunc&&this.removedFunc(i),t$18(this._tilePerId,e);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$1h=new e$14(0,0,0,0),l$1m=new Map,a$1F=[],h$17=[];class h$18{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=null==e.resampling||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),null!=e.buffer&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new t$19(e.cacheSize,this.tileInfoView,e=>{this.releaseTile(e);}));}destroy(){this.tileIndex.clear();}update(e){const{resampling:t,tileIndex:o}=this,c=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(h$17.length=0,a$1F.length=0,l$1m.clear(),!c)return;const{minScale:r,maxScale:n}=this.tileInfoView.tileInfo,{spans:f,lodInfo:d}=c,{level:u}=d,{scale:p,center:g,resolution:y}=e.state,I=!e.stationary&&p>this._previousScale;if(this._previousScale=p,this.tiles.length=0,!t&&(p>r||p<n))return this.tiles.length=0,l$1m.clear(),o.forEach(e=>{this.releaseTile(e);}),o.clear(),h$17.length=0,a$1F.length=0,l$1m.clear(),l$1k.pool.release(c),!0;o.forEach(e=>e.visible=!0);let T=0,_=0;if(f.length>0)for(const{row:e,colFrom:i,colTo:t}of f)for(let a=i;a<=t;a++){T++;const i=s$1h.set(u,e,d.normalizeCol(a),d.getWorldForColumn(a)).id;if(o.has(i)){const e=o.get(i);e.isReady?(l$1m.set(i,e),_++):I||this._addParentTile(i,l$1m);}else {let e;if(this._tileCache&&this._tileCache.has(i)){if(e=this._tileCache.pop(i),this.tileIndex.set(i,e),e.isReady){l$1m.set(i,e),_++;continue}}else e=this.acquireTile(s$1h),this.tileIndex.set(i,e);I||this._addParentTile(i,l$1m);}}const m=_===T;o.forEach((e,i)=>{if(s$1h.set(i),l$1m.has(i))return;const t=this.tileInfoView.intersects(c,s$1h);if(!t||!I&&m)if("purge"===this.cachePolicy){!(s$1h.level!==u)&&t||a$1F.push(i);}else (s$1h.level>u||!t)&&a$1F.push(i);else e.isReady?h$17.push(i):s$1h.level>u&&a$1F.push(i);});for(const e of h$17){const i=o.get(e);i&&i.isReady&&l$1m.set(e,i);}for(const e of a$1F){const i=o.get(e);this._tileCache?this._tileCache.add(i):this.releaseTile(i),o.delete(e);}return l$1m.forEach(e=>this.tiles.push(e)),o.forEach(e=>{l$1m.has(e.key.id)||(e.visible=!1);}),this._tileCache&&this._tileCache.prune(u,g,y),l$1k.pool.release(c),l$1m.clear(),m}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach(e=>{this.releaseTile(e);}),i.clear();}_addParentTile(e,i){let t=e,s=null;for(;t=this.tileInfoView.getTileParentId(t),t;)if(this.tileIndex.has(t)){if(s=this.tileIndex.get(t),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(t)&&(s=this._tileCache.pop(t),this.tileIndex.set(t,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$1i{constructor(){this._names=new Map;}begin(s){this._names.has(s)||(this._names.set(s,!1),(s=>-1!==s.indexOf("Brush"))(s)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${s}.Start`));}end(s){this._names.has(s)&&!this._names.get(s)&&(this._names.set(s,!0),performance.mark(`Esri.${s}.End`));}record(s){this._names.has(s)||(this._names.set(s,!0),performance.mark("Esri."+s));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const N$d=n$7.getLogger("esri.views.MapView");let q$e=class extends(a$1n(H$8)){constructor(t){super(t),this._stationaryTimer=null,this.frameTask=new O$f(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.timeline=new s$1i,this.type="2d",this.constraints=new f$19,this.padding={top:0,right:0,bottom:0,left:0};const e=this.handles,i=()=>this.notifyChange("updating");e.add([this.watch("viewpoint",()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160);},!0),this.on("resize",t=>this._resizeHandler(t)),this.watch("animationManager.animation",t=>{this.animation=t;}),this.allLayerViews.on("change",()=>{i(),e.remove("map-view-base-layerViewsUpdating"),e.add(this.allLayerViews.map(t=>t.watch("updating",i)),"map-view-base-layerViewsUpdating");})],"map-view-base");}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null);}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t),this.frameTask.animationInProgress=!0;const i=()=>{t===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1;};t.when(i,i);}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return new _$7({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this._normalizeInput(t))return void N$d.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",t),void this.notifyChange("initialExtentRequired");const e=this.viewpoint;pt$1(e,e,t),this.viewpoint=e;}set constraints(t){const e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy()),this._set("constraints",t),t&&(t.view=this,this.ready&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(t.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=t.fit(this.state.paddedViewState.viewpoint));}),"map-view-base-constraints"));}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void N$d.error("#center",`incompatible spatialReference ${JSON.stringify(t.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!e.width||!e.height)return void N$d.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const i=this.viewpoint;Y$5(i,i,e,this.size,{constraints:this.constraints}),this.viewpoint=i;}get initialExtentRequired(){const{extent:t,center:e,scale:i,viewpoint:s,zoom:n}=this;return !this.get("map.initialViewProperties.viewpoint")&&(!t&&((!e||0===i&&-1===n)&&!s))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t);}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;bt(e,e,t),this.viewpoint=e;}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",-1);const e=this._get("extent");return e&&(this._set("extent",null),this._set("center",e.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;dt$2(e,e,t),this.viewpoint=e;}get stationary(){return !(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return !this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(t=>!t.destroyed&&!("layerViews"in t)&&!0===t.updating))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const t=this.state.paddedViewState;return t&&t.viewpoint.clone()}set viewpoint(t){if(null==t)return;const e=this._normalizeInput(t);if(!e)return void(!t.scale||isNaN(t.scale)?N$d.error("#viewpoint","invalid scale value of "+t.scale):t.targetGeometry?N$d.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(t.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`):N$d.error("#viewpoint","geometry not defined"));if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const i=new l$15({targetGeometry:new _$7,scale:0,rotation:0});J$8(i,e),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i);}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(t){if(null==t)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",t),this._set("scale",0);const e=this._get("extent");e&&(this._set("extent",null),this._set("center",e.center));}if(!this.constraints.effectiveLODs)return;const e=this.viewpoint;dt$2(e,e,this.constraints.zoomToScale(t)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale));}goTo(t,e){if(t)return this._createAnimation(),x$e(this,"ready",e&&e.signal).then(()=>{const i={animate:!0,...e},s=ft$1(t,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});N$d.error("#goTo()","target cannot be null or undefined");}hitTest(t){return B$2("Should be implemented by subclasses")}popupHitTest(t){return this.hitTest(t).then(e=>({...e,mapPoint:this.toMap(t)}))}toMap(t){if(!this.ready)return null;const[e,i]=this.state.toMap([0,0],[t.x,t.y]),s=this.spatialReference;return new _$7({x:e,y:i,spatialReference:s})}isTileInfoRequired(){return !0}toScreen(t){if(!this.ready)return null;const{x:e,y:i}=this._normalizeInput(t),s=[e,i],[n,a]=this.state.toScreen(s,s);return r$u(n,a)}pixelSizeAt(){return this.ready?this.state.resolution:(N$d.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate();}getDefaultSpatialReference(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null}isSpatialReferenceSupported(t,e){return !(!e&&!this._get("ready"))||null!==this._getDefaultViewpoint()}importLayerView(t){return o$1e.importLayerView(t)}hasLayerViewModule(t){return o$1e.hasLayerViewModule(t)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new a$1o),this.animation}_cancellableGoTo(t,e,i){const s=()=>t===this._gotoTask,n=i.then(()=>{s()&&(this.animation=null);}).catch(t=>{throw s()&&(this.animation=null,e.done||(e.stop(),this.frameTask.animationInProgress=!1)),t}),a=v$3(t=>t(n));return e.when().catch(()=>{s()&&a.cancel&&a.cancel();}),a}_gotoImmediate(t,e){const i=this._gotoTask,s=this.animation,a=t.then(t=>{if(j$2(e),i!==this._gotoTask)throw new s$g("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=t,s.finish();});return this._cancellableGoTo(i,s,a)}_gotoAnimated(t,e){const i=this._gotoTask,s=this.animation,a=t.then(t=>{if(j$2(e),i!==this._gotoTask)throw new s$g("view:goto-interrupted","Goto was interrupted");return s.update(t),this.animationManager.animate(s,this.viewpoint,e),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,a)}_resizeHandler(t){const e=this.state;if(!e)return;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();e.size=[t.width,t.height],xt(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i;}_startup(){const t=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(t),this._set("animationManager",new l$1f({view:this})),this._set("state",new m$17({padding:this._get("padding"),size:this.size,viewpoint:t})),this._set("featuresTilingScheme",new a$1D(x$n.create({spatialReference:this.spatialReference,size:512}))),this._set("ready",!0),this.frameTask&&this.frameTask.start();}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[t,e],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,a=new _$7({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",a),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("spatialReference",i),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null;}_flipStationary(t){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<160&&(this._stationaryTimer=this._flipStationary(t));},t)),this._stationaryTimer}_normalizeInput(t,e=this.spatialReference){const i=t&&t.targetGeometry||t;return e?i?e.equals(i.spatialReference)?t:f$i(i,e)?function(t){return t&&"esri.Viewpoint"===t.declaredClass}(t)?(t.targetGeometry=h$d(i,e),t):h$d(i,e):null:null:t}_getDefaultViewpoint(){const t=this.constraints,e={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};t.effectiveLODs?-1!==e.zoom&&(e.scale=t.zoomToScale(e.zoom)):e.zoom=-1;let i=null,s=null,n=0;const a=e.viewpoint&&e.viewpoint.rotation,r=e.viewpoint&&e.viewpoint.targetGeometry;r&&("extent"===r.type?i=r:"point"===r.type&&(s=r,n=e.viewpoint.scale));const o=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),l=this._normalizeInput(this.initialExtent),p=e.extent||i||o||l,h=e.center||s||p&&p.center,d=this.get("map.initialViewProperties.viewpoint.scale"),m=e.scale||n||d||p&&D$e(p,this.size),c=this.get("map.initialViewProperties.viewpoint.rotation"),g=e.rotation||a||c||0;return h&&m?new l$15({targetGeometry:h,scale:m,rotation:g}):null}};e([y$5()],q$e.prototype,"_stationaryTimer",void 0),e([y$5()],q$e.prototype,"animation",null),e([y$5({readOnly:!0})],q$e.prototype,"animationManager",void 0),e([y$5({value:null,type:_$7,dependsOn:["state.id","ready"]})],q$e.prototype,"center",null),e([y$5({type:f$19})],q$e.prototype,"constraints",null),e([y$5({value:null,type:z$4,dependsOn:["state.id","ready"]})],q$e.prototype,"extent",null),e([y$5({readOnly:!0})],q$e.prototype,"featuresTilingScheme",void 0),e([y$5()],q$e.prototype,"fullOpacity",void 0),e([y$5()],q$e.prototype,"graphicsView",void 0),e([y$5({type:z$4})],q$e.prototype,"initialExtent",void 0),e([y$5({dependsOn:["map.initialViewProperties?.viewpoint"]})],q$e.prototype,"initialExtentRequired",null),e([y$5()],q$e.prototype,"labelManager",void 0),e([y$5({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],q$e.prototype,"padding",null),e([y$5({type:Object})],q$e.prototype,"renderingOptions",void 0),e([y$5()],q$e.prototype,"resizeAlign",void 0),e([y$5({readOnly:!0,dependsOn:["state.id"]})],q$e.prototype,"resolution",null),e([y$5({value:0,type:Number,dependsOn:["state.id","ready"]})],q$e.prototype,"rotation",null),e([y$5({value:0,type:Number,dependsOn:["state.id","ready"]})],q$e.prototype,"scale",null),e([y$5({type:w$5,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],q$e.prototype,"spatialReference",void 0),e([y$5({readOnly:!0})],q$e.prototype,"state",void 0),e([y$5({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],q$e.prototype,"stationary",null),e([y$5({type:s$1i,readOnly:!0})],q$e.prototype,"timeline",void 0),e([y$5({readOnly:!0})],q$e.prototype,"type",void 0),e([y$5({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],q$e.prototype,"updating",null),e([y$5({value:null,type:l$15,dependsOn:["state.id","ready"]})],q$e.prototype,"viewpoint",null),e([y$5({value:-1,dependsOn:["state.id"]})],q$e.prototype,"zoom",null),q$e=e([n$e("esri.views.MapViewBase")],q$e);var G$e=q$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$1a(t,r){switch(r){case"primary":return "touch"===t.pointerType||0===t.button;case"secondary":return "touch"!==t.pointerType&&2===t.button;case"tertiary":return "touch"!==t.pointerType&&1===t.button}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class a$1G extends i$1t{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,t=>this._handleDoubleClick(t,i));}_handleDoubleClick(t,a){t$1a(t.data,"primary")&&(t.stopPropagation(),a?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class a$1H extends i$1t{constructor(t,e,a){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",a,t=>this._handleDoubleTapDrag(t));}_handleDoubleTapDrag(e){const{data:a}=e,{pointerType:s}=a;if(s!==this.pointerType)return;e.stopPropagation();const{action:i,delta:r}=a,{view:o}=this,{mapViewNavigation:n}=o;switch(i){case"begin":{const{scale:t}=o;this._startScale=t,this._currentScale=t,this._previousDelta=r,n.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const t=Math.pow(1.015,r.y),e=this._startScale*t,a=e/this._currentScale;n.setViewpointImmediate(a),this._currentScale=e;break}case"end":{const{constraints:t}=o,{effectiveLODs:e,snapToZoom:a}=t;if(!a||!e)return void n.end();const s=t.snapScale(this._currentScale),i=(r.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;n.zoom(i);break}default:r$6(i);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$1b{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0);}handle(t){const s=t.data,i=s.pointers.size;switch(s.action){case"start":this.currentCount=i,this.emitStart(t);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"update":this.emitUpdate(t);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"end":this.emitEnd(t),this.currentCount=0;}this.previousEvent=t;}emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent);}emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent);}emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$1y extends i$1t{constructor(t,n,o){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",o,t=>this._handleDrag(t)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$1b({start:(t,i)=>{e.pan.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{e.pan.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{e.pan.end(this.view,i.data),i.stopPropagation();},condition:(t,a)=>1===t&&t$1a(a.data,this.pointerAction)});}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class o$1k extends i$1t{constructor(t,o,r){super(!0),this.view=t,this.pointerAction=o;const e=this.view.mapViewNavigation;this.dragEventSeparator=new t$1b({start:(t,a)=>{e.rotate.begin(this.view,a.data),a.stopPropagation();},update:(t,a)=>{e.rotate.update(this.view,a.data),a.stopPropagation();},end:(t,a)=>{e.rotate.end(),a.stopPropagation();},condition:(t,i)=>1===t&&t$1a(i.data,this.pointerAction)}),this.registerIncoming("drag",r,t=>this.dragEventSeparator.handle(t));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1z(t){let n=t*t;return t<0&&(n*=-1),n}function a$1I(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function i$1Q(a,i,o){const s=o,e=a.state,r=a.device,l="forward-down"===i.tiltDirection?1:-1;return "standard"===r.deviceType?(s.translation[0]=n$1z(e.axes[0]),s.translation[1]=n$1z(e.axes[1]),s.translation[2]=n$1z(e.buttons[7])-n$1z(e.buttons[6]),s.heading=n$1z(e.axes[2]),s.tilt=n$1z(e.axes[3])):"spacemouse"===r.deviceType&&(s.translation[0]=1.2*n$1z(e.axes[0]),s.translation[1]=1.2*n$1z(e.axes[1]),s.translation[2]=2*-n$1z(e.axes[2]),s.heading=1.2*n$1z(e.axes[5]),s.tilt=1.2*n$1z(e.axes[3])),s.tilt*=l,d$Y(s.translation,s.translation,1),s}function s$1j(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class l$1n extends i$1t{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new u$A,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",t=>this.handleEvent(t)),this.handle.pause();}onInstall(i){super.onInstall(i),this.watchHandles.add([d$C(this.view.navigation.gamepad,"enabled",i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=v$6({update:t=>this.frameUpdate(t.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null));})]);}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall();}handleEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||("end"===t.data.action?(this.currentDevice=null,a$1I(this.transformation)):(this.currentDevice=t.data.device,i$1Q(t.data,this.view.navigation.gamepad,this.transformation)));}frameUpdate(t){const i=this.transformation;if(s$1j(i))return;const e=this.view.viewpoint.clone(),a=this.view.navigation.gamepad.velocityFactor,r=m$18*a*t;kt(e,e,[i.translation[0]*r,-i.translation[1]*r]);const o=1+i.translation[2]*c$1_*t,l=this.view.constraints.rotationEnabled?-i.heading*d$16*t:0,v=this.view.size,p=[v[0]/2,v[1]];Gt(e,e,o,l,p,v);const f=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=f;}}const d$16=.06,m$18=.7,c$1_=6e-4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class i$1R extends i$1t{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",t,e=>this._handleKeyDown(e)),this.registerIncoming("key-up",t,e=>this._handleKeyUp(e)),this.registerIncoming("blur",t,()=>this._handleBlur());}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=this._keyMap[e.data.key];if(this._pressed=null!=t,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),t){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class i$1S extends i$1t{constructor(e,i,t){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",t,e=>this._handleKeyDown(e)),this.registerIncoming("key-up",t,e=>this._handleKeyUp(e)),this.registerIncoming("blur",t,()=>this._handleBlur());}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0);}_handleKeyUp(e){this._handleKey(e,!1);}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop());}_handleKey(e,i){const t=e.modifiers;if(t.size>0&&!t.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=null!=s,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation();}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$1g extends i$1t{constructor(o,t,e){super(!0),this.view=o,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",e,o=>this._handleKeyDown(o)),t.zoomIn.forEach(o=>this._keysToZoomAction[o]=0),t.zoomOut.forEach(o=>this._keysToZoomAction[o]=1);}_handleKeyDown(o){this._handleKey(o);}_handleKey(t){const e=t.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let r=null;switch(s){case 0:r=n.zoomIn();break;case 1:r=n.zoomOut();break;default:return void r$6(s)}n.begin(),r.then(()=>n.end()),t.stopPropagation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class t$1c extends i$1t{constructor(e,t){super(!0),this.view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,e=>this._handleMouseWheel(e));}_handleMouseWheel(e){if(!this.view.navigation.mouseWheelZoomEnabled)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const t=this.view.mapViewNavigation,{x:o,y:i,deltaY:n}=e.data,a=1/Math.pow(.6,1/60*n),s=t.zoom(a,[o,i]);s&&(this._canZoom=!1,s.catch(()=>{}).then(()=>{this._canZoom=!0,t.end();}));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class a$1J extends i$1t{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",t=>this._handleDrag(t)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const a=this.view.mapViewNavigation;this.dragEventSeparator=new t$1b({start:(t,i)=>{a.pinch.begin(this.view,i.data),i.stopPropagation();},update:(t,i)=>{a.pinch.update(this.view,i.data),i.stopPropagation();},end:(t,i)=>{a.pinch.end(this.view),i.stopPropagation();},condition:t=>t>=2});}_handleDrag(t){this.dragEventSeparator.handle(t);}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$1h=o$s((function(t){var e;void 0!==(e=function(){var t=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,i){i=i||Object.create(null);var r=document.createEvent("Event");r.initEvent(n,i.bubbles||!1,i.cancelable||!1);for(var o,a=2;a<t.length;a++)r[o=t[a]]=i[o]||e[a];r.buttons=i.buttons||0;var s=0;return s=i.pressure&&r.buttons?i.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=i.pointerId||0,r.width=i.width||0,r.height=i.height||0,r.pressure=s,r.tiltX=i.tiltX||0,r.tiltY=i.tiltY||0,r.twist=i.twist||0,r.tangentialPressure=i.tangentialPressure||0,r.pointerType=i.pointerType||"",r.hwTimestamp=i.hwTimestamp||0,r.isPrimary=i.isPrimary||!1,r}var i=window.Map&&window.Map.prototype.forEach?Map:r;function r(){this.array=[],this.size=0;}r.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e;},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--);},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0;},forEach:function(t,e){return this.array.forEach((function(n,i){t.call(e,n,i,this);}),this)}};var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,c={pointermap:new i,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,i=n.events;i&&(i.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n));}),this),this.eventSources[t]=n,this.eventSourceList.push(n));},register:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.register.call(e,t);},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;i<n&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t);},contains:function(t,e){try{return t.contains(e)}catch(t){return !1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t);},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t);},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t);},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t);},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t);},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t);},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t);},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t);},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1);},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0);},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0;}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e);}),this);},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e);}),this);},addEvent:function(t,e){t.addEventListener(e,this.boundHandler);},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler);},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=new n(t,e);return e.preventDefault&&(i.preventDefault=e.preventDefault),i._target=i._target||e.target,i},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),i=0;i<o.length;i++)n[e=o[i]]=t[e]||a[i],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault();}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in s?void 0:e:t._target},propagate:function(t,e,n){for(var i=t.target,r=[];null!=i&&i!==document&&!i.contains(t.relatedTarget);)if(r.push(i),!(i=i.parentNode))return;n&&r.reverse(),r.forEach((function(n){t.target=n,e.call(this,t);}),this);},setCapture:function(t,e,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var r=new n("gotpointercapture");r.pointerId=t,r._target=e,i||this.asyncDispatchEvent(r);},releaseCapture:function(t,e){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var r=new n("lostpointercapture");r.pointerId=t,r._target=i,e||this.asyncDispatchEvent(r);}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t));}};c.boundHandler=c.eventHandler.bind(c);var l={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot);}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var i,r,o=t.elementFromPoint(e,n);for(r=this.targetingShadow(o);r;){if(i=r.elementFromPoint(e,n)){var a=this.targetingShadow(i);return this.searchRoot(a,e,n)||i}r=this.olderShadow(r);}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,i=this.owner(t.target);return i.elementFromPoint(e,n)||(i=document),this.searchRoot(i,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),v=Array.prototype.slice.call.bind(Array.prototype.slice),d=Array.prototype.filter.call.bind(Array.prototype.filter),f=window.MutationObserver||window.WebKitMutationObserver,m="[touch-action]",E={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function b(t,e,n,i){this.addCallback=t.bind(i),this.removeCallback=e.bind(i),this.changedCallback=n.bind(i),f&&(this.observer=new f(this.mutationWatcher.bind(this)));}function g(t){return "body /shadow-deep/ "+T(t)}function T(t){return '[touch-action="'+t+'"]'}function y(t){return "{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}b.prototype={watchSubtree:function(t){this.observer&&l.canTarget(t)&&this.observer.observe(t,E);},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t);},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this);},findElements:function(t){return t.querySelectorAll?t.querySelectorAll(m):[]},removeElement:function(t){this.removeCallback(t);},addElement:function(t){this.addCallback(t);},elementChanged:function(t,e){this.changedCallback(t,e);},concatLists:function(t,e){return t.concat(v(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document);}.bind(this));},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=p(t,this.findElements,this);return e.push(d(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this);},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue);}};var w=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],P="",S=window.PointerEvent||window.MSPointerEvent,O=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function I(){if(S){w.forEach((function(t){String(t)===t?(P+=T(t)+y(t)+"\n",O&&(P+=g(t)+y(t)+"\n")):(P+=t.selectors.map(T)+y(t.rule)+"\n",O&&(P+=t.selectors.map(g)+y(t.rule)+"\n"));}));var t=document.createElement("style");t.textContent=P,document.head.appendChild(t);}}var M=c.pointermap,C=25,R=[1,4,2,8,16],N=!1;try{N=1===new MouseEvent("test",{buttons:1}).buttons;}catch(t){}var Y,_={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events);},unregister:function(t){c.unlisten(t,this.events);},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,r=t.clientY,o=0,a=n.length;o<a&&(e=n[o]);o++){var s=Math.abs(i-e.x),u=Math.abs(r-e.y);if(s<=C&&u<=C)return !0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n();},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,e},prepareButtonsForMove:function(t,e){var n=M.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons;},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=M.get(this.POINTER_ID),n=this.prepareEvent(t);N||(n.buttons=R[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),M.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n);}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);N||this.prepareButtonsForMove(e,t),e.button=-1,M.set(this.POINTER_ID,t),c.move(e);}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=M.get(this.POINTER_ID),n=this.prepareEvent(t);if(!N){var i=R[n.button];n.buttons=e?e.buttons&~i:0,t.buttons=n.buttons;}M.set(this.POINTER_ID,t),n.buttons&=~R[n.button],0===n.buttons?c.up(n):c.move(n);}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);N||this.prepareButtonsForMove(e,t),e.button=-1,M.set(this.POINTER_ID,t),c.enterOver(e);}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);N||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e);}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse();},deactivateMouse:function(){M.delete(this.POINTER_ID);}},D=c.captureInfo,L=l.findTarget.bind(l),X=l.allShadows.bind(l),A=c.pointermap,k=2500,F=200,x="touch-action",K={events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){Y.enableOnSubtree(t);},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(x),n=this.touchActionToScrollType(e);n&&(t._scrollType=n,c.listen(t,this.events),X(t).forEach((function(t){t._scrollType=n,c.listen(t,this.events);}),this));},elementRemoved:function(t){t._scrollType=void 0,c.unlisten(t,this.events),X(t).forEach((function(t){t._scrollType=void 0,c.unlisten(t,this.events);}),this);},elementChanged:function(t,e){var n=t.getAttribute(x),i=this.touchActionToScrollType(n),r=this.touchActionToScrollType(e);i&&r?(t._scrollType=i,X(t).forEach((function(t){t._scrollType=i;}),this)):r?this.elementRemoved(t):i&&this.elementAdded(t);},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=t,n=this.scrollTypes;return "none"===e?"none":e===n.XSCROLLER?"X":e===n.YSCROLLER?"Y":n.SCROLLER.exec(e)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===A.size||1===A.size&&A.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1,this.cancelResetClickCount());},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount());},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null;}.bind(this);this.resetId=setTimeout(t,F);},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId);},typeToButtons:function(t){var e=0;return "touchstart"!==t&&"touchmove"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),i=n.pointerId=t.identifier+2;n.target=D[i]||L(n),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=t.force||t.webkitForce||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var r=this;return n.preventDefault=function(){r.scrolling=!1,r.firstXY=null,e.preventDefault();},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var i,r=0;r<n.length;r++)i=n[r],e.call(this,this.touchToPointer(i));},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if("none"===n)e=!1;else if("XY"===n)e=!0;else {var i=t.changedTouches[0],r=n,o="Y"===n?"X":"Y";e=Math.abs(i["client"+r]-this.firstXY[r])>=Math.abs(i["client"+o]-this.firstXY[o]);}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,i=0,r=t.length;i<r&&(n=t[i]);i++)if(n.identifier===e)return !0},vacuumTouches:function(t){var e=t.touches;if(A.size>=e.length){var n=[];A.forEach((function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var r=t.out;n.push(r);}}),this),n.forEach(this.cancelOut,this);}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown));},overDown:function(t){A.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t);},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)));},moveOverOut:function(t){var e=t,n=A.get(e.pointerId);if(n){var i=n.out,r=n.outTarget;c.move(e),i&&r!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=r,i.target=r,e.target?(c.leaveOut(i),c.enterOver(e)):(e.target=r,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target;}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut);},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t);},touchcancel:function(t){this.processTouches(t,this.cancelOut);},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t);},cleanUpPointer:function(t){A.delete(t.pointerId),this.removePrimaryPointer(t);},dedupSynthMouse:function(t){var e=_.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};e.push(i);var r=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1);}.bind(null,e,i);setTimeout(r,k);}}};Y=new b(K.elementAdded,K.elementRemoved,K.elementChanged,K);var j,B,U,H=c.pointermap,z=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,G={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events);},unregister:function(t){c.unlisten(t,this.events);},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return z&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){H.delete(t);},MSPointerDown:function(t){H.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e);},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e);},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId);},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e);},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e);},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId);},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e);},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e);}};function q(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",G);}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",_),void 0!==window.ontouchstart&&c.registerSource("touch",K);c.register(document);}}function V(t){window.PointerEvent||(window.navigator.msPointerEnabled?c.registerSource("ms",G):(c.registerSource("mouse",_),void 0!==window.ontouchstart&&c.registerSource("touch",K)),c.register(document));}function W(t){if(!c.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function $(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function J(t){return 0!==c.pointermap.get(t).buttons}function Q(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:j},releasePointerCapture:{value:B},hasPointerCapture:{value:U}});}function Z(t){window.Element&&!Element.prototype.setPointerCapture&&(t.setPointerCapture=j.bind(t),t.releasePointerCapture=B.bind(t),t.hasPointerCapture=U.bind(t));}window.navigator.msPointerEnabled?(j=function(t){W(t),$(this),J(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t));},B=function(t){W(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t);}):(j=function(t){W(t),$(this),J(t)&&c.setCapture(t,this);},B=function(t){W(t),c.releaseCapture(t);}),U=function(t){return !!c.captureInfo[t]};var tt=window.PointerEvent||window.MSPointerEvent;return {dispatcher:c,Installer:b,PointerEvent:n,PointerMap:i,targetFinding:l,applyGlobal:function(){I(),q(),Q();},applyLocal:function(t){tt||(V(),Z(t),t.getAttribute("touch-action")||t.setAttribute("touch-action","none"));}}}())&&(t.exports=e);}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$1i(e){const n=e.native;return n?{buttons:n.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:n.axes.map(n=>function(e,n){const r=Math.abs(e);if(r<n)return 0;return c$x(e)*(r-n)/(1-n)}(n,e.axisThreshold))}:{buttons:[],axes:[]}}function n$1A(t,e){if(t.axes.length!==e.axes.length)return !1;if(t.buttons.length!==e.buttons.length)return !1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return !1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return !1;return !0}function r$13(t){for(let e=0;e<t.axes.length;e++)if(0!==t.axes[e])return !1;for(let e=0;e<t.buttons.length;e++)if(0!==t.buttons[e])return !1;return !0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$1B{constructor(e,t){this.element=e,this.input=t,this._hasEventListeners=!1,this.onConnectGamepad=e=>{this.connectGamepad(e.gamepad);},this.onDisconnectGamepad=e=>{const t=e.gamepad,i=t.index,a=this.inputDevices[i];a&&(this.emitGamepadEvent(t,e$1i(a),!1),this.inputDevices.splice(i,1),this.latestUpdate.splice(i,1),this.input.gamepad.devices.remove(a),this.ensurePollingState());},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null,this.supported="getGamepads"in window.navigator,this.supported&&(this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState());}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad));}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState());}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this.callback=e;}connectGamepad(e){const s=new n$1l(e);"unknown"!==s.deviceType&&(this.inputDevices[e.index]=s,this.input.gamepad.devices.add(s)),this.ensurePollingState();}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling();}startPolling(){null==this.frameTask&&(this.frameTask=v$6({update:()=>this.readGamepadState()}));}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array);}readGamepadState(){const e=document.hasFocus(),t=this.element.contains(document.activeElement),n="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!t;this.forEachGamepad(e=>{const t=this.inputDevices[e.index];if(!t)return;const d=this.latestUpdate[e.index],o=e$1i(t),r=n||r$13(o);if(d){if(d.timestamp===e.timestamp)return;if(!d.active&&r)return;if(n$1A(d.state,o))return}this.emitGamepadEvent(e,o,!r);});}forEachGamepad(e){const t=window.navigator.getGamepads();for(let s=0;s<t.length;s++){const i=t[s];this.validate(i)&&e(i);}}emitGamepadEvent(e,t,s){const i=this.latestUpdate[e.index],a=i&&i.active;if(!a&&!s)return;const n=!a&&s?"start":a&&s?"update":"end";this.latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this.callback&&this.callback({device:this.inputDevices[e.index],state:t,action:n});}validate(e){if(!e)return !1;if(!e.connected)return !1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return !1;return !0}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$1l=s("trident"),s$1k=s("edge"),r$14=s("chrome"),h$19=s("ff"),l$1o=s("safari"),u$1s="esri-view-surface--touch-none",c$1$="esri-view-surface--touch-pan";class p$1O{constructor(e,t){this.input=t,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e$1h.applyLocal(e),e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new n$1B(e,this.input),this._gamepadSource.onEvent=e=>this._callback("gamepad",e);}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e);}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault);}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling();}set onEventReceived(e){this._callback=e;}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(d$17[t],e),delete this._active[t];}e&&e.forEach(e=>{if(!this._active[e]&&d$17[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(d$17[e],t),this._active[e]=t;}}),this._gamepadSource.hasEventListeners=e&&e.has("gamepad");}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId));}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?u$1s:c$1$),this._element.classList.add(this._browserTouchPanningEnabled?c$1$:u$1s);}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_removeTouchAction(){this._element.classList.remove(u$1s),this._element.classList.remove(c$1$),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning);}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e);}catch(e){}}_updateNormalizedPointerLikeEvent(e,n){const i=k$5(this._element,e);return p$1O.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),n.x=i.x,n.y=i.y,n}_handleKey(e,t){const i=a$1g(t);i&&"key-up"===e&&this._keyDownState.delete(i);const a={native:t,key:i,repeat:i&&this._keyDownState.has(i)};i&&"key-down"===e&&this._keyDownState.add(a.key),this._callback(e,a);}_handlePointer(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n);}_handlePointerPreventDefault(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n);}_handleMouseWheel(e,t){let n=t.deltaY;switch(t.deltaMode){case 0:(o$1l||s$1k)&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900;}o$1l||s$1k?n*=.7:r$14||l$1o?n*=.6:h$19&&(n*=1.375);const i=Math.abs(n);if(i>100){const e=.02;n=n/i*200/(1+Math.exp(-e*(i-100)));}const a=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,a);}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t);}_handleDefault(e,t){const n={native:t};t.preventDefault(),this._callback(e,n);}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault();}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault();}}p$1O.test={disableSubpixelCoordinates:!1};const d$17={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$1j extends i$1t{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault();});}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$1k(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function n$1C(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function r$15(e,n){if(n?(n.radius=0,n.center.x=0,n.center.y=0):n={radius:0,center:r$u()},0===e.length)return n;if(1===e.length)return n.center.x=e[0].x,n.center.y=e[0].y,n;if(2===e.length){const[t,r]=e,[c,s]=[r.x-t.x,r.y-t.y];return n.radius=Math.sqrt(c*c+s*s)/2,n.center.x=(t.x+r.x)/2,n.center.y=(t.y+r.y)/2,n}let r=0,c=0;for(let t=0;t<e.length;t++)r+=e[t].x,c+=e[t].y;r/=e.length,c/=e.length;const s=e.map(t=>t.x-r),x=e.map(t=>t.y-c);let o=0,y=0,a=0,h=0,l=0,u=0,i=0;for(let t=0;t<s.length;t++){const e=s[t],n=x[t],r=e*e,c=n*n;o+=r,y+=c,a+=e*n,h+=r*e,l+=c*n,u+=e*c,i+=n*r;}const f=.5*(h+u),g=.5*(l+i),M=o*y-a*a,d=(f*y-g*a)/M,m=(o*g-a*f)/M,p=r$u(d+r,m+c);return {radius:Math.sqrt(d*d+m*m+(o+y)/e.length),center:p}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$1p={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class s$1l extends i$1t{constructor(t=l$1p.maximumDoubleClickDelay,i=l$1p.maximumDoubleClickDistance,o=l$1p.maximumDoubleTouchDelay,s=l$1p.maximumDoubleTouchDistance,u=o$l){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=o,this.maximumDoubleTouchDistance=s,this._clock=u,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this));}onUninstall(){this._pointerState.forEach(e=>{null!=e.doubleClickTimeout&&(e.doubleClickTimeout.remove(),e.doubleClickTimeout=null);});}get hasPendingInputs(){return t$U(this._pointerState,e=>null!=e.doubleClickTimeout)}_pointerId(e){const t=e.native;return "mouse"===t.pointerType?`${t.pointerId}:${t.button}`:""+t.pointerType}_handleImmediateClick(e){const t=e.data,i=this._pointerId(t),l=this._pointerState.get(i);if(l){const s="touch"===t.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$1k(l.event.data,t)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(e)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers));}else this._startClick(e);}_startClick(e){const t=this._pointerId(e.data),i="touch"===e.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(t,{event:e,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(t),i)}),this.refreshHasPendingInputs();}_handlePointerDrag(e){const t=this._pointerId(e.data.currentEvent);this._clearDoubleClickTimeout(t,!0);}_handleDrag(e){const t=this._pointerId(e.data.pointer);this._clearDoubleClickTimeout(t,!0);}_clearDoubleClickTimeout(e,t){const i=this._pointerState.get(e);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,t&&this._doubleClickTimeoutExceeded(e),this._pointerState.delete(e),this.refreshHasPendingInputs());}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimeout=null,this._pointerState.delete(e),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$1m extends i$1t{constructor(i=l$1p.maximumDoubleClickDelay,a=l$1p.maximumDoubleClickDistance,r=l$1p.maximumDoubleTouchDelay,s=l$1p.maximumDoubleTouchDistance,u=o$l){super(!1),this.maximumDoubleClickDelay=i,this.maximumDoubleClickDistance=a,this.maximumDoubleTouchDelay=r,this.maximumDoubleTouchDistance=s,this._clock=u,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=r$u(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new t$1b({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",t=>this._dragEventSeparator.handle(t)),this.registerIncoming("pointer-down",t=>this._handlePointerDown(t)),this.registerIncoming("pointer-up",()=>this._handlePointerUp());}onUninstall(){this._pointerState.forEach(t=>{null!=t.doubleTapTimeout&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null);});}get hasPendingInputs(){return t$U(this._pointerState,t=>null!=t.doubleTapTimeout)}_clearPointerDown(t){const e=this._pointerState.get(t);e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs());}_createDoubleTapDragData(t,e,i){const{button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}=i;return {action:t,delta:e,button:a,buttons:o,pointer:r,pointers:n,pointerType:s,timestamp:u}}_dragStart(t,i){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:a,modifiers:o}=i,{center:r}=a;this._dragStartCenter=r;const n=this._createDoubleTapDragData("begin",r$u(0,0),a);this._doubleTapDrag.emit(n,void 0,o),i.stopPropagation();}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:a}=t,{center:o}=i,r=r$u(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("update",r,i);this._doubleTapDrag.emit(n,void 0,a),t.stopPropagation();}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:a}=t,{center:o}=i,r=r$u(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n=this._createDoubleTapDragData("end",r,i);this._doubleTapDrag.emit(n,void 0,a),this._doubleTapDragActive=!1,t.stopPropagation();}_handlePointerDown(t){const{data:e}=t,i=this._pointerId(e),a=this._pointerState.get(i),{pointerType:o}=e.native;if(a){const n="touch"===o?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),e$1k(a.event.data,e)>n?this._storePointerDown(t):this._doubleTapDragReady=!0;}else this._storePointerDown(t);}_handlePointerUp(){this._doubleTapDragReady=!1;}_pointerId(t){const{native:e}=t,{pointerId:i,button:a,pointerType:o}=e;return "mouse"===o?`${i}:${a}`:""+o}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,a=this._pointerId(e),o="touch"===i?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._clearPointerDown(a),o);this._pointerState.set(a,{event:t,doubleTapTimeout:r}),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class s$1n extends i$1t{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this));}createPayload(t,e,i,n){return {action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:e.buttons,timestamp:n,pointers:o$1m(this.activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}addPointer(t){const e=t.native.pointerId,i=a$1K(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(e,n);const s=h$1a(n,r$16(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this.updatePointerAngles(i);}updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this.activePointerMap.get(e);i?i.event=t:this.addPointer(t);}removePointer(t){const e=a$1K(this.activePointerMap).angle;this.activePointerMap.delete(t),this.updatePointerAngles(e);}updatePointerAngles(t){const e=a$1K(this.activePointerMap);this.activePointerMap.forEach(i=>{i.initialAngle=h$1a(i,e)-t,i.lastAngle=h$1a(i,e)-t;});}emitEvent(t,e,i){const n=a$1K(this.activePointerMap);this.drag.emit(this.createPayload(t,e,n,i),void 0,this.startStateModifiers);}handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,n=s$R(t.timestamp);this.activePointerMap.get(i)&&(1===this.activePointerMap.size?(this.updatePointer(t.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",t.data,n),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(i)):(this.removePointer(i),this.emitEvent("removed",t.data,s$R(t.timestamp))));}handlePointerDrag(t){const i=t.data,n=i.currentEvent,s=s$R(t.timestamp);switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(n.native.pointerId)?(this.updatePointer(n),!this.isCurrentDragSuppressed&&this.emitEvent("update",n,s)):(this.addPointer(n),this.emitEvent("added",n,s),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(n),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",n,s));}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function r$16(e){const i=[];return e.forEach(e=>{i.push(r$u(e.event.x,e.event.y));}),r$15(i)}function a$1K(t){const e=r$16(t);let i=0;return t.forEach(t=>{let n=h$1a(t,e),s=n-t.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=t.lastAngle+s,t.lastAngle=n;const r=n-t.initialAngle;i+=r;}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function o$1m(t){const e=new Map;return t.forEach((t,i)=>e.set(i,t.event)),e}function h$1a(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}var p$1P;!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined";}(p$1P||(p$1P={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$1D extends i$1t{constructor(e=l$1p.maximumDoubleClickDelay,i=l$1p.maximumDoubleClickDistance,n=l$1p.maximumDoubleTouchDelay,a=l$1p.maximumDoubleTouchDistance,s=o$l){super(!1),this.maximumDoubleClickDelay=e,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=n,this.maximumDoubleTouchDistance=a,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",t=>{this._handlePointerLoss(t,"pointer-up");}),this.registerIncoming("pointer-capture-lost",t=>{this._handlePointerLoss(t,"pointer-capture-lost");}),this.registerIncoming("pointer-cancel",t=>{this._handlePointerLoss(t,"pointer-cancel");});}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove();}),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=this._pointerId(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native);}}_handlePointerLoss(t,e){const o=t.data,n=this._pointerId(o),a=this._pointerState.get(n);if(a&&"pointer-up"===e&&a.downButton===o.native.button){const e=a.immediateDoubleClick;if(e){e.timeoutHandle.remove();const n="touch"===t.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$1k(e,t.data)>n?this._startImmediateDoubleClick(t,a):(this._immediateDoubleClick.emit(t.data,void 0,e.modifiers),this._removeState(o));}else this._startImmediateDoubleClick(t,a);}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)};}_pointerId(t){const e=t.native;return "mouse"===e.pointerType?`${e.pointerId}:${e.button}`:""+e.pointerType}_removeState(t){const e=this._pointerId(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1E={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class o$1n extends i$1t{constructor(e=n$1E.maximumClickDelay,i=n$1E.movementUntilMouseDrag,o=n$1E.movementUntilPenDrag,r=n$1E.movementUntilTouchDrag,s=n$1E.holdDelay,a=o$l){super(!1),this.maximumClickDelay=e,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=o,this.movementUntilTouchDrag=r,this.holdDelay=s,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",t=>{this._handlePointerLoss(t,"pointer-up");}),this.registerIncoming("pointer-capture-lost",t=>{this._handlePointerLoss(t,"pointer-capture-lost");}),this.registerIncoming("pointer-cancel",t=>{this._handlePointerLoss(t,"pointer-cancel");}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause();}onUninstall(){this._pointerState.forEach(t=>{null!=t.holdTimeout&&(t.holdTimeout.remove(),t.holdTimeout=null);}),super.onUninstall();}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout(()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0;}e.holdTimeout=null;}},this.holdDelay));const o={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(t);}_createPointerDragData(t,e,i){return {action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}_handlePointerMove(t){const e=t.data,n=e.native.pointerId,o=this._pointerState.get(n);if(o){if(o.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",o,e),void 0,o.modifiers);else {n$1C(e,o.startEvent)>this._getDragThreshold(e.native.pointerType)&&this.startDragging(t);}o.previousEvent=e;}}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;case"mouse":default:return this.movementUntilMouseDrag}}startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach(n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,e)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp));});}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,o=this._pointerState.get(n);if(o){if(null!=o.holdTimeout&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging)this._pointerDrag.emit(this._createPointerDragData("end",o,"pointer-up"===e?i:o.previousEvent),void 0,o.modifiers);else if("pointer-up"===e&&o.downButton===i.native.button){t.timestamp-o.startTimestamp<=this.maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i);}this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause();}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const z$d="Ctrl",C$f={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},P$f={zoomIn:["=","+"],zoomOut:["-","_"]},E$i={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let O$i=class extends h$c{constructor(){super(...arguments),this._handles=new u$A;}initialize(){this._handles.add([b$d(this.view,"ready",()=>this._disconnect()),y$s(this.view,"ready",()=>this._connect())]);}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect();}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null);}_connect(){const e=this.view.surface,r=new p$1O(e,this.view.input),o=[new n$1D,new o$1n,new s$1l,new s$1n(this.view.navigation),new s$1m],t=new l$10({eventSource:r,recognizers:o});t.installHandlers("prevent-context-menu",[new e$1j],c$1A.INTERNAL),t.installHandlers("navigation",[new a$1J(this.view),new l$1n(this.view),new t$1c(this.view),new a$1G(this.view),new a$1G(this.view,[z$d]),new n$1y(this.view,"primary"),new i$1R(this.view,C$f),new e$1g(this.view,P$f),new i$1S(this.view,E$i),new o$1k(this.view,"secondary"),new a$1H(this.view,"touch")],c$1A.INTERNAL),this.view.viewEvents.connect(t),this._source=r,this._inputManager=t,d$C(this.view.navigation,"browserTouchPanEnabled",e=>{this._source.browserTouchPanningEnabled=!e;});}get test(){return {inputManager:this._inputManager}}};e([y$5()],O$i.prototype,"view",void 0),O$i=e([n$e("esri.views.2d.input.MapViewInputManager")],O$i);var T$k=O$i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$1l=0,i$1T=class extends h$c{constructor(){super(...arguments),this.color=new o$H([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25;}get version(){return e$1l++}};e([y$5({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],i$1T.prototype,"version",null),e([y$5({type:o$H})],i$1T.prototype,"color",void 0),e([y$5({type:o$H})],i$1T.prototype,"haloColor",void 0),e([y$5()],i$1T.prototype,"haloOpacity",void 0),e([y$5()],i$1T.prototype,"fillOpacity",void 0),i$1T=e([n$e("esri.views.2d.support.HighlightOptions")],i$1T);var c$20=i$1T;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$1d={checkMajorWebPerformanceCaveat:!0};function i$1U(i){return i={...t$1d,...i},s("esri-webgl")?i.checkMajorWebPerformanceCaveat&&s("esri-webgl-major-performance-caveat")?new s$g("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):s("esri-webgl-high-precision-fragment")?s("esri-webgl-vertex-shader-samplers")?s("esri-webgl-element-index-uint")?s("esri-webgl-standard-derivatives")?s("esri-webgl-instanced-arrays")?null:new s$g("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new s$g("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new s$g("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new s$g("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new s$g("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new s$g("webgl:required","WebGL is required but not supported.")}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const d$18="esri-component";let n$1F=class extends h$c{constructor(){super(...arguments),this.widget=null;}destroy(){this.widget&&this.widget.destroy(),this.node=null;}get id(){return this.get("widget.id")||this.get("node.id")}set node(t){const o=this._get("node");t!==o&&(t&&t.classList.add(d$18),o&&o.classList.remove(d$18),this._set("node",t));}castNode(t){return t?"string"==typeof t||function(t){return t&&"nodeType"in t}(t)?(this._set("widget",null),e$R(t)):(function(t){return t&&"function"==typeof t.render}(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};e([y$5()],n$1F.prototype,"id",null),e([y$5()],n$1F.prototype,"node",null),e([i$b("node")],n$1F.prototype,"castNode",null),e([y$5({readOnly:!0})],n$1F.prototype,"widget",void 0),n$1F=e([n$e("esri.views.ui.Component")],n$1F);var c$21=n$1F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$1q={left:0,top:0,bottom:0,right:0},h$1b={bottom:30,top:15,right:15,left:15},m$19="esri-ui",u$1t="esri-ui-corner",_$r="esri-ui-inner-container",f$1c="esri-ui-manual-container",g$L="esri-ui-corner-container",y$P="esri-ui-top-left",C$g="esri-ui-top-right",v$v="esri-ui-bottom-left",w$u="esri-ui-bottom-right";function P$g(t){return "object"==typeof t&&!(t instanceof c$21)&&!("declaredClass"in t)&&("component"in t||"index"in t||"position"in t)?t:null}function L$j(t,{top:i,bottom:e,left:o,right:n}){t.style.top=i,t.style.bottom=e,t.style.left=o,t.style.right=n;}let b$v=class extends i$n.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new u$A,this.view=null,this._initContainers();}initialize(){this._handles.add([d$C(this,"view.padding, container",this._applyViewPadding.bind(this)),d$C(this,"padding",this._applyUIPadding.bind(this))]);}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear();}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(m$19),this._attachContainers(t)),i&&(i.classList.remove(m$19),L$j(i,{top:"",bottom:"",left:"",right:""}),t$L(i)),this._set("container",t));}get height(){const t=this.get("view.height")||0;if(0===t)return t;const i=this._getViewPadding(),e=i.top+i.bottom;return Math.max(t-e,0)}get padding(){return this._get("padding")}set padding(t){t?this._override("padding",t):this._clearOverride("padding");}castPadding(t){return "number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...h$1b,...t}}get width(){const t=this.get("view.width")||0;if(0===t)return t;const i=this._getViewPadding(),e=i.left+i.right;return Math.max(t-e,0)}add(t,i){let e,o;if(Array.isArray(t))return void t.forEach(t=>this.add(t,i));const n=P$g(t);n&&({index:e,position:i,component:t,key:o}=n),i&&"object"==typeof i&&({index:e,key:o,position:i}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,e,o);}remove(t,i){if(!t)return;if(Array.isArray(t))return t.map(t=>this.remove(t,i));const e=this._find(t);if(e){const o=this._componentToKey;if(o.has(t)&&o.get(t)!==i)return;const n=this._components.indexOf(e);return e.node.parentNode&&e.node.parentNode.removeChild(e.node),this._componentToKey.delete(t),this._components.splice(n,1)[0]}}empty(t){if(Array.isArray(t))return t.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i));if("manual"===(t=t||"manual")){return Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(u$1t)).map(t=>this.remove(t))}return this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,this):null}move(t,i){if(Array.isArray(t)&&t.forEach(t=>this.move(t,i)),!t)return;let e;const o=P$g(t)||P$g(i);if(o&&(e=o.index,i=o.position,t=o.component||t),i&&!this._isValidPosition(i))return;const n=this.remove(t);n&&this.add(n,{position:i,index:e});}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}_add(t,i,e,o){t instanceof c$21||(t=new c$21({node:t})),this._place({component:t,position:i,index:e}),this._components.push(t),o&&this._componentToKey.set(t,o);}_find(t){return t?t instanceof c$21?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.get("view.padding")||l$1q}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer);}_initContainers(){const t=document.createElement("div");t.classList.add(_$r),t.classList.add(g$L);const i=document.createElement("div");i.classList.add(_$r),i.classList.add(f$1c);const e=document.createElement("div");e.classList.add(y$P),e.classList.add(u$1t),t.appendChild(e);const o=document.createElement("div");o.classList.add(C$g),o.classList.add(u$1t),t.appendChild(o);const n=document.createElement("div");n.classList.add(v$v),n.classList.add(u$1t),t.appendChild(n);const s=document.createElement("div");s.classList.add(w$u),s.classList.add(u$1t),t.appendChild(s),this._innerContainer=t,this._manualContainer=i;const r=g$r();this._cornerNameToContainerLookup={"top-left":e,"top-right":o,"bottom-left":n,"bottom-right":s,"top-leading":r?o:e,"top-trailing":r?e:o,"bottom-leading":r?s:n,"bottom-trailing":r?n:s},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup};}_isValidPosition(t){return !!this._positionNameToContainerLookup[t]}_place(t){const i=t.component,e=t.position||"manual",o=t.index,n=this._positionNameToContainerLookup[e],s=o>-1;let r,a,p;var c;(c=i.widget)&&!c._started&&"function"==typeof c.postMixInProperties&&"function"==typeof c.buildRendering&&"function"==typeof c.postCreate&&"function"==typeof c.startup&&i.widget.startup(),s?(r=Array.prototype.slice.call(n.children),a=0===o,a?n.firstChild?o$Q(i.node,n.firstChild):n.appendChild(i.node):(p=o>=r.length,p?n.appendChild(i.node):o$Q(i.node,r[o]))):n.appendChild(i.node);}_applyViewPadding(){const t=this.container;t&&L$j(t,this._toPxPosition(this._getViewPadding()));}_applyUIPadding(){const t=this._innerContainer;t&&L$j(t,this._toPxPosition(this.padding));}_toPxPosition(t){return {top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}}_toPxUnit(t){return 0===t?"0":t+"px"}_findByComponent(t){let i,e=null;return this._components.some(o=>(i=o===t,i&&(e=o),i)),e}_findById(t){let i,e=null;return this._components.some(o=>(i=o.id===t,i&&(e=o),i)),e}_findByNode(t){let i,e=null;return this._components.some(o=>(i=o.node===t,i&&(e=o),i)),e}};e([y$5()],b$v.prototype,"container",null),e([y$5({dependsOn:["view.height"]})],b$v.prototype,"height",null),e([y$5({value:h$1b})],b$v.prototype,"padding",null),e([i$b("padding")],b$v.prototype,"castPadding",null),e([y$5()],b$v.prototype,"view",void 0),e([y$5({dependsOn:["view.width"]})],b$v.prototype,"width",null),b$v=e([n$e("esri.views.ui.UI")],b$v);var x$s=b$v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function m$1a(t,e,i){if(!i||!e)return;l$9(t,t=>t.layerView===e&&t.text===i)||t.push({text:i,layerView:e});}const d$19=[];let f$1d=class extends d$M{constructor(t){super(t),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state");},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new L$2,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const e=this.get("view.allLayerViews");e&&this.handles.add(e.map(t=>t.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),t&&t.removed&&t.removed.forEach(t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t);}),this._updateAttributionItems();},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");var e,i;(d$19.length=0,t)?(t.forEach(t=>{if(t.suspended||!t.get("layer.attributionVisible"))return;const e=t.layer;if(function(t){return t&&"copyright"in t&&"function"==typeof t.originOf&&"user"===t.originOf("copyright")}(e))return void m$1a(d$19,t,e.copyright);if(e.hasAttributionData){if(this._fetchedAttributionData.has(t)){const i=this._fetchedAttributionData.get(t);return void(i&&m$1a(d$19,t,this._getDynamicAttribution(i,this.view,e)))}return void this._fetchAttributionData(t)}const i=e.get("portalItem.accessInformation");m$1a(d$19,t,i||e.copyright);}),e=this.items,i=d$19,(e.length!==i.length||e.some((t,e)=>t.text!==i[e].text))&&(this.items.removeAll(),this.items.addMany(d$19)),d$19.length=0,this.notifyChange("state")):this.clear();},this.handles.add([B$5(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),w$9(this,"view.stationary",()=>this._updateAttributionItems())]);}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll();}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await o$F(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,"bing-maps"===t.layer.type):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i);}this._updateAttributionItems();}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let t=0;t<i.length;t++){const n=i[t],a=n.coverageAreas;if(!a)return;for(const i of a){const a=i.bbox,c=i.zoomMin-(e&&i.zoomMin?1:0),h=i.zoomMax-(e&&i.zoomMax?1:0),u={xmin:a[1],ymin:a[0],xmax:a[3],ymax:a[2],spatialReference:w$5.WGS84},l={extent:g$9(u),attribution:n.attribution||"",score:null!=i.score?i.score:100,id:t};for(let t=c;t<=h;t++)r[t]=r[t]||[],r[t].push(l);}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){const{extent:r,scale:s}=e;let o=i.tileInfo.scaleToZoom(s);if(o=Math.min(t.maxKey,Math.round(o)),!r||null==o||o<=-1)return "";const c=t[o],h=h$d(r.center.clone().normalize(),e.spatialReference),u={};return c?c.filter(t=>{const e=!u[t.id]&&h&&t$n(t.extent,h);return e&&(u[t.id]=!0),e}).sort((t,e)=>e.score-t.score||t.objectId-e.objectId).map(t=>t.attribution).join(", "):""}};e([y$5({readOnly:!0,type:L$2})],f$1d.prototype,"items",void 0),e([y$5({dependsOn:["view.ready"],readOnly:!0})],f$1d.prototype,"state",null),e([y$5()],f$1d.prototype,"view",void 0),f$1d=e([n$e("esri.widgets.Attribution.AttributionViewModel")],f$1d);var b$w=f$1d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$1r="esri-attribution esri-widget",u$1u="esri-widget__anchor",h$1c="esri-attribution__powered-by",m$1b="esri-attribution__sources",_$s="esri-attribution--open",v$w="esri-attribution__sources--open",b$x="esri-attribution__link",w$v="esri-icon-description",g$M="esri-interactive";let f$1e=class extends C$7{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=w$v,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new b$w;}initialize(){this.own(B$5(this,"viewModel.items","change",()=>this.scheduleRender()));}get attributionText(){return this.viewModel.items.reduce((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[_$s]:this._isOpen};return r$G("div",{bind:this,class:this.classes(l$1r,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return r$G("div",{class:h$1c},"Powered by"," ",r$G("a",{class:this.classes(b$x,u$1u),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive(),i=t?0:-1,{attributionText:r}=this,s=t?"button":void 0,o={[v$w]:e,[g$M]:t};return r$G("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(m$1b,o),innerHTML:r,role:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth;}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,o=s>=r,n=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,n&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0);}t&&this.scheduleRender();}_toggleState(){this._isInteractive()&&(this._isOpen=!this._isOpen);}_isInteractive(){return this._isOpen||this._attributionTextOverflowed}};e([y$5({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0}),o$U()],f$1e.prototype,"attributionText",null),e([y$5()],f$1e.prototype,"iconClass",void 0),e([y$5(),o$U()],f$1e.prototype,"itemDelimiter",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f$1e.prototype,"label",void 0),e([y$5(),o$U(),e$T("esri/widgets/Attribution/t9n/Attribution")],f$1e.prototype,"messages",void 0),e([o$M("viewModel.view")],f$1e.prototype,"view",void 0),e([y$5({type:b$w}),o$U(["state","view.size"])],f$1e.prototype,"viewModel",void 0),e([n$Z()],f$1e.prototype,"_toggleState",null),f$1e=e([n$e("esri.widgets.Attribution")],f$1e);var j$A=f$1e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let n$1G=class extends(e$_(h$c)){constructor(t){super(t),this._handles=new u$A,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this),this.view;}initialize(){this._handles.add(d$C(this,"view",this._updateRotationWatcher));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get canShowNorth(){const t=this.get("view.spatialReference");return !(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const t={};"2d"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t});}_updateForRotation(t){null!=t&&(this.orientation={z:t});}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e};}_updateRotationWatcher(t){this._handles.removeAll(),t&&("2d"===t.type?this._handles.add(d$C(this,"view.rotation",this._updateForRotation)):this._handles.add(d$C(this,"view.camera",this._updateForCamera)));}};e([y$5({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],n$1G.prototype,"canShowNorth",null),e([y$5()],n$1G.prototype,"orientation",void 0),e([y$5({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],n$1G.prototype,"state",null),e([y$5()],n$1G.prototype,"view",void 0),n$1G=e([n$e("esri.widgets.CompassViewModel")],n$1G);var h$1d=n$1G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const d$1a="esri-compass esri-widget--button esri-widget",n$1H="esri-icon-font-fallback-text",m$1c="esri-compass__icon",u$1v="esri-icon-dial",v$x="esri-icon-compass",h$1e="esri-icon-locate-circled",w$w="esri-interactive",j$B="esri-disabled";let f$1f=class extends C$7{constructor(s,e){super(s,e),this.goToOverride=null,this.iconClass=h$1e,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new h$1d;}reset(){return this.viewModel.reset()}render(){const{orientation:s,state:e}=this.viewModel,o="disabled"===e,r="compass"===("rotation"===e?"rotation":"compass"),t=o?-1:0,i={[j$B]:o,[w$w]:!o},a={[v$x]:r,[u$1v]:!r},{messages:l}=this;return r$G("div",{bind:this,class:this.classes(d$1a,i),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:t,"aria-label":l.reset,title:l.reset},r$G("span",{"aria-hidden":"true",class:this.classes(m$1c,a),styles:this._toRotationTransform(s)}),r$G("span",{class:n$1H},l.reset))}_reset(){this.viewModel.reset();}_toRotationTransform(s){return {transform:`rotateZ(${s.z}deg)`}}};e([o$M("viewModel.goToOverride")],f$1f.prototype,"goToOverride",void 0),e([y$5()],f$1f.prototype,"iconClass",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f$1f.prototype,"label",void 0),e([y$5(),o$U(),e$T("esri/widgets/Compass/t9n/Compass")],f$1f.prototype,"messages",void 0),e([o$M("viewModel.view")],f$1f.prototype,"view",void 0),e([y$5({type:h$1d}),o$U(["viewModel.orientation","viewModel.state"])],f$1f.prototype,"viewModel",void 0),e([n$Z()],f$1f.prototype,"_reset",null),f$1f=e([n$e("esri.widgets.Compass")],f$1f);var g$N=f$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let a$1L=class extends h$c{constructor(t){super(t),this._handles=new u$A,this.navigationMode="pan",this.view=null;}initialize(){this._handles.add(y$s(this,"view.inputManager",this._setNavigationMode.bind(this)));}destroy(){this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode());}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate";}};e([y$5({dependsOn:["view.ready"],readOnly:!0})],a$1L.prototype,"state",null),e([y$5()],a$1L.prototype,"navigationMode",void 0),e([y$5()],a$1L.prototype,"view",void 0),a$1L=e([n$e("esri.widgets.NavigationToggleViewModel")],a$1L);var n$1I=a$1L;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const p$1Q="esri-navigation-toggle esri-widget",c$22="esri-navigation-toggle__button esri-widget--button",d$1b="esri-navigation-toggle__button--active",u$1w="esri-navigation-toggle__button--pan",v$y="esri-navigation-toggle__button--rotate",m$1d="esri-navigation-toggle--horizontal",h$1f="esri-icon-rotate",j$C="esri-icon-pan",w$x="esri-icon-pan2",b$y="esri-disabled";let _$t=class extends C$7{constructor(o,e){super(o,e),this.iconClass=w$x,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new n$1I;}set layout(o){"horizontal"!==o&&(o="vertical"),this._set("layout",o);}toggle(){return this.viewModel.toggle()}render(){const o="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),t={[b$y]:o,[m$1d]:"horizontal"===this.layout},s={[d$1b]:e},i={[d$1b]:!e},r=o?-1:0,a=this.messages.toggle;return r$G("div",{bind:this,class:this.classes(p$1Q,t),onclick:this._toggle,onkeydown:this._toggle,tabIndex:r,"aria-label":a,title:a},r$G("div",{class:this.classes(c$22,u$1w,s)},r$G("span",{class:j$C})),r$G("div",{class:this.classes(c$22,v$y,i)},r$G("span",{class:h$1f})))}_toggle(){this.toggle();}};e([y$5()],_$t.prototype,"iconClass",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],_$t.prototype,"label",void 0),e([y$5({value:"vertical"}),o$U()],_$t.prototype,"layout",null),e([y$5(),o$U(),e$T("esri/widgets/NavigationToggle/t9n/NavigationToggle")],_$t.prototype,"messages",void 0),e([o$M("viewModel.view"),o$U()],_$t.prototype,"view",void 0),e([y$5({type:n$1I}),o$U(["viewModel.state","viewModel.navigationMode"])],_$t.prototype,"viewModel",void 0),e([n$Z()],_$t.prototype,"_toggle",null),_$t=e([n$e("esri.widgets.NavigationToggle")],_$t);var y$Q=_$t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const p$1R="esri-widget--button esri-widget",n$1J="esri-disabled",a$1M="esri-interactive",l$1s="esri-icon-font-fallback-text",d$1c="esri-icon";let m$1e=class extends C$7{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title="";}render(){const t=this.enabled?0:-1,s={[n$1J]:!this.enabled,[a$1M]:this.enabled},o={[this.iconClass]:!!this.iconClass};return r$G("div",{bind:this,class:this.classes(p$1R,s),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:t,title:this.title},r$G("span",{"aria-hidden":"true",role:"presentation",class:this.classes(d$1c,o)}),r$G("span",{class:l$1s},this.title))}_triggerAction(){this.action.call(this);}};e([y$5()],m$1e.prototype,"action",void 0),e([y$5(),o$U()],m$1e.prototype,"enabled",void 0),e([y$5(),o$U()],m$1e.prototype,"iconClass",void 0),e([y$5(),o$U()],m$1e.prototype,"title",void 0),e([n$Z()],m$1e.prototype,"_triggerAction",null),m$1e=e([n$e("esri.widgets.IconButton")],m$1e);var u$1x=m$1e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let s$1o=class extends h$c{get canZoomIn(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return 0===t||e>t}get canZoomOut(){if(!this.get("view.ready"))return !1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return 0===t||e<t}};e([y$5({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],s$1o.prototype,"canZoomIn",null),e([y$5({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],s$1o.prototype,"canZoomOut",null),e([y$5()],s$1o.prototype,"view",void 0),s$1o=e([n$e("esri.widgets.Zoom.ZoomConditions2D")],s$1o);var i$1V=s$1o;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$1e=class extends h$c{get canZoomIn(){return !!this.get("view.ready")}get canZoomOut(){return !!this.get("view.ready")}};e([y$5({dependsOn:["view.ready"],readOnly:!0})],t$1e.prototype,"canZoomIn",null),e([y$5({dependsOn:["view.ready"],readOnly:!0})],t$1e.prototype,"canZoomOut",null),e([y$5()],t$1e.prototype,"view",void 0),t$1e=e([n$e("esri.widgets.Zoom.ZoomConditions3D")],t$1e);var p$1S=t$1e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let m$1f=class extends h$c{constructor(o){super(o),this.canZoomIn=!1,this.canZoomOut=!1;}destroy(){this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}set view(o){o?"2d"===o.type?this._zoomConditions=new i$1V({view:o}):"3d"===o.type&&(this._zoomConditions=new p$1S({view:o})):this._zoomConditions=null,this._set("view",o);}zoomIn(){if(!this.canZoomIn)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomIn():k$2(o.goTo({zoomFactor:2}));}zoomOut(){if(!this.canZoomOut)return;const o=this.view;"2d"===o.type?o.mapViewNavigation.zoomOut():k$2(o.goTo({zoomFactor:.5}));}};e([y$5()],m$1f.prototype,"_zoomConditions",void 0),e([y$5({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m$1f.prototype,"canZoomIn",void 0),e([y$5({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],m$1f.prototype,"canZoomOut",void 0),e([y$5({dependsOn:["view.ready"],readOnly:!0})],m$1f.prototype,"state",null),e([y$5()],m$1f.prototype,"view",null),m$1f=e([n$e("esri.widgets.Zoom.ZoomViewModel")],m$1f);var p$1T=m$1f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1y="esri-zoom esri-widget",p$1U="esri-zoom--horizontal",c$23="esri-icon-plus",d$1d="esri-icon-minus",h$1g="esri-icon-zoom-in-magnifying-glass";let z$e=class extends C$7{constructor(o,t){super(o,t),this.iconClass=h$1g,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new p$1T;}initialize(){this._zoomInButton=new u$1x({action:this.zoomIn.bind(this),iconClass:c$23}),this._zoomOutButton=new u$1x({action:this.zoomOut.bind(this),iconClass:d$1d});}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null;}set layout(o){"horizontal"!==o&&(o="vertical"),this._set("layout",o);}render(){const o=this.viewModel,t={[p$1U]:"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===o.state&&o.canZoomIn,this._zoomOutButton.enabled="ready"===o.state&&o.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,r$G("div",{class:this.classes(u$1y,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};e([y$5()],z$e.prototype,"iconClass",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],z$e.prototype,"label",void 0),e([y$5({value:"vertical"}),o$U()],z$e.prototype,"layout",null),e([y$5(),o$U(),e$T("esri/widgets/Zoom/t9n/Zoom")],z$e.prototype,"messages",void 0),e([o$M("viewModel.view"),o$U()],z$e.prototype,"view",void 0),e([y$5({type:p$1T}),o$U(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],z$e.prototype,"viewModel",void 0),z$e=e([n$e("esri.widgets.Zoom")],z$e);var v$z=z$e;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1z=n$7.getLogger("esri.views.ui.DefaultUI");let h$1h=class extends x$s{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[];}initialize(){this._handles.add([d$C(this,"components",this._componentsWatcher.bind(this)),d$C(this,"view",this._updateViewAwareWidgets.bind(this))]);}_add(t,o,i,s$1){if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return void(s("esri-debug-messages")&&u$1z.warn(t+" has already been added to the UI. Consider using move() instead."));t=this._createComponent(t);}super._add(t,o,i,s$1);}_removeComponents(t){t.forEach(t=>{const e=this._find(t);e&&(this.remove(e),e.destroy());});}_updateViewAwareWidgets(t){this.components.forEach(e=>{const o=this._find(e),i=o&&o.widget;(function(t){return t&&void 0!==t.view})(i)&&(i.view=t);});}_componentsWatcher(t,e){this._removeComponents(e),this._addComponents(t),this._adjustPadding(t);}_adjustPadding(t){if(-1===t.indexOf("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t;}}_addComponents(t){this.initialized&&t.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]));}_createComponent(t){const e=this._createWidget(t);if(e)return new c$21({id:t,node:e})}_createWidget(t){return "attribution"===t?this._createAttribution():"compass"===t?this._createCompass():"navigation-toggle"===t?this._createNavigationToggle():"zoom"===t?this._createZoom():void 0}_createAttribution(){return new j$A({view:this.view})}_createCompass(){return new g$N({view:this.view})}_createNavigationToggle(){return new y$Q({view:this.view})}_createZoom(){return new v$z({view:this.view})}};e([y$5()],h$1h.prototype,"components",void 0),h$1h=e([n$e("esri.views.ui.DefaultUI")],h$1h);var g$O=h$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$1m=class extends g$O{constructor(o){super(o),this.components=["attribution","zoom"];}};e([y$5()],e$1m.prototype,"components",void 0),e$1m=e([n$e("esri.views.ui.2d.DefaultUI2D")],e$1m);var p$1V=e$1m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const C$h=n$7.getLogger("esri.views.MapView");let S$o,E$j,x$t,N$e,W$8;function R$f(e,t,i){if(e)if(Array.isArray(e)||L$2.isCollection(e)){if(0===e.length)return;e.forEach(e=>R$f(e,t,i));}else !function(e){return e instanceof c$19}(e)?i.add(e):t.add(e);}let U$d=class extends(n$1f(c$1C(G$e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new l$t({root:this,rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:e=>null}),this.graphicsView=null,this.highlightOptions=new c$20,this.magnifier=new i$1u,this.inputManager=new T$k({view:this}),this.mapViewNavigation=null,this.supersampleScreenhotsEnabled=!0,this.ui=new p$1V,this.rendering=!1,u$U();}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null);}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){void 0===e?this._clearOverride("background"):this._override("background",e);}get textureManager(){return this._stage.painter.textureManager}get navigating(){return !(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if(g$i(e)){const t=b$8(this,e);return super.toMap(t)}return super.toMap(e)}hitTest(e,t){const i=g$i(e)?b$8(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return D$1({screenPoint:i,results:[]});const r=this.toMap(i),s=[this.graphicsView];s.push.apply(s,this.allLayerViews.toArray().reverse());const a=new Set,n=new Set,h=new Set,l=new Set;return t&&(R$f(t&&t.include,a,h),R$f(t&&t.exclude,n,l)),p$9(s.map(e=>!e||!e.hitTest||h.size>0&&!e.layer||h.size>0&&e.layer&&!h.has(e.layer)||l.size>0&&e.layer&&l.has(e.layer)?null:e.hitTest(i.x,i.y))).then(e=>({screenPoint:i,results:e.filter(e=>null!=e&&(!(a.size>0)||a.has(e))&&(!(n.size>0)||!n.has(e))).map(e=>({mapPoint:r,graphic:e}))}))}takeScreenshot(e){return this.ready?this._stage.takeScreenshot(e$Q(e,this),this.allLayerViews):B$2("Map view cannot be used before it is ready")}on(e,t,i,r){const s=this.inputManager&&this.viewEvents.on(e,t,i,r);return s||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){if(this.graphicsView){this.graphicsView.graphicUpdateHandler(e);}}whenReady(){return v$3(e=>{this.ready?e(this):this._resolveWhenReady.push(e);})}forceDOMReadyCycle(){this.forceReadyCycle();}validate(){let e=i$1U({checkMajorWebPerformanceCaveat:!1});return s("safari")&&s("safari")<9&&(e=new s$g("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:s("safari")})),u$4(e)?(C$h.warn("#validate()",e.message),B$2(e)):async function(){const[,{GraphicsView2D:e,LabelManager:t,MapViewNavigation:i,MagnifierView2D:r,Stage:s}]=await Promise.all([import('./chunks/webgl-1e700212.js'),import('./chunks/mapViewDeps-b33d8571.js')]);E$j=e,x$t=t,N$e=i,W$8=r,S$o=s;}()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new S$o(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),i=new E$j({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate()}),r=new N$e({view:this,animationManager:this.animationManager}),s=new x$t({view:this});this._magnifierView=new W$8,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=i,this._set("graphicsView",i),this._set("mapViewNavigation",r),this._set("labelManager",s),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",e=>this.fatalError=e.error),d$C(this,"stationary",e=>t.stationary=e,!0),d$C(this,"state.id",()=>t.state=this.state,!0),d$C(this,"background",e=>{t.background=e,this._magnifierView.background=e;},!0),d$C(this,"magnifier",e=>this._magnifierView.magnifier=e,!0),d$C(this,"renderingOptions",e=>t.renderingOptions=e,!0),d$C(this,"highlightOptions",()=>t.highlightOptions=this.highlightOptions,!0)],"map-view"),t.state=this.state,this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(e=>e(this)),this.timeline.end("MapView Startup");}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy();this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown();}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container);});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView);}};e([y$5({type:m$C,dependsOn:["map.initialViewProperties?.background"]})],U$d.prototype,"background",null),e([y$5()],U$d.prototype,"graphicsView",void 0),e([y$5({type:c$20})],U$d.prototype,"highlightOptions",void 0),e([y$5({type:i$1u})],U$d.prototype,"magnifier",void 0),e([y$5({readOnly:!0})],U$d.prototype,"inputManager",void 0),e([y$5({readOnly:!0})],U$d.prototype,"textureManager",null),e([y$5({readOnly:!0})],U$d.prototype,"mapViewNavigation",void 0),e([y$5({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],U$d.prototype,"navigating",null),e([y$5({type:Boolean,constructOnly:!0})],U$d.prototype,"supersampleScreenhotsEnabled",void 0),e([y$5({type:p$1V})],U$d.prototype,"ui",void 0),e([y$5({readOnly:!0})],U$d.prototype,"rendering",void 0),e([y$5({constructOnly:!0})],U$d.prototype,"renderCanvas",void 0),e([y$5({constructOnly:!0})],U$d.prototype,"deactivatedWebGLExtensions",void 0),e([y$5({constructOnly:!0})],U$d.prototype,"debugWebGLExtensions",void 0),U$d=e([n$e("esri.views.MapView")],U$d);var G$f=U$d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class i$1W{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(r$f),this._values=new Map;}clone(r){const e=new i$1W,o=this._originStores[0];o&&o.forEach((r,s)=>{e.set(s,s$4(r),0);});for(let i=2;i<r$f;i++){const s=this._originStores[i];s&&s.forEach((s,o)=>{r&&r.has(o)||e.set(o,s$4(s),i);});}return e}get(t,r){const s=void 0===r?this._values:this._originStores[r];return s?s.get(t):void 0}keys(t){const r=null==t?this._values:this._originStores[t];return r?F$3(r):[]}set(t,s,e=6){let i=this._originStores[e];if(i||(i=new Map,this._originStores[e]=i),i.set(t,s),!this._values.has(t)||A(this._propertyOriginMap.get(t))<=e){const r=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,e),r!==s}return !1}delete(t,r=6){const s=this._originStores[r];if(!s)return;const e=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const r=this._originStores[s];if(r&&r.has(t)){this._values.set(t,r.get(t)),this._propertyOriginMap.set(t,s);break}}}return e}has(t,r){const s=void 0===r?this._values:this._originStores[r];return !!s&&s.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const s=this._originStores[r],e=s&&s.get(t),i=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),i!==e}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t);}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$1N=n=>{let a=class extends n{constructor(...r){super(...r);const s=A(e$9(this)),o=s.metadatas,i=s.store,n=new i$1W;s.store=n,i.keys().forEach(r=>{n.set(r,i.get(r),0);}),Object.keys(o).forEach(r=>{s.internalGet(r)&&n.set(r,s.internalGet(r),0);});}read(r,t){c$h(this,r,t);}getAtOrigin(r,t){const e=u$1A(this),s=t$d(t);if("string"==typeof r)return e.get(r,s);const o={};return r.forEach(r=>{o[r]=e.get(r,s);}),o}originOf(r){return n$j(this.originIdOf(r))}originIdOf(r){return u$1A(this).originOf(r)}revert(r,t){const s=u$1A(this),o=t$d(t),n=e$9(this);let c;c="string"==typeof r?"*"===r?s.keys(o):[r]:r,c.forEach(r=>{n.propertyInvalidated(r),s.revert(r,o),n.propertyCommitted(r);});}};return a=e([n$e("esri.core.ReadOnlyMultiOriginJSONSupport")],a),a};function u$1A(r){return e$9(r).store}let f$1g=class extends(a$1N(h$c)){};f$1g=e([n$e("esri.core.ReadOnlyMultiOriginJSONSupport")],f$1g);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$1f;let p$1W=t$1f=class extends a$h{constructor(r){super(r),this.minValue=0,this.maxValue=0;}clone(){return new t$1f({minValue:this.minValue,maxValue:this.maxValue})}};e([y$5({type:Number,json:{write:!0}})],p$1W.prototype,"minValue",void 0),e([y$5({type:Number,json:{write:!0}})],p$1W.prototype,"maxValue",void 0),p$1W=t$1f=e([n$e("esri.renderer.support.AuthoringInfoClassBreakInfo")],p$1W);var i$1X=p$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$1X;let l$1t=p$1X=class extends a$h{constructor(o){super(o),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[];}clone(){return new p$1X({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:s$4(this.classBreakInfos)})}};e([y$5({type:String,json:{write:!0}})],l$1t.prototype,"field",void 0),e([y$5({type:String,json:{write:!0}})],l$1t.prototype,"normalizationField",void 0),e([y$5({type:String,json:{write:!0}})],l$1t.prototype,"label",void 0),e([y$5({type:[i$1X],json:{write:!0}})],l$1t.prototype,"classBreakInfos",void 0),l$1t=p$1X=e([n$e("esri.renderers.support.AuthoringInfoFieldInfo")],l$1t);var a$1O=l$1t;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var n$1K;const l$1u=new t$q({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),p$1Y=new t$q({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a$1P={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},u$1B=["high-to-low","above-and-below","centered-on","extremes"],m$1g=["seconds","minutes","hours","days","months","years"];let y$R=n$1K=class extends a$h{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null;}castEndTime(e){return "string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return "string"==typeof e||"number"==typeof e?e:null}get style(){return "color"===this.type?this._get("style"):null}set style(e){this._set("style",e);}get theme(){return "color"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e);}clone(){return new n$1K({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};e([y$5({types:a$1P,json:{write:!0}})],y$R.prototype,"endTime",void 0),e([i$b("endTime")],y$R.prototype,"castEndTime",null),e([y$5({type:String,json:{write:!0}})],y$R.prototype,"field",void 0),e([y$5({type:Number,json:{write:!0}})],y$R.prototype,"maxSliderValue",void 0),e([y$5({type:Number,json:{write:!0}})],y$R.prototype,"minSliderValue",void 0),e([y$5({types:a$1P,json:{write:!0}})],y$R.prototype,"startTime",void 0),e([i$b("startTime")],y$R.prototype,"castStartTime",null),e([y$5({type:l$1u.apiValues,value:null,dependsOn:["type"],json:{type:l$1u.jsonValues,read:l$1u.read,write:l$1u.write}})],y$R.prototype,"style",null),e([y$5({type:u$1B,value:null,dependsOn:["type"],json:{type:u$1B,write:!0}})],y$R.prototype,"theme",null),e([y$5({type:p$1Y.apiValues,json:{type:p$1Y.jsonValues,read:p$1Y.read,write:p$1Y.write}})],y$R.prototype,"type",void 0),e([y$5({type:m$1g,json:{type:m$1g,write:!0}})],y$R.prototype,"units",void 0),y$R=n$1K=e([n$e("esri.renderers.support.AuthoringInfoVisualVariable")],y$R);var d$1e=y$R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let e$1n=class extends a$h{constructor(r){super(r),this.type=null;}};e([y$5({readOnly:!0,json:{read:!1,write:!0}})],e$1n.prototype,"type",void 0),e$1n=e([n$e("esri.tasks.support.ColorRamp")],e$1n);var p$1Z=e$1n;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$1h;let c$24=m$1h=class extends p$1Z{constructor(o){super(o),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic";}clone(){return new m$1h({fromColor:s$4(this.fromColor),toColor:s$4(this.toColor),algorithm:this.algorithm})}};e([e$A({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c$24.prototype,"algorithm",void 0),e([y$5({type:o$H,json:{type:[N],write:!0}})],c$24.prototype,"fromColor",void 0),e([y$5({type:o$H,json:{type:[N],write:!0}})],c$24.prototype,"toColor",void 0),e([y$5({type:["algorithmic"]})],c$24.prototype,"type",void 0),c$24=m$1h=e([n$e("esri.tasks.support.AlgorithmicColorRamp")],c$24);var a$1Q=c$24;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$1Y;let m$1i=i$1Y=class extends p$1Z{constructor(r){super(r),this.colorRamps=null,this.type="multipart";}clone(){return new i$1Y({colorRamps:s$4(this.colorRamps)})}};e([y$5({type:[a$1Q],json:{write:!0}})],m$1i.prototype,"colorRamps",void 0),e([y$5({type:["multipart"]})],m$1i.prototype,"type",void 0),m$1i=i$1Y=e([n$e("esri.tasks.support.MultipartColorRamp")],m$1i);var c$25=m$1i;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$1j={key:"type",base:p$1Z,typeMap:{algorithmic:a$1Q,multipart:c$25}};function p$1_(t){return t&&t.type?"algorithmic"===t.type?a$1Q.fromJSON(t):"multipart"===t.type?c$25.fromJSON(t):null:null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$26;const h$1i=new t$q({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),m$1k=new t$q({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),y$S=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let f$1h=c$26=class extends a$h{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null;}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e);}readColorRamp(e){if(e)return p$1_(e)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e);}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e);}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e);}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e);}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e);}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e);}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t);}clone(){return new c$26({classificationMethod:this.classificationMethod,colorRamp:s$4(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:s$4(this.field1),field2:s$4(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone())})}};e([y$5({type:h$1i.apiValues,value:null,dependsOn:["type"],json:{type:h$1i.jsonValues,read:h$1i.read,write:h$1i.write,origins:{"web-document":{default:"manual",type:h$1i.jsonValues,read:h$1i.read,write:h$1i.write}}}})],f$1h.prototype,"classificationMethod",null),e([y$5({types:m$1j,json:{write:!0}})],f$1h.prototype,"colorRamp",void 0),e([e$l("colorRamp")],f$1h.prototype,"readColorRamp",null),e([y$5({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],f$1h.prototype,"fields",null),e([y$5({type:a$1O,value:null,dependsOn:["type"],json:{write:!0}})],f$1h.prototype,"field1",null),e([y$5({type:a$1O,value:null,dependsOn:["type"],json:{write:!0}})],f$1h.prototype,"field2",null),e([y$5({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],f$1h.prototype,"focus",null),e([y$5({type:Number,value:null,dependsOn:["type"],json:{type:N,write:!0}})],f$1h.prototype,"numClasses",null),e([y$5({type:y$S,json:{type:y$S,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],f$1h.prototype,"lengthUnit",void 0),e([y$5({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],f$1h.prototype,"maxSliderValue",void 0),e([y$5({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],f$1h.prototype,"minSliderValue",void 0),e([y$5({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],f$1h.prototype,"standardDeviationInterval",null),e([y$5({type:String,value:null,json:{type:m$1k.jsonValues,read:m$1k.read,write:m$1k.write}})],f$1h.prototype,"type",null),e([y$5({type:[d$1e],json:{write:!0}})],f$1h.prototype,"visualVariables",void 0),f$1h=c$26=e([n$e("esri.renderers.support.AuthoringInfo")],f$1h);var v$A=f$1h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1L=new t$q({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let u$1C=class extends a$h{constructor(r){super(r),this.authoringInfo=null,this.type=null;}async getRequiredFields(r){if(!this.collectRequiredFields)return [];const e=new Set;return await this.collectRequiredFields(e,r),o$E(e).sort()}getSymbol(r,e){}async getSymbolAsync(r,e){}getSymbols(){return []}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};e([y$5({type:v$A,json:{write:!0}})],u$1C.prototype,"authoringInfo",void 0),e([y$5({type:n$1L.apiValues,readOnly:!0,json:{type:n$1L.jsonValues,read:!1,write:{writer:n$1L.write,ignoreOrigin:!0}}})],u$1C.prototype,"type",void 0),u$1C=e([n$e("esri.renderers.Renderer")],u$1C);var a$1R=u$1C;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$1o;let p$1$=e$1o=class extends a$h{constructor(){super(...arguments),this.title=null;}clone(){return new e$1o({title:this.title})}};e([y$5({type:String,json:{write:!0}})],p$1$.prototype,"title",void 0),p$1$=e$1o=e([n$e("esri.renderers.support.LegendOptions")],p$1$);var i$1Z=p$1$;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$1g;let p$20=t$1g=class extends i$1Z{constructor(){super(...arguments),this.showLegend=null;}clone(){return new t$1g({title:this.title,showLegend:this.showLegend})}};e([y$5({type:Boolean,json:{write:!0}})],p$20.prototype,"showLegend",void 0),p$20=t$1g=e([n$e("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p$20);var i$1_=p$20;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$1S=n$7.getLogger("esri.renderers.visualVariables.VisualVariable"),u$1D=new t$q({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let c$27=class extends a$h{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null;}castField(e){return null==e?e:"function"==typeof e?(a$1S.error(".field: field must be a string value"),null):u$5(e)}get arcadeRequired(){return !!this.valueExpression}clone(){}getAttributeHash(){return `${this.type}-${this.field}-${this.valueExpression}`}};e([y$5()],c$27.prototype,"index",void 0),e([y$5({type:u$1D.apiValues,readOnly:!0,json:{read:u$1D.read,write:u$1D.write}})],c$27.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],c$27.prototype,"field",void 0),e([i$b("field")],c$27.prototype,"castField",null),e([y$5({type:String,json:{write:!0}})],c$27.prototype,"valueExpression",void 0),e([y$5({type:String,json:{write:!0}})],c$27.prototype,"valueExpressionTitle",void 0),e([y$5({readOnly:!0,dependsOn:["valueExpression"]})],c$27.prototype,"arcadeRequired",null),e([y$5({type:i$1_,json:{write:!0}})],c$27.prototype,"legendOptions",void 0),c$27=e([n$e("esri.renderers.visualVariables.VisualVariable")],c$27);var d$1f=c$27;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$1$;let c$28=i$1$=class extends a$h{constructor(r){super(r),this.color=null,this.label=null,this.value=null;}writeValue(r,o,e){o[e]=null==r?0:r;}clone(){return new i$1$({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};e([y$5({type:o$H,json:{type:[N],write:!0}})],c$28.prototype,"color",void 0),e([y$5({type:String,json:{write:!0}})],c$28.prototype,"label",void 0),e([y$5({type:Number,json:{write:{allowNull:!0}}})],c$28.prototype,"value",void 0),e([o$r("value")],c$28.prototype,"writeValue",null),c$28=i$1$=e([n$e("esri.renderers.visualVariables.support.ColorStop")],c$28);var u$1E=c$28;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$20;let p$21=i$20=class extends d$1f{constructor(s){super(s),this.type="color",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(s){s&&Array.isArray(s)&&(s=s.filter(s=>!!s)).sort((s,t)=>s.value-t.value),this._set("stops",s);}clone(){return new i$20({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(s=>s.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(s=>s.value||0)}};e([y$5({readOnly:!0,dependsOn:["valueExpression","stops"]})],p$21.prototype,"cache",null),e([y$5({type:["color"],json:{type:["colorInfo"]}})],p$21.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],p$21.prototype,"normalizationField",void 0),e([y$5({type:[u$1E],json:{write:!0}})],p$21.prototype,"stops",null),p$21=i$20=e([n$e("esri.renderers.visualVariables.ColorVariable")],p$21);var l$1v=p$21;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$1w;let u$1F=l$1w=class extends a$h{constructor(r){super(r),this.label=null,this.opacity=null,this.value=null;}readOpacity(r,o){return r$r(o.transparency)}writeOpacity(r,o,t){o[t]=n$D(r);}clone(){return new l$1w({label:this.label,opacity:this.opacity,value:this.value})}};e([y$5({type:String,json:{write:!0}})],u$1F.prototype,"label",void 0),e([y$5({type:Number,json:{type:N,write:{target:"transparency"}}})],u$1F.prototype,"opacity",void 0),e([e$l("opacity",["transparency"])],u$1F.prototype,"readOpacity",null),e([o$r("opacity")],u$1F.prototype,"writeOpacity",null),e([y$5({type:Number,json:{write:!0}})],u$1F.prototype,"value",void 0),u$1F=l$1w=e([n$e("esri.renderers.visualVariables.support.OpacityStop")],u$1F);var y$T=u$1F;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$21;let p$22=i$21=class extends d$1f{constructor(t){super(t),this.type="opacity",this.normalizationField=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(t=>!!t)).sort((t,s)=>t.value-s.value),this._set("stops",t);}clone(){return new i$21({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return `${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};e([y$5({readOnly:!0,dependsOn:["valueExpression","stops"]})],p$22.prototype,"cache",null),e([y$5({type:["opacity"],json:{type:["transparencyInfo"]}})],p$22.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],p$22.prototype,"normalizationField",void 0),e([y$5({type:[y$T],json:{write:!0}})],p$22.prototype,"stops",null),p$22=i$21=e([n$e("esri.renderers.visualVariables.OpacityVariable")],p$22);var a$1T=p$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$23;let n$1M=p$23=class extends d$1f{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null;}get cache(){return {hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,r,s,o){if(o&&o.messages){const e=`visualVariables[${this.index}]`;o.messages.push(new s$g("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:o}));}}clone(){return new p$23({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};e([y$5({readOnly:!0,dependsOn:["valueExpression"]})],n$1M.prototype,"cache",null),e([y$5({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],n$1M.prototype,"axis",void 0),e([y$5({type:["rotation"],json:{type:["rotationInfo"]}})],n$1M.prototype,"type",void 0),e([y$5({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],n$1M.prototype,"rotationType",void 0),e([y$5({type:String,json:{write:!0}})],n$1M.prototype,"valueExpressionTitle",void 0),e([o$r("web-scene","valueExpressionTitle")],n$1M.prototype,"writeValueExpressionTitleWebScene",null),n$1M=p$23=e([n$e("esri.renderers.visualVariables.RotationVariable")],n$1M);var a$1U=n$1M;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$24;let i$22=p$24=class extends a$h{constructor(r){super(r),this.label=null,this.size=null,this.value=null;}clone(){return new p$24({label:this.label,size:this.size,value:this.value})}};e([y$5({type:String,json:{write:!0}})],i$22.prototype,"label",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],i$22.prototype,"size",void 0),e([y$5({type:Number,json:{write:!0}})],i$22.prototype,"value",void 0),i$22=p$24=e([n$e("esri.renderers.visualVariables.support.SizeStop")],i$22);var l$1x=i$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$1h;let i$23=t$1h=class extends i$1_{constructor(){super(...arguments),this.customValues=null;}clone(){return new t$1h({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};e([y$5({type:[Number],json:{write:!0}})],i$23.prototype,"customValues",void 0),i$23=t$1h=e([n$e("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],i$23);var p$25=i$23;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1N(n){return n&&"esri.renderers.visualVariables.SizeVariable"===n.declaredClass}function e$1p(n){return null!=n&&!isNaN(n)&&isFinite(n)}function i$24(n){return n.valueExpression?"expression":n.field&&"string"==typeof n.field?"field":"unknown"}function l$1y(n,e){const l=e||i$24(n),a=n.valueUnit||"unknown";return "unknown"===l?"constant":n.stops?"stops":null!=n.minSize&&null!=n.maxSize&&null!=n.minDataValue&&null!=n.maxDataValue?"clamped-linear":"unknown"===a?null!=n.minSize&&null!=n.minDataValue?n.minSize&&n.minDataValue?"proportional":"additive":"identity":"real-world-size"}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1O=/^-?(\d+)(\.(\d+))?$/i;function e$1q(t,n){return t-n}function r$17(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/Math.pow(10,n):(r=e,e-=1/Math.pow(10,n)),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function i$25(t,n,e,r,i){const o=l$1z(t,n,e,r),s=null==o.previous||o.previous<=i,u=null==o.next||o.next<=i;return s&&u||o.previous+o.next<=2*i}function o$1o(t){const e=String(t),r=e.match(n$1O);if(r&&r[1])return {integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(e.toLowerCase().indexOf("e")>-1){const t=e.split("e"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const i=e>0;i||(e=Math.abs(e));const l=o$1o(t);return i?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return {integer:0,fractional:0}}function l$1z(t,n,e,r){const i={previous:null,next:null};if(null!=e){const r=t-e,o=n-e-r;i.previous=Math.floor(Math.abs(100*o/r));}if(null!=r){const e=r-t,o=r-n-e;i.next=Math.floor(Math.abs(100*o/e));}return i}function s$1p(t,n={}){const l=t.slice(0),{tolerance:s=2,strictBounds:u=!1,indexes:c=l.map((t,n)=>n)}=n;c.sort(e$1q);for(let t=0;t<c.length;t++){const n=c[t],e=l[n],a=0===n?null:l[n-1],f=n===l.length-1?null:l[n+1],m=o$1o(e).fractional;if(m){let o,c=0,p=!1;for(;c<=m&&!p;){const n=r$17(e,c);o=u&&0===t?n[1]:n[0],p=i$25(e,o,a,f,s),c++;}p&&(l[n]=o);}}return l}const u$1G={maximumFractionDigits:20};function c$29(n){return u$t(n,u$1G)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1H=n$7.getLogger("esri.renderers.support.utils"),y$U={inches:w$f(1,"meters","inches"),feet:w$f(1,"meters","feet"),"us-feet":w$f(1,"meters","us-feet"),yards:w$f(1,"meters","yards"),miles:w$f(1,"meters","miles"),"nautical-miles":w$f(1,"meters","nautical-miles"),millimeters:w$f(1,"meters","millimeters"),centimeters:w$f(1,"meters","centimeters"),decimeters:w$f(1,"meters","decimeters"),meters:w$f(1,"meters","meters"),kilometers:w$f(1,"meters","kilometers"),"decimal-degrees":1/J$3(1,"meters")};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const c$2a=n$7.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u$1I=new c$19,f$1i=Math.PI,p$26=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function d$1g(e,r,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"color"===e.type)[0]:e;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void c$2a.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const s="number"==typeof r,o=s?null:r,l=o&&o.attributes;let u=s?r:null;const f=n.field,{ipData:p,hasExpression:d}=n.cache;let v=n.cache.compiledFunc;if(!f&&!d){const e=n.stops;return e&&e[0]&&e[0].color}if("number"!=typeof u)if(d){if(!u$4(i)||!u$4(i.arcade))return void c$2a.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},r=i.arcade.arcadeUtils,t=r.getViewInfo(e),s=r.createExecContext(o,t);if(!v){const e=r.createSyntaxTree(n.valueExpression);v=r.createFunction(e),n.cache.compiledFunc=v;}u=r.executeFunction(v,s);}else l&&(u=l[f]);const b=n.normalizationField,h=l?parseFloat(l[b]):void 0;if(null!=u&&(!b||s||!isNaN(h)&&0!==h)){isNaN(h)||s||(u/=h);const e=z$f(u,p);if(e){const r=e[0],s=e[1],o=r===s?n.stops[r].color:o$H.blendColors(n.stops[r].color,n.stops[s].color,e[2],u$4(i)?i.color:void 0);return new o$H(o)}}}function v$B(e,a,i){const t="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"opacity"===e.type)[0]:e;if(!t)return;if("esri.renderers.visualVariables.OpacityVariable"!==t.declaredClass)return void c$2a.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n="number"==typeof a,s=n?null:a,o=s&&s.attributes;let l=n?a:null;const u=t.field,{ipData:f,hasExpression:p}=t.cache;let d=t.cache.compiledFunc;if(!u&&!p){const e=t.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(p){if(t$6(i)||t$6(i.arcade))return void c$2a.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,n=a.getViewInfo(e),o=a.createExecContext(s,n);if(!d){const e=a.createSyntaxTree(t.valueExpression);d=a.createFunction(e),t.cache.compiledFunc=d;}l=a.executeFunction(d,o);}else o&&(l=o[u]);const v=t.normalizationField,b=o?parseFloat(o[v]):void 0;if(null!=l&&(!v||n||!isNaN(b)&&0!==b)){isNaN(b)||n||(l/=b);const e=z$f(l,f);if(e){const a=e[0],r=e[1];if(a===r)return t.stops[a].opacity;{const i=t.stops[a].opacity;return i+(t.stops[r].opacity-i)*e[2]}}}}function b$z(e,a,i){const t="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"rotation"===e.type)[0]:e;if(!t)return;if("esri.renderers.visualVariables.RotationVariable"!==t.declaredClass)return void c$2a.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=t.axis||"heading",s="heading"===n&&"arithmetic"===t.rotationType?90:0,o="heading"===n&&"arithmetic"===t.rotationType?-1:1,l="number"==typeof a?null:a,u=l&&l.attributes,f=t.field,{hasExpression:p}=t.cache;let d=t.cache.compiledFunc,v=0;if(!f&&!p)return v;if(p){if(t$6(i)||t$6(i.arcade))return void c$2a.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,n=a.getViewInfo(e),s=a.createExecContext(l,n);if(!d){const e=a.createSyntaxTree(t.valueExpression);d=a.createFunction(e),t.cache.compiledFunc=d;}v=a.executeFunction(d,s);}else u&&(v=u[f]||0);return v="number"!=typeof v||isNaN(v)?null:s+o*v,v}function h$1j(e,i,t){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(e=>"size"===e.type)[0]:e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void c$2a.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const s=x$u(function(e,i,t){const n="number"==typeof i,s=n?null:i,l=s&&s.attributes;let u=n?i:null;const{isScaleDriven:f}=e.cache;let p=e.cache.compiledFunc;if(f){const r=u$4(t)?t.scale:void 0,i=u$4(t)?t.view:void 0;u=null==r||i&&"3d"===i.type?function(e){let a=null,r=null;const i=e.stops;return i?(a=i[0].value,r=i[i.length-1].value):(a=e.minDataValue||0,r=e.maxDataValue||0),(a+r)/2}(e):r;}else if(!n)switch(e.inputValueType){case"expression":{if(t$6(t)||t$6(t.arcade))return void c$2a.error("Use of arcade expressions requires an arcade context");const a={viewingMode:t.viewingMode,scale:t.scale,spatialReference:t.spatialReference},i=t.arcade.arcadeUtils,n=i.getViewInfo(a),o=i.createExecContext(s,n);if(!p){const a=i.createSyntaxTree(e.valueExpression);p=i.createFunction(a),e.cache.compiledFunc=p;}u=i.executeFunction(p,o);break}case"field":l&&(u=l[e.field]);break;case"unknown":u=null;}if(!e$1p(u))return null;if(n||!e.normalizationField)return u;const d=l?parseFloat(l[e.normalizationField]):null;return e$1p(d)&&0!==d?u/d:null}(n,i,t),n,i,t,n.cache.ipData);return null==s||isNaN(s)?0:s}function m$1l(e,a,r){return null==e?null:n$1N(e)?h$1j(e,a,r):e$1p(e)?e:null}function V$7(e,a,r){return e$1p(r)&&e>r?r:e$1p(a)&&e<a?a:e}function x$u(e,r,i,t,n){switch(r.transformationType){case"additive":return function(e,a,r,i){return e+(m$1l(a.minSize,r,i)||a.minDataValue)}(e,r,i,t);case"constant":return function(e,a,r){const i=e.stops;let t=i&&i.length&&i[0].size;return null==t&&(t=e.minSize),m$1l(t,a,r)}(r,i,t);case"clamped-linear":return function(e,r,i,t){const n=(e-r.minDataValue)/(r.maxDataValue-r.minDataValue),s=m$1l(r.minSize,i,t),o=m$1l(r.maxSize,i,t),l=u$4(t)?t.shape:void 0;if(e<=r.minDataValue)return s;if(e>=r.maxDataValue)return o;if("area"===r.scaleBy&&l){const e="circle"===l,a=e?f$1i*Math.pow(s/2,2):s*s,r=a+n*((e?f$1i*Math.pow(o/2,2):o*o)-a);return e?2*Math.sqrt(r/f$1i):Math.sqrt(r)}return s+n*(o-s)}(e,r,i,t);case"proportional":return function(e,r,i,t){const n=u$4(t)?t.shape:void 0,s=e/r.minDataValue,o=m$1l(r.minSize,i,t),l=m$1l(r.maxSize,i,t);let c=null;return c="circle"===n?2*Math.sqrt(s*Math.pow(o/2,2)):"square"===n||"diamond"===n||"image"===n?Math.sqrt(s*Math.pow(o,2)):s*o,V$7(c,o,l)}(e,r,i,t);case"stops":return function(e,a,r,i,t){const[n,s,o]=z$f(e,t);if(n===s)return m$1l(a.stops[n].size,r,i);{const e=m$1l(a.stops[n].size,r,i);return e+(m$1l(a.stops[s].size,r,i)-e)*o}}(e,r,i,t,n);case"real-world-size":return function(e,r,i,t){const n=(u$4(t)&&t.resolution?t.resolution:1)*y$U[r.valueUnit],s=m$1l(r.minSize,i,t),o=m$1l(r.maxSize,i,t),{valueRepresentation:c}=r;let u=null;return u="area"===c?2*Math.sqrt(e/f$1i)/n:"radius"===c||"distance"===c?2*e/n:e/n,V$7(u,s,o)}(e,r,i,t);case"identity":return e;case"unknown":return null}}function y$V(e,a,r){const{isScaleDriven:i}=e.cache,t=r&&"3d"===r.type;if(!(i&&t||a))return null;const n={scale:a,view:r};let s=m$1l(e.minSize,u$1I,n),o=m$1l(e.maxSize,u$1I,n);if(null!=s||null!=o){if(s>o){const e=o;o=s,s=e;}return {minSize:s,maxSize:o}}}function w$y(e,a,r){if(!e.visualVariables)return;const i=[],t=[],n=[],s=[],o=[];for(const a of e.visualVariables)switch(a.type){case"color":t.push(a);break;case"opacity":n.push(a);break;case"rotation":o.push(a);break;case"size":s.push(a);}return t.forEach(e=>{const t=d$1g(e,a,r);i.push({variable:e,value:t});}),n.forEach(e=>{const t=v$B(e,a,r);i.push({variable:e,value:t});}),o.forEach(e=>{const t=b$z(e,a,r);i.push({variable:e,value:t});}),s.forEach(e=>{const t=h$1j(e,a,r);i.push({variable:e,value:t});}),i.filter(e=>null!=e.value)}function z$f(e,a){if(!a)return;let r=0,i=a.length-1;return a.some((a,t)=>e<a?(i=t,!0):(r=t,!1)),[r,i,(e-a[r])/(a[i]-a[r])]}function g$P(a,r,i){const t=["proportional","proportional","proportional"];for(const n of a){const a=n.useSymbolValue?"symbol-value":h$1j(n,r,i);switch(n.axis){case"width":t[0]=a;break;case"depth":t[1]=a;break;case"height":t[2]=a;break;case"width-and-depth":t[0]=a,t[1]=a;break;case"all":case void 0:case null:t[0]=a,t[1]=a,t[2]=a;break;default:r$6(n.axis);}}return t}

var visualVariableUtils = /*#__PURE__*/Object.freeze({
    __proto__: null,
    getAllSizes: g$P,
    getColor: d$1g,
    getOpacity: v$B,
    getRotationAngle: b$z,
    getSize: h$1j,
    getSizeForValue: x$u,
    getSizeFromNumberOrVariable: m$1l,
    getSizeRangeAtScale: y$V,
    getVisualVariableValues: w$y,
    viewScaleRE: p$26
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var S$p;const z$g=n$7.getLogger("esri.renderers.visualVariables.SizeVariable"),v$C=new t$q({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),w$z=new t$q({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function V$8(e){if(null!=e)return "string"==typeof e||"number"==typeof e?c$A(e):"size"===e.type?n$1N(e)?e:(delete(e={...e}).type,new g$Q(e)):void 0}function f$1j(e,t,i){if("object"!=typeof e)return e;const s=new g$Q;return s.read(e,i),s}let g$Q=S$p=class extends d$1f{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null;}get cache(){return {ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:p$26.test(this.valueExpression)}}set expression(e){z$g.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null);}set index(e){n$1N(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),n$1N(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e);}get inputValueType(){return i$24(this)}set maxDataValue(e){e&&this.stops&&(z$g.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e);}set maxSize(e){e&&this.stops&&(z$g.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e);}castMaxSize(e){return V$8(e)}readMaxSize(e,t,i){return f$1j(e,0,i)}set minDataValue(e){e&&this.stops&&(z$g.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e);}set minSize(e){e&&this.stops&&(z$g.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e);}castMinSize(e){return V$8(e)}readMinSize(e,t,i){return f$1j(e,0,i)}get arcadeRequired(){return !!this.valueExpression||(this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired)}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter(e=>!!e)).sort((e,t)=>e.value-t.value):e&&(z$g.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e);}get transformationType(){return l$1y(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,s){if("$view.scale"===e){if(s&&s.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;s.messages.push(new s$g("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:s}));}}else t[i]=e;}readValueUnit(e){return e?w$z.read(e):null}clone(){return new S$p({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:n$1N(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:n$1N(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if("stops"===this.transformationType){const e=this.stops,t=e.map(e=>e.size).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return `${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};e([y$5({readOnly:!0,dependsOn:["valueExpression","stops"]})],g$Q.prototype,"cache",null),e([y$5({type:v$C.apiValues,json:{type:v$C.jsonValues,origins:{"web-map":{read:!1}},read:v$C.read,write:v$C.write}})],g$Q.prototype,"axis",void 0),e([y$5({type:String,value:null,json:{read:!1}})],g$Q.prototype,"expression",null),e([y$5()],g$Q.prototype,"index",null),e([y$5({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],g$Q.prototype,"inputValueType",null),e([y$5({type:p$25,json:{write:!0}})],g$Q.prototype,"legendOptions",void 0),e([y$5({type:Number,value:null,json:{write:!0}})],g$Q.prototype,"maxDataValue",null),e([y$5({type:Number,value:null,json:{write:!0}})],g$Q.prototype,"maxSize",null),e([i$b("maxSize")],g$Q.prototype,"castMaxSize",null),e([e$l("maxSize")],g$Q.prototype,"readMaxSize",null),e([y$5({type:Number,value:null,json:{write:!0}})],g$Q.prototype,"minDataValue",null),e([y$5({type:Number,value:null,json:{write:!0}})],g$Q.prototype,"minSize",null),e([i$b("minSize")],g$Q.prototype,"castMinSize",null),e([e$l("minSize")],g$Q.prototype,"readMinSize",null),e([y$5({type:String,json:{write:!0}})],g$Q.prototype,"normalizationField",void 0),e([y$5({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired","maxSize.arcadeRequired"]})],g$Q.prototype,"arcadeRequired",null),e([y$5({type:String})],g$Q.prototype,"scaleBy",void 0),e([y$5({type:[l$1x],value:null,json:{write:!0}})],g$Q.prototype,"stops",null),e([y$5({type:["outline"],json:{write:!0}})],g$Q.prototype,"target",void 0),e([y$5({type:String,readOnly:!0,dependsOn:["minDataValue","maxDataValue","minSize","maxSize","valueUnit","inputValueType","stops"]})],g$Q.prototype,"transformationType",null),e([y$5({type:["size"],json:{type:["sizeInfo"]}})],g$Q.prototype,"type",void 0),e([y$5({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],g$Q.prototype,"useSymbolValue",void 0),e([y$5({type:String,json:{write:!0}})],g$Q.prototype,"valueExpression",void 0),e([e$l("valueExpression",["valueExpression","expression"])],g$Q.prototype,"readValueExpression",null),e([o$r("web-scene","valueExpression")],g$Q.prototype,"writeValueExpressionWebScene",null),e([y$5({type:["radius","diameter","area","width","distance"],json:{write:!0}})],g$Q.prototype,"valueRepresentation",void 0),e([y$5({type:w$z.apiValues,json:{write:w$z.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],g$Q.prototype,"valueUnit",void 0),e([e$l("valueUnit")],g$Q.prototype,"readValueUnit",null),g$Q=S$p=e([n$e("esri.renderers.visualVariables.SizeVariable")],g$Q);var j$D=g$Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1J=n$7.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),b$A={color:l$1v,size:j$D,opacity:a$1T,rotation:a$1U},m$1m=new t$q({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),V$9=/^\[([^\]]+)\]$/i;let h$1k=class extends h$c{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null;}set visualVariables(r){if(this._resetVariables(),(r=r&&r.filter(r=>!!r))&&r.length){for(const s of r)switch(s.type){case"color":this.colorVariables.push(s);break;case"opacity":this.opacityVariables.push(s);break;case"rotation":this.rotationVariables.push(s);break;case"size":this.sizeVariables.push(s);}if(this.sizeVariables.length){this.sizeVariables.some(r=>!!r.target)&&r.sort((r,s)=>{let e=null;return e=r.target===s.target?0:r.target?1:-1,e});}for(let s=0;s<r.length;s++){r[s].index=s;}this._set("visualVariables",r);}else this._set("visualVariables",r);}readVariables(r,s,e){const{rotationExpression:o,rotationType:a}=s,i=o&&o.match(V$9),l=i&&i[1];if(l&&(r||(r=[]),r.push({type:"rotationInfo",rotationType:a,field:l})),r)return r.map(r=>{const s=m$1m.read(r.type),o=b$A[s];o||(u$1J.warn("Unknown variable type: "+s),e&&e.messages&&e.messages.push(new t$8("visual-variable:unsupported",`visualVariable of type '${s}' is not supported`,{definition:r,context:e})));const a=new o;return a.read(r,e),a})}writeVariables(r,s){const e=[];for(const o of r){const r=o.toJSON(s);r&&e.push(r);}return e}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[];}};e([y$5()],h$1k.prototype,"visualVariables",null),h$1k=e([n$e("esri.renderers.visualVariables.VisualVariableFactory")],h$1k);var f$1k=h$1k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1P={base:d$1f,key:"type",typeMap:{opacity:a$1T,color:l$1v,rotation:a$1U,size:j$D}},m$1n=l=>{let u=class extends l{constructor(){super(...arguments),this._vvFactory=new f$1k;}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables);}readVisualVariables(r,a,s){return this._vvFactory.readVariables(r,a,s)}writeVisualVariables(r,a,s,i){a[s]=this._vvFactory.writeVariables(r,i);}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return !1;for(const r of this.visualVariables)if(r.arcadeRequired)return !0;return !1}hasVisualVariables(r,a){return r?!!this.getVisualVariablesForType(r,a):!!(this.getVisualVariablesForType("size",a)||this.getVisualVariablesForType("color",a)||this.getVisualVariablesForType("opacity",a)||this.getVisualVariablesForType("rotation",a))}getVisualVariablesForType(r,a){const s=this.visualVariables;if(!s)return;const i=s.filter(s=>s.type===r&&("string"==typeof a?s.target===a:!1!==a||!s.target));return i&&0===i.length?void 0:i}async collectVVRequiredFields(r,a){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const i of s)i&&(i.field&&h$s(r,a,i.field),i.normalizationField&&h$s(r,a,i.normalizationField),i.valueExpression&&await N$4(r,a,i.valueExpression));}};return e([y$5({types:[n$1P],value:null,json:{write:!0}})],u.prototype,"visualVariables",null),e([e$l("visualVariables",["visualVariables","rotationType","rotationExpression"])],u.prototype,"readVisualVariables",null),e([o$r("visualVariables")],u.prototype,"writeVisualVariables",null),u=e([n$e("esri.renderers.mixins.VisualVariablesMixin")],u),u};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$1V;let p$27=a$1V=class extends a$h{constructor(s){super(s),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null;}clone(){return new a$1V({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const s=JSON.stringify(this.symbol);return `${this.minValue}.${this.maxValue}.${s}`}};e([y$5({type:String,json:{write:!0}})],p$27.prototype,"description",void 0),e([y$5({type:String,json:{write:!0}})],p$27.prototype,"label",void 0),e([y$5({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],p$27.prototype,"minValue",void 0),e([y$5({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],p$27.prototype,"maxValue",void 0),e([y$5({types:h$D,json:{origins:{"web-scene":{types:F$7,write:w$8}},write:w$8}})],p$27.prototype,"symbol",void 0),p$27=a$1V=e([n$e("esri.renderers.support.ClassBreakInfo")],p$27);var u$1K=p$27;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$18={types:h$D,json:{write:{writer:w$8},origins:{"web-scene":{types:F$7,write:{writer:w$8}}}}},l$1A={types:{base:a$L,key:"type",typeMap:{"simple-fill":L$8.typeMap["simple-fill"],"picture-fill":L$8.typeMap["picture-fill"],"polygon-3d":L$8.typeMap["polygon-3d"]}},json:{write:{writer:w$8},origins:{"web-scene":{type:h$A,write:{writer:w$8}}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var V$a;const z$h=n$7.getLogger("esri.renderers.ClassBreaksRenderer"),w$A=new t$q({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),E$k=d$2(u$1K);let T$l=V$a=class extends(m$1n(a$1R)){constructor(e){super(e),this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[]);}get _cache(){return {compiledFunc:null}}readClassBreakInfos(e,s,t){if(!Array.isArray(e))return;let o=s.minValue;return e.map(e=>{const s=new u$1K;return s.read(e,t),null==s.minValue&&(s.minValue=o),null==s.maxValue&&(s.maxValue=s.minValue),o=s.maxValue,s})}writeClassBreakInfos(e,s,t,o){const r=e.map(e=>e.write({},o));this._areClassBreaksConsecutive()&&r.forEach(e=>delete e.classMinValue),s[t]=r;}castField(e){return null==e?e:"function"==typeof e?(z$h.error(".field: field must be a string value"),null):u$5(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const s=!!this.normalizationField,t=null!=this.normalizationTotal;return s||t?(e=(s?"field":t&&"percent-of-total")||null,s&&t&&z$h.warn("warning: both normalizationField and normalizationTotal are set!")):"field"!==e&&"percent-of-total"!==e||(e=null),e}set normalizationType(e){this._set("normalizationType",e);}addClassBreakInfo(e,t,o){let r=null;r="number"==typeof e?new u$1K({minValue:e,maxValue:t,symbol:T$9(o)}):E$k(s$4(e)),this.classBreakInfos.push(r),1===this.classBreakInfos.length&&this.notifyChange("minValue");}removeClassBreakInfo(e,s){const t=this.classBreakInfos.length;for(let o=0;o<t;o++){const t=[this.classBreakInfos[o].minValue,this.classBreakInfos[o].maxValue];if(t[0]===e&&t[1]===s){this.classBreakInfos.splice(o,1);break}}}getBreakIndex(e,s){return this.valueExpression&&(t$6(s)||t$6(s.arcade))&&z$h.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,s):this._getBreakIndexForField(e)}async getClassBreakInfo(e,s){let o=s;this.valueExpression&&(t$6(s)||t$6(s.arcade))&&(o={...o,arcade:await s$y()});const r=this.getBreakIndex(e,o);return -1!==r?this.classBreakInfos[r]:null}getSymbol(e,s){if(this.valueExpression&&(t$6(s)||t$6(s.arcade)))return void z$h.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const o=this.getBreakIndex(e,s);return o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol}async getSymbolAsync(e,s){let o=s;this.valueExpression&&(t$6(s)||t$6(s.arcade))&&(o={...o,arcade:await s$y()});const r=this.getBreakIndex(e,o);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(s=>{s.symbol&&e.push(s.symbol);}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,s)=>e+s.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),s=JSON.stringify(this.defaultSymbol),t=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return `${e}.${s}.${this.classBreakInfos.reduce((e,s)=>e+s.getMeshHash(),"")}.${t}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new V$a({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:s$4(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:s$4(this.visualVariables),legendOptions:s$4(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,s){const t=[this.collectVVRequiredFields(e,s),this.collectSymbolFields(e,s)];await p$9(t);}async collectSymbolFields(e,s){const t=[...this.getSymbols().map(t=>t.collectRequiredFields(e,s)),N$4(e,s,this.valueExpression)];h$s(e,s,this.field),h$s(e,s,this.normalizationField),await p$9(t);}_getBreakIndexForExpression(e,s){const{viewingMode:t,scale:a,spatialReference:i,arcade:l}=c$3(s,{});let n=this._cache.compiledFunc;const u=f$3(l).arcadeUtils;if(!n){const e=u.createSyntaxTree(this.valueExpression);n=u.createFunction(e),this._cache.compiledFunc=n;}const c=u.executeFunction(n,u.createExecContext(e,u.getViewInfo({viewingMode:t,scale:a,spatialReference:i})));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const s=this.field,t=e.attributes,o=this.normalizationType;let r=parseFloat(t[s]);if(o){const e=this.normalizationTotal,s=parseFloat(t[this.normalizationField]);if("log"===o)r=Math.log(r)*Math.LOG10E;else if("percent-of-total"!==o||isNaN(e)){if("field"===o&&!isNaN(s)){if(isNaN(r)||isNaN(s))return -1;r/=s;}}else r=r/e*100;}return this._getBreakIndexfromInfos(r)}_getBreakIndexfromInfos(e){const s=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let t=0;t<this.classBreakInfos.length;t++){const o=[this.classBreakInfos[t].minValue,this.classBreakInfos[t].maxValue];if(o[0]<=e&&(s?e<=o[1]:e<o[1]))return t}return -1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,s=e.length;for(let t=1;t<s;t++)if(e[t-1].maxValue!==e[t].minValue)return !1;return !0}};e([y$5({readOnly:!0,dependsOn:["valueExpression"]})],T$l.prototype,"_cache",null),e([y$5(l$1A)],T$l.prototype,"backgroundFillSymbol",void 0),e([y$5({type:[u$1K]})],T$l.prototype,"classBreakInfos",void 0),e([e$l("classBreakInfos")],T$l.prototype,"readClassBreakInfos",null),e([o$r("classBreakInfos")],T$l.prototype,"writeClassBreakInfos",null),e([y$5({type:String,json:{write:!0}})],T$l.prototype,"defaultLabel",void 0),e([y$5(r$18)],T$l.prototype,"defaultSymbol",void 0),e([y$5({type:String,json:{write:!0}})],T$l.prototype,"field",void 0),e([i$b("field")],T$l.prototype,"castField",null),e([y$5({type:Boolean})],T$l.prototype,"isMaxInclusive",void 0),e([y$5({type:i$1Z,json:{write:!0}})],T$l.prototype,"legendOptions",void 0),e([y$5({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],T$l.prototype,"minValue",null),e([y$5({type:String,json:{write:!0}})],T$l.prototype,"normalizationField",void 0),e([y$5({type:Number,cast:e=>a$6(e),json:{write:!0}})],T$l.prototype,"normalizationTotal",void 0),e([y$5({type:w$A.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:w$A.jsonValues,read:w$A.read,write:w$A.write}})],T$l.prototype,"normalizationType",null),e([e$A({classBreaks:"class-breaks"})],T$l.prototype,"type",void 0),e([y$5({type:String,json:{write:!0}})],T$l.prototype,"valueExpression",void 0),e([y$5({type:String,json:{write:!0}})],T$l.prototype,"valueExpressionTitle",void 0),T$l=V$a=e([n$e("esri.renderers.ClassBreaksRenderer")],T$l);var _$u=T$l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const f$1l=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function i$26(t){return t instanceof h$c}function c$2b(t){return t instanceof L$2?Object.keys(t.items):i$26(t)?e$9(t).keys():t?Object.keys(t):[]}function u$1L(t,e){return t instanceof L$2?t.items[e]:t[e]}function l$1B(t){return t?t.declaredClass:null}function s$1q(t,n){const o=t.diff;if(o&&"function"==typeof o)return o(t,n);const r=c$2b(t),p=c$2b(n);if(0===r.length&&0===p.length)return;if(!r.length||!p.length||function(t,e){return !(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,n))return {type:"complete",oldValue:t,newValue:n};const a=p.filter(t=>-1===r.indexOf(t)),y=r.filter(t=>-1===p.indexOf(t)),m=r.filter(e=>p.indexOf(e)>-1&&u$1L(t,e)!==u$1L(n,e)).concat(a,y).sort(),d=l$1B(t);if(d&&f$1l.indexOf(d)>-1&&m.length)return {type:"complete",oldValue:t,newValue:n};let b;const h=i$26(t)&&i$26(n);for(const r of m){const f=u$1L(t,r),i=u$1L(n,r);let c;(h||"function"!=typeof f&&"function"!=typeof i)&&(f!==i&&(null==f&&null==i||(c=o&&o[r]&&"function"==typeof o[r]?o[r](f,i):"object"==typeof f&&"object"==typeof i&&l$1B(f)===l$1B(i)?s$1q(f,i):{type:"complete",oldValue:f,newValue:i},u$4(c)&&(u$4(b)?b.diff[r]=c:b={type:"partial",diff:{[r]:c}}))));}return b}function p$28(e,n){if(t$6(e))return !1;const o=n.split(".");let r=e;for(const t of o){if("complete"===r.type)return !0;if("partial"!==r.type)return !1;{const e=r.diff[t];if(!e)return !1;r=e;}}return !0}function a$1W(t,e){for(const n of e)if(p$28(t,n))return !0;return !1}function y$W(t,e){if("function"!=typeof t&&"function"!=typeof e&&(t||e))return !t||!e||"object"==typeof t&&"object"==typeof e&&l$1B(t)!==l$1B(e)?{type:"complete",oldValue:t,newValue:e}:s$1q(t,e)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$1C;let n$1Q=l$1C=class extends a$h{constructor(s){super(s),this.description=null,this.label=null,this.symbol=null,this.value=null;}clone(){return new l$1C({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const s=JSON.stringify(this.symbol&&this.symbol.toJSON());return `${this.value}.${s}`}};e([y$5({type:String,json:{write:!0}})],n$1Q.prototype,"description",void 0),e([y$5({type:String,json:{write:!0}})],n$1Q.prototype,"label",void 0),e([y$5({types:h$D,json:{origins:{"web-scene":{types:F$7,write:w$8}},write:w$8}})],n$1Q.prototype,"symbol",void 0),e([y$5({type:String,json:{write:!0}})],n$1Q.prototype,"value",void 0),n$1Q=l$1C=e([n$e("esri.renderers.support.UniqueValueInfo")],n$1Q);var c$2c=n$1Q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function a$1X(a){return a=a||e$1.location.hostname,e$1r.some(c=>{var t;return null!=(null==(t=a)?void 0:t.match(c))})}function t$1i(a,t){return a&&(t=t||e$1.location.hostname)?null!=t.match(r$19)||null!=t.match(m$1o)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(n$1R)||null!=t.match(s$1r)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a:a}const r$19=/^devext.arcgis.com$/,n$1R=/^qaext.arcgis.com$/,m$1o=/^[\w-]*\.mapsdevext.arcgis.com$/,s$1r=/^[\w-]*\.mapsqa.arcgis.com$/,e$1r=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,r$19,n$1R,/^jsapps.esri.com$/,m$1o,s$1r];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$1s(e,o){return !!s(`enable-feature:${e}/${o}`)}const o$1p=()=>e$1s("jschmid","force-wosr");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const d$1h={};function g$R(t,r,o){const s=r.portal||C$2.getDefault();let n;const l=`${s.url} - ${s.user&&s.user.username} - ${t}`;return d$1h[l]||(d$1h[l]=function(t,r,o){return r.load(o).then(()=>{const e=new c$w({disableExtraQuery:!0,query:`owner:${E$l} AND type:${R$g} AND typekeywords:"${t}"`});return r.queryItems(e,o)}).then(({results:r})=>{let s=null;const n=t.toLowerCase();if(r&&Array.isArray(r))for(const e of r){if(e.typeKeywords.some(e=>e.toLowerCase()===n)&&e.type===R$g&&e.owner===E$l){s=e;break}}if(!s)throw new s$g("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return s.load(o)})}(t,s,o).then(e=>(n=e,e.fetchData())).then(e=>({data:e,baseUrl:n.itemUrl,styleName:t}))),d$1h[l]}function j$E(t,o,s){return t.styleUrl?function(e,t){return $$8(e,t).then(t=>({data:t.data,baseUrl:ut(e),styleUrl:e}))}(t.styleUrl,s):t.styleName?g$R(t.styleName,o,s):B$2(new s$g("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function w$B(t,s,l,a){return t.name?t.styleName&&"Esri2DPointSymbolsStyle"===t.styleName?function(e,t,s){const n=k$n.replace(/\{SymbolName\}/gi,e.name);return $$8(n,s).then(e=>{const s=N$f(e.data);return D$5(s,{portal:t.portal,url:C(ut(n)),origin:"portal-item"})})}(t,s,a):j$E(t,s,a).then(e=>U$e(e,t.name,s,l,a)):B$2(new s$g("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function U$e(t,l,i,m,d){const g=t.data,j={portal:i.portal,url:C(t.baseUrl),origin:"portal-item"},w=l$9(g.items,e=>e.name===l);if(!w){return B$2(new s$g("symbolstyleutils:symbol-name-not-found",`The symbol name '${l}' could not be found`,{symbolName:l}))}let U=n$J(function(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!o$1p())for(const t of e.formatInfos)if("gltf"===t.type)return t.href;return e.webRef}(w,m),j),S=w.thumbnail&&w.thumbnail.href;const E=w.thumbnail&&w.thumbnail.imageData;a$1X()&&(U=t$1i(U),S=t$1i(S));const R={portal:i.portal,url:C(ut(U)),origin:"portal-item"};return $$8(U,d).then(e=>{const r="cimRef"===m?N$f(e.data):e.data,o=D$5(r,R);if(o&&x$d(o)){if(S){const e=n$J(S,j);o.thumbnail=new c$12({url:e});}else E&&(o.thumbnail=new c$12({url:"data:image/png;base64,"+E}));t.styleUrl?o.styleOrigin=new l$I({portal:i.portal,styleUrl:t.styleUrl,name:l}):t.styleName&&(o.styleOrigin=new l$I({portal:i.portal,styleName:t.styleName,name:l}));}return o})}function N$f(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function S$q(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&"Esri Style"!==t)return t}function $$8(e,r){const o={responseType:"json",query:{f:"json"},...r};return j$3(Q(e),o)}const E$l="esri_en",R$g="Style",k$n="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";

var styleUtils = /*#__PURE__*/Object.freeze({
    __proto__: null,
    fetchStyle: j$E,
    fetchSymbolFromStyle: U$e,
    resolveWebStyleSymbol: w$B,
    styleNameFromItem: S$q
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var N$g;const R$h=n$7.getLogger("esri.renderers.UniqueValueRenderer"),k$o=d$2(c$2c);let P$h=N$g=class extends(m$1n(a$1R)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return {type:"complete",oldValue:e,newValue:t};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const o=l$9(e,e=>e.value===t[s].value);o?y$W(o,t[s])?(i.changed.push({type:"complete",oldValue:o,newValue:t[s]}),r=!0):i.unchanged.push({oldValue:o,newValue:t[s]}):(i.added.push(t[s]),r=!0);}for(let s=0;s<e.length;s++){l$9(t,t=>t.value===e[s].value)||(i.removed.push(e[s]),r=!0);}return r?i:void 0}},this._set("uniqueValueInfos",[]);}get _cache(){return {compiledFunc:null}}castField(e){return null==e||"function"==typeof e?e:u$5(e)}writeField(e,t,r,i){"string"==typeof e?t[r]=e:i&&i.messages?i.messages.push(new s$g("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):R$h.error(".field: cannot write field to JSON since it's not a string value");}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e);}readPortal(e,t,r){return r.portal||C$2.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=n$J(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=i$17(e.styleUrl,i));}set uniqueValueInfos(e){this.styleOrigin?R$h.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap());}addUniqueValueInfo(e,t){if(this.styleOrigin)return void R$h.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?k$o(e):new c$2c({value:e,symbol:T$9(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r;}removeUniqueValueInfo(e){if(this.styleOrigin)R$h.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++){if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t$6(t)||t$6(t.arcade))&&(r={...r,arcade:await s$y()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t$6(t)||t$6(t.arcade)))return void R$h.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;this.valueExpression&&(t$6(r)||t$6(r.arcade))&&(r={...r,arcade:await s$y()});const s=this._getUniqueValueInfo(e,r);return s&&s.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return `${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new N$g({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:s$4(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:s$4(this.visualVariables),legendOptions:s$4(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:s$4(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const r=s$4(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(s$4(this.styleOrigin))),Object.freeze(r)),e._set("uniqueValueInfos",r),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await p$9(r);}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),N$4(e,t,this.valueExpression)];h$s(e,t,this.field),h$s(e,t,this.field2),h$s(e,t,this.field3),await p$9(r);}populateFromStyle(){return j$E(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new h$C({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new c$2c({value:r.name,symbol:i});t.push(s),this._valueInfoMap[r.name]=s;}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e);}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:l,arcade:n}=c$3(t,{});let a=this._cache.compiledFunc;const u=f$3(n).arcadeUtils;if(!a){const e=u.createSyntaxTree(this.valueExpression);a=u.createFunction(e),this._cache.compiledFunc=a;}const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:l})));return this._valueInfoMap[p+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if("function"!=typeof t&&this.field2){const e=this.field2,s=this.field3,o=[];t&&o.push(r[t]),e&&o.push(r[e]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"");}else "function"==typeof t?i=t(e):t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new N$g(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||C$2.getDefault());const i=r.populateFromStyle();return i.catch(t=>{R$h.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t);}),i}static fromStyleUrl(e,t){const r=new N$g(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(t=>{R$h.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t);}),i}};e([y$5({readOnly:!0,dependsOn:["valueExpression"]})],P$h.prototype,"_cache",null),e([e$A({uniqueValue:"unique-value"})],P$h.prototype,"type",void 0),e([y$5(l$1A)],P$h.prototype,"backgroundFillSymbol",void 0),e([y$5({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],P$h.prototype,"field",void 0),e([i$b("field")],P$h.prototype,"castField",null),e([o$r("field")],P$h.prototype,"writeField",null),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"field2",void 0),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"field3",void 0),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"valueExpression",void 0),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"valueExpressionTitle",void 0),e([y$5({type:i$1Z,json:{write:!0}})],P$h.prototype,"legendOptions",void 0),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"defaultLabel",void 0),e([y$5(n$5({...r$18},{json:{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return {enabled:!this._isDefaultSymbolDerived}}}}}}}))],P$h.prototype,"defaultSymbol",null),e([y$5({type:String,json:{write:!0}})],P$h.prototype,"fieldDelimiter",void 0),e([y$5({type:C$2,readOnly:!0})],P$h.prototype,"portal",void 0),e([e$l("portal",["styleName"])],P$h.prototype,"readPortal",null),e([y$5({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],P$h.prototype,"styleOrigin",void 0),e([e$l("styleOrigin",["styleName","styleUrl"])],P$h.prototype,"readStyleOrigin",null),e([o$r("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],P$h.prototype,"writeStyleOrigin",null),e([y$5({type:[c$2c],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],P$h.prototype,"uniqueValueInfos",null),P$h=N$g=e([n$e("esri.renderers.UniqueValueRenderer")],P$h);var $$9=P$h;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const i$27=-3;class h$1l{constructor(t,e,s){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0);}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0;}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this);}put(t,e,s,i=0){this._storage.put(this._namespace+t,e,s,i);}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this._namespace+t,e,s);}clear(){this._storage.clear(this._namespace);}clearAll(){this._storage.clearAll();}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats();}}class r$1a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=[],this._users=new i$l;}register(t){this._users.push(t);}deregister(t){this._users.removeUnordered(t);}registerRemoveFunc(t,e){this._removeFuncs.push([t,e]);}deregisterRemoveFunc(t){this._removeFuncs=this._removeFuncs.filter(e=>e[0]!==t);}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit();}put(t,e,s,i){const h=this._db.get(t);if(h&&(this._size-=h.size,this._db.delete(t),h.entry!==e&&this._notifyRemoved(t,h.entry)),s>this._maxSize)return void this._notifyRemoved(t,e);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const r=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:s,lifetime:r,lives:r}),this._size+=s,this._checkSizeLimit();}updateSize(t,e,s){const i=this._db.get(t);i&&i.entry===e&&(this._size-=i.size,s>this._maxSize?this._notifyRemoved(t,e):(i.size=s,this._size+=s,this._checkSizeLimit()));}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss;}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss;}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},s={},i=new Array;this._db.forEach((e,h)=>{const r=e.lifetime;i[r]=(i[r]||0)+e.size,this._users.forEachSimple(i=>{const r=i.namespace;if(u$2(h,r)){const t=s[r]||0;s[r]=t+e.size;}});});const h={};this._users.forEachSimple(t=>{const e=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=s[e]||0;s[e]=i,h[e]=Math.round(100*t.hitRate)+"%";}else h[e]="0%";});const r=Object.keys(s);r.forEach(t=>s[t]=s[t]/this._size*100),r.sort((t,e)=>s[e]-s[t]),r.forEach(t=>e[t]=Math.round(s[t])+"% / "+h[t]);for(let t=i.length-1;t>=0;--t){const s=i[t];s&&(e["Priority "+(t+-3-1)]=Math.round(s/this.size*100)+"%");}return e}resetStats(){this._hit=this._miss=0,this._users.forEachSimple(t=>t.resetHitRate());}clear(e){this._db.forEach((s,i)=>{u$2(i,e)&&(this._size-=s.size,this._db.delete(i),this._notifyRemoved(i,s.entry));});}clearAll(){this._db.forEach((t,e)=>this._notifyRemoved(e,t.entry)),this._size=0,this._db.clear();}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemoved(e,s){this._removeFuncs.forEach(i=>{u$2(e,i[0])&&i[1](s);});}_checkSizeLimit(){this._size<=this._maxSize||t$U(this._db,(t,e)=>(this._db.delete(e),t.lives<=1?(this._size-=t.size,this._notifyRemoved(e,t.entry)):(--t.lives,this._db.set(e,t)),this._size<=.9*this.maxSize));}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class e$1t{constructor(e,r){this._storage=new r$1a,this._storage.maxSize=e,r&&this._storage.registerRemoveFunc("",r);}put(t,e,r){this._storage.put(t,e,r,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.clearAll();}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t;}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var v$D;const S$r=n$7.getLogger("esri.renderers.DictionaryRenderer");let w$C=v$D=class extends(m$1n(a$1R)){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new e$1t(100),this.config=null,this.description=null,this.fieldMap=null,this.label=null,this.scaleExpression=null,this.url=null,this.type="dictionary";}clone(){return new v$D({config:s$4(this.config),scaleExpression:s$4(this.scaleExpression),description:s$4(this.description),fieldMap:s$4(this.fieldMap),label:s$4(this.label),url:s$4(this.url),visualVariables:s$4(this.visualVariables)})}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise;}catch(e){if(L$1(e))return this._dictionaryPromise=null,null}const i={};for(const t of this._symbolAttributes){const s=this.fieldMap[t];if(s&&null!==e.attributes[s]&&void 0!==e.attributes[s]){const r=""+e.attributes[s];i[t]=r;}else i[t]="";}const o=r(i,t);if(!o||"string"!=typeof o)return null;const n=u$3(o).toString(),a=this._symbolCache.get(n);if(a)return a.catch(()=>{this._symbolCache.pop(n);}),a;const c=o.split(";"),p=[],m=[];for(const e of c)if(e&&0!==e.length)if(-1===e.indexOf("po:"))if(-1!==e.indexOf("|"))for(const t of e.split("|"))this._itemNames.has(t)&&p.push(t);else this._itemNames.has(e)&&p.push(e);else {const t=e.substr(3).split("|");if(3===t.length){const e=t[0],s=t[1];let r=t[2];if("DashTemplate"===s)r=r.split(" ").map(e=>Number(e));else if("Color"===s){const e=new o$H(r).toRgba();r=[e[0],e[1],e[2],255*e[3]];}else r=Number(r);m.push({primitiveName:e,propertyName:s,value:r});}}const u=this._cimPartsToCIMSymbol(p,m,t);return this._symbolCache.put(n,u,1),u}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await N$4(e,t,this.scaleExpression);const s=t.map(e=>e.name);for(const t in this.fieldMap)s.indexOf(this.fieldMap[t])<0||e.add(this.fieldMap[t]);}get arcadeRequired(){return !0}async fetchResources(e){if(!this.url)return void S$r.error("no valid URL!");const t=u$4(e)?e.abortOptions:null,s=j$3(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...t}),[{data:i}]=await p$9([s,s$y()]);if(!i)throw new s$g("esri.renderers.DictionaryRenderer","Bad dictionary data!");const o=i.expression,n=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=u$v(i.itemsNames),this._symbolAttributes=n.symbol;const l={};if(this.config){const e=this.config;for(const t in e)l[t]=e[t];}for(const e of n.configuration)l.hasOwnProperty(e.name)||(l[e.name]=e.value);const p=[];if(u$4(e)&&e.fields)for(const t of this._symbolAttributes){const s=this.fieldMap[t],r=e.fields.filter(e=>e.name===s);r.length>0&&p.push({...r[0],name:t});}const y=await o$K(o,u$4(e)?e.spatialReference:null,p,l),d={scale:0};return (e,t)=>{const s=y.repurposeFeature({geometry:null,attributes:e});return d.scale=u$4(t)?t.scale:void 0,y.evaluate({$feature:s,$view:d})}}getSymbol(){return null}getSymbols(){return []}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return `${this.url}-${JSON.stringify(this.fieldMap)}`}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(e=>e.data);const s=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),r=j$3(s,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,r);try{return (await r).data}catch(t){return this._ongoingRequests.delete(e),B$2(t)}}_combineSymbolParts(e,t){if(!e||0===e.length)return null;if(1===e.length)return {type:"CIMSymbolReference",symbol:e[0],primitiveOverrides:t};const s={...e[0]};s.symbolLayers=[];for(const t of e){const e=t;s.symbolLayers.unshift(...e.symbolLayers);}return {type:"CIMSymbolReference",symbol:s,primitiveOverrides:t}}async _cimPartsToCIMSymbol(e,t,s){const r=new Array(e.length);for(let t=0;t<e.length;t++)r[t]=this._getSymbolPart(e[t],s);const i=await p$9(r);return new d$s({data:this._combineSymbolParts(i,t)})}};e([y$5({type:Object,json:{write:!0}})],w$C.prototype,"config",void 0),e([y$5({type:String,json:{write:!0}})],w$C.prototype,"description",void 0),e([y$5({type:Object,json:{write:!0}})],w$C.prototype,"fieldMap",void 0),e([y$5({type:String,json:{write:!0}})],w$C.prototype,"label",void 0),e([y$5({type:String,json:{write:!0}})],w$C.prototype,"scaleExpression",void 0),e([y$5({type:String,json:{write:!0}})],w$C.prototype,"url",void 0),w$C=v$D=e([n$e("esri.renderers.DictionaryRenderer")],w$C);var R$i=w$C;

var DictionaryRenderer = /*#__PURE__*/Object.freeze({
    __proto__: null,
    'default': R$i
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var u$1M;const n$1S=n$7.getLogger("esri.renderers.support.AttributeColorInfo");let c$2d=u$1M=class extends a$h{constructor(r){super(r),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null;}castField(r){return null==r?r:"function"==typeof r?(n$1S.error(".field: field must be a string value"),null):u$5(r)}getAttributeHash(){return `${this.field}-${this.valueExpression}`}clone(){return new u$1M({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e([y$5({type:o$H,json:{type:[Number],write:!0}})],c$2d.prototype,"color",void 0),e([y$5({type:String,json:{write:!0}})],c$2d.prototype,"field",void 0),e([i$b("field")],c$2d.prototype,"castField",null),e([y$5({type:String,json:{write:!0}})],c$2d.prototype,"label",void 0),e([y$5({type:String,json:{write:!0}})],c$2d.prototype,"valueExpression",void 0),e([y$5({type:String,json:{write:!0}})],c$2d.prototype,"valueExpressionTitle",void 0),c$2d=u$1M=e([n$e("esri.renderers.support.AttributeColorInfo")],c$2d);var a$1Y=c$2d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var e$1u;let p$29=e$1u=class extends a$h{constructor(){super(...arguments),this.unit=null;}clone(){return new e$1u({unit:this.unit})}};e([y$5({type:String,json:{write:!0}})],p$29.prototype,"unit",void 0),p$29=e$1u=e([n$e("esri.renderers.support.DotDensityLegendOptions")],p$29);var i$28=p$29;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var m$1p;let y$X=m$1p=class extends(m$1n(a$1R)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new o$H([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new d$t,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density";}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new u$P({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return [this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new m$1p({attributes:s$4(this.attributes),backgroundColor:s$4(this.backgroundColor),dotBlendingEnabled:s$4(this.dotBlendingEnabled),dotShape:s$4(this.dotShape),dotSize:s$4(this.dotSize),dotValue:s$4(this.dotValue),legendOptions:s$4(this.legendOptions),outline:s$4(this.outline),referenceScale:s$4(this.referenceScale),visualVariables:s$4(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return `${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const o of this.attributes)o.valueExpression&&await N$4(e,t,o.valueExpression),o.field&&e.add(o.field);}};e([y$5({type:[a$1Y],json:{write:!0}})],y$X.prototype,"attributes",void 0),e([y$5({type:o$H,json:{write:!0}})],y$X.prototype,"backgroundColor",void 0),e([y$5({type:Boolean}),o$M("dotBlendingEnabled")],y$X.prototype,"blendDots",void 0),e([y$5({type:Boolean,json:{write:!0}})],y$X.prototype,"dotBlendingEnabled",void 0),e([y$5({type:String,json:{write:!0}})],y$X.prototype,"dotShape",void 0),e([y$5({type:Number,json:{write:!0}})],y$X.prototype,"dotSize",void 0),e([y$5({type:i$28,json:{write:!0}})],y$X.prototype,"legendOptions",void 0),e([y$5({type:d$t,json:{default:null,write:!0}})],y$X.prototype,"outline",void 0),e([y$5({type:Number,json:{write:!0}})],y$X.prototype,"dotValue",void 0),e([y$5({type:Number}),o$M("dotValue")],y$X.prototype,"referenceDotValue",void 0),e([y$5({type:Number,json:{write:!0}})],y$X.prototype,"referenceScale",void 0),e([y$5({type:Number,json:{write:!0}})],y$X.prototype,"seed",void 0),e([e$A({dotDensity:"dot-density"})],y$X.prototype,"type",void 0),y$X=m$1p=e([n$e("esri.renderers.DotDensityRenderer")],y$X);var b$B=y$X;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$2a;let i$29=p$2a=class extends a$h{constructor(r){super(r),this.color=null,this.ratio=null;}clone(){return new p$2a({color:this.color,ratio:this.ratio})}};e([y$5({type:o$H,json:{write:!0}})],i$29.prototype,"color",void 0),e([y$5({type:Number,json:{write:!0}})],i$29.prototype,"ratio",void 0),i$29=p$2a=e([n$e("esri.renderers.support.HeatmapColorStop")],i$29);var c$2e=i$29;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var a$1Z;let m$1q=a$1Z=class extends a$1R{constructor(t){super(t),this.blurRadius=10,this.colorStops=[new c$2e({ratio:0,color:new o$H("rgba(255, 140, 0, 0)")}),new c$2e({ratio:.75,color:new o$H("rgba(255, 140, 0, 1)")}),new c$2e({ratio:.9,color:new o$H("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap";}async collectRequiredFields(t,r){const e=this.field;e&&"string"==typeof e&&h$s(t,r,e);}getAttributeHash(){return null}getMeshHash(){return `${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new a$1Z({blurRadius:this.blurRadius,colorStops:s$4(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};e([y$5({type:Number,json:{write:!0}})],m$1q.prototype,"blurRadius",void 0),e([y$5({type:[c$2e],json:{write:!0}})],m$1q.prototype,"colorStops",void 0),e([y$5({type:String,json:{write:!0}})],m$1q.prototype,"field",void 0),e([y$5({type:Number,json:{write:{overridePolicy:(t,r,e)=>({enabled:null==e})}}})],m$1q.prototype,"fieldOffset",void 0),e([y$5({type:Number,json:{write:!0}})],m$1q.prototype,"maxPixelIntensity",void 0),e([y$5({type:Number,json:{write:!0}})],m$1q.prototype,"minPixelIntensity",void 0),e([e$A({heatmap:"heatmap"})],m$1q.prototype,"type",void 0),m$1q=a$1Z=e([n$e("esri.renderers.HeatmapRenderer")],m$1q);var c$2f=m$1q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$2g;let m$1r=c$2g=class extends(m$1n(a$1R)){constructor(r){super(r),this.description=null,this.label=null,this.symbol=null,this.type="simple";}async collectRequiredFields(r,s){await p$9([this.collectSymbolFields(r,s),this.collectVVRequiredFields(r,s)]);}async collectSymbolFields(r,s){await p$9(this.getSymbols().map(e=>e.collectRequiredFields(r,s)));}getSymbol(r,s){return this.symbol}async getSymbolAsync(r,s){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((r,s)=>r+s.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((r,s)=>r+JSON.stringify(s),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new c$2g({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:s$4(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};e([y$5({type:String,json:{write:!0}})],m$1r.prototype,"description",void 0),e([y$5({type:String,json:{write:!0}})],m$1r.prototype,"label",void 0),e([y$5(r$18)],m$1r.prototype,"symbol",void 0),e([e$A({simple:"simple"})],m$1r.prototype,"type",void 0),m$1r=c$2g=e([n$e("esri.renderers.SimpleRenderer")],m$1r);var n$1T=m$1r;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$1s={key:"type",base:a$1R,typeMap:{heatmap:c$2f,simple:n$1T,"unique-value":$$9,"class-breaks":_$u,"dot-density":b$B,dictionary:R$i},errorContext:"renderer"},n$1U={key:"type",base:a$1R,typeMap:{simple:n$1T,"unique-value":$$9,"class-breaks":_$u},errorContext:"renderer"};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function u$1N(n,t,o,u){const i=function(r,n){if(!r)return null;if(!function(r,n){if(!n||"web-scene"!==n.origin)return !0;switch(r.type){case"simple":case"unique-value":case"class-breaks":return !0;case"heatmap":case"dictionary":case"dot-density":return !1;default:return r$6(r),!1}}(r,n))return n.messages&&n.messages.push(new s$g("renderer:unsupported",`Renderer of type '${r.declaredClass}' are not supported in scenes.`,{renderer:r,context:n})),null;return r.write({},n)}(n,u);i&&o$5(o,i,t);}function i$2a(e,r){return a$1_(e,null,r)}const c$2h=u$8({types:m$1s});function a$1_(e,r,t){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(t&&t.messages&&t.messages.push(new t$8("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:t})),null):c$2h(e,r,t):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$1j(t){return "date"===t.type||"esriFieldTypeDate"===t.type}function e$1v(t){return t.toLowerCase().trim()}class l$1D{constructor(s){if(this.fields=s,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],!s)return;const i=[];for(const d of s){const s=d&&d.name;if(s){const a=e$1v(s);this._fieldsMap.set(s,d),this._fieldsMap.set(a,d),i.push(a),t$1j(d)&&(this.dateFields.push(d),this._dateFieldsSet.add(d));}}i.sort(),this.uid=i.join(",");}destroy(){this._fieldsMap.clear();}has(t){return null!=this.get(t)}get(t){return null!=t?this._fieldsMap.get(t)||this._fieldsMap.get(e$1v(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}normalizeFieldName(t){const e=this.get(t);if(e)return e.name}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$1k=t=>{let s=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null;}};return e([y$5({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{default:"normal",read:!0,write:!0}}}})],s.prototype,"blendMode",void 0),e([y$5({type:String})],s.prototype,"effect",void 0),s=e([n$e("esri.layers.mixins.BlendLayer")],s),s};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$2b;let i$2b=p$2b=class extends a$h{async collectRequiredFields(r,o){return N$4(r,o,this.expression)}clone(){return new p$2b({expression:this.expression,title:this.title})}};e([y$5({type:String,json:{write:!0}})],i$2b.prototype,"expression",void 0),e([y$5({type:String,json:{write:!0}})],i$2b.prototype,"title",void 0),i$2b=p$2b=e([n$e("esri.layers.support.FeatureExpressionInfo")],i$2b);var c$2i=i$2b;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$1q=function(){const t=Object.keys(y$U);return t.sort(),t}();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$1E;const m$1t=o$B()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d$1i=new t$q({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let c$2j=l$1E=class extends a$h{constructor(){super(...arguments),this.offset=null;}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write(null,t),"0"===e.expression&&(r.featureExpression={value:0});}get mode(){return this._isOverridden("mode")?this._get("mode"):u$4(this.offset)||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e);}set unit(e){this._set("unit",e);}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new l$1E({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};e([y$5({type:c$2i,json:{write:!0}})],c$2j.prototype,"featureExpressionInfo",void 0),e([e$l("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c$2j.prototype,"readFeatureExpressionInfo",null),e([o$r("featureExpressionInfo",{featureExpressionInfo:{type:c$2i},"featureExpression.value":{type:[0]}})],c$2j.prototype,"writeFeatureExpressionInfo",null),e([y$5({type:m$1t.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:m$1t.jsonValues,read:m$1t.read,write:{writer:m$1t.write,isRequired:!0}}})],c$2j.prototype,"mode",null),e([y$5({type:Number,json:{write:!0}})],c$2j.prototype,"offset",void 0),e([y$5({type:o$1q,json:{type:String,read:d$1i.read,write:d$1i.write}})],c$2j.prototype,"unit",null),c$2j=l$1E=e([n$e("esri.layers.support.ElevationInfo")],c$2j);var h$1m=c$2j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const o$1r=o=>{let t=class extends o{constructor(){super(...arguments),this.refreshInterval=0;}refresh(){this.emit("refresh");}};return e([y$5({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=e([n$e("esri.layers.mixins.RefreshableLayer")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$1s=s=>{let t=class extends s{constructor(){super(...arguments),this.minScale=0,this.maxScale=0;}get scaleRangeId(){return `${this.minScale},${this.maxScale}`}};return e([y$5({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),e([y$5({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),e([y$5({readOnly:!0,dependsOn:["minScale","maxScale"]})],t.prototype,"scaleRangeId",null),t=e([n$e("esri.layers.mixins.ScaleRangeLayer")],t),t};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$2c;let u$1O=p$2c=class extends a$h{constructor(r){super(r),this.value=0,this.unit="milliseconds";}toMilliseconds(){return this.value*l$Z[this.unit]}clone(){return new p$2c({value:this.value,unit:this.unit})}};e([y$5({type:Number,json:{write:!0},nonNullable:!0})],u$1O.prototype,"value",void 0),e([y$5({type:i$1i.apiValues,json:{type:i$1i.jsonValues,read:i$1i.read,write:i$1i.write},nonNullable:!0})],u$1O.prototype,"unit",void 0),u$1O=p$2c=e([n$e("esri.TimeInterval")],u$1O);var l$1F=u$1O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$2c;let p$2d=i$2c=class extends a$h{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null;}readRespectsDaylightSaving(e,r){return void 0!==r.respectsDaylightSaving?r.respectsDaylightSaving:void 0!==r.respectDaylightSaving&&r.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:r}=this;return new i$2c({respectsDaylightSaving:e,timezone:r})}};e([y$5({type:Boolean,json:{write:!0}})],p$2d.prototype,"respectsDaylightSaving",void 0),e([e$l("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],p$2d.prototype,"readRespectsDaylightSaving",null),e([y$5({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],p$2d.prototype,"timezone",void 0),p$2d=i$2c=e([n$e("esri.layers.support.TimeReference")],p$2d);var a$1$=p$2d;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$2e;let d$1j=p$2e=class extends a$h{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0;}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new d$O({start:r,end:i})}writeFullTimeExtent(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null;}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new l$1F({value:t.timeInterval,unit:i$1i.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new l$1F({value:t.defaultTimeInterval,unit:i$1i.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit;}else t.timeInterval=null,t.timeIntervalUnits=null;}clone(){const{cumulative:e,endField:r,hasLiveData:i,interval:l,startField:o,timeReference:n,fullTimeExtent:a,trackIdField:s,useTime:m}=this;return new p$2e({cumulative:e,endField:r,hasLiveData:i,interval:l,startField:o,timeReference:s$4(n),fullTimeExtent:s$4(a),trackIdField:s,useTime:m})}};e([y$5({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],d$1j.prototype,"cumulative",void 0),e([y$5({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],d$1j.prototype,"endField",void 0),e([y$5({type:d$O,json:{write:{enabled:!0,allowNull:!0}}})],d$1j.prototype,"fullTimeExtent",void 0),e([e$l("fullTimeExtent",["timeExtent"])],d$1j.prototype,"readFullTimeExtent",null),e([o$r("fullTimeExtent")],d$1j.prototype,"writeFullTimeExtent",null),e([y$5({type:Boolean,json:{write:!0}})],d$1j.prototype,"hasLiveData",void 0),e([y$5({type:l$1F,json:{write:{enabled:!0,allowNull:!0}}})],d$1j.prototype,"interval",void 0),e([e$l("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],d$1j.prototype,"readInterval",null),e([o$r("interval")],d$1j.prototype,"writeInterval",null),e([y$5({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],d$1j.prototype,"startField",void 0),e([y$5({type:a$1$,json:{write:{enabled:!0,allowNull:!0}}})],d$1j.prototype,"timeReference",void 0),e([y$5({type:String,json:{write:{enabled:!0,allowNull:!0}}})],d$1j.prototype,"trackIdField",void 0),e([y$5({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],d$1j.prototype,"useTime",void 0),d$1j=p$2e=e([n$e("esri.layers.support.TimeInfo")],d$1j);var c$2k=d$1j;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1P=u=>{let c=class extends u{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0;}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const o=r.timeOffset,s=i$1i.fromJSON(r.timeOffsetUnits);return o&&s?new l$1F({value:o,unit:s}):null}set timeInfo(e){g$j(e,this.fields),this._set("timeInfo",e);}};return e([y$5({type:d$O,json:{write:!1}})],c.prototype,"timeExtent",void 0),e([y$5({type:l$1F})],c.prototype,"timeOffset",void 0),e([e$l("service","timeOffset",["timeInfo.exportOptions"])],c.prototype,"readOffset",null),e([y$5({value:null,type:c$2k,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],c.prototype,"timeInfo",null),e([y$5({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"useViewTime",void 0),c=e([n$e("esri.layers.mixins.TemporalLayer")],c),c};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let t$1l=class extends a$h{constructor(){super(...arguments),this.type=null;}};e([y$5({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t$1l.prototype,"type",void 0),t$1l=e([n$e("esri.layers.support.FeatureReduction")],t$1l);var p$2f=t$1l;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1V=new RegExp("__begin__","ig"),r$1b=new RegExp("__end__","ig"),s$1t=new RegExp("^__begin__","i"),t$1m=new RegExp("__end__$","i");function o$1s(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function i$2d(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function l$1G(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=o$1s(e.labelExpression),n.type="conventional"),n}function a$20(e){const n=l$1G(e);if(!n)return null;switch(n.type){case"conventional":return p$2g(n.expression);case"arcade":return n.expression}return null}function c$2l(e){const n=l$1G(e);if(!n)return null;switch(n.type){case"conventional":return x$v(n.expression);case"arcade":return w$D(n.expression)}return null}function p$2g(o){let i;return o?(i=o$7(o,e=>'__begin__$feature["'+e+'"]__end__'),i=s$1t.test(i)?i.replace(s$1t,""):'"'+i,i=t$1m.test(i)?i.replace(t$1m,""):i+'"',i=i.replace(n$1V,'" + ').replace(r$1b,' + "')):i='""',i}const u$1Q=/^\s*\{([^}]+)\}\s*$/i;function x$v(e){const n=e.match(u$1Q);return n&&n[1].trim()||null}const f$1m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,_$v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,g$S=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function w$D(e){if(!e)return null;let n=f$1m.exec(e)||_$v.exec(e);return n?n[1]||n[3]:(n=g$S.exec(e),n?n[2]:null)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var l$1H;let u$1R=l$1H=class extends a$h{constructor(){super(...arguments),this.value=null,this.expression=null;}readExpression(r,o){return o.value?p$2g(o.value):r}writeExpression(r,o,e){null!=this.value&&(r=p$2g(this.value)),o[e]=r;}clone(){return new l$1H({value:this.value,expression:this.expression})}};e([y$5({json:{read:!1,write:!1}})],u$1R.prototype,"value",void 0),e([y$5({type:String,json:{write:{allowNull:!0}}})],u$1R.prototype,"expression",void 0),e([e$l("expression",["expression","value"])],u$1R.prototype,"readExpression",null),e([o$r("expression")],u$1R.prototype,"writeExpression",null),u$1R=l$1H=e([n$e("esri.layers.support.LabelExpressionInfo")],u$1R);var a$21=u$1R;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const e$1w=[252,146,31,255],l$1I={type:"esriSMS",style:"esriSMSCircle",size:6,color:e$1w,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o$1t={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e$1w},S$s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t$1n={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r$1c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s$1u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y$Y={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$1S=y$p.fromJSON(l$1I),a$22=d$t.fromJSON(o$1t),y$Z=u$P.fromJSON(S$s),J$9=y$q.fromJSON(t$1n);const O$j=y$p.fromJSON(r$1c),j$F=d$t.fromJSON(s$1u),b$C=u$P.fromJSON(y$Y);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var w$E;const d$1k=new t$q({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function y$_(e){return !e||"service"!==e.origin&&!(e.layer&&"map-image"===e.layer.type)}let x$w=w$E=class extends a$h{constructor(e){super(e),this.type="label",this.name=null,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=J$9,this.useCodedValues=void 0,this.where=null;}static evaluateWhere(e,r){const t=function(e,r,t){switch(r){case"=":return e==t;case"<>":return e!=t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t}return !1};try{if(null==e)return !0;const o=e.split(" ");if(3===o.length)return t(r[o[0]],o[1],o[2]);if(7===o.length){const e=t(r[o[0]],o[1],o[2]),s=o[3],n=t(r[o[4]],o[5],o[6]);switch(s){case"AND":return e&&n;case"OR":return e||n}}return !1}catch(r){console.log("Error.: can't parse = "+e);}}readLabelExpression(e,r){const t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e}writeLabelExpression(e,r,t,o){if(this.labelExpressionInfo&&(y$_(o)||o&&"service"===o.origin))if(null!=this.labelExpressionInfo.value)e=i$2d(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const r=w$D(this.labelExpressionInfo.expression);r&&(e="["+r+"]");}null!=e&&(r[t]=e);}writeLabelExpressionInfo(e,r,t,o){if(null==e&&null!=this.labelExpression&&y$_(o))e=new a$21({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(o);s.expression&&(r[t]=s);}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e);}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e);}getLabelExpression(){return l$1G(this)}getLabelExpressionArcade(){return a$20(this)}getLabelExpressionSingleField(){return c$2l(this)}hash(){return JSON.stringify(this)}clone(){return new w$E({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:s$4(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:s$4(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e([y$5({type:String,json:{write:!0}})],x$w.prototype,"name",void 0),e([y$5({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],x$w.prototype,"deconflictionStrategy",void 0),e([y$5({type:String,json:{write:{allowNull:!0}}})],x$w.prototype,"labelExpression",void 0),e([e$l("labelExpression")],x$w.prototype,"readLabelExpression",null),e([o$r("labelExpression")],x$w.prototype,"writeLabelExpression",null),e([y$5({type:a$21,json:{write:{overridePolicy:(e,r,t)=>y$_(t)?{allowNull:!0}:{enabled:!1}}}})],x$w.prototype,"labelExpressionInfo",void 0),e([o$r("labelExpressionInfo")],x$w.prototype,"writeLabelExpressionInfo",null),e([y$5({type:d$1k.apiValues,json:{type:d$1k.jsonValues,read:d$1k.read,write:d$1k.write}})],x$w.prototype,"labelPlacement",void 0),e([y$5({type:Number})],x$w.prototype,"maxScale",void 0),e([o$r("maxScale")],x$w.prototype,"writeMaxScale",null),e([y$5({type:Number})],x$w.prototype,"minScale",void 0),e([o$r("minScale")],x$w.prototype,"writeMinScale",null),e([y$5({types:C$6,json:{origins:{"web-scene":{types:I$7,write:w$8,default:null}},write:w$8,default:null}})],x$w.prototype,"symbol",void 0),e([y$5({type:Boolean,json:{write:!0}})],x$w.prototype,"useCodedValues",void 0),e([y$5({type:String,json:{write:!0}})],x$w.prototype,"where",void 0),x$w=w$E=e([n$e("esri.layers.support.LabelClass")],x$w);var P$i=x$w;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$1v={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader(i,r){if(null!=r.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return r.screenSizePerspective;e$9(this).store.set("screenSizePerspectiveEnabled",!1,0);}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer(e,i,n,t){("defaults"===this.originOf("screenSizePerspectiveEnabled")&&e||p$f(this,"screenSizePerspectiveEnabled",{},t))&&(i[n]=e);}}}}}},a$23={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,i)=>!i.disablePopup},write:{enabled:!0,writer(e,i,r){i[r]=!e;}}}},l$1J={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},p$2h={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:m$s}}},c$2m={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},d$1l={value:null,type:h$1m,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function f$1n(e){return {type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const u$1T={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0},"portal-item":{write:!0}}}},y$$={...u$1T,json:{...u$1T.json,origins:{"web-document":{...u$1T.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,i,r)=>r&&"service"!==r.origin||!i.drawingInfo||void 0===i.drawingInfo.transparency?i.layerDefinition&&i.layerDefinition.drawingInfo&&void 0!==i.layerDefinition.drawingInfo.transparency?r$r(i.layerDefinition.drawingInfo.transparency):void 0:r$r(i.drawingInfo.transparency)}}},m$1u={type:d$O,dependsOn:["view.timeExtent","layer.timeExtent","layer.timeInfo","layer.timeOffset","layer.timeOffset.value","layer.timeOffset.unit","layer.useViewTime"],readOnly:!0,get(){var e,i;if(!(null==(e=this.layer)?void 0:e.timeInfo))return null;const r=null==(i=this.view)?void 0:i.timeExtent,n=this.layer.timeExtent,t=this.layer.useViewTime?r&&n?r.intersection(n):r||n:n;if(!t||t.isEmpty)return t;const o=this.layer.timeOffset,s=o?t.offset(-o.value,o.unit):t,a=this._get("timeExtent");return s.equals(a)?a:s}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var i$2e;let e$1x=i$2e=class extends a$h{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null;}clone(){return new i$2e({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};e([y$5({type:String,json:{write:!0}})],e$1x.prototype,"statisticType",void 0),e([y$5({type:String,json:{write:!0}})],e$1x.prototype,"onStatisticField",void 0),e([y$5({type:String,json:{write:!0}})],e$1x.prototype,"onStatisticValueExpression",void 0),e$1x=i$2e=e([n$e("esri.layers.support.OutStatistic")],e$1x);var p$2i=e$1x;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var p$2j;let i$2f=p$2j=class extends a$h{constructor(){super(...arguments),this.name=null;}clone(){return new p$2j({name:this.name,outStatistic:this.outStatistic.clone()})}};e([y$5({type:String,json:{write:!0}})],i$2f.prototype,"name",void 0),e([y$5({type:p$2i,json:{write:!0}})],i$2f.prototype,"outStatistic",void 0),i$2f=p$2j=e([n$e("esri.layers.support.AggregateField")],i$2f);var c$2n=i$2f;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var c$2o;let m$1v=c$2o=class extends a$h{constructor(e){super(e),this.type="cluster",this.clusterRadius=c$A("80px"),this.clusterMinSize=c$A("12px"),this.clusterMaxSize=c$A("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null;}clone(){return new c$2o({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:s$4(this.labelingInfo),labelsVisible:this.labelsVisible,fields:s$4(this.fields),popupEnabled:this.popupEnabled,popupTemplate:s$4(this.popupTemplate)})}};e([y$5({type:["cluster"],readOnly:!0,json:{write:!0}})],m$1v.prototype,"type",void 0),e([y$5({type:Number,cast:e=>"auto"===e?e:c$A(e),json:{write:!0}})],m$1v.prototype,"clusterRadius",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],m$1v.prototype,"clusterMinSize",void 0),e([y$5({type:Number,cast:c$A,json:{write:!0}})],m$1v.prototype,"clusterMaxSize",void 0),e([y$5(a$23)],m$1v.prototype,"popupEnabled",void 0),e([y$5({type:P$5,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],m$1v.prototype,"popupTemplate",void 0),e([y$5({type:[P$i],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],m$1v.prototype,"labelingInfo",void 0),e([y$5(l$1J)],m$1v.prototype,"labelsVisible",void 0),e([y$5({type:[c$2n],json:{write:!0}})],m$1v.prototype,"fields",void 0),m$1v=c$2o=e([n$e("esri.layers.support.FeatureReductionCluster")],m$1v);var d$1m=m$1v;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
var t$1o;let p$2k=t$1o=class extends p$2f{constructor(r){super(r),this.type="selection";}clone(){return new t$1o}};e([y$5({type:["selection"]})],p$2k.prototype,"type",void 0),p$2k=t$1o=e([n$e("esri.layers.support.FeatureReductionSelection")],p$2k);var c$2p=p$2k;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const s$1w={key:"type",base:p$2f,typeMap:{selection:c$2p}};function u$1U(e,t){const r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return c$2p.fromJSON(r);case"cluster":return d$1m.fromJSON(r)}return null}function c$2q(t,r,o,n){const s=i$2g(t,{},n);s&&o$5(o,s,r);}function i$2g(e,r,o){return e?"selection"!==e.type?(o.messages&&o.messages.push(new s$g("featureReduction:unsupported",`FeatureReduction of type '${e.declaredClass}' are not supported in scenes.`,{featureReduction:e,context:o})),null):e.write(r,o):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$24=new t$q({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let n$1W=class extends a$h{constructor(o){super(o),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null;}writeDrawingTool(o,r){r.drawingTool=a$24.toJSON(o);}writePrototype(o,t){t.prototype=p$1(s$4(o),!0);}writeThumbnail(o,t){t.thumbnail=p$1(s$4(o));}};e([y$5({json:{write:!0}})],n$1W.prototype,"name",void 0),e([y$5({json:{write:!0}})],n$1W.prototype,"description",void 0),e([y$5({json:{read:a$24.read,write:a$24.write}})],n$1W.prototype,"drawingTool",void 0),e([o$r("drawingTool")],n$1W.prototype,"writeDrawingTool",null),e([y$5({json:{write:!0}})],n$1W.prototype,"prototype",void 0),e([o$r("prototype")],n$1W.prototype,"writePrototype",null),e([y$5({json:{write:!0}})],n$1W.prototype,"thumbnail",void 0),e([o$r("thumbnail")],n$1W.prototype,"writeThumbnail",null),n$1W=e([n$e("esri.layers.support.FeatureTemplate")],n$1W);var u$1V=n$1W;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let l$1K=class extends a$h{constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null;}readDomains(o){const r={};for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];switch(t.type){case"range":r[e]=p$v.fromJSON(t);break;case"codedValue":r[e]=u$B.fromJSON(t);break;case"inherited":r[e]=i$K.fromJSON(t);}}return r}writeDomains(o,e){const t={};for(const r in o)o.hasOwnProperty(r)&&(t[r]=o[r]&&o[r].toJSON());p$1(t),e.domains=t;}readTemplates(o){return o&&o.map(o=>new u$1V(o))}writeTemplates(o,r){r.templates=o&&o.map(o=>o.toJSON());}};e([y$5({json:{write:!0}})],l$1K.prototype,"id",void 0),e([y$5({json:{write:!0}})],l$1K.prototype,"name",void 0),e([y$5({json:{write:!0}})],l$1K.prototype,"domains",void 0),e([e$l("domains")],l$1K.prototype,"readDomains",null),e([o$r("domains")],l$1K.prototype,"writeDomains",null),e([y$5({json:{write:!0}})],l$1K.prototype,"templates",void 0),e([e$l("templates")],l$1K.prototype,"readTemplates",null),e([o$r("templates")],l$1K.prototype,"writeTemplates",null),l$1K=e([n$e("esri.layers.support.FeatureType")],l$1K);var u$1W=l$1K;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$1d=["oid","global-id"],s$1x=["oid","global-id","guid"];function a$25({displayField:i,editFieldsInfo:o,fields:r,objectIdField:s,title:a},d){if(!r)return null;const p=F$j({editFieldsInfo:o,fields:r,objectIdField:s},d);if(!p.length)return null;const u=function(t){const i=v$a(t),{titleBase:o}=t;return i?`${o}: {${i.trim()}}`:o}({titleBase:a,fields:r,displayField:i}),c=[new c$G,new i$O];return new P$5({title:u,content:c,fieldInfos:p})}const d$1n=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],p$2l=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:o})=>o?o.has(e.name):!c$2r(e.name,t)&&((!i||e.name!==i)&&(!(r$1d.indexOf(e.type)>-1)&&!d$1n.some(t=>t.test(e.name))));function u$1X(e,t){return "oid"===e.type?-1:"oid"===t.type?1:w$F(e)?-1:w$F(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function c$2r(e,t){if(!e||!t)return !1;const{creationDateField:i,creatorField:o,editDateField:n,editorField:l}=t;return -1!==[i&&i.toLowerCase(),o&&o.toLowerCase(),n&&n.toLowerCase(),l&&l.toLowerCase()].indexOf(e.toLowerCase())}function m$1w(e,t){return e.editable&&-1===s$1x.indexOf(e.type)&&!c$2r(e.name,t)}function F$j({editFieldsInfo:e,fields:t,objectIdField:i},n){return function(e,t){const i=e;return t&&(e=e.filter(e=>-1===t.indexOf(e.type))),e===i&&(e=e.slice()),e.sort(u$1X),e}(t,(null==n?void 0:n.ignoreFieldTypes)||C$i).map(t=>new m$l({fieldName:t.name,isEditable:m$1w(t,e),label:t.alias,format:b$D(t),visible:p$2l(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:null==n?void 0:n.visibleFieldNames})}))}function b$D(e){switch(e.type){case"small-integer":case"integer":case"single":return new n$F({digitSeparator:!0,places:0});case"double":return new n$F({digitSeparator:!0,places:2});case"date":return new n$F({dateFormat:"long-month-day-year"});default:return null}}function w$F(e){if("name"===(e.name&&e.name.toLowerCase()))return !0;return "name"===(e.alias&&e.alias.toLowerCase())||void 0}const C$i=["geometry","blob","raster","guid","xml"];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const t$1p={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const g$T=n$7.getLogger("esri.layers.graphics.sources.GeoJSONSource");let j$G=class extends h$i{constructor(){super(...arguments),this.type="geojson",this.fullExtent=null,this.timeInfo=null;}load(t){const e=u$4(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),D$1(this)}destroy(){var t;null==(t=this._connection)||t.close(),this._connection=null;}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,e)).then(t=>g$w.fromJSON(t))}queryFeaturesJSON(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatures",t?t.toJSON():null,e))}queryFeatureCount(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,e))}queryObjectIds(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,e))}queryExtent(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,e)).then(t=>({count:t.count,extent:z$4.fromJSON(t.extent)}))}_applyEdits(t){if(!this._connection)throw new s$g("geojson-layer-source:edit-failure","Memory source not loaded");const e=this.layer.objectIdField,r=[],s=[],o=[];if(t.addFeatures)for(const e of t.addFeatures)r.push(this._serializeFeature(e));if(t.deleteFeatures)for(const r of t.deleteFeatures)"objectId"in r&&null!=r.objectId?s.push(r.objectId):"attributes"in r&&null!=r.attributes[e]&&s.push(r.attributes[e]);if(t.updateFeatures)for(const e of t.updateFeatures)o.push(this._serializeFeature(e));return this._connection.invoke("applyEdits",{adds:r,updates:o,deletes:s}).then(({fullExtent:t,timeExtent:e,featureEditResults:r})=>{if(this.fullExtent=t,this.timeInfo){const t=this.timeInfo.clone();t.read({timeExtent:e}),this.timeInfo=t;}return this._createEditsResult(r)})}_createEditsResult(t){return {addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const e=!0===t.success?null:t.error||{code:void 0,description:void 0};return {objectId:t.objectId,globalId:t.globalId,error:e?new s$g("geojson-layer-source:edit-failure",e.description,{code:e.code}):null}}_serializeFeature(t){const{attributes:e}=t,r=this._geometryForSerialization(t);return r?{geometry:r.toJSON(),attributes:e}:{attributes:e}}_geometryForSerialization(t){const{geometry:e}=t;return t$6(e)?null:"mesh"===e.type||"extent"===e.type?x$8.fromExtent(e.extent):e}async _startWorker(t){this._connection=await w$a("GeoJSONSourceWorker",{strategy:s("feature-layers-workers")?"dedicated":"local",signal:t});const{fields:r,spatialReference:s$1,hasZ:o,geometryType:i,objectIdField:n,url:a,timeInfo:u}=this.layer,p="defaults"===this.layer.originOf("spatialReference"),d={url:a,fields:r&&r.map(t=>t.toJSON()),geometryType:t$r.toJSON(i),hasZ:o,objectIdField:n,timeInfo:u?u.toJSON():null,spatialReference:p?null:s$1&&s$1.toJSON()},h=await this._connection.invoke("load",d,{signal:t});for(const t of h.warnings)g$T.warn(t.message,{layer:this.layer,warning:t});h.featureErrors.length&&g$T.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors),this.fullExtent=z$4.fromJSON(h.layerDefinition.extent),this.timeInfo=c$2k.fromJSON(h.layerDefinition.timeInfo),this.sourceJSON=h.layerDefinition,this.capabilities={attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:h.layerDefinition.hasZ},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!0,supportsDelete:!0,supportsEditing:!0,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!0,supportsExceedsLimitStatistics:!0},query:t$1p,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:!0,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}};}};e([y$5()],j$G.prototype,"capabilities",void 0),e([y$5()],j$G.prototype,"type",void 0),e([y$5()],j$G.prototype,"fullExtent",void 0),e([y$5({constructOnly:!0})],j$G.prototype,"layer",void 0),e([y$5()],j$G.prototype,"sourceJSON",void 0),e([y$5()],j$G.prototype,"timeInfo",void 0),j$G=e([n$e("esri.layers.graphics.sources.GeoJSONSource")],j$G);var S$t=j$G;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const q$f=new t$q({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"});let B$g=class extends(t$1k(u$1P(s$1s(o$1r(a$1N(b$6)))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!0,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=null,this.spatialReference=w$5.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null,this.url=null;}load(e){const t=new S$t({layer:this});return this._set("source",t),this.addResolvingPromise(t.load(e).then(()=>{this.read(t.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),p$w(this.renderer,this.fields),g$j(this.timeInfo,this.fields);})),D$1(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.definitionExpression,this.timeExtent,this.timeOffset,this.geometryType,this.capabilities,(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}readFeatureReduction(e,t){return u$1U(e,t)}writeWebSceneFeatureReduction(e,t,r,o){c$2q(e,t,"layerDefinition.featureReduction",o);}get fieldsIndex(){return new l$1D(this.fields)}get isTable(){return this.loaded&&null==this.geometryType}get parsedUrl(){return this.url?C(this.url):null}set renderer(e){p$w(e,this.fields),this._set("renderer",e);}async applyEdits(e,t){return (await import('./chunks/editingSupport-ce65571a.js')).applyEdits(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return a$25(this,e)}createQuery(){const e=new g$v,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:o}=this;return e.timeExtent=null!=r&&null!=o?o.offset(-r.value,r.unit):o||null,e}getFieldDomain(e,t){let r,o=!1;const i=t&&t.feature,s=i&&i.attributes,p=this.typeIdField&&s&&s[this.typeIdField];return null!=p&&this.types&&(o=this.types.some(t=>t.id==p&&(r=t.domains&&t.domains[e],r&&"inherited"===r.type&&(r=this._getLayerDomain(e)),!0))),o||r||(r=this._getLayerDomain(e)),r}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(g$v.from(e)||this.createQuery(),t)).then(e=>{if(e&&e.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(g$v.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(g$v.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(g$v.from(e)||this.createQuery(),t))}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(r=>(r.name===e&&(t=r.domain),!!t)),t}};e([y$5({readOnly:!0,dependsOn:["source.capabilities"],json:{read:!1,write:!1}})],B$g.prototype,"capabilities",null),e([y$5({type:String})],B$g.prototype,"copyright",void 0),e([y$5({readOnly:!0,dependsOn:["capabilities","definitionExpression","geometryType","timeExtent","timeOffset"]})],B$g.prototype,"createQueryVersion",null),e([y$5({readOnly:!0,dependsOn:["fields","title"]})],B$g.prototype,"defaultPopupTemplate",null),e([y$5({type:String})],B$g.prototype,"definitionExpression",void 0),e([y$5({type:String})],B$g.prototype,"displayField",void 0),e([y$5({type:Boolean})],B$g.prototype,"editingEnabled",void 0),e([y$5({type:h$1m})],B$g.prototype,"elevationInfo",void 0),e([y$5({types:{key:"type",base:p$2f,typeMap:{selection:c$2p,cluster:d$1m}},json:{write:{target:"layerDefinition.featureReduction"}}})],B$g.prototype,"featureReduction",void 0),e([e$l("featureReduction",["layerDefinition.featureReduction"])],B$g.prototype,"readFeatureReduction",null),e([o$r("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:s$1w}})],B$g.prototype,"writeWebSceneFeatureReduction",null),e([y$5({type:[y$z]})],B$g.prototype,"fields",void 0),e([y$5({readOnly:!0,dependsOn:["fields"]})],B$g.prototype,"fieldsIndex",null),e([y$5({type:z$4,aliasOf:"source.fullExtent"})],B$g.prototype,"fullExtent",void 0),e([y$5({type:["point","polygon","polyline","multipoint"],json:{read:{reader:q$f.read}}})],B$g.prototype,"geometryType",void 0),e([y$5({type:Boolean})],B$g.prototype,"hasZ",void 0),e([y$5({type:String})],B$g.prototype,"id",void 0),e([y$5({type:Boolean,readOnly:!0,dependsOn:["loaded"]})],B$g.prototype,"isTable",null),e([y$5({type:Boolean})],B$g.prototype,"labelsVisible",void 0),e([y$5({type:[P$i]})],B$g.prototype,"labelingInfo",void 0),e([y$5({type:Boolean})],B$g.prototype,"legendEnabled",void 0),e([y$5({type:["show","hide"]})],B$g.prototype,"listMode",void 0),e([y$5({type:String})],B$g.prototype,"objectIdField",void 0),e([y$5({readOnly:!0,dependsOn:["url"]})],B$g.prototype,"parsedUrl",null),e([y$5({type:Boolean})],B$g.prototype,"popupEnabled",void 0),e([y$5({type:P$5})],B$g.prototype,"popupTemplate",void 0),e([y$5({types:m$1s,json:{read:{source:"drawingInfo.renderer"}}})],B$g.prototype,"renderer",null),e([y$5({type:Boolean})],B$g.prototype,"screenSizePerspectiveEnabled",void 0),e([y$5({readOnly:!0})],B$g.prototype,"source",void 0),e([y$5({type:w$5})],B$g.prototype,"spatialReference",void 0),e([y$5({type:[u$1V]})],B$g.prototype,"templates",void 0),e([y$5()],B$g.prototype,"title",void 0),e([y$5({json:{read:!1},readOnly:!0})],B$g.prototype,"type",void 0),e([y$5({type:String,readOnly:!0})],B$g.prototype,"typeIdField",void 0),e([y$5({type:[u$1W]})],B$g.prototype,"types",void 0),e([y$5({type:String})],B$g.prototype,"url",void 0),B$g=e([n$e("esri.layers.GeoJSONLayer")],B$g);var G$g=B$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$1L=n$7.getLogger("esri.widgets.Slider.SliderViewModel");let a$26=class extends h$c{constructor(t){super(t),this.precision=4,this.thumbsConstrained=!0;}set labelFormatFunction(t){this._set("labelFormatFunction",t);}set inputFormatFunction(t){this._set("inputFormatFunction",t);}set inputParseFunction(t){this._set("inputParseFunction",t);}get labels(){const{max:t,min:e,values:s}=this,r=s&&s.length?s.map((t,e)=>this.getLabelForValue(t,"value",e)):[];return {max:this.getLabelForValue(t,"max"),min:this.getLabelForValue(e,"min"),values:r}}set max(t){this.setMax(t);}set min(t){this.setMin(t);}get state(){const{max:t,min:s}=this;return u$4(t)&&u$4(s)?"ready":"disabled"}set values(t){const{max:s,min:r}=this,o=this.values;o&&t&&o.length===t.length&&o.every((e,s)=>e===t[s])||(this._set("values",null),t&&t.length&&(u$4(r)&&t.some(t=>t<r)&&(this.min=Math.min(...t)),u$4(s)&&t.some(t=>t>s)&&(this.max=Math.max(...t))),this._set("values",t));}toPrecision(t){return parseFloat(t.toFixed(this.precision))}defaultLabelFormatFunction(t){const{max:e,min:s,precision:r}=this,o=e-s>10?2:r;return parseFloat(t.toFixed(o)).toString()}defaultInputFormatFunction(t){return t.toString()}defaultInputParseFunction(t){return parseFloat(t)}getBoundsForValueAtIndex(t){const{thumbsConstrained:s,max:r,min:o,values:i}=this;if(s){const s=t-1,n=t+1;return {min:u$4(i[s])?i[s]:o,max:u$4(i[n])?i[n]:r}}return {min:o,max:r}}getLabelForValue(t,s,r){return u$4(t)?this.labelFormatFunction?this.labelFormatFunction(t,s,r):this.defaultLabelFormatFunction(t):null}setMax(t){const{max:e,values:s}=this;if(isNaN(t))return void this._logError("slider:invalid-value","Property 'max' must of type 'number'.");if(null===t)return void this._set("max",null);const r=this.toPrecision(t);if(e!==r&&(this._set("max",r),s&&s.length))for(let t=0;t<s.length;t++)r<s[t]&&this.setValue(t,r);}setMin(t){const{min:e,values:s}=this;if(isNaN(t))return void this._logError("slider:invalid-value","Property 'min' must of type 'number'.");if(null===t)return void this._set("min",null);const r=this.toPrecision(t);if(e!==r&&(this._set("min",r),s&&s.length))for(let t=0;t<s.length;t++)r>s[t]&&this.setValue(t,r);}setValue(t,e){if(isNaN(e))return void this._logError("slider:invalid-value","Members of property 'values' must of type 'number'.");const{values:s}=this,r=s[t],o=this.toPrecision(e);if(r===o)return;const i=[...s];i[t]=o,this._set("values",i),this.notifyChange("labels");}_logError(t,e,s){l$1L.error(new s$g(t,e,s));}};e([y$5()],a$26.prototype,"labelFormatFunction",null),e([y$5()],a$26.prototype,"inputFormatFunction",null),e([y$5()],a$26.prototype,"inputParseFunction",null),e([y$5({dependsOn:["labelFormatFunction","max","min","values"],readOnly:!0})],a$26.prototype,"labels",null),e([y$5()],a$26.prototype,"max",null),e([y$5()],a$26.prototype,"min",null),e([y$5()],a$26.prototype,"precision",void 0),e([y$5({dependsOn:["max","min"],readOnly:!0})],a$26.prototype,"state",null),e([y$5()],a$26.prototype,"thumbsConstrained",void 0),e([y$5()],a$26.prototype,"values",null),a$26=e([n$e("esri.widgets.Slider.SliderViewModel")],a$26);var u$1Y=a$26;

/**
 * A collection of shims that provide minimal functionality of the ES6 collections.
 *
 * These implementations are not meant to be used outside of the ResizeObserver
 * modules as they cover only a limited range of use cases.
 */
/* eslint-disable require-jsdoc, valid-jsdoc */
var MapShim = (function () {
    if (typeof Map !== 'undefined') {
        return Map;
    }
    /**
     * Returns index in provided array that matches the specified key.
     *
     * @param {Array<Array>} arr
     * @param {*} key
     * @returns {number}
     */
    function getIndex(arr, key) {
        var result = -1;
        arr.some(function (entry, index) {
            if (entry[0] === key) {
                result = index;
                return true;
            }
            return false;
        });
        return result;
    }
    return /** @class */ (function () {
        function class_1() {
            this.__entries__ = [];
        }
        Object.defineProperty(class_1.prototype, "size", {
            /**
             * @returns {boolean}
             */
            get: function () {
                return this.__entries__.length;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {*} key
         * @returns {*}
         */
        class_1.prototype.get = function (key) {
            var index = getIndex(this.__entries__, key);
            var entry = this.__entries__[index];
            return entry && entry[1];
        };
        /**
         * @param {*} key
         * @param {*} value
         * @returns {void}
         */
        class_1.prototype.set = function (key, value) {
            var index = getIndex(this.__entries__, key);
            if (~index) {
                this.__entries__[index][1] = value;
            }
            else {
                this.__entries__.push([key, value]);
            }
        };
        /**
         * @param {*} key
         * @returns {void}
         */
        class_1.prototype.delete = function (key) {
            var entries = this.__entries__;
            var index = getIndex(entries, key);
            if (~index) {
                entries.splice(index, 1);
            }
        };
        /**
         * @param {*} key
         * @returns {void}
         */
        class_1.prototype.has = function (key) {
            return !!~getIndex(this.__entries__, key);
        };
        /**
         * @returns {void}
         */
        class_1.prototype.clear = function () {
            this.__entries__.splice(0);
        };
        /**
         * @param {Function} callback
         * @param {*} [ctx=null]
         * @returns {void}
         */
        class_1.prototype.forEach = function (callback, ctx) {
            if (ctx === void 0) { ctx = null; }
            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {
                var entry = _a[_i];
                callback.call(ctx, entry[1], entry[0]);
            }
        };
        return class_1;
    }());
})();

/**
 * Detects whether window and document objects are available in current environment.
 */
var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;

// Returns global object of a current environment.
var global$1 = (function () {
    if (typeof global !== 'undefined' && global.Math === Math) {
        return global;
    }
    if (typeof self !== 'undefined' && self.Math === Math) {
        return self;
    }
    if (typeof window !== 'undefined' && window.Math === Math) {
        return window;
    }
    // eslint-disable-next-line no-new-func
    return Function('return this')();
})();

/**
 * A shim for the requestAnimationFrame which falls back to the setTimeout if
 * first one is not supported.
 *
 * @returns {number} Requests' identifier.
 */
var requestAnimationFrame$1 = (function () {
    if (typeof requestAnimationFrame === 'function') {
        // It's required to use a bounded function because IE sometimes throws
        // an "Invalid calling object" error if rAF is invoked without the global
        // object on the left hand side.
        return requestAnimationFrame.bind(global$1);
    }
    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };
})();

// Defines minimum timeout before adding a trailing call.
var trailingTimeout = 2;
/**
 * Creates a wrapper function which ensures that provided callback will be
 * invoked only once during the specified delay period.
 *
 * @param {Function} callback - Function to be invoked after the delay period.
 * @param {number} delay - Delay after which to invoke callback.
 * @returns {Function}
 */
function throttle (callback, delay) {
    var leadingCall = false, trailingCall = false, lastCallTime = 0;
    /**
     * Invokes the original callback function and schedules new invocation if
     * the "proxy" was called during current request.
     *
     * @returns {void}
     */
    function resolvePending() {
        if (leadingCall) {
            leadingCall = false;
            callback();
        }
        if (trailingCall) {
            proxy();
        }
    }
    /**
     * Callback invoked after the specified delay. It will further postpone
     * invocation of the original function delegating it to the
     * requestAnimationFrame.
     *
     * @returns {void}
     */
    function timeoutCallback() {
        requestAnimationFrame$1(resolvePending);
    }
    /**
     * Schedules invocation of the original function.
     *
     * @returns {void}
     */
    function proxy() {
        var timeStamp = Date.now();
        if (leadingCall) {
            // Reject immediately following calls.
            if (timeStamp - lastCallTime < trailingTimeout) {
                return;
            }
            // Schedule new call to be in invoked when the pending one is resolved.
            // This is important for "transitions" which never actually start
            // immediately so there is a chance that we might miss one if change
            // happens amids the pending invocation.
            trailingCall = true;
        }
        else {
            leadingCall = true;
            trailingCall = false;
            setTimeout(timeoutCallback, delay);
        }
        lastCallTime = timeStamp;
    }
    return proxy;
}

// Minimum delay before invoking the update of observers.
var REFRESH_DELAY = 20;
// A list of substrings of CSS properties used to find transition events that
// might affect dimensions of observed elements.
var transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];
// Check if MutationObserver is available.
var mutationObserverSupported = typeof MutationObserver !== 'undefined';
/**
 * Singleton controller class which handles updates of ResizeObserver instances.
 */
var ResizeObserverController = /** @class */ (function () {
    /**
     * Creates a new instance of ResizeObserverController.
     *
     * @private
     */
    function ResizeObserverController() {
        /**
         * Indicates whether DOM listeners have been added.
         *
         * @private {boolean}
         */
        this.connected_ = false;
        /**
         * Tells that controller has subscribed for Mutation Events.
         *
         * @private {boolean}
         */
        this.mutationEventsAdded_ = false;
        /**
         * Keeps reference to the instance of MutationObserver.
         *
         * @private {MutationObserver}
         */
        this.mutationsObserver_ = null;
        /**
         * A list of connected observers.
         *
         * @private {Array<ResizeObserverSPI>}
         */
        this.observers_ = [];
        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);
        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);
    }
    /**
     * Adds observer to observers list.
     *
     * @param {ResizeObserverSPI} observer - Observer to be added.
     * @returns {void}
     */
    ResizeObserverController.prototype.addObserver = function (observer) {
        if (!~this.observers_.indexOf(observer)) {
            this.observers_.push(observer);
        }
        // Add listeners if they haven't been added yet.
        if (!this.connected_) {
            this.connect_();
        }
    };
    /**
     * Removes observer from observers list.
     *
     * @param {ResizeObserverSPI} observer - Observer to be removed.
     * @returns {void}
     */
    ResizeObserverController.prototype.removeObserver = function (observer) {
        var observers = this.observers_;
        var index = observers.indexOf(observer);
        // Remove observer if it's present in registry.
        if (~index) {
            observers.splice(index, 1);
        }
        // Remove listeners if controller has no connected observers.
        if (!observers.length && this.connected_) {
            this.disconnect_();
        }
    };
    /**
     * Invokes the update of observers. It will continue running updates insofar
     * it detects changes.
     *
     * @returns {void}
     */
    ResizeObserverController.prototype.refresh = function () {
        var changesDetected = this.updateObservers_();
        // Continue running updates if changes have been detected as there might
        // be future ones caused by CSS transitions.
        if (changesDetected) {
            this.refresh();
        }
    };
    /**
     * Updates every observer from observers list and notifies them of queued
     * entries.
     *
     * @private
     * @returns {boolean} Returns "true" if any observer has detected changes in
     *      dimensions of it's elements.
     */
    ResizeObserverController.prototype.updateObservers_ = function () {
        // Collect observers that have active observations.
        var activeObservers = this.observers_.filter(function (observer) {
            return observer.gatherActive(), observer.hasActive();
        });
        // Deliver notifications in a separate cycle in order to avoid any
        // collisions between observers, e.g. when multiple instances of
        // ResizeObserver are tracking the same element and the callback of one
        // of them changes content dimensions of the observed target. Sometimes
        // this may result in notifications being blocked for the rest of observers.
        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });
        return activeObservers.length > 0;
    };
    /**
     * Initializes DOM listeners.
     *
     * @private
     * @returns {void}
     */
    ResizeObserverController.prototype.connect_ = function () {
        // Do nothing if running in a non-browser environment or if listeners
        // have been already added.
        if (!isBrowser || this.connected_) {
            return;
        }
        // Subscription to the "Transitionend" event is used as a workaround for
        // delayed transitions. This way it's possible to capture at least the
        // final state of an element.
        document.addEventListener('transitionend', this.onTransitionEnd_);
        window.addEventListener('resize', this.refresh);
        if (mutationObserverSupported) {
            this.mutationsObserver_ = new MutationObserver(this.refresh);
            this.mutationsObserver_.observe(document, {
                attributes: true,
                childList: true,
                characterData: true,
                subtree: true
            });
        }
        else {
            document.addEventListener('DOMSubtreeModified', this.refresh);
            this.mutationEventsAdded_ = true;
        }
        this.connected_ = true;
    };
    /**
     * Removes DOM listeners.
     *
     * @private
     * @returns {void}
     */
    ResizeObserverController.prototype.disconnect_ = function () {
        // Do nothing if running in a non-browser environment or if listeners
        // have been already removed.
        if (!isBrowser || !this.connected_) {
            return;
        }
        document.removeEventListener('transitionend', this.onTransitionEnd_);
        window.removeEventListener('resize', this.refresh);
        if (this.mutationsObserver_) {
            this.mutationsObserver_.disconnect();
        }
        if (this.mutationEventsAdded_) {
            document.removeEventListener('DOMSubtreeModified', this.refresh);
        }
        this.mutationsObserver_ = null;
        this.mutationEventsAdded_ = false;
        this.connected_ = false;
    };
    /**
     * "Transitionend" event handler.
     *
     * @private
     * @param {TransitionEvent} event
     * @returns {void}
     */
    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {
        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;
        // Detect whether transition may affect dimensions of an element.
        var isReflowProperty = transitionKeys.some(function (key) {
            return !!~propertyName.indexOf(key);
        });
        if (isReflowProperty) {
            this.refresh();
        }
    };
    /**
     * Returns instance of the ResizeObserverController.
     *
     * @returns {ResizeObserverController}
     */
    ResizeObserverController.getInstance = function () {
        if (!this.instance_) {
            this.instance_ = new ResizeObserverController();
        }
        return this.instance_;
    };
    /**
     * Holds reference to the controller's instance.
     *
     * @private {ResizeObserverController}
     */
    ResizeObserverController.instance_ = null;
    return ResizeObserverController;
}());

/**
 * Defines non-writable/enumerable properties of the provided target object.
 *
 * @param {Object} target - Object for which to define properties.
 * @param {Object} props - Properties to be defined.
 * @returns {Object} Target object.
 */
var defineConfigurable = (function (target, props) {
    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {
        var key = _a[_i];
        Object.defineProperty(target, key, {
            value: props[key],
            enumerable: false,
            writable: false,
            configurable: true
        });
    }
    return target;
});

/**
 * Returns the global object associated with provided element.
 *
 * @param {Object} target
 * @returns {Object}
 */
var getWindowOf = (function (target) {
    // Assume that the element is an instance of Node, which means that it
    // has the "ownerDocument" property from which we can retrieve a
    // corresponding global object.
    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;
    // Return the local global object if it's not possible extract one from
    // provided element.
    return ownerGlobal || global$1;
});

// Placeholder of an empty content rectangle.
var emptyRect = createRectInit(0, 0, 0, 0);
/**
 * Converts provided string to a number.
 *
 * @param {number|string} value
 * @returns {number}
 */
function toFloat(value) {
    return parseFloat(value) || 0;
}
/**
 * Extracts borders size from provided styles.
 *
 * @param {CSSStyleDeclaration} styles
 * @param {...string} positions - Borders positions (top, right, ...)
 * @returns {number}
 */
function getBordersSize(styles) {
    var positions = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        positions[_i - 1] = arguments[_i];
    }
    return positions.reduce(function (size, position) {
        var value = styles['border-' + position + '-width'];
        return size + toFloat(value);
    }, 0);
}
/**
 * Extracts paddings sizes from provided styles.
 *
 * @param {CSSStyleDeclaration} styles
 * @returns {Object} Paddings box.
 */
function getPaddings(styles) {
    var positions = ['top', 'right', 'bottom', 'left'];
    var paddings = {};
    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {
        var position = positions_1[_i];
        var value = styles['padding-' + position];
        paddings[position] = toFloat(value);
    }
    return paddings;
}
/**
 * Calculates content rectangle of provided SVG element.
 *
 * @param {SVGGraphicsElement} target - Element content rectangle of which needs
 *      to be calculated.
 * @returns {DOMRectInit}
 */
function getSVGContentRect(target) {
    var bbox = target.getBBox();
    return createRectInit(0, 0, bbox.width, bbox.height);
}
/**
 * Calculates content rectangle of provided HTMLElement.
 *
 * @param {HTMLElement} target - Element for which to calculate the content rectangle.
 * @returns {DOMRectInit}
 */
function getHTMLElementContentRect(target) {
    // Client width & height properties can't be
    // used exclusively as they provide rounded values.
    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;
    // By this condition we can catch all non-replaced inline, hidden and
    // detached elements. Though elements with width & height properties less
    // than 0.5 will be discarded as well.
    //
    // Without it we would need to implement separate methods for each of
    // those cases and it's not possible to perform a precise and performance
    // effective test for hidden elements. E.g. even jQuery's ':visible' filter
    // gives wrong results for elements with width & height less than 0.5.
    if (!clientWidth && !clientHeight) {
        return emptyRect;
    }
    var styles = getWindowOf(target).getComputedStyle(target);
    var paddings = getPaddings(styles);
    var horizPad = paddings.left + paddings.right;
    var vertPad = paddings.top + paddings.bottom;
    // Computed styles of width & height are being used because they are the
    // only dimensions available to JS that contain non-rounded values. It could
    // be possible to utilize the getBoundingClientRect if only it's data wasn't
    // affected by CSS transformations let alone paddings, borders and scroll bars.
    var width = toFloat(styles.width), height = toFloat(styles.height);
    // Width & height include paddings and borders when the 'border-box' box
    // model is applied (except for IE).
    if (styles.boxSizing === 'border-box') {
        // Following conditions are required to handle Internet Explorer which
        // doesn't include paddings and borders to computed CSS dimensions.
        //
        // We can say that if CSS dimensions + paddings are equal to the "client"
        // properties then it's either IE, and thus we don't need to subtract
        // anything, or an element merely doesn't have paddings/borders styles.
        if (Math.round(width + horizPad) !== clientWidth) {
            width -= getBordersSize(styles, 'left', 'right') + horizPad;
        }
        if (Math.round(height + vertPad) !== clientHeight) {
            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;
        }
    }
    // Following steps can't be applied to the document's root element as its
    // client[Width/Height] properties represent viewport area of the window.
    // Besides, it's as well not necessary as the <html> itself neither has
    // rendered scroll bars nor it can be clipped.
    if (!isDocumentElement(target)) {
        // In some browsers (only in Firefox, actually) CSS width & height
        // include scroll bars size which can be removed at this step as scroll
        // bars are the only difference between rounded dimensions + paddings
        // and "client" properties, though that is not always true in Chrome.
        var vertScrollbar = Math.round(width + horizPad) - clientWidth;
        var horizScrollbar = Math.round(height + vertPad) - clientHeight;
        // Chrome has a rather weird rounding of "client" properties.
        // E.g. for an element with content width of 314.2px it sometimes gives
        // the client width of 315px and for the width of 314.7px it may give
        // 314px. And it doesn't happen all the time. So just ignore this delta
        // as a non-relevant.
        if (Math.abs(vertScrollbar) !== 1) {
            width -= vertScrollbar;
        }
        if (Math.abs(horizScrollbar) !== 1) {
            height -= horizScrollbar;
        }
    }
    return createRectInit(paddings.left, paddings.top, width, height);
}
/**
 * Checks whether provided element is an instance of the SVGGraphicsElement.
 *
 * @param {Element} target - Element to be checked.
 * @returns {boolean}
 */
var isSVGGraphicsElement = (function () {
    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement
    // interface.
    if (typeof SVGGraphicsElement !== 'undefined') {
        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };
    }
    // If it's so, then check that element is at least an instance of the
    // SVGElement and that it has the "getBBox" method.
    // eslint-disable-next-line no-extra-parens
    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&
        typeof target.getBBox === 'function'); };
})();
/**
 * Checks whether provided element is a document element (<html>).
 *
 * @param {Element} target - Element to be checked.
 * @returns {boolean}
 */
function isDocumentElement(target) {
    return target === getWindowOf(target).document.documentElement;
}
/**
 * Calculates an appropriate content rectangle for provided html or svg element.
 *
 * @param {Element} target - Element content rectangle of which needs to be calculated.
 * @returns {DOMRectInit}
 */
function getContentRect(target) {
    if (!isBrowser) {
        return emptyRect;
    }
    if (isSVGGraphicsElement(target)) {
        return getSVGContentRect(target);
    }
    return getHTMLElementContentRect(target);
}
/**
 * Creates rectangle with an interface of the DOMRectReadOnly.
 * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly
 *
 * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.
 * @returns {DOMRectReadOnly}
 */
function createReadOnlyRect(_a) {
    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;
    // If DOMRectReadOnly is available use it as a prototype for the rectangle.
    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;
    var rect = Object.create(Constr.prototype);
    // Rectangle's properties are not writable and non-enumerable.
    defineConfigurable(rect, {
        x: x, y: y, width: width, height: height,
        top: y,
        right: x + width,
        bottom: height + y,
        left: x
    });
    return rect;
}
/**
 * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.
 * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit
 *
 * @param {number} x - X coordinate.
 * @param {number} y - Y coordinate.
 * @param {number} width - Rectangle's width.
 * @param {number} height - Rectangle's height.
 * @returns {DOMRectInit}
 */
function createRectInit(x, y, width, height) {
    return { x: x, y: y, width: width, height: height };
}

/**
 * Class that is responsible for computations of the content rectangle of
 * provided DOM element and for keeping track of it's changes.
 */
var ResizeObservation = /** @class */ (function () {
    /**
     * Creates an instance of ResizeObservation.
     *
     * @param {Element} target - Element to be observed.
     */
    function ResizeObservation(target) {
        /**
         * Broadcasted width of content rectangle.
         *
         * @type {number}
         */
        this.broadcastWidth = 0;
        /**
         * Broadcasted height of content rectangle.
         *
         * @type {number}
         */
        this.broadcastHeight = 0;
        /**
         * Reference to the last observed content rectangle.
         *
         * @private {DOMRectInit}
         */
        this.contentRect_ = createRectInit(0, 0, 0, 0);
        this.target = target;
    }
    /**
     * Updates content rectangle and tells whether it's width or height properties
     * have changed since the last broadcast.
     *
     * @returns {boolean}
     */
    ResizeObservation.prototype.isActive = function () {
        var rect = getContentRect(this.target);
        this.contentRect_ = rect;
        return (rect.width !== this.broadcastWidth ||
            rect.height !== this.broadcastHeight);
    };
    /**
     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data
     * from the corresponding properties of the last observed content rectangle.
     *
     * @returns {DOMRectInit} Last observed content rectangle.
     */
    ResizeObservation.prototype.broadcastRect = function () {
        var rect = this.contentRect_;
        this.broadcastWidth = rect.width;
        this.broadcastHeight = rect.height;
        return rect;
    };
    return ResizeObservation;
}());

var ResizeObserverEntry = /** @class */ (function () {
    /**
     * Creates an instance of ResizeObserverEntry.
     *
     * @param {Element} target - Element that is being observed.
     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.
     */
    function ResizeObserverEntry(target, rectInit) {
        var contentRect = createReadOnlyRect(rectInit);
        // According to the specification following properties are not writable
        // and are also not enumerable in the native implementation.
        //
        // Property accessors are not being used as they'd require to define a
        // private WeakMap storage which may cause memory leaks in browsers that
        // don't support this type of collections.
        defineConfigurable(this, { target: target, contentRect: contentRect });
    }
    return ResizeObserverEntry;
}());

var ResizeObserverSPI = /** @class */ (function () {
    /**
     * Creates a new instance of ResizeObserver.
     *
     * @param {ResizeObserverCallback} callback - Callback function that is invoked
     *      when one of the observed elements changes it's content dimensions.
     * @param {ResizeObserverController} controller - Controller instance which
     *      is responsible for the updates of observer.
     * @param {ResizeObserver} callbackCtx - Reference to the public
     *      ResizeObserver instance which will be passed to callback function.
     */
    function ResizeObserverSPI(callback, controller, callbackCtx) {
        /**
         * Collection of resize observations that have detected changes in dimensions
         * of elements.
         *
         * @private {Array<ResizeObservation>}
         */
        this.activeObservations_ = [];
        /**
         * Registry of the ResizeObservation instances.
         *
         * @private {Map<Element, ResizeObservation>}
         */
        this.observations_ = new MapShim();
        if (typeof callback !== 'function') {
            throw new TypeError('The callback provided as parameter 1 is not a function.');
        }
        this.callback_ = callback;
        this.controller_ = controller;
        this.callbackCtx_ = callbackCtx;
    }
    /**
     * Starts observing provided element.
     *
     * @param {Element} target - Element to be observed.
     * @returns {void}
     */
    ResizeObserverSPI.prototype.observe = function (target) {
        if (!arguments.length) {
            throw new TypeError('1 argument required, but only 0 present.');
        }
        // Do nothing if current environment doesn't have the Element interface.
        if (typeof Element === 'undefined' || !(Element instanceof Object)) {
            return;
        }
        if (!(target instanceof getWindowOf(target).Element)) {
            throw new TypeError('parameter 1 is not of type "Element".');
        }
        var observations = this.observations_;
        // Do nothing if element is already being observed.
        if (observations.has(target)) {
            return;
        }
        observations.set(target, new ResizeObservation(target));
        this.controller_.addObserver(this);
        // Force the update of observations.
        this.controller_.refresh();
    };
    /**
     * Stops observing provided element.
     *
     * @param {Element} target - Element to stop observing.
     * @returns {void}
     */
    ResizeObserverSPI.prototype.unobserve = function (target) {
        if (!arguments.length) {
            throw new TypeError('1 argument required, but only 0 present.');
        }
        // Do nothing if current environment doesn't have the Element interface.
        if (typeof Element === 'undefined' || !(Element instanceof Object)) {
            return;
        }
        if (!(target instanceof getWindowOf(target).Element)) {
            throw new TypeError('parameter 1 is not of type "Element".');
        }
        var observations = this.observations_;
        // Do nothing if element is not being observed.
        if (!observations.has(target)) {
            return;
        }
        observations.delete(target);
        if (!observations.size) {
            this.controller_.removeObserver(this);
        }
    };
    /**
     * Stops observing all elements.
     *
     * @returns {void}
     */
    ResizeObserverSPI.prototype.disconnect = function () {
        this.clearActive();
        this.observations_.clear();
        this.controller_.removeObserver(this);
    };
    /**
     * Collects observation instances the associated element of which has changed
     * it's content rectangle.
     *
     * @returns {void}
     */
    ResizeObserverSPI.prototype.gatherActive = function () {
        var _this = this;
        this.clearActive();
        this.observations_.forEach(function (observation) {
            if (observation.isActive()) {
                _this.activeObservations_.push(observation);
            }
        });
    };
    /**
     * Invokes initial callback function with a list of ResizeObserverEntry
     * instances collected from active resize observations.
     *
     * @returns {void}
     */
    ResizeObserverSPI.prototype.broadcastActive = function () {
        // Do nothing if observer doesn't have active observations.
        if (!this.hasActive()) {
            return;
        }
        var ctx = this.callbackCtx_;
        // Create ResizeObserverEntry instance for every active observation.
        var entries = this.activeObservations_.map(function (observation) {
            return new ResizeObserverEntry(observation.target, observation.broadcastRect());
        });
        this.callback_.call(ctx, entries, ctx);
        this.clearActive();
    };
    /**
     * Clears the collection of active observations.
     *
     * @returns {void}
     */
    ResizeObserverSPI.prototype.clearActive = function () {
        this.activeObservations_.splice(0);
    };
    /**
     * Tells whether observer has active observations.
     *
     * @returns {boolean}
     */
    ResizeObserverSPI.prototype.hasActive = function () {
        return this.activeObservations_.length > 0;
    };
    return ResizeObserverSPI;
}());

// Registry of internal observers. If WeakMap is not available use current shim
// for the Map collection as it has all required methods and because WeakMap
// can't be fully polyfilled anyway.
var observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();
/**
 * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation
 * exposing only those methods and properties that are defined in the spec.
 */
var ResizeObserver = /** @class */ (function () {
    /**
     * Creates a new instance of ResizeObserver.
     *
     * @param {ResizeObserverCallback} callback - Callback that is invoked when
     *      dimensions of the observed elements change.
     */
    function ResizeObserver(callback) {
        if (!(this instanceof ResizeObserver)) {
            throw new TypeError('Cannot call a class as a function.');
        }
        if (!arguments.length) {
            throw new TypeError('1 argument required, but only 0 present.');
        }
        var controller = ResizeObserverController.getInstance();
        var observer = new ResizeObserverSPI(callback, controller, this);
        observers.set(this, observer);
    }
    return ResizeObserver;
}());
// Expose public methods of ResizeObserver.
[
    'observe',
    'unobserve',
    'disconnect'
].forEach(function (method) {
    ResizeObserver.prototype[method] = function () {
        var _a;
        return (_a = observers.get(this))[method].apply(_a, arguments);
    };
});

var index = (function () {
    // Export existing implementation if available.
    if (typeof global$1.ResizeObserver !== 'undefined') {
        return global$1.ResizeObserver;
    }
    return ResizeObserver;
})();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const b$E="esri-slider",f$1o="esri-slider--reversed",x$x="esri-slider--horizontal",E$m="esri-slider--vertical",y$10="esri-slider__content",P$j="esri-slider__extra-content",I$k="esri-slider__track",k$p="esri-slider__ticks",A$m="esri-slider__tick",L$k="esri-slider__tick-label",S$u="esri-slider__max",M$o="esri-slider__min",w$G="esri-slider__max--interactive",C$j="esri-slider__min--interactive",F$k="esri-slider__range-input",D$g="esri-slider__anchor",V$b="esri-slider__anchor--moving",T$m="esri-slider__anchor--moved",O$k="esri-slider__anchor-",z$i="esri-slider__segment",H$b="esri-slider__segment-",U$f="esri-slider__segment--interactive",j$H="esri-slider__thumb",$$a="esri-slider__label",N$h="esri-slider__label--interactive",R$j="esri-slider__label-input",B$h="esri-widget",W$9="esri-disabled",K$6="esri-hidden",G$h={showInput:"Enter",hideInput1:"Enter",hideInput2:"Escape",hideInput3:"Tab",moveAnchorUp:"ArrowUp",moveAnchorDown:"ArrowDown",moveAnchorLeft:"ArrowLeft",moveAnchorRight:"ArrowRight",moveAnchorToMax:"End",moveAnchorToMin:"Home"},X$6=n$7.getLogger("esri.widgets.Slider"),Y$6={labels:!1,rangeLabels:!1};let q$g=class extends C$7{constructor(t,e){super(t,e),this._activeLabelInputIndex=null,this._anchorElements=[],this._baseNode=null,this._dragged=!1,this._dragStartInfo=null,this._focusedAnchorIndex=null,this._isMinInputActive=!1,this._isMaxInputActive=!1,this._labelElements=[],this._lastMovedHandleIndex=null,this._observer=null,this._positionPrecision=5,this._segmentDragStartInfo=null,this._segmentElements=[],this._thumbElements=[],this._tickElements=[],this._trackHeight=null,this._trackWidth=null,this._zIndices=null,this._zIndexOffset=3,this.disabled=!1,this.extraNodes=[],this.draggableSegmentsEnabled=!0,this.inputCreatedFunction=null,this.inputFormatFunction=null,this.inputParseFunction=null,this.label=void 0,this.labelInputsEnabled=!1,this.labelFormatFunction=null,this.labels=null,this.max=null,this.messages=null,this.min=null,this.precision=4,this.rangeLabelInputsEnabled=!1,this.snapOnClickEnabled=!0,this.steps=null,this.thumbsConstrained=!0,this.thumbCreatedFunction=null,this.tickConfigs=null,this.trackElement=null,this.values=null,this.viewModel=new u$1Y,this.visibleElements={...Y$6},this._observer=new index(()=>this.scheduleRender()),this._onAnchorPointerDown=this._onAnchorPointerDown.bind(this),this._onAnchorPointerMove=this._onAnchorPointerMove.bind(this),this._onAnchorPointerUp=this._onAnchorPointerUp.bind(this),this._onLabelPointerDown=this._onLabelPointerDown.bind(this),this._onLabelPointerUp=this._onLabelPointerUp.bind(this),this._onSegmentPointerDown=this._onSegmentPointerDown.bind(this),this._onSegmentPointerMove=this._onSegmentPointerMove.bind(this),this._onSegmentPointerUp=this._onSegmentPointerUp.bind(this),this._onTrackPointerDown=this._onTrackPointerDown.bind(this);}destroy(){document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove),document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove);}set labelsVisible(t){t$c(X$6,"labelsVisible",{replacement:"visibleElements.labels",version:"4.15"}),this.visibleElements={...this.visibleElements,labels:t};}set layout(t){-1===["vertical","vertical-reversed","horizontal","horizontal-reversed"].indexOf(t)&&(t="horizontal"),this._set("layout",t);}set rangeLabelsVisible(t){t$c(X$6,"rangeLabelsVisible",{replacement:"visibleElements.rangeLabels",version:"4.15"}),this.visibleElements={...this.visibleElements,rangeLabels:t};}get state(){const{_activeLabelInputIndex:t,_isMaxInputActive:i,_isMinInputActive:n,_dragStartInfo:s,_segmentDragStartInfo:o,viewModel:r}=this,a=u$4(s)||u$4(o);return !(null===t&&!i&&!n)?"editing":a?"dragging":r.state}castVisibleElements(t){return {...Y$6,...t}}render(){const{label:t}=this,e=this.classes(b$E,B$h,this._isHorizontalLayout()?x$x:E$m,this._isReversedLayout()?f$1o:null,this._isDisabled()?W$9:null);return this._storeTrackDimensions(),r$G("div",{afterCreate:this._afterBaseNodeCreate,bind:this,"aria-label":t,class:e,"touch-action":"none"},this.renderContent())}toNextStep(t){this._toStep(t,1);}toPreviousStep(t){this._toStep(t,-1);}renderContent(){const{max:t,min:i}=this;if(u$4(i)&&u$4(t)&&!(i>t))return [this.renderMin(),this.renderSliderContainer(),this.renderMax()]}renderSliderContainer(){return r$G("div",{key:"slider-container",bind:this,class:y$10},this.renderTrackElement(),this.renderTicksContainer(),this.renderExtraContentElements())}renderTrackElement(){return r$G("div",{afterCreate:this._afterTrackCreate,bind:this,class:I$k,"data-node-ref":"trackElement","touch-action":"none"},this.renderSegmentElements(),this.renderAnchorElements())}renderSegmentElements(){if(!this.trackElement||!this.values||!this.values.length)return;const t=this.values.length+1,e=[];for(let i=0;i<t;i++)e.push(this.renderSegmentElement(i));return e}renderSegmentElement(t){const{_trackHeight:i,_trackWidth:n,draggableSegmentsEnabled:s,id:o,state:r,values:a}=this,l=this._isHorizontalLayout(),h=l?n:i,d=t===a.length?null:t,u=0===t?null:t-1,c=u$4(d),_=u$4(u);let p,v;const g=[...a].sort((t,e)=>t-e);this._isReversedLayout()?(p=_?this._positionFromValue(g[u]):l?h:0,v=c?this._positionFromValue(g[d]):l?0:h):(p=c?this._positionFromValue(g[d]):l?h:0,v=_?this._positionFromValue(g[u]):l?0:h);const b=this._applyPrecisionToPosition(100*v/h),f=(p-v)/h,x=l?`transform: translate(${b}%, 0px) scale(${f}, 1);`:`transform: translate(0px, ${b}%) scale(1, ${f});`,E=this.classes(z$i,H$b+t,s&&c&&_&&"disabled"!==r?U$f:null);return r$G("div",{afterCreate:this._afterSegmentCreate,afterRemoved:this._afterSegmentRemoved,bind:this,class:E,"data-max-thumb-index":d,"data-min-thumb-index":u,"data-segment-index":t,key:`${o}-segment-${t}`,style:x,"touch-action":"none"})}renderAnchorElements(){const{trackElement:t,values:e}=this;if(e&&e.length)return this._zIndices=e.map((t,i)=>{const n=this._positionFromValue(t),s=this._positionToPercent(n),o=(this._isHorizontalLayout()?s>50:s<50)?-1:1;return this._zIndexOffset+(e.length+o*i)}),t&&e&&e.length?e.map((t,e)=>this.renderAnchorElement(t,e)):null}renderAnchorElement(t,i){const n=this._positionFromValue(t),s=this._valueFromPosition(n);if(!u$4(s)||isNaN(s))return;const{_dragStartInfo:o,_lastMovedHandleIndex:r,id:a,layout:l,values:d,visibleElements:{labels:u}}=this,c=o&&o.index===i,_=r===i,p=this.classes(D$g,O$k+i,c?V$b:null,_?T$m:null),v=this.labels.values[i],g=this._getStyleForAnchor(t,i,c||_),{min:b,max:f}=this.viewModel.getBoundsForValueAtIndex(i),{messages:x}=this,E=2===d.length?s$v(0===i?x.rangeMinimum:x.rangeMaximum,{value:t}):v,y=1===d.length?null:0===i?`${a}-handle-${i+1}`:i===d.length-1?`${a}-handle-${i-1}`:`${a}-handle-${i-1} ${a}-handle-${i+1}`;return r$G("div",{afterCreate:this._afterAnchorCreate,afterUpdate:this._afterAnchorUpdate,afterRemoved:this._afterAnchorRemoved,"aria-controls":y,"aria-label":x.sliderValue,"aria-labelledby":u?`${a}-label-${i}`:null,"aria-orientation":l,"aria-valuemax":f.toString(),"aria-valuemin":b.toString(),"aria-valuenow":t.toString(),"aria-valuetext":E,bind:this,class:p,"data-thumb-index":i,"data-value":t,id:`${a}-handle-${i}`,key:`${a}-handle-${i}`,onkeydown:this._onAnchorKeyDown,"touch-action":"none",role:"slider",style:g,tabIndex:0},r$G("span",{afterCreate:this._afterThumbCreate,afterRemoved:this._afterThumbRemoved,bind:this,class:j$H,"data-thumb-index":i,"touch-action":"none"}),this.renderThumbLabel(i))}renderThumbLabel(t){const{id:e,labels:i,labelInputsEnabled:n,state:s}=this,o=this.visibleElements.labels,r=i.values[t],a=this.classes($$a,o?null:K$6,n&&"disabled"!==s?N$h:null);return r$G("span",{afterCreate:this._afterLabelCreate,afterRemoved:this._afterLabelRemoved,"aria-hidden":!o,bind:this,class:a,"data-thumb-index":t,key:`${e}-label-${t}`,id:`${e}-label-${t}`,role:n?"button":null,"touch-action":"none"},this._activeLabelInputIndex===t?this.renderValueInput(t):r)}renderValueInput(t){const e=this.values[t];return r$G("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.sliderValue,bind:this,class:R$j,"data-input-type":"thumb","data-input-index":t,required:!0,tabIndex:0,type:"text",value:this._formatInputValue(e,"value",t),onblur:this._onLabelInputBlur,onkeydown:this._onInputKeyDown})}renderMax(){const{_isMaxInputActive:t,labels:e,rangeLabelInputsEnabled:i,state:n}=this,s=this.visibleElements.rangeLabels,o=this.classes(S$u,s?null:K$6,i&&"disabled"!==n?w$G:null);return r$G("div",{"aria-hidden":!s,bind:this,class:o,onclick:this._onMaxLabelClick,onkeydown:this._onMaxLabelKeyDown,role:i?"button":null,tabIndex:i?0:null},t?this.renderMaxInput():e.max)}renderMin(){const{_isMinInputActive:t,labels:e,rangeLabelInputsEnabled:i,state:n}=this,s=this.visibleElements.rangeLabels,o=this.classes(M$o,s?null:K$6,i&&"disabled"!==n?C$j:null);return r$G("div",{"aria-hidden":!s,bind:this,class:o,onclick:this._onMinLabelClick,onkeydown:this._onMinLabelKeyDown,role:i?"button":null,tabIndex:i?0:null},t?this.renderMinInput():e.min)}renderMaxInput(){return r$G("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.maximumValue,bind:this,class:F$k,"data-input-type":"max",required:!0,tabIndex:0,type:"text",value:this._formatInputValue(this.max,"max"),onblur:this._onMaxInputBlur,onkeydown:this._onInputKeyDown})}renderMinInput(){return r$G("input",{afterCreate:this._afterInputCreate,"aria-label":this.messages.minimumValue,bind:this,class:F$k,"data-input-type":"min",required:!0,tabIndex:0,type:"text",value:this._formatInputValue(this.min,"min"),onblur:this._onMinInputBlur,onkeydown:this._onInputKeyDown})}renderExtraContentElements(){return r$G("div",{bind:this,class:P$j},this.extraNodes)}renderTicksContainer(){if(this.tickConfigs&&this.trackElement&&(0!==this._trackHeight||0!==this._trackWidth))return this.tickConfigs.map((t,e)=>r$G("div",{key:"ticks-container",class:this.classes(k$p)},this.renderTicks(t,e)))}renderTicks(t,e){const{mode:i,values:n}=t;if(this._tickElements[e]=[],"position"===i){const i=Array.isArray(n)?n:[n];return this._calculateTickPositions(i).map((i,n)=>this.renderTickGroup(t,n,e,i))}if("percent"===i&&Array.isArray(n)){const{max:i,min:s}=this,o=i-s,r=n.map(t=>this._applyPrecisionToPosition(t/100*o+s));return this._calculateTickPositions(r).map((i,n)=>this.renderTickGroup(t,n,e,i))}const s=Array.isArray(n)&&n.length?n[0]:isNaN(n)?null:n,o=this._getTickCounts(s,t);return this._calculateEquidistantTickPositions(o).map((i,n)=>this.renderTickGroup(t,n,e,i))}renderTickGroup(t,i,n,s){const o="position"===t.mode?Array.isArray(t.values)?t.values[i]:t.values:this._valueFromPosition(s);if(u$4(o)&&!isNaN(o))return r$G("div",{afterCreate:this._afterTickGroupCreate,bind:this,"data-config":t,"data-position":s,"data-tick-config-index":n,"data-tick-group-index":i,"data-value":o,key:"tick-group-"+i},this.renderTickLine(t,i,n,o),t.labelsVisible?this.renderTickLabel(t,i,n,o):null)}renderTickLine(t,e,i,n){return r$G("div",{afterCreate:this._afterTickLineCreate,"aria-valuenow":n.toString(),bind:this,class:A$m,"data-tick-config-index":i,"data-tick-group-index":e,"data-value":n,key:"tick-label-"+e,style:this._getPositionStyleForElement(n)})}renderTickLabel(t,e,i,n){const s=t.labelFormatFunction?t.labelFormatFunction(n,"tick",e):this.viewModel.getLabelForValue(n,"tick",e);return r$G("div",{afterCreate:this._afterTickLabelCreate,"aria-label":s,"aria-valuenow":n.toString(),"aria-valuetext":s,bind:this,class:L$k,"data-tick-config-index":i,"data-tick-group-index":e,"data-value":n,key:"tick-label-"+e,style:"transform: translate(-50%); "+this._getPositionStyleForElement(n)},s)}_afterBaseNodeCreate(t){this._baseNode&&this._observer.unobserve(this._baseNode),this._baseNode=t,this._observer.observe(this._baseNode);}_afterTrackCreate(t){m$H.call(this,t),e$1h.applyLocal(t),t.addEventListener("pointerdown",this._onTrackPointerDown),this.scheduleRender();}_afterSegmentCreate(t){this._segmentElements.push(t),e$1h.applyLocal(t),t.addEventListener("pointerdown",this._onSegmentPointerDown);}_afterSegmentRemoved(t){const e=this._segmentElements.indexOf(t,0);e>-1&&this._segmentElements.splice(e,1),t.removeEventListener("pointerdown",this._onSegmentPointerDown);}_afterAnchorCreate(t){if(this._anchorElements.push(t),e$1h.applyLocal(t),t.addEventListener("pointerdown",this._onAnchorPointerDown),this.thumbCreatedFunction){const e=t["data-thumb-index"],i=t["data-value"],n=this._thumbElements[e]||null,s=this._labelElements[e]||null;this.thumbCreatedFunction(e,i,n,s);}}_afterAnchorUpdate(t){if(u$4(this._focusedAnchorIndex)){t["data-thumb-index"]===this._focusedAnchorIndex&&(t.focus(),this._focusedAnchorIndex=null);}}_afterAnchorRemoved(t){const e=this._anchorElements.indexOf(t,0);e>-1&&this._anchorElements.splice(e,1),t.removeEventListener("pointerdown",this._onAnchorPointerDown);}_afterThumbCreate(t){this._thumbElements.push(t);}_afterThumbRemoved(t){const e=this._thumbElements.indexOf(t,0);e>-1&&this._thumbElements.splice(e,1);}_afterLabelCreate(t){this._labelElements.push(t),e$1h.applyLocal(t),t.addEventListener("pointerdown",this._onLabelPointerDown),t.addEventListener("pointerup",this._onLabelPointerUp);}_afterLabelRemoved(t){const e=this._labelElements.indexOf(t,0);e>-1&&this._labelElements.splice(e,1),t.removeEventListener("pointerdown",this._onLabelPointerDown),t.removeEventListener("pointerup",this._onLabelPointerUp);}_afterInputCreate(t){if(t.focus(),t.select(),this.inputCreatedFunction){const e=t.getAttribute("data-input-type"),i="thumb"===e?t["data-input-index"]:null;this.inputCreatedFunction(t,e,i);}}_afterTickLineCreate(t){const e=t["data-tick-config-index"],i=t["data-tick-group-index"],n=this._tickElements[e];n[i]?n[i].line=t:n[i]={line:t,label:null};}_afterTickLabelCreate(t){const e=t["data-tick-config-index"],i=t["data-tick-group-index"],n=this._tickElements[e];n[i]?n[i].label=t:n[i]={label:t,line:null};}_afterTickGroupCreate(t){const e=t["data-config"];if(e&&e.tickCreatedFunction){const i=t["data-tick-config-index"],n=t["data-tick-group-index"],s=t["data-value"],o=this._tickElements[i][n];if(o){const t=o.line||null,i=o.label||null;e.tickCreatedFunction(s,t,i);}}}_onAnchorKeyDown(t){if(this._isDisabled()||"editing"===this.state)return;const{target:i}=t,n=i$j(t),{_anchorElements:s,values:o}=this,r=i["data-thumb-index"],a=s[r],h=o[r],d=this._isHorizontalLayout(),u=[G$h.moveAnchorUp,G$h.moveAnchorDown,G$h.moveAnchorLeft,G$h.moveAnchorRight];if(n===G$h.showInput&&this.labelInputsEnabled)this._activeLabelInputIndex=r,this.notifyChange("state");else if(u.indexOf(n)>-1){t.preventDefault();const{steps:i}=this,s=n===G$h.moveAnchorUp||n===G$h.moveAnchorRight?1:-1;if(u$4(i))this._toStep(r,this._isReversedLayout()?-1*s:s);else {const t=this._getPositionOfElement(a),e=this._isHorizontalLayout()?s:-1*s,i=t+e,n=0===this.precision?this._positionFromValue(this._valueFromPosition(i)+e):i;this._toPosition(r,n);}const o=this.values[r];h!==o&&this._emitThumbChangeEvent({index:r,oldValue:h,value:o});}else if(n===G$h.moveAnchorToMax||n===G$h.moveAnchorToMin){t.preventDefault();const{min:e,max:i}=this._getAnchorBoundsInPixels(r),s=d?n===G$h.moveAnchorToMax?i:e:n===G$h.moveAnchorToMin?i:e;this._toPosition(r,s);const o=this.values[r];h!==o&&this._emitThumbChangeEvent({index:r,oldValue:h,value:o});}}_onAnchorPointerDown(t){if(this._isDisabled())return;const{target:e,clientX:i,clientY:n}=t,s=e["data-thumb-index"];void 0!==s&&(t.preventDefault(),this._anchorElements[s]&&this._anchorElements[s].focus(),this._storeTrackDimensions(),this._dragStartInfo={clientX:i,clientY:n,index:s,position:this._getPositionOfElement(this._anchorElements[s])},this.notifyChange("state"),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove));}_onAnchorPointerMove(t){if("editing"===this.state||!this._dragStartInfo)return;t.preventDefault();const{values:e,_anchorElements:i,_dragged:n,_dragStartInfo:s,_dragStartInfo:{index:o,position:r}}=this,{clientX:a,clientY:l}=t,h=n?"drag":"start",d=i[o],u=this._getPositionOfElement(d),c=this._applyPrecisionToPosition(this._isHorizontalLayout()?r+a-s.clientX:r+l-s.clientY);if(u===c)return;const m=e[o];this._dragged=!0,this._toPosition(o,c);const _=this.values[o];n?m!==_&&this._emitThumbDragEvent({index:o,state:h,value:_}):this._emitThumbDragEvent({index:o,state:h,value:m});}_onAnchorPointerUp(t){if(document.removeEventListener("pointerup",this._onAnchorPointerUp),document.removeEventListener("pointermove",this._onAnchorPointerMove),!this._dragStartInfo)return;t.preventDefault();const{index:e}=this._dragStartInfo,i=this._dragged;this._dragged=!1,this._dragStartInfo=null,this._lastMovedHandleIndex=e,i?(this.notifyChange("state"),this._emitThumbDragEvent({index:e,state:"stop",value:this.values[e]})):this.scheduleRender();}_onTrackPointerDown(t){const{_dragStartInfo:i,snapOnClickEnabled:n,state:s,values:o}=this;if(this._isDisabled()||"editing"===s||i||!n||!o.length)return;const{steps:r}=this,{clientX:a,clientY:l}=t,h=this._getCursorPositionFromEvent(t),d=this._valueFromPosition(h),u=this._getIndexOfNearestValue(d);if(!u$4(u))return;const c=o[u],m=u$4(r)?this._calculateNearestStepPosition(h):h;this._toPosition(u,m),this._dragged=!0,this._dragStartInfo={clientX:a,clientY:l,index:u,position:m},this._focusedAnchorIndex=u,this.notifyChange("state"),this._emitThumbDragEvent({index:u,state:"start",value:c});const _=this.values[u];c!==_&&this._emitThumbDragEvent({index:u,state:"drag",value:_}),document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove);}_onSegmentPointerDown(t){t.preventDefault();const{draggableSegmentsEnabled:i}=this,n=t.target,s=n["data-segment-index"],o=n["data-min-thumb-index"],r=n["data-max-thumb-index"];!this._isDisabled()&&i&&u$4(o)&&u$4(r)&&(t.stopPropagation(),this._storeTrackDimensions(),this._segmentDragStartInfo={cursorPosition:this._getCursorPositionFromEvent(t),index:s,details:this._normalizeSegmentDetails({min:this._getAnchorDetails(o),max:this._getAnchorDetails(r)})},this.notifyChange("state"),this._emitSegmentDragEvent({index:s,state:"start",thumbIndices:[o,r]}),document.addEventListener("pointerup",this._onSegmentPointerUp),document.addEventListener("pointermove",this._onSegmentPointerMove));}_onSegmentPointerMove(t){if(!this._segmentDragStartInfo)return;t.preventDefault();const{_trackHeight:e,_trackWidth:i,_segmentDragStartInfo:{index:n,cursorPosition:s,details:{min:o,max:r}}}=this,{index:a,position:l,value:h}=o,{index:d,position:u,value:c}=r;this._dragged=!0;const m=this._getCursorPositionFromEvent(t);if(m===s)return;const _=this._positionToPercent(s),p=this._positionToPercent(m)-_,v=this._positionToPercent(l)+p,g=this._positionToPercent(u)+p,{min:b}=this._getAnchorBoundsAsPercents(a),{max:f}=this._getAnchorBoundsAsPercents(d);let x=!1,E=!1;if(v<b?x=!0:g>f&&(E=!0),x){const{min:t,max:e}=this.viewModel.getBoundsForValueAtIndex(a),i=this._isPositionInverted()?e:t,n=i,s=c+(i-h);return void this._updateAnchorValues([a,d],[n,s])}if(E){const{min:t,max:e}=this.viewModel.getBoundsForValueAtIndex(d),i=this._isPositionInverted()?t:e,n=i,s=h+(i-c);return void this._updateAnchorValues([a,d],[s,n])}const y=this._isHorizontalLayout()?i:e,P=g/100*y,I=v/100*y,k=this.values,A=[k[a],k[d]],L=this._getValueForAnchorAtPosition(a,I),S=this._getValueForAnchorAtPosition(d,P);this._updateAnchorValues([a,d],[L,S]);[this.values[a],this.values[d]].every((t,e)=>t===A[e])||this._emitSegmentDragEvent({index:n,state:"drag",thumbIndices:[a,d]});}_onSegmentPointerUp(t){if(t.preventDefault(),document.removeEventListener("pointerup",this._onSegmentPointerUp),document.removeEventListener("pointermove",this._onSegmentPointerMove),!this._segmentDragStartInfo)return;const{max:e,min:i,values:n}=this,{index:s,details:{min:{index:o},max:{index:r}}}=this._segmentDragStartInfo,a=e-i,l=n[o],h=n[r];this._lastMovedHandleIndex=l===h?l>a/2?o:r:null,this._dragged=!1,this._segmentDragStartInfo=null,this.notifyChange("state"),this._emitSegmentDragEvent({index:s,state:"stop",thumbIndices:[o,r]});}_storeTrackDimensions(){if(this.trackElement){const t=this._getDimensions(this.trackElement);this._trackHeight=t.height,this._trackWidth=t.width;}}_onLabelPointerDown(){this._isDisabled()||(this._dragged=!1,document.addEventListener("pointerup",this._onAnchorPointerUp),document.addEventListener("pointermove",this._onAnchorPointerMove));}_onLabelPointerMove(){this._isDisabled()||(this._dragged=!0);}_onLabelPointerUp(t){if(this._isDisabled())return;const i=t.target["data-thumb-index"];this.labelInputsEnabled&&!this._dragged&&u$4(i)&&(this._activeLabelInputIndex=i),this._dragged=!1,this.notifyChange("state"),document.removeEventListener("pointerup",this._onLabelPointerUp),document.removeEventListener("pointermove",this._onLabelPointerMove);}_onLabelInputBlur(t){const{_activeLabelInputIndex:e,values:i,viewModel:n}=this,s=t.target.value;if(this._activeLabelInputIndex=null,this.notifyChange("state"),!s)return;const o=this._parseInputValue(s,"value",e),r=i[e],{min:a,max:l}=this.viewModel.getBoundsForValueAtIndex(e);if(o<a||o>l)return;n.setValue(e,o);const h=this.values[e];r!==h&&this._emitThumbChangeEvent({index:e,oldValue:r,value:h});}_onInputKeyDown(t){if(this._isDisabled())return;const{target:i}=t,n=i$j(t),{hideInput1:s,hideInput2:o,hideInput3:r}=G$h,{_activeLabelInputIndex:a,_anchorElements:h}=this,d=i;if(n===s||n===o||n===r){t.stopPropagation();const i=a;d.blur(),u$4(i)?h[i].focus():d.parentElement.focus();}}_onMaxLabelClick(){!this._isDisabled()&&this.rangeLabelInputsEnabled&&(this._isMaxInputActive=!0,this.notifyChange("state"));}_onMaxLabelKeyDown(t){this._isDisabled()||i$j(t)!==G$h.showInput||(this._isMaxInputActive=!0,this.notifyChange("state"));}_onMaxInputBlur(t){const e=t.target.value;if(this._isMaxInputActive=!1,this.notifyChange("state"),!e)return;const i=this.max,n=this._parseInputValue(e,"max");n<=this.min||(this.viewModel.set("max",n),this.max!==i&&this._emitMaxChangeEvent({oldValue:i,value:this.max}));}_onMinLabelClick(){!this._isDisabled()&&this.rangeLabelInputsEnabled&&(this._isMinInputActive=!0,this.notifyChange("state"));}_onMinLabelKeyDown(t){this._isDisabled()||i$j(t)!==G$h.showInput||(this._isMinInputActive=!0,this.notifyChange("state"));}_onMinInputBlur(){const t=event.target.value;if(this._isMinInputActive=!1,this.notifyChange("state"),!t)return;const e=this.min,i=this._parseInputValue(t,"min");i>=this.max||(this.viewModel.set("min",i),this.min!==e&&this._emitMinChangeEvent({oldValue:e,value:this.min}));}_isDisabled(){return this.disabled||"disabled"===this.state}_positionFromValue(t){const{max:e,min:i}=this,n=e-i;if(0===n)return 0;const{_trackHeight:s,_trackWidth:o}=this,r=this._isHorizontalLayout();let a=r?parseFloat((o*(t-i)/n).toFixed(2)):parseFloat((s*(e-t)/n).toFixed(2));return this._isReversedLayout()&&(a=r?o-a:s-a),a}_valueFromPosition(t){const{_trackHeight:e,_trackWidth:i,max:n,min:s,precision:o}=this,r=n-s;let a=this._isHorizontalLayout()?t*r/i+s:r*(1e3-t/e*1e3)/1e3+s;return this._isReversedLayout()&&(a=n+s-a),parseFloat(a.toFixed(o))}_positionToPercent(t){const{_trackHeight:e,_trackWidth:i}=this,n=100*t/(this._isHorizontalLayout()?i:e);return this._applyPrecisionToPosition(n)}_applyPrecisionToPosition(t){return parseFloat(t.toFixed(this._positionPrecision))}_isPositionInverted(){const{layout:t}=this;return "horizontal-reversed"===t||"vertical"===t}_isHorizontalLayout(){return this.layout.indexOf("horizontal")>-1}_isReversedLayout(){return this.layout.indexOf("reversed")>-1}_normalizeSegmentDetails(t){if(this._isPositionInverted()){const{min:e,max:i}=t;return {min:i,max:e}}return t}_parseInputValue(t,e,i){return this.inputParseFunction?this.inputParseFunction(t,e,i):this.viewModel.defaultInputParseFunction(t)}_formatInputValue(t,e,i){return this.inputFormatFunction?this.inputFormatFunction(t,e,i):this.viewModel.defaultInputFormatFunction(t)}_getAnchorDetails(t){return {index:t,position:this._getPositionOfElement(this._anchorElements[t]),value:this.values[t]}}_updateAnchorStyle(t,e){const i=this._anchorElements[t];i&&(this._isHorizontalLayout()?i.style.left=""+e:i.style.top=""+e);}_getStyleForAnchor(t,e,i){const n=this._getPositionStyleForElement(t);if(1===this.values.length)return ""+n;const s=this._zIndices[e];return `${n}; z-index: ${i?this._zIndexOffset+s:s}`}_getPositionStyleForElement(t){const e=this._positionFromValue(t),i=this._positionToPercent(e);return `${this._isHorizontalLayout()?"left":"top"}: ${i+"%"}`}_getPositionOfElement(t){const e=this._getDimensions(t.offsetParent),i=this._getDimensions(t);return this._isHorizontalLayout()?this._applyPrecisionToPosition(i.left-e.left):this._applyPrecisionToPosition(i.top-e.top)}_updateAnchorValues(t,e){t.forEach((t,i)=>this._toValue(t,e[i]));}_toValue(t,i){if(u$4(this.steps)){i=this._getStepValues()[this._getIndexOfNearestStepValue(i)];}this._updateAnchorStyle(t,this._getPositionStyleForElement(i)),this.viewModel.setValue(t,i);}_toPosition(t,i){const n=u$4(this.steps)?this._getStepValueForAnchorAtPosition(t,i):this._getValueForAnchorAtPosition(t,i);this._updateAnchorStyle(t,this._getPositionStyleForElement(n)),this.viewModel.setValue(t,n);}_getValueForAnchorAtPosition(t,e){const{min:i,max:n}=this._getAnchorBoundsInPixels(t),{min:s,max:o}=this.viewModel.getBoundsForValueAtIndex(t);let r,a,l=null;return this._isPositionInverted()?(r=s,a=o):(r=o,a=s),l=e>n?r:e<i?a:this._valueFromPosition(e),l>o?l=o:l<s&&(l=s),l}_getStepValueForAnchorAtPosition(t,e){const i=this._getStepValues(),n=this._calculateNearestStepPosition(e),s=this._getValueForAnchorAtPosition(t,n);return i[this._getIndexOfNearestStepValue(s)]}_getAnchorBoundsAsPercents(t){const{min:e,max:i}=this._getAnchorBoundsInPixels(t);return {min:this._positionToPercent(e),max:this._positionToPercent(i)}}_getAnchorBoundsInPixels(t){const{_anchorElements:e,_trackHeight:i,_trackWidth:n,thumbsConstrained:s}=this,o=e[t-1],r=e[t+1],a=this._isHorizontalLayout()?n:i;return s?this._isPositionInverted()?{max:o?this._getPositionOfElement(o):a,min:r?this._getPositionOfElement(r):0}:{max:r?this._getPositionOfElement(r):a,min:o?this._getPositionOfElement(o):0}:{max:a,min:0}}_getIndexOfNearestValue(t){return this.values.indexOf(this.values.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e))}_getCursorPositionFromEvent(t){const e=this._getDimensions(this.trackElement);return this._isHorizontalLayout()?t.clientX-e.left:t.clientY-e.top}_getStepValues(){const{steps:t}=this;if(Array.isArray(t))return t;const{max:e,min:i}=this,n=Math.ceil((e-i)/t),s=[];for(let o=0;o<=n;o++){const n=i+t*o;s.push(n>e?e:n);}return s}_toStep(t,e){const{values:i,viewModel:n}=this,s=i[t],o=this._getStepValues(),r=o.indexOf(s);let a=null;if(r>-1){const i=o[r+e],n=this._positionFromValue(i);a=this._getStepValueForAnchorAtPosition(t,n);}else {a=o[this._getIndexOfNearestStepValue(s)+e];}n.setValue(t,a);}_getIndexOfNearestStepValue(t){const{steps:i}=this;if(!u$4(i))return null;const n=this._getStepValues(),s=n.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e);return n.indexOf(s)}_calculateNearestStepPosition(t){const e=this._valueFromPosition(t),i=this._getIndexOfNearestStepValue(e),n=this._getStepValues();return this._positionFromValue(n[i])}_getTickCounts(t,e){const{mode:i}=e;return "count"===i||"position"===i?t||0:"percent"===i&&100/t||0}_calculateTickPositions(t){return t.map(t=>this._positionFromValue(t))}_calculateEquidistantTickPositions(t){const{_trackWidth:e,_trackHeight:i}=this,n=this._isHorizontalLayout()?e:i,s=n/(t-1),o=[];if(1===t)return [n/2];for(let e=0;e<t;e++){const t=e*s;t<=n&&o.push(t);}return o}_getDimensions(t){try{return t.getBoundingClientRect()}catch(t){if("object"==typeof t&&null!==t)return {top:0,bottom:0,left:0,width:0,height:0,right:0};throw t}}_emitMaxChangeEvent(t){this.emit("max-change",{...t,type:"max-change"});}_emitMinChangeEvent(t){this.emit("min-change",{...t,type:"min-change"});}_emitThumbChangeEvent(t){this.emit("thumb-change",{...t,type:"thumb-change"});}_emitThumbDragEvent(t){this.emit("thumb-drag",{...t,type:"thumb-drag"});}_emitSegmentDragEvent(t){this.emit("segment-drag",{...t,type:"segment-drag"});}};e([y$5(),o$U()],q$g.prototype,"disabled",void 0),e([y$5()],q$g.prototype,"extraNodes",void 0),e([y$5(),o$U()],q$g.prototype,"draggableSegmentsEnabled",void 0),e([y$5()],q$g.prototype,"inputCreatedFunction",void 0),e([o$M("viewModel.inputFormatFunction")],q$g.prototype,"inputFormatFunction",void 0),e([o$M("viewModel.inputParseFunction")],q$g.prototype,"inputParseFunction",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],q$g.prototype,"label",void 0),e([y$5()],q$g.prototype,"labelInputsEnabled",void 0),e([o$M("viewModel.labelFormatFunction")],q$g.prototype,"labelFormatFunction",void 0),e([o$M("viewModel.labels")],q$g.prototype,"labels",void 0),e([y$5(),o$U()],q$g.prototype,"labelsVisible",null),e([y$5({value:"horizontal"}),o$U()],q$g.prototype,"layout",null),e([o$M("viewModel.max")],q$g.prototype,"max",void 0),e([y$5(),o$U(),e$T("esri/widgets/Slider/t9n/Slider")],q$g.prototype,"messages",void 0),e([o$M("viewModel.min")],q$g.prototype,"min",void 0),e([o$M("viewModel.precision")],q$g.prototype,"precision",void 0),e([y$5()],q$g.prototype,"rangeLabelInputsEnabled",void 0),e([y$5(),o$U()],q$g.prototype,"rangeLabelsVisible",null),e([y$5()],q$g.prototype,"snapOnClickEnabled",void 0),e([y$5({dependsOn:["viewModel.state"],readOnly:!0}),o$U()],q$g.prototype,"state",null),e([y$5(),o$U()],q$g.prototype,"steps",void 0),e([o$M("viewModel.thumbsConstrained")],q$g.prototype,"thumbsConstrained",void 0),e([y$5()],q$g.prototype,"thumbCreatedFunction",void 0),e([y$5(),o$U()],q$g.prototype,"tickConfigs",void 0),e([y$5()],q$g.prototype,"trackElement",void 0),e([o$M("viewModel.values")],q$g.prototype,"values",void 0),e([y$5(),o$U(["viewModel.thumbsConstrained","viewModel.max","viewModel.min","viewModel.precision","viewModel.labelFormatFunction","viewModel.labels","viewModel.values"])],q$g.prototype,"viewModel",void 0),e([y$5(),o$U()],q$g.prototype,"visibleElements",void 0),e([i$b("visibleElements")],q$g.prototype,"castVisibleElements",null),q$g=e([n$e("esri.widgets.Slider")],q$g);var J$a=q$g;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let p$2m=class extends d$M{constructor(t){super(t),this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timerId=null,this.view=null;}initialize(){this.handles.add(d$C(this,["stops","fullTimeExtent"],()=>this._createDefaultValues()));}destroy(){null!=this.timerId&&(clearInterval(this.timerId),this.timerId=null),this.view=null;}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(!e)return [];if("dates"in e){const{dates:i}=e;if(null==i||0===i.length)return null;const r=i.sort((t,e)=>t.getTime()-e.getTime());return t?r.filter(e=>{const{start:i,end:r}=t;return !(e.getTime()<i.getTime()||e.getTime()>r.getTime())}):r}if("count"in e){const i=e.timeExtent||t;return this._divideTimeExtentByCount(i,e.count)}if("interval"in e){const i=e.timeExtent||t;return this._divideTimeExtentByInterval(i,e.interval)}return []}set playRate(t){t<=0||t>36e5||("playing"===this.state&&this._startAnimation(),this._set("playRate",t));}get state(){return this.values&&this.fullTimeExtent?this.timerId?"playing":"ready":"disabled"}get timeExtent(){const{mode:t,values:i}=this;if(!i||0===i.length)return null;switch(t){case"instant":return new d$O({start:i[0],end:i[0]});case"time-window":return i.length>1?new d$O({start:i[0],end:i[1]}):null;case"cumulative-from-start":return new d$O({start:null,end:i[0]});case"cumulative-from-end":return new d$O({start:i[0],end:null});default:return void r$6(t)}}set values(t){const{fullTimeExtent:e,view:i}=this;if(e){const{start:i,end:r}=e,s=i.getTime(),l=r.getTime();t=t&&t.filter(t=>t).map(t=>{const e=t.getTime(),i=e$z(e,s,l);return new Date(i)});}i&&(i.timeExtent=this._toTimeExtent(t)),this._set("values",t);}next(){this.values&&this.fullTimeExtent&&this._step({forward:!0,allowRestart:!1});}play(){this._clearAnimation(),this._startAnimation();}previous(){this._step({forward:!1,allowRestart:!1});}stop(){this._clearAnimation();}_clearAnimation(){null!=this.timerId&&(clearInterval(this.timerId),this.timerId=null);}_createDefaultValues(){const{fullTimeExtent:t,effectiveStops:e,mode:i,values:r}=this;t&&e&&i&&!r&&(this.values="time-window"===i?e.length>1?[e[0],e[1]]:null:e.length>0?[e[0]]:null);}_startAnimation(){this._step({forward:!0,allowRestart:!0}),this.timerId=setInterval(()=>{this._step({forward:!0,allowRestart:!1});},this.playRate);}_step(t){const{forward:e,allowRestart:i}=t,{effectiveStops:r,values:s}=this;if(!s||0===s.length||s.length>r.length)return;const n=r.map(t=>t.getTime()).sort((t,e)=>t-e),l=s.map(t=>t.getTime()).map(t=>{const e=n.indexOf(t);if(-1!==e)return e;const i=n.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e);return n.indexOf(i)}),o=l.map(t=>t+(e?1:-1)),a=o.some(t=>t<0||t>n.length-1),{loop:u,state:m}=this;if(a)if(u||i){const t=Math.min(...l),i=Math.max(...l),r=e?l.map(e=>e-t):l.map(t=>t+(n.length-1-i));this.values=r.map(t=>new Date(n[t]));}else "playing"===m&&this.stop();else this.values=o.map(t=>new Date(n[t]));}_divideTimeExtentByCount(t,e=10){if(!t||!e)return [];const{start:i,end:r}=t;if(!i||!r)return [];if(e>1e4)return this._divideTimeExtentByCount(t);const s=[],n=i.getTime(),l=r.getTime()-n;for(let t=0;t<=e;t++)s.push(new Date(n+t/e*l));return s}_divideTimeExtentByInterval(t,e,i=1e4){if(!t||!e)return [];const{start:r,end:s}=t;if(!r||!s)return [];if((s.getTime()-r.getTime())/e.toMilliseconds()>i)return this._divideTimeExtentByCount(t);const n=[],{value:o,unit:a}=e;let u=r;for(;u.getTime()<=s.getTime();)n.push(new Date(u.getTime())),u=n$14(u,o,a);return n}_toTimeExtent(t){if(!t||0===t.length)return null;const e=t[0],i=t.length>1?t[1]:t[0];switch(this.mode){case"instant":case"time-window":return new d$O({start:e,end:i});case"cumulative-from-start":return new d$O({start:null,end:e});case"cumulative-from-end":return new d$O({start:e,end:null});default:return null}}};e([y$5({dependsOn:["stops","fullTimeExtent"],readOnly:!0})],p$2m.prototype,"effectiveStops",null),e([y$5({type:d$O})],p$2m.prototype,"fullTimeExtent",void 0),e([y$5({nonNullable:!0})],p$2m.prototype,"loop",void 0),e([y$5({nonNullable:!0})],p$2m.prototype,"mode",void 0),e([y$5({nonNullable:!0,value:1e3})],p$2m.prototype,"playRate",null),e([y$5({dependsOn:["fullTimeExtent","timerId","values"],readOnly:!0})],p$2m.prototype,"state",null),e([y$5({cast:t=>t?("interval"in t&&(t.interval=d$2(l$1F,t.interval)),"timeExtent"in t&&(t.timeExtent=d$2(d$O,t.timeExtent)),t):null})],p$2m.prototype,"stops",void 0),e([y$5({dependsOn:["values"],readOnly:!0})],p$2m.prototype,"timeExtent",null),e([y$5()],p$2m.prototype,"timerId",void 0),e([y$5({value:null})],p$2m.prototype,"values",null),e([y$5()],p$2m.prototype,"view",void 0),e([y$5()],p$2m.prototype,"next",null),e([y$5()],p$2m.prototype,"play",null),e([y$5()],p$2m.prototype,"previous",null),e([y$5()],p$2m.prototype,"stop",null),p$2m=e([n$e("esri.widgets.TimeSlider.TimeSliderViewModel")],p$2m);var d$1o=p$2m;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const x$y="esri-icon-time-clock",T$n="esri-widget",M$p="esri-widget--button",C$k="esri-button--disabled",S$v="esri-disabled",F$l="esri-time-slider",E$n="esri-time-slider__mode--",L$l="esri-time-slider__layout--",U$g="esri-time-slider__row",V$c="esri-time-slider__animation",D$h="esri-time-slider__animation-button",O$l="esri-icon-play",A$n="esri-icon-pause",P$k="esri-time-slider__time-extent",R$k="esri-time-slider__time-extent-group",$$b="esri-time-slider__time-extent-date",W$a="esri-time-slider__time-extent-time",z$j="esri-time-slider__time-extent-separator",I$l="esri-time-slider__min",N$i="esri-time-slider__min-date",B$i="esri-time-slider__slider",G$i="majorTick",H$c="minorTick",q$h="esri-time-slider__max",J$b="esri-time-slider__max-date",K$7="esri-time-slider__previous",Q$7="esri-time-slider__previous-button",X$7="esri-icon-reverse",Y$7="esri-time-slider__next",Z$4="esri-time-slider__next-button",ee$2="esri-icon-forward",te$2=new L$2([{minor:new l$1F({value:100,unit:"milliseconds"}),major:new l$1F({value:1,unit:"seconds"}),format:{second:"numeric"}},{minor:new l$1F({value:500,unit:"milliseconds"}),major:new l$1F({value:5,unit:"seconds"}),format:{second:"numeric"}},{minor:new l$1F({value:1,unit:"seconds"}),major:new l$1F({value:20,unit:"seconds"}),format:{minute:"numeric",second:"numeric"}},{minor:new l$1F({value:2,unit:"seconds"}),major:new l$1F({value:30,unit:"seconds"}),format:{minute:"numeric",second:"numeric"}},{minor:new l$1F({value:10,unit:"seconds"}),major:new l$1F({value:1,unit:"minutes"}),format:{minute:"numeric"}},{minor:new l$1F({value:15,unit:"seconds"}),major:new l$1F({value:5,unit:"minutes"}),format:{hour:"numeric",minute:"numeric"}},{minor:new l$1F({value:1,unit:"minutes"}),major:new l$1F({value:20,unit:"minutes"}),format:{hour:"numeric",minute:"numeric"}},{minor:new l$1F({value:5,unit:"minutes"}),major:new l$1F({value:2,unit:"hours"}),format:{hour:"numeric",minute:"numeric"}},{minor:new l$1F({value:15,unit:"minutes"}),major:new l$1F({value:6,unit:"hours"}),format:{hour:"numeric",minute:"numeric"}},{minor:new l$1F({value:1,unit:"hours"}),major:new l$1F({value:1,unit:"days"}),format:{day:"numeric",month:"short"}},{minor:new l$1F({value:6,unit:"hours"}),major:new l$1F({value:1,unit:"weeks"}),format:{day:"numeric",month:"short"}},{minor:new l$1F({value:1,unit:"days"}),major:new l$1F({value:1,unit:"months"}),format:{month:"long"}},{minor:new l$1F({value:2,unit:"days"}),major:new l$1F({value:1,unit:"months"}),format:{month:"short"}},{minor:new l$1F({value:3,unit:"days"}),major:new l$1F({value:1,unit:"months"}),format:{month:"short"}},{minor:new l$1F({value:4,unit:"days"}),major:new l$1F({value:3,unit:"months"}),format:{month:"short",year:"numeric"}},{minor:new l$1F({value:1,unit:"weeks"}),major:new l$1F({value:1,unit:"years"}),format:{year:"numeric"}},{minor:new l$1F({value:1,unit:"months"}),major:new l$1F({value:1,unit:"years"}),format:{year:"numeric"}},{minor:new l$1F({value:2,unit:"months"}),major:new l$1F({value:2,unit:"years"}),format:{year:"numeric"}},{minor:new l$1F({value:1,unit:"years"}),major:new l$1F({value:1,unit:"decades"}),format:{year:"numeric"}},{minor:new l$1F({value:2,unit:"years"}),major:new l$1F({value:5,unit:"decades"}),format:{year:"numeric"}},{minor:new l$1F({value:5,unit:"decades"}),major:new l$1F({value:10,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:1,unit:"centuries"}),major:new l$1F({value:10,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:2,unit:"centuries"}),major:new l$1F({value:20,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:5,unit:"centuries"}),major:new l$1F({value:50,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:10,unit:"centuries"}),major:new l$1F({value:100,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:20,unit:"centuries"}),major:new l$1F({value:200,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:50,unit:"centuries"}),major:new l$1F({value:500,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:100,unit:"centuries"}),major:new l$1F({value:1e3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:200,unit:"centuries"}),major:new l$1F({value:1e3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:500,unit:"centuries"}),major:new l$1F({value:5e3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new l$1F({value:1e3,unit:"centuries"}),major:new l$1F({value:1e4,unit:"centuries"}),format:{era:"short",year:"numeric"}}]);let ie$1=class extends C$7{constructor(e,t){super(e,t),this._slider=new J$a({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1}),this._tickFormat=null,this.disabled=!1,this.effectiveStops=null,this.fullTimeExtent=null,this.iconClass=x$y,this.label=void 0,this.labelFormatFunction=null,this.loop=!1,this.messages=null,this.messagesCommon=null,this.mode="time-window",this.playRate=1e3,this.stops={count:10},this.tickConfigs=null,this.timeExtent=null,this.timeVisible=!1,this.values=null,this.view=null,this.viewModel=new d$1o;}initialize(){this.own([this._slider.watch("values",e=>{var t;const i=null==(t=this.values)?void 0:t.map(e=>e.getTime());s$j(e,i)||this.set("values",e.map(e=>new Date(e)));}),r$d(window,"resize",e$S(()=>this.scheduleRender(),100)),d$C(this,"effectiveStops",()=>this._updateSliderSteps())]),this._validateTimeExtent();}destroy(){this._slider.destroy(),this._tickFormat=null;}get interactive(){return !this.disabled&&this.viewModel&&"disabled"!==this.viewModel.state}set layout(e){-1===["auto","compact","wide"].indexOf(e)&&(e="auto"),this._set("layout",e);}next(){}play(){}previous(){}stop(){return null}render(){var e;const{_slider:t,domNode:i,effectiveStops:s,fullTimeExtent:r,interactive:o,messagesCommon:a,mode:l,tickConfigs:u,timeVisible:d,values:c,viewModel:v}=this;if(null!=r){const{start:e,end:i}=r;if(null!=e&&null!=i){const s=e.getTime(),r=i.getTime(),o=t.min!==s||t.max!==r;if(o&&(t.min=s,t.max=r),null!=u)t.tickConfigs!==u&&(t.tickConfigs=u);else {var p,h;const e=(r-s)/(null!=(p=null==(h=t.trackElement)?void 0:h.offsetWidth)?p:400),i=te$2.find(t=>t.minor.toMilliseconds()>3*e),a=this._tickFormat!==i&&null!=i;if(a&&(this._tickFormat=i),o||a){const e={mode:"position",values:this._getTickPositions(i.minor),labelsVisible:!1,tickCreatedFunction:(e,t)=>{t.classList.add(H$c);}},s={mode:"position",values:this._getTickPositions(i.major),labelsVisible:!0,tickCreatedFunction:(e,t)=>{t.classList.add(G$i);},labelFormatFunction:e=>M$5(e,i.format)};t.tickConfigs=[e,s];}}}}const w=null==c?void 0:c.map(e=>e.getTime());s$j(t.values,w)||(t.values=w),t.disabled=!o;const f=null==r?void 0:r.start,y=null==r?void 0:r.end,_=null!=(e=null==c?void 0:c.length)?e:0,j=_&&this._formatDate(c[0]),g=_&&d&&this._formatTime(c[0]),k=_>1&&"time-window"===l&&this._formatDate(c[1]),x=_>1&&"time-window"===l&&d&&this._formatTime(c[1]),{state:ie}=v,se="ready"===ie,re="playing"===ie,oe=!o||0===s.length,ae="auto"===this.layout?i.clientWidth<858?"compact":"wide":this.layout,ne=r$G("div",{class:V$c},r$G("button",{"aria-disabled":oe?"true":"false","aria-label":re?a.control.stop:a.control.play,bind:this,class:this.classes(M$p,D$h,oe&&C$k),disabled:oe,title:re?a.control.stop:a.control.play,onclick:this._playOrStopClick,type:"button"},r$G("div",{class:this.classes((se||oe)&&O$l,re&&A$n)}))),le=this.labelFormatFunction?r$G("div",{key:"extent",bind:this,class:$$b,"data-type":"extent","data-layout":ae,"data-date":c,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[j&&r$G("div",{key:"start-date-group",class:R$k},r$G("div",{key:"start-date",class:$$b},j),g&&r$G("div",{key:"start-time",class:W$a},g)),k&&r$G("div",{key:"separator",class:z$j},""),j&&r$G("div",{key:"end-date-group",class:R$k},r$G("div",{key:"end-date",class:$$b},k),x&&r$G("div",{key:"end-time",class:W$a},x))],me=r$G("div",{class:this.classes(P$k,!o&&C$k)},[le]),ue=this.labelFormatFunction?r$G("div",{key:"min-date",bind:this,class:N$i,"data-date":f,"data-type":"min","data-layout":ae,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[f&&r$G("div",{key:"min-date",class:N$i},this._formatDate(f)),f&&d&&r$G("div",{key:"min-time"},this._formatTime(f))],de=r$G("div",{class:this.classes(I$l,!o&&C$k)},[ue]),ce=r$G("div",{class:B$i},t.render()),ve=this.labelFormatFunction?r$G("div",{key:"max-date",bind:this,class:J$b,"data-date":y,"data-type":"max","data-layout":ae,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[y&&r$G("div",{key:"max-date",class:J$b},this._formatDate(y)),y&&d&&r$G("div",{key:"max-time"},this._formatTime(y))],pe=r$G("div",{class:this.classes(q$h,!o&&C$k)},[ve]),he=r$G("div",{class:K$7},r$G("button",{"aria-disabled":oe?"true":"false","aria-label":a.pagination.previous,bind:this,class:this.classes(M$p,Q$7,(re||oe)&&C$k),disabled:oe,title:a.pagination.previous,onclick:this._previousClick,type:"button"},r$G("div",{class:X$7}))),we=r$G("div",{class:Y$7},r$G("button",{"aria-disabled":oe?"true":"false","aria-label":a.pagination.next,bind:this,class:this.classes(M$p,Z$4,(re||oe)&&C$k),disabled:oe,title:a.pagination.next,onclick:this._nextClick,type:"button"},r$G("div",{class:ee$2})));return r$G("div",{class:this.classes(F$l,T$n,`${E$n}${l}`,`${L$l}${ae}`,!o&&S$v)},"wide"===ae&&r$G("div",{class:U$g},[ne,me,de,ce,pe,he,we]),"compact"===ae&&[r$G("div",{key:"time-slider-row-1",class:U$g},[me]),r$G("div",{key:"time-slider-row-2",class:U$g},[ce]),r$G("div",{key:"time-slider-row-3",class:U$g},[de,he,ne,we,pe])])}_createLabel(e){const t=e.getAttribute("data-type"),i=e.getAttribute("data-layout"),s=e["data-date"];this.labelFormatFunction(s,t,e,i);}_getTickPositions(e){const{fullTimeExtent:t}=this,{start:i,end:s}=t,r=[],{value:o,unit:a}=e;let n=u$11(i,a);for(;n.getTime()<=s.getTime();)n.getTime()>=i.getTime()&&r.push(n.getTime()),n=n$14(n,o,a);return r}_formatDate(e){return M$5(e,L$3("short-date"))}_formatTime(e){return M$5(e,L$3("long-time"))}_updateSliderSteps(){this._slider.steps=this.effectiveStops&&this.effectiveStops.length>0?this.effectiveStops.map(e=>e.getTime()):null;}_validateTimeExtent(){if(this.fullTimeExtent&&this.mode&&this.values){if(!Array.isArray(this.values))throw new s$g("time-slider:invalid-values","Values must be an array of dates.");if(0===this.values.length||this.values.some(e=>!(e instanceof Date)))throw new s$g("time-slider:invalid-values","Values must be an array of dates.");switch(this.values=this.values.map(e=>{const t=e.getTime(),i=e$z(t,this.fullTimeExtent.start.getTime(),this.fullTimeExtent.end.getTime());return new Date(i)}),this.mode){case"instant":case"cumulative-from-start":case"cumulative-from-end":this.values.length>1&&this.values.splice(1);break;case"time-window":1===this.values.length?this.values.push(this.fullTimeExtent.end):this.values.length>2&&this.values.splice(2),this.values.sort((e,t)=>e.getTime()-t.getTime());break;default:r$6(this.mode);}}}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:r$6(this.viewModel.state);}}_previousClick(){this.viewModel.previous();}_nextClick(){this.viewModel.next();}};e([y$5()],ie$1.prototype,"disabled",void 0),e([o$M("viewModel.effectiveStops"),o$U()],ie$1.prototype,"effectiveStops",void 0),e([o$M("viewModel.fullTimeExtent"),o$U()],ie$1.prototype,"fullTimeExtent",void 0),e([y$5()],ie$1.prototype,"iconClass",void 0),e([y$5({dependsOn:["disabled","viewModel.state"],readOnly:!0}),o$U()],ie$1.prototype,"interactive",null),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ie$1.prototype,"label",void 0),e([y$5()],ie$1.prototype,"labelFormatFunction",void 0),e([y$5({value:"auto"}),o$U()],ie$1.prototype,"layout",null),e([o$M("viewModel.loop")],ie$1.prototype,"loop",void 0),e([y$5(),o$U(),e$T("esri/widgets/TimeSlider/t9n/TimeSlider")],ie$1.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/t9n/common")],ie$1.prototype,"messagesCommon",void 0),e([o$M("viewModel.mode"),o$U()],ie$1.prototype,"mode",void 0),e([o$M("viewModel.playRate")],ie$1.prototype,"playRate",void 0),e([o$M("viewModel.stops")],ie$1.prototype,"stops",void 0),e([y$5(),o$U()],ie$1.prototype,"tickConfigs",void 0),e([o$M("viewModel.timeExtent")],ie$1.prototype,"timeExtent",void 0),e([y$5({nonNullable:!0}),o$U()],ie$1.prototype,"timeVisible",void 0),e([o$M("viewModel.values"),o$U()],ie$1.prototype,"values",void 0),e([o$M("viewModel.view")],ie$1.prototype,"view",void 0),e([y$5({type:d$1o}),o$U(["viewModel.state"])],ie$1.prototype,"viewModel",void 0),e([o$M("viewModel.next")],ie$1.prototype,"next",null),e([o$M("viewModel.play")],ie$1.prototype,"play",null),e([o$M("viewModel.previous")],ie$1.prototype,"previous",null),e([o$M("viewModel.stop")],ie$1.prototype,"stop",null),e([n$Z()],ie$1.prototype,"_playOrStopClick",null),e([n$Z()],ie$1.prototype,"_previousClick",null),e([n$Z()],ie$1.prototype,"_nextClick",null),ie$1=e([n$e("esri.widgets.TimeSlider")],ie$1);var se$2=ie$1;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$1q(t,e,r,n){return function(t){return "function"==typeof t}(t)?t(e,r,n):t}function e$1y(t){return [t.r,t.g,t.b,t.a]}function r$1e(t,e,r){const a=t=>{let e=t.length;for(;e--;)if(-1===" /-,\n".indexOf(t.charAt(e)))return !1;return !0},i=[];let l=0,o=-1;do{if(o=e.indexOf("[",l),o>=l){if(o>l){const t=e.substr(l,o-l);i.push([t,null,a(t)]);}if(l=o+1,o=e.indexOf("]",l),o>=l){if(o>l){const r=t[e.substr(l,o-l)];r&&i.push([null,r,!1]);}l=o+1;}}}while(-1!==o);if(l<e.length-1){const t=e.substr(l);i.push([t,null,a(t)]);}return t=>{let e="",a=null;for(const r of i){const[n,i,l]=r;if(n)l?a=n:(a&&(e+=a,a=null),e+=n);else {const r=t.attributes[i];r&&(a&&(e+=a,a=null),e+=r);}}return n$1X(e,r)}}function n$1X(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function a$27(t,e,r,n,a,i,l=!0){const o=e/a,c=r/i,u=Math.ceil(o/2),M=Math.ceil(c/2);for(let r=0;r<i;r++)for(let s=0;s<a;s++){const f=4*(s+(l?i-r-1:r)*a);let p=0,C=0,y=0,I=0,h=0,k=0,d=0;const P=(r+.5)*c;for(let n=Math.floor(r*c);n<(r+1)*c;n++){const r=Math.abs(P-(n+.5))/M,a=(s+.5)*o,i=r*r;for(let r=Math.floor(s*o);r<(s+1)*o;r++){let l=Math.abs(a-(r+.5))/u;const o=Math.sqrt(i+l*l);o>=-1&&o<=1&&(p=2*o*o*o-3*o*o+1,p>0&&(l=4*(r+n*e),d+=p*t[l+3],y+=p,t[l+3]<255&&(p=p*t[l+3]/250),I+=p*t[l],h+=p*t[l+1],k+=p*t[l+2],C+=p));}}n[f]=I/C,n[f+1]=h/C,n[f+2]=k/C,n[f+3]=d/y;}}function i$2h(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function l$1M(t){var e;return null==(e=t.data)?void 0:e.symbol}function o$1u(t){return "CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function c$2s(t){return "CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function u$1Z(t){return "CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type}function M$q(t){return "CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$1Y(e){const c=l$1M(e);if("CIMTextSymbol"===c.type)return c.height;let s=0;if(c.symbolLayers)for(const e of c.symbolLayers)o$1u(e)&&e.size>s?s=e.size:c$2s(e)&&e.width>s?s=e.width:u$1Z(e);return s}function f$1p(e,t,o){if("CIMTextSymbol"!==e.type){if(o&&e.effects)for(const o of e.effects)m$1x(o,t);if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case"CIMPictureMarker":case"CIMVectorMarker":l$1N(o,t);break;case"CIMPictureStroke":case"CIMSolidStroke":o.width*=t;break;case"CIMPictureFill":o.height*=t,o.offsetX*=t,o.offsetY*=t;break;case"CIMHatchFill":f$1p(o.lineSymbol,t,!0),o.offsetX*=t,o.offsetY*=t,o.separation*=t;}}else e.height*=t;}function l$1N(e,t){if(e.markerPlacement&&function(e,t){M$q(e)&&(e.offset*=t);switch(e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(e=>e*t);e.placementTemplate=o;}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset*=t,e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(e=>e*t);e.placementTemplate=o;}break;case"CIMMarkerPlacementOnLine":e.startPointOffset*=t;break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine*=t;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition*=t,e.endPosition*=t;break;case"CIMMarkerPlacementPolygonCenter":e.offsetX*=t,e.offsetY*=t;break;case"CIMMarkerPlacementInsidePolygon":e.offsetX*=t,e.offsetY*=t,e.stepX*=t,e.stepY*=t;}}(e.markerPlacement,t),e.offsetX*=t,e.offsetY*=t,e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,"CIMVectorMarker"===e.type&&e.markerGraphics)for(const o of e.markerGraphics)e.scaleSymbolsProportionally||f$1p(o.symbol,t,!0);}function m$1x(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width*=t;break;case"CIMGeometricEffectBuffer":e.size*=t;break;case"CIMGeometricEffectCut":e.beginCut*=t,e.endCut*=t,e.middleCut*=t;break;case"CIMGeometricEffectDashes":if(e.customEndingOffset*=t,e.offsetAlongLine*=t,e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map(e=>e*t);e.dashTemplate=o;}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length*=t;break;case"CIMGeometricEffectMove":e.offsetX*=t,e.offsetY*=t;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset*=t;break;case"CIMGeometricEffectRegularPolygon":e.radius*=t;break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth*=t,e.length*=t,e.toWidth*=t;break;case"CIMGeometricEffectWave":e.amplitude*=t,e.period*=t;}}function M$r(o){const a=[];return y$11(l$1M(o),a),a.length?new o$H(i$2h(a[0])):null}function y$11(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const e of r.symbolLayers)if(!(e.colorLocked||s&&(c$2s(e)||o$1u(e)&&e.markerPlacement&&M$q(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":e.markerGraphics.forEach(e=>{y$11(e.symbol,t);});break;case"CIMSolidStroke":case"CIMSolidFill":C$l(t,e.color);break;case"CIMHatchFill":y$11(e.lineSymbol,t);}}function C$l(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t);}function k$q(o,a){a instanceof o$H||(a=new o$H(a));b$F(l$1M(o),a);}function b$F(e,t){let r;r="CIMTextSymbol"===e.type?e.symbol:e;const s="CIMPolygonSymbol"===e.type;if(r.symbolLayers)for(const e of r.symbolLayers){if(e.colorLocked)continue;if(s&&(c$2s(e)||o$1u(e)&&e.markerPlacement&&M$q(e.markerPlacement)))continue;const r=t.toArray(0);switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":e.markerGraphics.forEach(e=>{b$F(e.symbol,t);});break;case"CIMSolidStroke":case"CIMSolidFill":e.color=r;break;case"CIMHatchFill":b$F(e.lineSymbol,t);}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
class n$1Z{constructor(e,r){this._storage=new r$1a,this._storage.maxSize=e,r&&this._storage.registerRemoveFunc("",r);}put(t,e){this._storage.put(t,e,1,1);}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll();}destroy(){this._storage.clearAll();}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const l$1O=e$v("esri/symbols/patterns/"),m$1y=new n$1Z(1e3);function h$1n(t){const e=t.style;let r=null;if(t)switch(t.type){case"simple-marker":"cross"!==e&&"x"!==e&&(r=t.color);break;case"simple-fill":"solid"===e?r=t.color:"none"!==e&&(r={type:"pattern",x:0,y:0,src:l$1O+e+".png",width:5,height:5});break;case"picture-fill":r={type:"pattern",src:t.url,width:t$y(t.width)*t.xscale,height:t$y(t.height)*t.yscale,x:t$y(t.xoffset),y:t$y(t.yoffset)};break;case"text":r=t.color;break;case"cim":r=M$r(t);}return r}function d$1p(r,i){const o=r+"-"+i;return void 0!==m$1y.get(o)?D$1(m$1y.get(o)):j$3(r,{responseType:"image"}).then(t=>{const e=t.data,r=e.naturalWidth,n=e.naturalHeight,s=document.createElement("canvas");s.width=r,s.height=n;const l=s.getContext("2d");l.fillStyle=i,l.fillRect(0,0,r,n),l.globalCompositeOperation="destination-in",l.drawImage(e,0,0);const c=s.toDataURL();return m$1y.put(o,c),c})}function g$U(t){if(!t)return null;let e;switch(t.type){case"simple-fill":case"picture-fill":case"simple-marker":e=g$U(t.outline);break;case"simple-line":{const r=t$y(t.width);"none"!==t.style&&0!==r&&(e={color:t.color,style:y$12(t.style),width:r,cap:t.cap,join:"miter"===t.join?t$y(t.miterLimit):t.join});break}default:e=null;}return e}const y$12=function(){const t={};return function(e){if(t[e])return t[e];const r=e.replace(/-/g,"");return t[e]=r,r}}(),b$G=new o$H([128,128,128]);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const y$13=/\/resource\/(.*?)\.svg$/,p$2n=new o$H("white");function h$1o(e){if(!e)return 0;if(x$d(e)){const t=function(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1);return "outline"in r?w(r,"outline","size"):void 0}(e);return u$4(t)?t:0}const t=g$U(e);return t&&n$E(t.width)||0}function b$H(e){if(!e||!e.symbolLayers)return !1;switch(e.type){case"point-3d":return e.symbolLayers.some(e=>"object"===e.type);case"line-3d":return e.symbolLayers.some(e=>"path"===e.type);case"polygon-3d":return e.symbolLayers.some(e=>"object"===e.type||"extrude"===e.type);default:return !1}}function w$H(t,r){const o=r.resource.href;return !s("esri-canvas-svg-support")&&t.styleOrigin&&y$13.test(o)?o.replace(y$13,"/resource/png/$1.png"):o}async function g$V(e,o){const n=e.symbolLayers;n&&await n$x(n,async e=>async function(e,o){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0;}(e,o);break;case"icon":case"line":case"text":!function(e,t){const o=j$I(t);u$4(o)&&(e.size=o);}(e,o);break;case"path":!function(e,t){const r=L$m(t,l$13,[e.width,void 0,e.height]);e.width=z$k(t[0],e.width,1,r),e.height=z$k(t[2],e.height,1,r);}(e,o);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:o}=await async function(e){const t=await import('./chunks/symbolLayerUtils-43d0f4db.js'),r=await t.computeObjectLayerResourceSize(e,10),{width:o,height:n,depth:i}=e,s=[o,i,n];let c=1;for(let e=0;e<3;e++)if(null!=s[e]){c=s[e]/r[e];break}for(let e=0;e<3;e++)null==s[e]&&(s[e]=r[e]*c);return {resourceSize:r,symbolSize:s}}(e),n=L$m(t,r,o);e.width=z$k(t[0],o[0],r[0],n),e.depth=z$k(t[1],o[1],r[1],n),e.height=z$k(t[2],o[2],r[2],n);}(e,o);break;case"fill":case"water":break;default:r$6(e);}}(e,o));}function j$I(e){for(const t of e)if("number"==typeof t)return t;return null}function L$m(e,t,r){for(let o=0;o<3;o++){const n=e[o];switch(n){case"symbol-value":return null!=r[o]?r[o]/t[o]:1;case"proportional":break;default:if(n&&t[o])return n/t[o]}}return 1}function z$k(e,t,r,o){switch(e){case"proportional":return r*o;case"symbol-value":return null!=t?t:r;default:return e}}async function v$E(e,r){if(e&&r)return x$d(e)?g$V(e,r):void(k$9(e)&&function(e,r){const o=j$I(r);if(!t$6(o))switch(e.type){case"simple-marker":e.size=o;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=o,e.height=o*t):(e.width=o*t,e.height=o);break}case"simple-line":e.width=o;break;case"text":e.font.size=o;break;case"simple-fill":case"picture-fill":case"cim":break;default:r$6(e);}}(e,r))}function x$z(e,t,r){if(e&&null!=t)if(x$d(e)){const o=e.symbolLayers;o&&o.forEach(e=>{if(e&&"object"===e.type)switch(r){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t;}});}else k$9(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t));}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function e$1z(e,n,i){if(n.flatten(({sublayers:e})=>e).length!==e.length)return !0;return !!e.some(e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i)||!r$1f(e,n)}function n$1_(e,n,i){return !!e.some(e=>{const n=e.source;return !(!n||"map-layer"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2})||!r$1f(e,n)}function r$1f(e,n){if(!e||!e.length)return !0;const r=n.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).map(e=>e.id).toArray();if(e.length>r.length)return !1;let i=0;const o=r.length;for(const{id:n}of e){for(;i<o&&r[i]!==n;)i++;if(i>=o)return !1}return !0}function i$2i(e){return !!e&&e.some(e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$1$={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let o$1v=class extends h$c{constructor(){super(...arguments),this._scale=null,this.view=null;}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&n$1_(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this._layerHandles&&(this._layerHandles.forEach(e=>e.remove()),this._layerHandles.length=0),e&&(this._layerHandles=[e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(n$1$[e.propertyName]))]));}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,s)=>(e[s.id]=s.definitionExpression,e),{})):null}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange("scale"));}get version(){const e=this;e.layers,e.layerDefs,e.dynamicLayers,e.timeExtent;const s=e.layer;return s&&(s.dpi,s.imageFormat,s.imageTransparency,s.gdbVersion),(this._get("version")||0)+1}set version(e){this._set("version",e);}get visibleSublayers(){const e=[];if(!this.layer)return e;const s=this.layer.sublayers,r=s=>{const a=this.scale,i=0===a,t=0===s.minScale||a<=s.minScale,l=0===s.maxScale||a>=s.maxScale;s.visible&&(i||t&&l)&&(s.sublayers?s.sublayers.forEach(r):e.unshift(s));};s&&s.forEach(r);const a=this._get("visibleSublayers");return !a||a.length!==e.length||a.some((s,r)=>e[r]!==s)?e:a}toJSON(){const e=this.layer;let s={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};e([y$5({readOnly:!0,dependsOn:["hasDynamicLayers","visibleSublayers"]})],o$1v.prototype,"dynamicLayers",null),e([y$5({readOnly:!0,dependsOn:["visibleSublayers","layer.serviceSublayers","layer.capabilities"]})],o$1v.prototype,"hasDynamicLayers",null),e([y$5()],o$1v.prototype,"layer",null),e([y$5({readOnly:!0,dependsOn:["visibleSublayers"]})],o$1v.prototype,"layers",null),e([y$5({readOnly:!0,dependsOn:["visibleSublayers"]})],o$1v.prototype,"layerDefs",null),e([y$5({type:Number,dependsOn:["view.scale"]})],o$1v.prototype,"scale",null),e([y$5(m$1u)],o$1v.prototype,"timeExtent",void 0),e([y$5({dependsOn:["layers","layerDefs","dynamicLayers","layer.dpi","layer.imageFormat","layer.imageTransparency","layer.gdbVersion","timeExtent"]})],o$1v.prototype,"version",null),e([y$5({type:H$8})],o$1v.prototype,"view",void 0),e([y$5({readOnly:!0,dependsOn:["layer.sublayers","scale"]})],o$1v.prototype,"visibleSublayers",null),o$1v=e([n$e("esri.layers.mixins.ExportImageParameters")],o$1v);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let n$20=null;function c$2t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function u$1_(e,t,l){const{backgroundColor:i,outline:o,dotSize:r}=e,a=l&&l.swatchSize||22,s=Math.round(a*a/Math.pow(r,2)*.8),u=window.devicePixelRatio,p=document.createElement("canvas"),h=a*u;p.width=h,p.height=h,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const m=p.getContext("2d");if(i&&(m.fillStyle=i.toCss(!0),m.fillRect(0,0,h,h),m.fill()),m.fillStyle=t.toCss(!0),n$20&&n$20.length/2===s)for(let e=0;e<2*s;e+=2){const t=n$20[e],l=n$20[e+1];m.fillRect(t,l,r*u,r*u),m.fill();}else {n$20=[];for(let e=0;e<2*s;e+=2){const e=c$2t(0,h),t=c$2t(0,h);n$20.push(e,t),m.fillRect(e,t,r*u,r*u),m.fill();}}o&&(o.color&&(m.strokeStyle=o.color.toCss(!0)),m.lineWidth=o.width,m.strokeRect(0,0,h,h));const y=new Image(a,a);return y.src=p.toDataURL(),y}function p$2o(e,t={}){const l="horizontal"===t.align,i=l?75:24,o=l?24:75,{width:r=i,height:a=o,gradient:s=!0}=t,n=window.devicePixelRatio,c=r*n,u=a*n,p=document.createElement("canvas");p.width=c,p.height=u,p.style.width=r+"px",p.style.height=a+"px";const h=p.getContext("2d"),m=l?c:0,y=l?0:u;if(s){const t=h.createLinearGradient(0,0,m,y),l=1/(e.length-1);e.forEach((e,i)=>t.addColorStop(i*l,e.toString())),h.fillStyle=t,h.fillRect(0,0,c,u);}else {const t=l?c/e.length:c,i=l?u:u/e.length;let o=0,r=0;for(const a of e)h.fillStyle=a.toString(),h.fillRect(o,r,t,i),o=l?o+t:0,r=l?0:r+i;}const d=document.createElement("div");return d.style.width=r+"px",d.style.height=a+"px",d.appendChild(p),d}async function h$1p(t,l){switch(t.type){case"web-style":{const{previewWebStyleSymbol:e}=await import('./chunks/previewWebStyleSymbol-b33ba381.js');return e(t,h$1p,l)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:e}=await Promise.resolve().then(function () { return previewSymbol3D; });return e(t,l)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:e}=await import('./chunks/previewSymbol2D-638a1a3c.js');return e(t,l)}case"cim":{const{previewCIMSymbol:e}=await import('./chunks/previewCIMSymbol-80bfc5e0.js');return e(t,l)}default:return void r$6(t)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function l$1P(l,i){if(!l||!("visualVariables"in l)||!l.visualVariables)return null;const r=l$9(l.visualVariables,e=>"size"===e.type),s=((e,a)=>{const l=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return a.levels?a.levels[l]:null})(i,r);return s?new j$D({field:r.field,minSize:s[2].size,minDataValue:s[2].value,maxSize:s[3].size,maxDataValue:s[3].value}):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const g$W=L$3("short-date");function w$I(a,w,I,U){let e="";0===w?e="< ":w===I&&(e="> ");let i=null;return i=U?M$5(a,g$W):c$29(a),e+i}const I$m=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const n$21=new o$H([64,64,64]);function r$1g(l,e){const n=[],r=l.length-1;return 5===l.length?n.push(0,2,4):n.push(0,r),l.map((l,t)=>n.indexOf(t)>-1?w$I(l,t,r,e):null)}async function t$1r(o,t,a){let s=!1,u=[],i=[];if(o.stops){const l=o.stops;u=l.map(l=>l.value),s=l.some(l=>!!l.label),s&&(i=l.map(l=>l.label));}const c=u[0],p=u[u.length-1];if(null==c&&null==p)return null;const m=s?null:r$1g(u,a);return (await p$9(u.map(async(l,r)=>({value:l,color:"opacity"===o.type?await async function(l,o,r=n$21){const t=new o$H(r),a=(await Promise.resolve().then(function () { return visualVariableUtils; })).getOpacity(o,l);null!=a&&(t.a=a);return t}(l,o,t):(await Promise.resolve().then(function () { return visualVariableUtils; })).getColor(o,l),label:s?i[r]:m[r]})))).reverse()}function a$28(l){let e=!1,o=[],n=[];o=l.map(l=>l.value),e=l.some(l=>!!l.label),e&&(n=l.map(l=>l.label));const t=o[0],a=o[o.length-1];if(null==t&&null==a)return null;const u=e?null:r$1g(o,!1);return o.map((o,r)=>({value:o,color:s$1y(o,l),label:e?n[r]:u[r]})).reverse()}function s$1y(l,o){const{startIndex:n,endIndex:r,weight:t}=function(l,e){let o=0,n=e.length-1;return e.some((e,r)=>l<e.value?(n=r,!0):(o=r,!1)),{startIndex:o,endIndex:n,weight:(l-e[o].value)/(e[n].value-e[o].value)}}(l,o);if(n===r)return o[n].color;const a=o$H.blendColors(o[n].color,o[r].color,t);return new o$H(a)}function u$1$(l,o){let n=[];if(l&&"multipart"===l.type)l.colorRamps.reverse().forEach((function(r,t){0===t?n.push({value:o.max,color:new o$H(r.toColor),label:"high"}):n.push({value:null,color:new o$H(r.toColor),label:""}),t===l.colorRamps.length-1?n.push({value:o.min,color:new o$H(r.fromColor),label:"low"}):n.push({value:null,color:new o$H(r.fromColor),label:""});}));else {let r,t;l&&"algorithmic"===l.type?(r=l.fromColor,t=l.toColor):(r=[0,0,0,1],t=[255,255,255,1]),n=[{value:o.max,color:new o$H(t),label:"high"},{value:o.min,color:new o$H(r),label:"low"}];}return n}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function r$1h(r){let t=r.colorStops,e=t.length-1;if(t&&t[0]){const r=t[e];r&&1!==r.ratio&&(t=t.slice(0),t.push(new c$2e({ratio:1,color:r.color})),e++);}return t.map((o,r)=>{let t="";return 0===r?t="low":r===e&&(t="high"),{color:o.color,label:t,ratio:o.ratio}}).reverse()}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function n$22(n){return "h"in n&&"s"in n&&"v"in n}function t$1s(n){return "l"in n&&"a"in n&&"b"in n}function r$1i(n){return "l"in n&&"c"in n&&"h"in n}function o$1w(n){return "x"in n&&"y"in n&&"z"in n}const u$20=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],a$29=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function e$1A(n,t){const r=[];let o,u;if(n[0].length!==t.length)throw "dimensions do not match";const a=n.length,e=n[0].length;let c=0;for(o=0;o<a;o++){for(c=0,u=0;u<e;u++)c+=n[o][u]*t[u];r.push(c);}return r}function c$2u(n){const t=[n.r/255,n.g/255,n.b/255].map(n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)),r=e$1A(u$20,t);return {x:100*r[0],y:100*r[1],z:100*r[2]}}function i$2j(n){const t=e$1A(a$29,[n.x/100,n.y/100,n.z/100]).map(n=>{const t=n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055;return Math.min(1,Math.max(t,0))});return {r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function h$1q(n){const t=[n.x/95.047,n.y/100,n.z/108.883].map(n=>n>Math.pow(6/29,3)?Math.pow(n,1/3):1/3*Math.pow(29/6,2)*n+4/29);return {l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function s$1z(n){const t=n.l,r=[(t+16)/116+n.a/500,(t+16)/116,(t+16)/116-n.b/200].map(n=>n>6/29?Math.pow(n,3):3*Math.pow(6/29,2)*(n-4/29));return {x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function f$1q(n){return h$1q(c$2u(n))}function b$I(n){return i$2j(s$1z(n))}function l$1Q(n){return i$2j(s$1z(function(n){const t=n.l,r=n.c,o=n.h;return {l:t,a:r*Math.cos(o),b:r*Math.sin(o)}}(n)))}function g$X(u){return function(n){return "r"in n&&"g"in n&&"b"in n}(u)?u:r$1i(u)?l$1Q(u):t$1s(u)?b$I(u):o$1w(u)?i$2j(u):n$22(u)?function(n){const t=(n.h+360)%360/60,r=n.s/100,o=n.v/100*255,u=o*r,a=u*(1-Math.abs(t%2-1));let e;switch(Math.floor(t)){case 0:e={r:u,g:a,b:0};break;case 1:e={r:a,g:u,b:0};break;case 2:e={r:0,g:u,b:a};break;case 3:e={r:0,g:a,b:u};break;case 4:e={r:a,g:0,b:u};break;case 5:case 6:e={r:u,g:0,b:a};break;default:e={r:0,g:0,b:0};}return e.r=Math.round(e.r+o-u),e.g=Math.round(e.g+o-u),e.b=Math.round(e.b+o-u),e}(u):u}function p$2p(t){if(n$22(t))return t;return function(n){const t=n.r,r=n.g,o=n.b,u=Math.max(t,r,o),a=u-Math.min(t,r,o);let e=u,c=0===a?0:u===t?(r-o)/a%6:u===r?(o-t)/a+2:(t-r)/a+4,i=0===a?0:a/e;return c<0&&(c+=6),c*=60,i*=100,e*=100/255,{h:c,s:i,v:e}}(g$X(t))}function m$1z(n){return t$1s(n)?n:f$1q(g$X(n))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const a$2a={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function t$1t(a){let t=22,e=22;a<1?t*=.75:a>1&&(e*=1.25);const m=22,c=22;return [{type:"path",path:[{command:"M",values:[m,0]},{command:"L",values:[19.25,0]},{command:"L",values:[0,e-11]},{command:"L",values:[t-11,e-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[m,0]},{command:"L",values:[m,2.75]},{command:"L",values:[t-11,c]},{command:"L",values:[t-11,e-11]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[t-11,e-11]},{command:"L",values:[0,e-11]},{command:"L",values:[0,c]},{command:"L",values:[t-11,c]},{command:"Z",values:[]}]}]}function e$1B(a){const t=.5*a,e=22,m=22;return [{type:"path",path:[{command:"M",values:[0,.7*m*.5]},{command:"L",values:[6.6,.7*m]},{command:"L",values:[6.6,.7*m+t]},{command:"L",values:[0,.7*m+t-.7*m*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*m]},{command:"L",values:[6.6,.7*m+t]},{command:"L",values:[e,t]},{command:"L",values:[e,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[e,0]},{command:"L",values:[6.6,.7*m]},{command:"L",values:[0,.7*m*.5]},{command:"Z",values:[]}]}]}function m$1A(){return [{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function c$2v(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=t?.35*e:.5*e;return [{type:"path",path:[{command:"M",values:[.5*e,0]},{command:"L",values:[e,.5*c]},{command:"L",values:[.5*e,c]},{command:"L",values:[0,.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*e,c]},{command:"L",values:[.5*e,a]},{command:"L",values:[0,a-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*e,c]},{command:"L",values:[.5*e,a]},{command:"L",values:[e,a-.5*c]},{command:"L",values:[e,.5*c]},{command:"Z",values:[]}]}]}function p$2q(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.5*e,p=.15*e,L=a-p;return [{type:"ellipse",cx:.5*e,cy:L,rx:c,ry:p},{type:"path",path:[{command:"M",values:[0,p]},{command:"L",values:[0,L]},{command:"L",values:[e,L]},{command:"L",values:[e,p]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:p,rx:c,ry:p}]}function L$n(a,t){let e=t?20:a;const m=t?4:6;e-=e<=22?.5*m:m;const c=.15*e,p=a-c;return [{type:"ellipse",cx:.5*e,cy:p,rx:.5*e,ry:c},{type:"path",path:[{command:"M",values:[.5*e,0]},{command:"L",values:[e,p]},{command:"L",values:[0,p]},{command:"Z",values:[]}]}]}function n$23(a){let t=a;t-=t<22?3:6;const e=.15*t;return [{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,a-e]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:e}]}function l$1R(a){let t=a;const e=a;t-=t<22?2:4;const m=t,c=e,p=Math.floor(a/10)-1||1;return [{type:"path",path:[{command:"M",values:[.45*m,0]},{command:"L",values:[m,.5*c-p]},{command:"L",values:[.45*m-p,.5*c+p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*m,0]},{command:"L",values:[.45*m-p,.5*c+p]},{command:"L",values:[0,.5*c-p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*c-p]},{command:"L",values:[.45*m-p,.5*c+p]},{command:"L",values:[.45*m,e]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*m,e]},{command:"L",values:[m,.5*c-p]},{command:"L",values:[.45*m-p,.5*c+p]},{command:"Z",values:[]}]}]}function s$1A(a){let t=a;t-=t<22?1:2;return [{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[a,t]},{command:"L",values:[.45*a,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*a,0]},{command:"L",values:[.45*a,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*a,.6*t]},{command:"L",values:[a,t]},{command:"Z",values:[]}]}]}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let h$1r=0,c$2w=0;const f$1r=s("android"),d$1q=s("chrome")||f$1r&&f$1r>=4?"auto":"optimizeLegibility",y$14={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},p$2r=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let u$21={},g$Y={};const x$A={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};function m$1B(t){return t.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function w$J(t,e,r,o){if(t){if("circle"===t.type)return r$G("circle",{fill:e,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if("ellipse"===t.type)return r$G("ellipse",{fill:e,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if("rect"===t.type)return r$G("rect",{fill:e,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if("image"===t.type)return r$G("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if("path"===t.type){const o="string"!=typeof t.path?m$1B(t.path):t.path;return r$G("path",{fill:e,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:o})}if("text"===t.type)return r$G("text",{fill:e,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":o.align,"text-decoration":o.decoration,kerning:o.kerning,rotate:o.rotate,"text-rendering":d$1q,"font-style":o.font.style,"font-variant":o.font.variant,"font-weight":o.font.weight,"font-size":o.font.size,"font-family":o.font.family,x:t.x,y:t.y},t.text)}return null}function k$r(t){const i={fill:"none",pattern:null,linearGradient:null};if(t)if("type"in t&&"pattern"===t.type){const e="patternId-"+ ++h$1r;i.fill=`url(#${e})`,i.pattern={id:e,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}};}else if("type"in t&&"linear"===t.type){const r="linearGradientId-"+ ++c$2w;i.fill=`url(#${r})`,i.linearGradient={id:r,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(t=>({offset:t.offset,color:t.color&&new o$H(t.color).toString()}))};}else if(t){const r=new o$H(t);i.fill=r.toString();}return i}function j$J(t){const i={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(t&&(null!=t.width&&(i.width=t.width),t.cap&&(i.cap=t.cap),t.join&&(i.join=t.join.toString()),t.color&&(i.color=new o$H(t.color).toString()),t.style)){let e=null;if(t.style in x$A&&(e=x$A[t.style]),Array.isArray(e)){e=e.slice(0);for(let i=0;i<e.length;++i)e[i]*=t.width;if("butt"!==t.cap){for(let i=0;i<e.length;i+=2)e[i]-=t.width,e[i]<1&&(e[i]=1);for(let i=1;i<e.length;i+=2)e[i]+=t.width;}e=e.join(",");}i.dashArray=e;}return i}function b$J(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return t&&(i.align=t.align,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"),i}function v$F(t){const{pattern:e,linearGradient:r}=t;if(e)return r$G("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},r$G("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(r){const t=r.stops.map((t,e)=>r$G("stop",{key:e+"-stop",offset:t.offset,"stop-color":t.color}));return r$G("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},t)}return null}function A$o(t,e,i,r,o){return e$17(t,n$1o(t),[e,i]),t[4]=t[4]*e-r*e+r,t[5]=t[5]*i-o*i+o,t}function N$j(t,e){u$21&&"left"in u$21?(u$21.left>t&&(u$21.left=t),u$21.right<t&&(u$21.right=t),u$21.top>e&&(u$21.top=e),u$21.bottom<e&&(u$21.bottom=e)):u$21={left:t,bottom:e,right:t,top:e};}function I$n(t){const e=t.args,i=e.length;let r;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<i;r+=2)N$j(e[r],e[r+1]);g$Y.x=e[i-2],g$Y.y=e[i-1];break;case"H":for(r=0;r<i;++r)N$j(e[r],g$Y.y);g$Y.x=e[i-1];break;case"V":for(r=0;r<i;++r)N$j(g$Y.x,e[r]);g$Y.y=e[i-1];break;case"m":{let t=0;"x"in g$Y||(N$j(g$Y.x=e[0],g$Y.y=e[1]),t=2);for(r=t;r<i;r+=2)N$j(g$Y.x+=e[r],g$Y.y+=e[r+1]);break}case"l":case"t":for(r=0;r<i;r+=2)N$j(g$Y.x+=e[r],g$Y.y+=e[r+1]);break;case"h":for(r=0;r<i;++r)N$j(g$Y.x+=e[r],g$Y.y);break;case"v":for(r=0;r<i;++r)N$j(g$Y.x,g$Y.y+=e[r]);break;case"c":for(r=0;r<i;r+=6)N$j(g$Y.x+e[r],g$Y.y+e[r+1]),N$j(g$Y.x+e[r+2],g$Y.y+e[r+3]),N$j(g$Y.x+=e[r+4],g$Y.y+=e[r+5]);break;case"s":case"q":for(r=0;r<i;r+=4)N$j(g$Y.x+e[r],g$Y.y+e[r+1]),N$j(g$Y.x+=e[r+2],g$Y.y+=e[r+3]);break;case"A":for(r=0;r<i;r+=7)N$j(e[r+5],e[r+6]);g$Y.x=e[i-2],g$Y.y=e[i-1];break;case"a":for(r=0;r<i;r+=7)N$j(g$Y.x+=e[r+5],g$Y.y+=e[r+6]);}}function $$c(t,e,i){const r=y$14[t.toLowerCase()];let o;"number"==typeof r&&(r?e.length>=r&&(o={action:t,args:e.slice(0,e.length-e.length%r)},i.push(o),I$n(o)):(o={action:t,args:[]},i.push(o),I$n(o)));}function z$l(t){const e={x:0,y:0,width:0,height:0};if("circle"===t.type)e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if("ellipse"===t.type)e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if("image"===t.type||"rect"===t.type)e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if("path"===t.type){const i=function(t){const e=("string"!=typeof t.path?m$1B(t.path):t.path).match(p$2r),i=[];if(u$21={},g$Y={},!e)return null;let r="",o=[];const n=e.length;for(let t=0;t<n;++t){const n=e[t],s=parseFloat(n);isNaN(s)?(r&&$$c(r,o,i),o=[],r=n):o.push(s);}$$c(r,o,i);const s={x:0,y:0,width:0,height:0};return u$21&&"left"in u$21&&(s.x=u$21.left,s.y=u$21.top,s.width=u$21.right-u$21.left,s.height=u$21.bottom-u$21.top),s}(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height;}return e}function S$w(t){const e={x:0,y:0,width:0,height:0};let i=null,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const n of t)i?(i.x=Math.min(i.x,n.x),i.y=Math.min(i.y,n.y),r=Math.max(r,n.x+n.width),o=Math.max(o,n.y+n.height)):(i=e,i.x=n.x,i.y=n.y,r=n.x+n.width,o=n.y+n.height);return i&&(i.width=r-i.x,i.height=o-i.y),i}function G$j(t,e,i,s,h,c){const f=e/2,d=i/2,y=t.width+s,p=t.height+s,u=n$1t(),g=n$1t();let x=!1;if(h&&0!==y&&0!==p){const t=y/p,o=e>i?e:i;let n=1,s=1;isNaN(o)||(t>1?(n=o/y,s=o/t/p):(s=o/p,n=o*t/y)),u$1i(g,g,A$o(u,n,s,f,d)),x=!0;}const m=t.x+(y-s)/2,w=t.y+(p-s)/2;if(u$1i(g,g,function(t,e,i){return h$11(t,n$1o(t),[e,i])}(u,f-m,d-w)),!x&&(y>e||p>i)){const t=y/e>p/i,o=(t?e:i)/(t?y:p);u$1i(g,g,A$o(u,o,o,m,w));}return c&&u$1i(g,g,function(t,e,i,r){const o=e%360*Math.PI/180;c$1O(t,n$1o(t),o);const s=Math.cos(o),l=Math.sin(o),h=t[4],c=t[5];return t[4]=h*s-c*l+r*l-i*s+i,t[5]=c*s+h*l-i*l-r*s+r,t}(u,c,m,w)),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}function M$s(t,e,r,o){const n=[],s=[];for(const a of t){const t=[],l=[];let h=0;for(const e of a){const{shape:i,fill:r,stroke:o,font:s}=e;h+=o&&o.width||0;const a=k$r(r),c=j$J(o),f="text"===i.type?b$J(i,s):null;n.push(v$F(a)),t.push(w$J(i,a.fill,c,f)),l.push(z$l(i));}const c=G$j(S$w(l),e,r,h,o&&o.scale,o&&o.rotation);s.push(r$G("g",{transform:c},t));}return r$G("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:r},r$G("defs",null,n),s)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$1s=s$N();function l$1S(t,e,i){const n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!t.some(t=>!!t.length))return null;const o=i&&i.node||document.createElement("div");return null!=i.opacity&&(o.style.opacity=i.opacity.toString()),h$1s.append(o,M$s.bind(null,t,n,r,i)),o}function m$1C(t,e,i,n,r){switch(r){case"multiply":t[e+0]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const r=p$2p({r:t[e+0],g:t[e+1],b:t[e+2]});r.h=n.h,r.s=n.s,r.v=r.v/100*n.v;const s=g$X(r);t[e+0]=s.r,t[e+1]=s.g,t[e+2]=s.b,t[e+3]*=i[3];break}}}function g$Z(a,s$1,c,h,l){return function(t,i,o){return t?j$3(t,{responseType:"image"}).then(t=>{const e=t.data,n=e.width,r=e.height,a=n/r;let s=i;if(o){const t=Math.max(n,r);s=Math.min(s,t);}return {image:e,width:a<=1?Math.ceil(s*a):s,height:a<=1?s:Math.ceil(s/a)}}):B$2(new s$g("renderUtils: imageDataSize","href not provided."))}(a,s$1,l).then(e=>{const n=e.width?e.width:s$1,r=e.height?e.height:s$1;if(e.image&&function(t,e){return !(!t||"ignore"===e||"multiply"===e&&255===t.r&&255===t.g&&255===t.b&&1===t.a)}(c,h)){let i=e.image.width,s$1=e.image.height;(s("edge")||s("ie"))&&/\.svg$/i.test(a)&&(i-=1,s$1-=1);const l=function(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}(n,r);l.drawImage(e.image,0,0,i,s$1,0,0,n,r);const g=l.getImageData(0,0,n,r),u=[c.r/255,c.g/255,c.b/255,c.a],d=p$2p(c);for(let t=0;t<g.data.length;t+=4)m$1C(g.data,t,u,d,h);l.putImageData(g,0,0),a=l.canvas.toDataURL("image/png");}else {const t=i$g&&i$g.findCredential(a);if(t&&t.token){const e=-1===a.indexOf("?")?"?":"&";a=`${a}${e}token=${t.token}`;}}return {url:a,width:n,height:r}}).catch((function(){return {url:a,width:s$1,height:s$1}}))}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const R$l=e$v("esri/symbols/patterns/"),I$o=e$v("esri/images/Legend/legend3dsymboldefault.png"),E$o=n$7.getLogger("esri.symbols.support.previewSymbol3D");function P$l(e){const a=e.outline,o=u$4(e.material)?e.material.color:null,r=u$4(o)?o.toRgba().toString():null;if(t$6(a))return "fill"===e.type&&"255,255,255,1"===r?{color:"#bdc3c7",width:.75}:null;const l=t$y(a.size)||0;return {color:"rgba("+(u$4(a.color)?a.color.toRgba():"255,255,255,1")+")",width:Math.min(l,80)}}function Z$5(e,t=1){const s=e.a,a=p$2p(e),o=a.h,r=a.s/t,l=100-(100-a.v)/t,{r:n,g:i,b:c}=g$X({h:o,s:r,v:l});return [n,i,c,s]}function q$i(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function A$p(e){return "water"===e.type?t$6(e.color)?null:e.color:t$6(e.material)||t$6(e.material.color)?null:e.material.color}function C$m(e,t=0){const s=A$p(e);if(!s){const e=q$i(b$G.r,t);return [e,e,e,100]}const a=s.toRgba();for(let e=0;e<3;e++)a[e]=q$i(a[e],t);return a}async function N$k(e,t){const s=e.style;if("none"===s)return null;return {type:"pattern",x:0,y:0,src:await d$1p(`${R$l}${s}.png`,t.toCss(!0)),width:5,height:5}}function $$d(e){return e.outline?P$l(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function H$d(e,t){const s=A$p(e);if(!s)return null;let a="rgba(";return a+=q$i(s.r,t)+",",a+=q$i(s.g,t)+",",a+=q$i(s.b,t)+",",a+s.a+");"}function T$o(e,t){const s=H$d(e,t);if(!s)return {};return {color:s,width:Math.min(e.size?t$y(e.size):.75,80)}}function _$w(e,t,s){const a=.75*s;return {type:"linear",x1:a?.25*a:0,y1:a?.5*a:0,x2:a||4,y2:a?.5*a:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function B$j(t,s){const a=s&&s.size?t$y(s.size):null,o=s&&s.maxSize?t$y(s.maxSize):null,r=s&&s.disableUpsampling,h=t.symbolLayers,u=[];let m=0,y=0;const d=h.getItemAt(h.length-1);let b;return d&&"icon"===d.type&&(b=d.size&&t$y(d.size)),h.forEach(n=>{if("icon"!==n.type&&"object"!==n.type)return;const h="icon"===n.type?n.size&&t$y(n.size):0,d=a||h?Math.ceil(Math.min(a||h,o||120)):22;if(n&&n.resource&&n.resource.href){const e=function(e,t){const s=t&&t.resource,a=s&&s.href;return e.thumbnail&&e.thumbnail.url?D$1(e.thumbnail.url):a&&"object"!==t.type?D$1(w$H(e,t)):e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?w$B(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(e=>e).then(e=>e&&e.thumbnail&&e.thumbnail.url||I$o):D$1(I$o)}(t,n).then((function(e){const t=n.get("material.color"),s=function(e){return "icon"===e.type?"multiply":"tint"}(n);return g$Z(e,d,t,s,r)})).then((function(e){const t=e.width,s=e.height;return m=Math.max(m,t),y=Math.max(y,s),[{shape:{type:"image",x:0,y:0,width:t,height:s,src:e.url},fill:null,stroke:null}]}));u.push(e);}else {let t=d;"icon"===n.type&&b&&a&&(t=d*(h/b));const o=s&&"tall"===s.symbolConfig||"object"===n.type&&function(e){const t=e.depth,s=e.height,a=e.width;return a&&t&&s&&a===t&&a<s}(n);m=Math.max(m,o?20:t),y=Math.max(y,t),u.push(D$1(function(t,s,a){const o=[];if(!t)return o;switch(t.type){case"icon":{const a=0,r=0,l=s,n=s,i=t.resource&&t.resource.primitive||h$w;switch(i){case"circle":o.push({shape:{type:"circle",cx:0,cy:0,r:.5*s},fill:C$m(t,0),stroke:P$l(t)});break;case"square":o.push({shape:{type:"path",path:[{command:"M",values:[a,n]},{command:"L",values:[a,r]},{command:"L",values:[l,r]},{command:"L",values:[l,n]},{command:"Z",values:[]}]},fill:C$m(t,0),stroke:P$l(t)});break;case"triangle":o.push({shape:{type:"path",path:[{command:"M",values:[a,n]},{command:"L",values:[.5*l,r]},{command:"L",values:[l,n]},{command:"Z",values:[]}]},fill:C$m(t,0),stroke:P$l(t)});break;case"cross":o.push({shape:{type:"path",path:[{command:"M",values:[.5*l,r]},{command:"L",values:[.5*l,n]},{command:"M",values:[a,.5*n]},{command:"L",values:[l,.5*n]}]},stroke:$$d(t)});break;case"x":o.push({shape:{type:"path",path:[{command:"M",values:[a,r]},{command:"L",values:[l,n]},{command:"M",values:[l,r]},{command:"L",values:[a,n]}]},stroke:$$d(t)});break;case"kite":o.push({shape:{type:"path",path:[{command:"M",values:[a,.5*n]},{command:"L",values:[.5*l,r]},{command:"L",values:[l,.5*n]},{command:"L",values:[.5*l,n]},{command:"Z",values:[]}]},fill:C$m(t,0),stroke:P$l(t)});break;default:r$6(i);}break}case"object":{const r=t.resource&&t.resource.primitive||u$I;switch(r){case"cone":{const e=_$w(C$m(t,0),C$m(t,-.6),a?20:s),r=L$n(s,a);o.push({shape:r[0],fill:e}),o.push({shape:r[1],fill:e});break}case"inverted-cone":{const e=C$m(t,0),a=_$w(e,C$m(t,-.6),s),r=n$23(s);o.push({shape:r[0],fill:a}),o.push({shape:r[1],fill:e});break}case"cube":{const e=c$2v(s,a);o.push({shape:e[0],fill:C$m(t,0)}),o.push({shape:e[1],fill:C$m(t,-.3)}),o.push({shape:e[2],fill:C$m(t,-.5)});break}case"cylinder":{const e=_$w(C$m(t,0),C$m(t,-.6),a?20:s),r=p$2q(s,a);o.push({shape:r[0],fill:e}),o.push({shape:r[1],fill:e}),o.push({shape:r[2],fill:C$m(t,0)});break}case"diamond":{const e=l$1R(s);o.push({shape:e[0],fill:C$m(t,-.3)}),o.push({shape:e[1],fill:C$m(t,0)}),o.push({shape:e[2],fill:C$m(t,-.3)}),o.push({shape:e[3],fill:C$m(t,-.7)});break}case"sphere":{const e=_$w(C$m(t,0),C$m(t,-.6));e.x1=0,e.y1=0,e.x2=.25*s,e.y2=.25*s,o.push({shape:{type:"circle",cx:0,cy:0,r:.5*s},fill:e});break}case"tetrahedron":{const e=s$1A(s);o.push({shape:e[0],fill:C$m(t,-.3)}),o.push({shape:e[1],fill:C$m(t,0)}),o.push({shape:e[2],fill:C$m(t,-.6)});break}default:r$6(r);}break}}return o}(n,t,o)));}}),x$1(u).then((function(e){const t=[];return e.forEach((function(e){e.value?t.push(e.value):e.error&&E$o.warn("error while building swatchInfo!",e.error);})),l$1S(t,[m,y],{node:s&&s.node,scale:!1,opacity:s&&s.opacity})}))}function F$m(e,t){if(0===e.symbolLayers.length)return B$2(new s$g("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));let a=null;switch(e.type){case"point-3d":a=B$j(e,t);break;case"line-3d":a=function(e,t){const s=e.symbolLayers,a=[],o=b$H(e),r=t&&t.size?t$y(t.size):null,n=(t&&t.maxSize?t$y(t.maxSize):null)||80;let c,h=0,p=0;return s.forEach((e,t)=>{if(!e)return;if("line"!==e.type&&"path"!==e.type)return;const s=[];switch(e.type){case"line":{const a=T$o(e,0),o=a&&a.width||0;0===t&&(c=o);const l=Math.min(r||o,n),i=0===t?l:r?l*(o/c):l,u=i>20?2*i:40;p=Math.max(p,i),h=Math.max(h,u),a.width=i,s.push({shape:{type:"path",path:[{command:"M",values:[0,.5*p]},{command:"L",values:[h,.5*p]}]},stroke:a});break}case"path":{const t=Math.min(r||22,n),a=C$m(e,0),o=C$m(e,-.2),l=H$d(e,-.4),i=l?{color:l,width:1}:{};if("quad"===e.profile){const t=e.width||e.size,r=e.height||e.size,l=t$1t(t&&r?t/r:1),n={...i,join:"bevel"};s.push({shape:l[0],fill:o,stroke:n}),s.push({shape:l[1],fill:o,stroke:n}),s.push({shape:l[2],fill:a,stroke:n});}else s.push({shape:a$2a.pathSymbol3DLayer[0],fill:o,stroke:i}),s.push({shape:a$2a.pathSymbol3DLayer[1],fill:a,stroke:i});p=Math.max(p,t),h=p;}}a.push(s);}),D$1(l$1S(a,[h,p],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}(e,t);break;case"polygon-3d":case"mesh-3d":a=async function(e,t){const a="mesh-3d"===e.type,o=e.symbolLayers,r=t&&t.size?t$y(t.size):null,n=t&&t.maxSize?t$y(t.maxSize):null,c=r||22,h=[];let p=0,u=0,m=!1;for(let e=0;e<o.length;e++){const t=o.getItemAt(e),r=[];if(a&&"fill"!==t.type)continue;const l=a$2a.fill[0];switch(t.type){case"fill":{const e=P$l(t),o=Math.min(c,n||120);p=Math.max(p,o),u=Math.max(u,o),m=!0;let i=C$m(t,0);const h="pattern"in t&&t.pattern;!a&&u$4(h)&&"style"===h.type&&"solid"!==h.style&&(i=await N$k(h,A$p(t))),r.push({shape:l,fill:i,stroke:e});break}case"line":{const e={stroke:T$o(t,0),shape:l};p=Math.max(p,22),u=Math.max(u,22),r.push(e);break}case"extrude":{const e={join:"round",...T$o(t,-.4)},s=C$m(t,0),a=C$m(t,-.2),o=Math.min(c,n||120),l=e$1B(o);e.width=1,r.push({shape:l[0],fill:a,stroke:e}),r.push({shape:l[1],fill:a,stroke:e}),r.push({shape:l[2],fill:s,stroke:e});const i=22,h=22*.7+.5*o;p=Math.max(p,i),u=Math.max(u,h);break}case"water":{const e=A$p(t),s=Z$5(e),a=Z$5(e,2),o=Z$5(e,3),l=m$1A();m=!0,r.push({shape:l[0],fill:s}),r.push({shape:l[1],fill:a}),r.push({shape:l[2],fill:o});const i=Math.min(c,n||120);p=Math.max(p,i),u=Math.max(u,i);break}}h.push(r);}return D$1(l$1S(h,[p,u],{node:t&&t.node,scale:m,opacity:t&&t.opacity}))}(e,t);}return a||B$2(new s$g("symbolPreview: swatchInfo3D","symbol not supported."))}

var previewSymbol3D = /*#__PURE__*/Object.freeze({
    __proto__: null,
    getPatternDescriptor: N$k,
    getSymbolLayerFill: C$m,
    previewSymbol3D: F$m
});

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const r$1j={HH:315,HL:45,LL:135,LH:225},l$1T={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function s$1B(r){if(!r)return;const{type:l}=r;if(l.indexOf("3d")>-1)return C$m(r.symbolLayers.getItemAt(0));if("simple-line"===l){const o=g$U(r);return o&&o.color}if("simple-marker"===r.type&&("x"===r.style||"cross"===r.style)){const o=g$U(r);return o&&o.color}return h$1n(r)}function n$24(t){const{focus:o,infos:e,numClasses:r}=t,n=l$1T[r],L={};e.forEach(t=>{L[t.value]={label:t.label,fill:s$1B(t.symbol)};});const i=[];for(let t=0;t<r;t++){const o=[];for(let e=0;e<r;e++){const r=L[n[t][e]];o.push(r.fill);}i.push(o);}return {type:"relationship-ramp",numClasses:r,focus:o,colors:i,labels:function(t,o){const e=o.HH.label,r=o.LL.label,l=o.HL.label,s=o.LH.label;switch(t){case"HH":return {top:e,bottom:r,left:l,right:s};case"HL":return {top:l,bottom:s,left:r,right:e};case"LL":return {top:r,bottom:e,left:s,right:l};case"LH":return {top:s,bottom:l,left:e,right:r};default:return {top:e,bottom:r,left:l,right:s}}}(o,L),rotation:H$e(o)}}function H$e(t){let o=r$1j[t];return t&&null==o&&(o=r$1j.HH),o||0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$1D=30,c$2x=12,p$2s=[255,255,255],f$1s=[200,200,200],y$15=[128,128,128];async function b$K(r,i,m,c,b,w){const S=i.legendOptions,g=S&&S.customValues,v=function(e,s){let r=null,i=null;if("simple"===e.type)r=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;r=l&&l[0]&&l[0].symbol,i=l.length>1;}else if("unique-value"===e.type){const l=e.uniqueValueInfos;r=l&&l[0]&&l[0].symbol,i=l.length>1;}if(!r||function(e){if(e){if(x$d(e)){return !!e.symbolLayers&&e.symbolLayers.some(e=>e&&"fill"===e.type)}return -1!==e.type.indexOf("fill")}return !1}(r))return null;r=r.clone(),(s||i)&&(r.type.indexOf("3d")>-1?function(e){b$H(e)||("line-3d"===e.type?e.symbolLayers.forEach(e=>{e.material={color:y$15};}):e.symbolLayers.forEach(e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:f$1s}:(e.material={color:p$2s},e.outline={color:y$15,size:1.5});}));}(r):function(e){"cim"===e.type?k$q(e,new o$H(f$1s)):-1!==e.type.indexOf("line")?e.color=y$15:(e.color=p$2s,"simple-marker"===e.type&&(e.outline={color:y$15,width:1.5}));}(r));return r}(r,m),z=!!v,x=!!g,j=null!=i.minSize&&null!=i.maxSize,k=i.stops&&i.stops.length>1,V=!!i.target;if(!z||!x&&!(j||k&&!V))return;const L=b$H(v);let M=null,C=null,U=null;if(C=L&&!k?s$1p([i.minDataValue,i.maxDataValue]):g||await async function(e,l,t,r){const i=(await Promise.resolve().then(function () { return visualVariableUtils; })).getSizeRangeAtScale(e,t,r),n=i&&function(e){const l=e.minSize,t=e.maxSize,s=5,r=(t-l)/(s-1),i=[];for(let e=0;e<s;e++)i.push(l+r*e);return i}(i);if(!i&&!n)return;let o=n.map(l=>function(e,l,t){const s=t.minSize,r=t.maxSize,i=l.minDataValue,n=l.maxDataValue;let o=null;if(e<=s)o=i;else if(e>=r)o=n;else {o=(e-s)/(r-s)*(n-i)+i;}return o}(l,e,i));o=s$1p(o);for(let s=1;s<o.length-1;s++){const i=await h$1t(e,l,o[s],o[s-1],t,r);i&&(o[s]=i[0],n[s]=i[1]);}return o}(i,v,c,b),!C&&k&&(C=i.stops.map(e=>e.value),M=i.stops.some(e=>!!e.label),M&&(U=i.stops.map(e=>e.label))),L&&C&&C.length>2&&(C=[C[0],C[C.length-1]]),!C)return null;const D=[12,30],O=h$1o(v),E=M?null:function(e,l){const t=e.length-1;return e.map((e,s)=>w$I(e,s,t,l))}(C,w);return (await p$9(C.map(async(e,l)=>{const s=L?D[l]:await d$1r(i,v,e,c,b);return {value:e,symbol:function(e,l){const s=e.clone();if(x$d(s))b$H(s)||s.symbolLayers.forEach(e=>{"fill"!==e.type&&(e.size=l);});else if("esri.symbols.SimpleMarkerSymbol"===s.declaredClass)s.size=l;else if(function(e){return "esri.symbols.PictureMarkerSymbol"===e.declaredClass}(s)){const e=s.width,t=s.height;s.height=l,s.width=l*(e/t);}else !function(e){return "esri.symbols.SimpleLineSymbol"===e.declaredClass}(s)?function(e){return "esri.symbols.TextSymbol"===e.declaredClass}(s)&&s.font&&(s.font.size=l):s.width=l;return s}(v,s),label:M?U[l]:E[l],size:s,outlineSize:O}}))).reverse()}async function h$1t(e,l,t,n,o,a){const u=await d$1r(e,l,t,o,a),m=await d$1r(e,l,n,o,a),c=o$1o(t),p=c.fractional;let f=c.integer,y=null,b=null;t>0&&t<1&&(y=Math.pow(10,p),f=o$1o(t*=y).integer);for(let r=f-1;r>=0;r--){const n=Math.pow(10,r);let c=Math.floor(t/n)*n,p=Math.ceil(t/n)*n;null!=y&&(c/=y,p/=y);let f=(c+p)/2;[,f]=s$1p([c,f,p],{indexes:[1]});const h=await d$1r(e,l,c,o,a),w=await d$1r(e,l,p,o,a),S=await d$1r(e,l,f,o,a),g=l$1z(u,h,m,null),v=l$1z(u,w,m,null),z=l$1z(u,S,m,null);let x=g.previous<=20,j=v.previous<=20;if(x&&j&&(g.previous<=v.previous?(x=!0,j=!1):(j=!0,x=!1)),x?b=[c,h]:j?b=[p,w]:z.previous<=20&&(b=[f,S]),b)break}return b}async function d$1r(e,l,t,s,r){const{getSize:i}=await Promise.resolve().then(function () { return visualVariableUtils; });return i(e,t,{scale:s,view:r,shape:"simple-marker"===l.type?l.style:null})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const J$c=n$7.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),$$e=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,H$f=new t$q({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),X$8={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},K$8=new y$p({size:6,outline:{color:[128,128,128,.5],width:.5}}),Q$8=new u$P({style:"solid"});function Y$8(e){return "vector-field"===e.type}function Z$6(e){return "raster-colormap"===e.type}function ee$3(e){return "raster-stretch"===e.type}function te$3(e){return "raster-shaded-relief"===e.type}function se$3(e){return "esri.renderers.SimpleRenderer"===e.declaredClass}function le$2(e){return "esri.renderers.ClassBreaksRenderer"===e.declaredClass}function re$2(e){return "esri.renderers.UniqueValueRenderer"===e.declaredClass}function ie$2(e){return "esri.renderers.HeatmapRenderer"===e.declaredClass}function ne$2(e){return "esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function ae$2(e){return "esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function oe$1(e){return "esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function ue$2(e){return "esri.renderers.DotDensityRenderer"===e.declaredClass}function ce$2(e){return "esri.layers.BuildingSceneLayer"===e.declaredClass}function de$2(e){return "esri.layers.MapImageLayer"===e.declaredClass}function ye$1(e){return "esri.layers.ImageryLayer"===e.declaredClass}function he$1(e){return "esri.layers.WCSLayer"===e.declaredClass}const me$1=new y$p({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let pe$1={},fe$2=class extends h$c{constructor(e){super(e),this._handles=new u$A,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new L$2,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null;}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([B$5(this,"children","change",t=>{const{added:s,removed:l}=t,r=this._handles;s.map(t=>{const s="activeLayerInfo-ready-watcher-"+t.layer.uid;r.add(d$C(t,"ready",e),s);}),l.forEach(e=>r.remove(e.layer.uid)),e();})]),this.keepCacheOnDestroy||(pe$1={});}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(pe$1=null);}get opacity(){var e;const t=this.layer.opacity,s=null==(e=this.parent)?void 0:e.opacity,l=this.layer.parent,r=l&&"uid"in l?this._getParentLayerOpacity(l):null;return null!=s?s*t:null!=r?r*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(null===e)return !1;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type)return !0;if("renderer"in e&&e.renderer){if("dot-density"===e.renderer.type)return !0;const t=e.get("renderer.valueExpression");if($$e.test(t))return !0;const s=e.get("renderer.visualVariables");if(s)return s.some(e=>this._isScaleDrivenSizeVariable(e))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){this.legendElements=[];const t=e.map(e=>{if("esri.layers.FeatureLayer"===e.declaredClass)return this._buildRendererLegendElements(e.renderer,{title:e.title,mode:0});if(e.featureSet&&e.featureSet.features.length){const t=e.layerDefinition,s=t&&t.drawingInfo,l=s&&i$2a(s.renderer),r=H$f.read(t.geometryType);return l?this._buildRendererLegendElements(l,{title:e.name,mode:0,geometryType:r}):(J$c.warn("drawingInfo not available!"),null)}return null});return x$1(t).then(()=>{})}async buildLegendElementsForRenderer(e){return this._buildRendererLegendElements(e)}async buildLegendElementsForTools(){const e=this.layer;!function(e){return "esri.layers.WMTSLayer"===e.declaredClass}(e)?!function(e){return "esri.layers.WMSLayer"===e.declaredClass}(e)?ce$2(e)?await this._constructLegendElementsForBuildingSceneLayer():de$2(e)||function(e){return "esri.layers.TileLayer"===e.declaredClass}(e)||ce$2(e)?await this._constructLegendElementsForSublayers():(this._handles.remove("imageryLayers-watcher"),await this._getLegendLayers().then(t=>{this.legendElements=[],t.forEach(t=>{if(ye$1(e)){const t=e.watch("renderingRule, bandIds",()=>{pe$1.default=null,this.buildLegendElementsForTools();});this._handles.add(t,"imageryLayers-watcher");}const s=this._generateSymbolTableElementForLegendLayer(t);s&&s.infos.length&&(ye$1(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange("ready");}),this.notifyChange("ready");}).catch(e=>{J$c.warn("Request to server for legend has failed!",e);})):this._constructLegendElementsForWMSSublayers():this._constructLegendElementsForWMTSlayer();}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&"uid"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){const e=this.children;return !!e.length&&e.some(e=>e.ready)}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return !1;const t=e,s=t.minSize,l=t.maxSize;return "object"==typeof s&&s?this._isScaleDrivenSizeVariable(s):"object"==typeof l&&l?this._isScaleDrivenSizeVariable(l):!!t.expression||$$e.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return !0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(e=>this._isLayerScaleDriven(e));const t=e.parent;if(!1===e.loaded&&t&&de$2(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(const s of t.sourceJSON.layers)if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return !0;return !1}async _buildRendererLegendElements(e,t={}){try{const s=await this._getRendererLegendElements(e,{title:t.title,geometryType:t.geometryType});0===t.mode?Array.prototype.push.apply(this.legendElements,s):this.legendElements=s,this.notifyChange("ready");}catch(e){J$c.warn("error while building legend for layer!",e);}}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(h$F(this.layer,"activeLayer",()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some(s=>e.styleId===s.id&&(t=s.legendUrl,!0)),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}]);}this.notifyChange("ready");}_constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(h$F(this.layer,"sublayers",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready");}_generateLegendElementsForWMSSublayers(e,t){const s=[];return this._handles.add(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),e.forEach(e=>{const l=e.watch("title, visible, legendEnabled",()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(l,"wms-sublayers-watcher"),e.visible&&e.legendEnabled){const l=this._generateSymbolTableElementForWMSSublayer(e,t);l&&l.infos.length&&s.unshift(l);}}),s}_generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=this._generateLegendElementsForWMSSublayers(e.sublayers,t).filter(e=>e);return {type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}_generateSymbolTableElementForLegendUrl(e,t){let s=e.legendUrl;if(!s)return;const l={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};return t&&(s+="?"+j$1(t)),l.infos.push({src:s,opacity:e.layer&&e.layer.opacity}),l}_getLegendLayers(e){const t=e&&e.hasDynamicLayers?e.dynamicLayers:null,s=t||"default",l=pe$1&&pe$1[s];return l?D$1(l):this._legendRequest(t).then(e=>{const t=e.layers;return pe$1[s]=t,t})}_legendRequest(e){const t=this.layer;let s={f:"json",dynamicLayers:e};if(ye$1(t)){const e=t.exportImageServiceParameters.renderingRule;if(e&&(s.renderingRule=JSON.stringify(e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId){const{raster:e,viewId:l}=t;s={raster:e,viewId:l,...s};}}let l=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const e=l.indexOf("?");e>-1?l=l.substring(0,e)+"/legend"+l.substring(e):l+="/legend";}else {const e=l.toLowerCase().indexOf("/rest/"),t=l.substring(0,e)+l.substring(e+5,l.length);l="https://utility.arcgis.com/sharing/tools/legend?soapUrl="+encodeURI(t)+"&returnbytes=true";}return j$3(l,{query:s}).then(e=>e.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(h$F(e,"sublayers",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(e){J$c.warn("Request to server for legend has failed!",e);}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const l=e.toArray();for(const e of l){const l=e.watch("renderer, opacity, title, visible",()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(l,"sublayers-watcher"),e.visible){const l=e&&null!=e.opacity?e.opacity:null,r=null!=l?l*t:t;if("building-group"===e.type){const t={type:"symbol-table",title:e.title,infos:[]},l=await this._generateLegendElementsForBuildingSublayers(e.sublayers,r);t.infos.push(...l),s=[t,...s];}else if(e.renderer){s=[...await this._getRendererLegendElements(e.renderer,{title:e.title,opacity:r,sublayer:e}),...s];}}}return s.filter(e=>!!e&&(!("infos"in e)||e.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(h$F(e,"sublayers",()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready");}catch(e){J$c.warn("Request to server for legend has failed!",e);}}async _generateLegendElementsForSublayers(e,t,s){let l=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let r=e.toArray();if(!s&&this.sublayerIds&&this.sublayerIds.length){const e=this.layer;r=this.sublayerIds.map(t=>e.findSublayerById(t)).filter(Boolean);}const i=new o$1v({layer:this.layer}),n=i.hasDynamicLayers&&i.dynamicLayers||"default";for(const e of r){const r=e.watch("renderer, opacity, title, visible, legendEnabled",(t,l,r)=>{var i;const a=pe$1&&pe$1[n];a&&!s&&(s=new Map,a.forEach(e=>s.set(e.layerId,e)));const o=null==(i=s)?void 0:i.get(e.id);("renderer"!==r||e.originIdOf("renderer")>2||!o)&&this._constructLegendElementsForSublayers();});if(this._handles.add(r,"sublayers-watcher"),e.visible&&e.legendEnabled){const r=e&&null!=e.opacity?e.opacity:null,i=null!=r?r*t:t;if(e.renderer&&!e.sublayers&&e.originIdOf("renderer")>2){if(!this.respectLayerVisibility||this._isSublayerInScale(e)){await e.load();l=[...await this._getRendererLegendElements(e.renderer,{title:e.title,opacity:i,sublayer:e}),...l];}}else {const t=await this._generateSymbolTableElementForSublayer(e,i,s);t&&l.unshift(t);}}}return l.filter(e=>!!e&&(!("infos"in e)||e.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const e=new o$1v({layer:this.layer});try{(await this._getLegendLayers(e)).forEach(e=>s.set(e.layerId,e));}finally{e.destroy();}}const l=s.get(e.id);if(!l&&e.sublayers){const l=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return {type:"symbol-table",title:e.title,infos:l}}return this._generateSymbolTableElementForLegendLayer(l,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const l=t&&t.renderer;let r=t&&t.title||e.layerName;if(l){const e=t&&t.title||this._getRendererTitle(l,t);e&&(r&&(e.title=r),r=e);}const i={type:"symbol-table",title:r,infos:[]};e.legendType&&(i.legendType=e.legendType);const n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return i.infos=n.map(t=>{let l=t.url;if(t.imageData&&t.imageData.length>0)l="data:image/png;base64,"+t.imageData;else {if(0===l.indexOf("http"))return null;l=o$_(`${this.layer.url}/${e.layerId}/images/${l}`);}return {label:t.label,src:l,opacity:null==s?this.opacity:s,width:t.width,height:t.height}}).filter(e=>!!e),i.infos.length?i:null}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return !(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let l=null,r=null,i=!0;return !s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(l=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(r=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(l=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,r=Math.max(s.maxScale,e.maxScale)),(l>0&&l<this.scale||r>this.scale)&&(i=!1),i}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;const s=t.renderer,l=e.some(e=>e.values);let r=null,i=null;return l&&e.some((e,t)=>(e.values||(r=t,i=e,i.label||(i.label="others")),null!=i)),s?"unique-value"===s.type?i&&(e.splice(r,1),e.push(i)):"class-breaks"===s.type&&(i&&e.splice(r,1),e.reverse(),i&&e.push(i)):i&&(e.splice(r,1),e.push(i)),e}async _getRendererLegendElements(e,t={}){return function(e){return se$3(e)||le$2(e)||re$2(e)||ee$3(e)||Z$6(e)||ie$2(e)||ne$2(e)||ae$2(e)||oe$1(e)||ue$2(e)||Y$8(e)||te$3(e)}(e)?function(e){return ne$2(e)||ae$2(e)||oe$1(e)||function(e){return "esri.renderers.PointCloudRGBRenderer"===e.declaredClass}(e)}(e)?this._constructPointCloudRendererLegendElements(e,t):ue$2(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(J$c.warn("Renderer not supported!"),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const s=t.title,l=[];let r=null,i=null;if(ne$2(e))r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(e=>{r.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(K$8,e.color)});});else if(ae$2(e)){const t=e.stops;let l=null;if(t.length&&(1===t.length&&(l=t[0].color),!l)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){l=s$1y(e+(s-e)/2,t);}}r={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(K$8,l||K$8.color)}]};const n=a$28(e.stops);i={type:"color-ramp",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:p$2o(n.map(e=>e.color))};}else oe$1(e)&&(r={type:"symbol-table",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach(e=>{r.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(K$8,e.color)});}));r&&r.infos.length&&l.push(r),i&&i.infos.length&&l.push(i);const n=l.reduce((e,t)=>e.concat(t.infos),[]).filter(e=>!!e.symbol).map(e=>this._getSymbolPreview(e,this.opacity));return x$1(n).then(()=>l)}_getElementInfoForDotDensity(e,t){const{backgroundColor:s,outline:l,dotSize:r}=e,i=r+"-"+t+"-"+s+"-"+(l&&JSON.stringify(l.toJSON())),n=this._dotDensityUrlCache,a=n.has(i)?n.get(i):u$1_(e,t);return n.set(i,a),{opacity:1,src:a.src,preview:a,width:a.width,height:a.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions&&e.legendOptions.unit,l={type:"symbol-table",title:{value:t&&Math.round(t),unit:s||""},infos:[]};return e.attributes.forEach(t=>{const s=this._getElementInfoForDotDensity(e,t.color);s.label=t.label||t.valueExpressionTitle||t.field,l.infos.push(s);}),D$1([l])}async _constructRendererLegendElements(e,s={}){const{title:l,sublayer:r}=s,i=r||this.layer;let n=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const a=await this._getVisualVariableLegendElements(n,i)||[],o={type:"symbol-table",title:l||this._getRendererTitle(n,i),infos:[]};let c=null,d=!1;const y=new Set;if(ie$2(n)){const e=r$1h(n);a.push({type:"heatmap-ramp",title:l,infos:e,preview:p$2o(e.map(e=>e.color))});}else if(re$2(n)){const e=n&&n.authoringInfo;if(e&&"relationship"===e.type){const{focus:t,numClasses:s,field1:l,field2:r}=e;if(s&&l&&r){const e=[l,r];let u=H$e(t)||0;for(const t of e){const{field:e,normalizationField:s,label:l}=t,r=l||{field:this._getFieldAlias(e,i),normField:s&&this._getFieldAlias(s,i)},n=me$1.clone();n.angle=u,o.infos.push({label:r,symbol:n}),y.add(n),u+=90;}const c=n$24({focus:t,numClasses:s,infos:n.uniqueValueInfos});a.unshift(c);}}else {const e=n.field;n.uniqueValueInfos.forEach(t=>{if(t.symbol){let s=t.symbol.clone();ye$1(this.layer)&&(s=y$p.fromJSON({color:s.color,style:"square"})),o.infos.push({label:t.label||this._getDomainName(e,t.value,i)||t.value,value:t.value,symbol:s});}});}n.defaultSymbol&&(o.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),d=!0);}else if(le$2(n)){c=this._isUnclassedRenderer(n);(!c||!this._hasSizeRamp)&&(n.classBreakInfos.forEach(e=>{if(e.symbol){let t=e.symbol.clone();ye$1(this.layer)&&(t=y$p.fromJSON({color:t.color,style:"square"})),o.infos.unshift({label:e.label||(c?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:t});}}),c&&(o.title=null),this._updateInfosforClassedSizeRenderer(n,o.infos)),n.defaultSymbol&&!c&&(o.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),d=!0);}else if(ee$3(n))if(function(e){return "esri.layers.ImageryTileLayer"===e.declaredClass}(this.layer)||he$1(this.layer)){const e=this._constructTileImageryStretchRendererElements(n);"stretch-ramp"===e.type?a.push(e):o.infos=e;}else {const e=this.layer;let s,l;n.statistics&&n.statistics.length&&(s=n.statistics[0].min||n.statistics[0][0],l=n.statistics[0].max||n.statistics[0][1]);let r=[];const i=f$3(e.renderingRule?await e.generateRasterInfo(e.renderingRule):e.serviceRasterInfo),u=i.keyProperties.BandProperties;1===i.bandCount?(s=s||i.statistics&&i.statistics[0].min,l=l||i.statistics&&i.statistics[0].max,s||l?a.push(this._getStretchLegendElements(n,{min:s,max:l})):this.buildLegendElementsForTools()):e.bandIds&&1===e.bandIds.length?(s=s||i.statistics&&i.statistics[e.bandIds[0]].min,l=l||i.statistics&&i.statistics[e.bandIds[0]].max,s||l?a.push(this._getStretchLegendElements(n,{min:s,max:l})):this.buildLegendElementsForTools()):i.bandCount>=3?u&&u.length>=i.bandCount?e.bandIds&&3===e.bandIds.length?(r=e.bandIds.map(e=>u[e].BandName),o.infos=this._createSymbolTableElementMultiBand(r)):"lerc"===e.format?(r=[0,1,2].map(e=>u[e].BandName),o.infos=this._createSymbolTableElementMultiBand(r)):this.buildLegendElementsForTools():"lerc"===e.format?(r=["band1","band2","band3"],o.infos=this._createSymbolTableElementMultiBand(r)):this.buildLegendElementsForTools():this.buildLegendElementsForTools();}else if(Z$6(n))n.colormapInfos.forEach(e=>{o.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(Q$8,e.color)});});else if(se$3(n)){let e=n.symbol;switch(s.geometryType){case"point":e="pointSymbol"in i&&i.pointSymbol;break;case"polyline":e="lineSymbol"in i&&i.lineSymbol;break;case"polygon":e="polygonSymbol"in i&&i.polygonSymbol;}n.symbol&&!this._hasSizeRamp&&o.infos.push({label:n.label,symbol:e});}else if(Y$8(n)){n.outputUnit&&(this.title="("+n.toJSON().outputUnit+")"),o.title=n.attributeField;const e=n.getClassBreakInfos();(null==e?void 0:e.length)?e.forEach(e=>{o.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol});}):o.infos.push({label:n.attributeField,symbol:n.getDefaultSymbol()});}else te$3(n)&&a.push(this._getStretchLegendElements(n,{min:0,max:255}));const h=n.defaultSymbol;!h||d||se$3(n)||c&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||a.push({type:"symbol-table",infos:[{label:n.defaultLabel||"others",symbol:h}]}),o.infos.length&&a.unshift(o);const m=null==s.opacity?this.opacity:s.opacity,p=this._getSymbolConfig("visualVariables"in n&&n.visualVariables),f=a.reduce((e,t)=>e.concat(t.infos),[]).filter(e=>!(!e||!e.symbol)).map(e=>this._getSymbolPreview(e,m,{applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:p}));return n=null,await x$1(f),a}_constructTileImageryStretchRendererElements(e){const t=this.layer,s=t.rasterInfo,l=s.bandCount||e.statistics.length;let r,i,n=[];const a=s.keyProperties&&s.keyProperties.BandProperties;if(e.statistics&&e.statistics.length)r=void 0!==e.statistics[0].min?e.statistics[0].min:e.statistics[0][0],i=e.statistics[0].max||e.statistics[0][1];else if(he$1(t)){const e=X$8[t.rasterInfo.pixelType.toLowerCase()];r=e[0],i=e[1];}if(1===s.bandCount)return this._getStretchLegendElements(e,{min:r,max:i});function o(e){var l;const r=((null==t||null==(l=t.bandIds)?void 0:l.length)===s.bandCount?t.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map(t=>e&&e[t]&&e[t].BandName||"band"+(t+1));return r.length<3?r.push(r[1]):r.length>3&&r.splice(3),r}return n=a&&a.length>=l?o(a):o(),this._createSymbolTableElementMultiBand(n)}_getStretchLegendElements(e,t){const s=e.colorRamp,l=u$1$(s,t);return {type:"stretch-ramp",title:"",infos:l,preview:p$2o(l.map(e=>e.color))}}_createSymbolTableElementMultiBand(e){const t=[],s=["red","green","blue"];return e.forEach((e,l)=>{t.push({label:{colorName:s[l],bandName:e},src:I$m[l],opacity:1});}),t}_updateInfosforClassedSizeRenderer(e,t){const s=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,l=e.classBreakInfos.some(e=>b$H(e.symbol));if(s&&l){const s=m$1D,l=c$2x,r=e.classBreakInfos.length,i=(s-l)/(r>1?r-1:r);t.forEach((e,t)=>{e.size=s-i*t;});}}_getSymbolConfig(e){let t=!1,s=!1;if(e)for(let l=0;l<e.length&&(!t||!s);l++){const r=e[l];"size"===r.type&&("height"===r.axis&&(t=!0),"width-and-depth"===r.axis&&(s=!0));}return t&&s?"tall":null}async _getSymbolPreview(e,t,s){let l=null==e.size&&this._hasSizeRamp?n$E(22):e.size;if(this._scaleDrivenSizeVariable&&(null==s?void 0:s.applyScaleDrivenSize)){const{getSize:t}=await Promise.resolve().then(function () { return visualVariableUtils; });l=t(this._scaleDrivenSizeVariable,null,{view:this.view,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null});}return h$1p(e.symbol,{size:l,opacity:t,scale:!1,symbolConfig:null==s?void 0:s.symbolConfig,rotation:e.symbol.angle}).then(t=>(e.preview=t,e)).catch(()=>(e.preview=null,e))}async _loadRenderer(e){var s,l;const r=[],i=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const n="visualVariables"in e&&(null==(s=e.visualVariables)?void 0:s.some(e=>"size"===e.type&&"outline"!==e.target&&!$$e.test(e.valueExpression)));if(e&&"visualVariables"in e&&!n&&"featureReduction"in i&&"cluster"===(null==(l=i.featureReduction)?void 0:l.type)){const s=this.layerView._effectiveRenderer,l=f$3(l$1P(s,this.view));if(l){const t=i.featureReduction;if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:e,clusterMaxSize:s}=t;l.legendOptions=new p$25({showLegend:e!==s});}const s=e.visualVariables||[];e.visualVariables=s.concat([l]),this._hasClusterSizeVariable=!0;}}const a=await this._getMedianColor(e);if(le$2(e)||re$2(e)){const t=(e.classBreakInfos||e.uniqueValueInfos).map(e=>this._fetchSymbol(e.symbol,a).then(t=>{e.symbol=t;}).catch(()=>{e.symbol=null;}));Array.prototype.push.apply(r,t);}return r.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:a).then(t=>{this._applySymbolToRenderer(e,t,se$3(e));}).catch(()=>{this._applySymbolToRenderer(e,null,se$3(e));})),x$1(r).then(()=>e)}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t;}async _getMedianColor(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=l$9(e.visualVariables,e=>"color"===e.type);if(!t)return null;let s=null,l=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;s=t.stops[0].value,l=t.stops[t.stops.length-1].value;}const r=s+(l-s)/2,{getColor:i}=await Promise.resolve().then(function () { return visualVariableUtils; });return i(t,r)}_fetchSymbol(e,t){if(!e)return B$2();if("web-style"===e.type){const s=e.portal,l=s&&s.url,r=s&&s.user&&s.user.username,i=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+l+"-"+r,n=this._webStyleSymbolCache;return n.has(i)||("2d"===this.view.type?n.set(i,e.fetchCIMSymbol()):n.set(i,e.fetchSymbol())),n.get(i).then(e=>this._getAppliedCloneSymbol(e,t)).catch(()=>(J$c.warn("Fetching web-style failed!"),B$2()))}return D$1(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const s=e.clone(),l=t&&t.toRgba();return s.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(s,l):"cim"===s.type?k$q(s,t):s.color&&(s.color=new o$H(l||s.color)),s}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(e=>{e&&(e.material||(e.material={}),e.material.color=new o$H(t));});}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;const l=e.visualVariables,r=[],i=[],n=[];for(const e of l)"color"===e.type?r.push(e):"size"===e.type?i.push(e):"opacity"===e.type&&n.push(e);const a=[...r,...i,...n];let o,u;if(0===r.length&&le$2(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];o=t&&t.symbol;}if(0===r.length&&se$3(e)&&(o=e.symbol),o)if(o.type.indexOf("3d")>-1){const e=o.symbolLayers.getItemAt(0);"water"===e.type?u$4(e.color)&&(u=e.color):u$4(e.material)&&u$4(e.material.color)&&(u=e.material.color);}else o.url||(u=o.color);return (await p$9(a.map(async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const l=this._getRampTitle(s,t);let r=null;const i="getField"in t&&t.getField&&t.getField(s.field),n=i&&H$3(i);if("color"===s.type){const e=await t$1r(s,null,n);r={type:"color-ramp",title:l,infos:e,preview:p$2o(e.map(e=>e.color))},this._hasColorRamp||(this._hasColorRamp=!(null==r.infos||!r.infos.length));}else if("size"===s.type&&"outline"!==s.target)$$e.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(r={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(s):l,infos:await b$K(e,s,await this._getMedianColor(e),this.scale,this.view,n)},this._hasSizeRamp||(this._hasSizeRamp=!(null==r.infos||!r.infos.length)));else if("opacity"===s.type){const e=await t$1r(s,u,n);r={type:"opacity-ramp",title:l,infos:e,preview:p$2o(e.map(e=>e.color))},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==r.infos||!r.infos.length));}return r&&r.infos?r:null}}))).filter(e=>!!e)}_getDomainName(e,t,s){if(e&&"function"!=typeof e){const l="getField"in s&&s.getField&&s.getField(e),r=l&&"getFieldDomain"in s&&s.getFieldDomain?s.getFieldDomain(l.name):null;return r&&"coded-value"===r.type?r.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){const e=t.featureReduction,l="popupTemplate"in e&&e.popupTemplate,r=l&&l.fieldInfos;if(r)for(const e of r)if(e.fieldName===s)return "cluster_count"===s?e.label||{showCount:!0}:e.label}return {showCount:!0}}_getRampTitle(e,t){let s=e.field,l=e.normalizationField,r=!1,i=!1,n=!1,a=null;s="function"==typeof s?null:s,l="function"==typeof l?null:l;const o=e.legendOptions&&e.legendOptions.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else {if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if("color"===s.type){if("ratio"===s.style){r=!0;break}if("percent"===s.style){i=!0;break}if("percent-of-total"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:l&&this._getFieldAlias(l,t),ratio:r,ratioPercent:i,ratioPercentTotal:n};}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions&&s.legendOptions.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let l=s.field,r=null,i=null;le$2(s)&&(r=s.normalizationField,i="percent-of-total"===s.normalizationType),l="function"==typeof l?null:l,r="function"==typeof r?null:r;let n=null;return (l||r)&&(n={field:l&&this._getFieldAlias(l,t),normField:r&&this._getFieldAlias(r,t),normByPct:i}),n}_getFieldAlias(e,t){const s="popupTemplate"in t&&t.popupTemplate,l=s&&s.fieldInfos;let r=null;l&&l.some(t=>e===t.fieldName&&(r=t,!0));let i=null;"getField"in t&&t.getField?i=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(i=t.fieldsIndex.get(e));const n=r||i;let a=null;return n&&(a=r&&r.label||i&&i.alias||"name"in n&&n.name||"fieldName"in n&&n.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return le$2(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some(t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField)):!!t.length),s}};e([y$5()],fe$2.prototype,"children",void 0),e([y$5()],fe$2.prototype,"layerView",void 0),e([y$5()],fe$2.prototype,"layer",void 0),e([y$5()],fe$2.prototype,"legendElements",void 0),e([y$5({dependsOn:["parent","parent.opacity","layer","layer.opacity"],readOnly:!0})],fe$2.prototype,"opacity",null),e([y$5()],fe$2.prototype,"parent",void 0),e([y$5({readOnly:!0})],fe$2.prototype,"ready",null),e([y$5()],fe$2.prototype,"keepCacheOnDestroy",void 0),e([y$5()],fe$2.prototype,"respectLayerVisibility",void 0),e([y$5({dependsOn:["view.scale"],readOnly:!0})],fe$2.prototype,"scale",null),e([y$5()],fe$2.prototype,"sublayerIds",void 0),e([y$5({dependsOn:["layer.renderer?.valueExpression?","layer.renderer?.visualVariables?","layer.featureReduction?","scale"],readOnly:!0})],fe$2.prototype,"isScaleDriven",null),e([y$5()],fe$2.prototype,"title",void 0),e([y$5({dependsOn:["ready"],readOnly:!0,value:0})],fe$2.prototype,"version",null),e([y$5()],fe$2.prototype,"view",void 0),fe$2=e([n$e("esri.widgets.Legend.support.ActiveLayerInfo")],fe$2);var ge$1=fe$2;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const h$1u="state",c$2y="view",L$o="all-layer-views",_$x="legend-properties",f$1t=L$2.ofType(ge$1),p$2t=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],v$G=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];let u$22=class extends h$c{constructor(e){super(e),this._handles=new u$A,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new L$2,this.activeLayerInfos=new f$1t,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null;}initialize(){this._handles.add(d$C(this,"view",this._viewHandles),c$2y),this._handles.add(f$s(()=>this._refresh()));}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null;}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(h$1u),this.view&&this._handles.add(d$C(this,"state",this._stateHandles),h$1u);}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews();}_resetAll(){this._handles.remove([L$o,_$x]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll();}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this);}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i&&i.parent&&i.parent.children.remove(i);}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),L$o),this._handles.add(h$F(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),_$x);}_allLayerViewsChangeHandle(e){e.removed.forEach(e=>this._destroyViewActiveLayerInfo(e.uid)),this._refresh();}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh();}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos);}_sortActiveLayerInfos(e){if(e.length<2)return;const i=[];e.forEach(r=>{if(!r.parent){const s=r.layer.parent,t=s&&"uid"in s&&this._layerViewByLayerId[s.uid],a=t&&this._activeLayerInfosByLayerViewId[t.uid];a&&-1!==e.indexOf(a)&&(i.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children));}}),e.removeMany(i);const r={};this.view.allLayerViews.forEach((e,i)=>r[e.layer.uid]=i),e.sort((e,i)=>{const s=r[e.layer.uid]||0;return (r[i.layer.uid]||0)-s});}_generateLayerViews(){const e=[];return v$G.filter(this._filterLayerViews,this).map(this.get,this).filter(e=>null!=e).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===e||"view.basemapView.referenceLayerViews"===e),r=!this.groundLegendVisible&&"view.groundView.layerViews"===e;return !i&&!r}_collectLayerViews(e,i){const r=s=>(s&&s.forEach(s=>{i.push(s),r(s[e]);}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return !i||!i.length||i.some(i=>this._hasLayerInfo(i,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(e=>this._isLayerUIDMatching(e,i))}_isLayerViewSupported(e){return p$2t.indexOf(e.layer.declaredClass)>-1&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(h$F(e,"legendEnabled, layer.legendEnabled",()=>this._layerActiveHandle(e)),e.uid));}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e));}_isLayerActive(e){return !this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var i;const r=e.layer,s=e.uid,t=this._layerInfosByLayerViewId[s];let a=this._activeLayerInfosByLayerViewId[s];if(!a){const i=t&&void 0!==t.title&&t.layer.uid===r.uid;a=new ge$1({layer:r,layerView:e,title:i?t.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:t&&t.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[s]=a;}const n=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(i=r.parent)?void 0:i.uid];if(a.parent=this._activeLayerInfosByLayerViewId[null==n?void 0:n.uid],!this._handles.has(s)){const i=[h$F(r,"title",e=>this._titleHandle(e,a)),h$F(r,"renderer?, opacity",()=>this._constructLegendElements(a)),w$9(this.view,"stationary",()=>this._scaleHandle(a)),h$F(e,"_effectiveRenderer",()=>this._constructLegendElements(a))];if(this.respectLayerVisibility){const s=h$F(e,"legendEnabled",e=>this._legendEnabledHandle(e,a)),t=h$F(r,"legendEnabled",e=>this._legendEnabledHandle(e,a));i.push(s,t);}this._handles.add(i,s);}a.isScaleDriven||this._constructLegendElements(a),this._addActiveLayerInfo(a);}_titleHandle(e,i){i.title=e,this._constructLegendElements(i);}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i);}_scaleHandle(e){e.isScaleDriven&&this._constructLegendElements(e);}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&-1===this.activeLayerInfos.indexOf(e)){const i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else {var s;const i=null==(s=this.layerInfos)?void 0:s.some(e=>e.layer.uid===r.uid);r.parent&&"uid"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos));}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach(i=>{const r=i.layer.parent,s=r&&"uid"in r&&this._layerViewByLayerId[null==r?void 0:r.uid],t=this._activeLayerInfosByLayerViewId[null==s?void 0:s.uid];t&&(e.push(i),i.parent=t);}),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach(e=>this._addActiveLayerInfo(e)));}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e);}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"renderer"in i&&i.renderer?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach(e=>this._constructLegendElements(e));}};e([y$5({type:f$1t})],u$22.prototype,"activeLayerInfos",void 0),e([y$5()],u$22.prototype,"basemapLegendVisible",void 0),e([y$5()],u$22.prototype,"groundLegendVisible",void 0),e([y$5()],u$22.prototype,"keepCacheOnDestroy",void 0),e([y$5()],u$22.prototype,"respectLayerVisibility",void 0),e([y$5()],u$22.prototype,"layerInfos",void 0),e([y$5({dependsOn:["view.ready"],readOnly:!0})],u$22.prototype,"state",null),e([y$5()],u$22.prototype,"view",void 0),u$22=e([n$e("esri.widgets.Legend.LegendViewModel")],u$22);var w$K=u$22;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const m$1E="http://www.w3.org/2000/svg",d$1s="esri-relationship-ramp--diamond__container",p$2u="esri-relationship-ramp--diamond__left-column",c$2z="esri-relationship-ramp--diamond__right-column",u$23="esri-relationship-ramp--diamond__middle-column",h$1v="esri-relationship-ramp--diamond__middle-column--label",k$s="esri-relationship-ramp--diamond__middle-column--ramp",_$y="esri-relationship-ramp--square__table",f$1u="esri-relationship-ramp--square__table-row",b$L="esri-relationship-ramp--square__table-cell",v$H="esri-relationship-ramp--square__table-label",w$L="esri-relationship-ramp--square__table-label--left-bottom",g$_="esri-relationship-ramp--square__table-label--right-bottom",x$B="esri-relationship-ramp--square__table-label--left-top",y$16="esri-relationship-ramp--square__table-label--right-top";function q$j(q,S,$){const{focus:j,labels:H}=q,L=!!j,U=function(r,d,p,c=60){const{focus:u,numClasses:h,colors:_,rotation:f}=r,v=!!u,w=Math.sqrt(Math.pow(c,2)+Math.pow(c,2))+(v?0:5);let g=null;null!=p&&(g="opacity: "+p);const x=[],y=[],q=[],S=(c||75)/h;for(let r=0;r<h;r++){const t=r*S;for(let o=0;o<h;o++){const n=o*S,m=k$r(_[r][o]),d=j$J(null),p={type:"rect",x:n,y:t,width:S,height:S};x.push(v$F(m)),y.push(w$J(p,m.fill,d,null)),q.push(z$l(p));}}const $=10,j=15,H=15,L=10;let U=null;v||(U="margin: -15px -15px -18px -15px");const W=E$p("left",u,d),M=E$p("right",u,d),X=S$w(q),Y=G$j(X,w,w,0,!1,f),C=G$j(X,w,w,0,!1,v?-45:null);return r$G("div",{style:g,class:v?k$s:b$L},r$G("svg",{xmlns:m$1E,width:w,height:w,style:U},r$G("defs",null,r$G("marker",{id:d+"_arrowStart",markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},r$G("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),r$G("marker",{id:d+"_arrowEnd",markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},r$G("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),x),r$G("g",{transform:Y},y),r$G("g",{transform:C},r$G("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":W.markerStart,"marker-end":W.markerEnd,x1:-$,y1:c-j,x2:-$,y2:j}),r$G("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:H,y1:c+L,x2:c-H,y2:c+L}))))}(q,S,$);return L?r$G("div",{class:d$1s},r$G("div",{class:p$2u},H.left),r$G("div",{class:u$23},r$G("div",{class:h$1v},H.top),U,r$G("div",{class:h$1v},H.bottom)),r$G("div",{class:c$2z},H.right)):r$G("div",{class:_$y},r$G("div",{class:f$1u},r$G("div",{class:f$I(b$L,v$H,g$_)},H.left),r$G("div",{class:b$L}),r$G("div",{class:f$I(b$L,v$H,w$L)},H.top)),r$G("div",{class:f$1u},r$G("div",{class:b$L}),U,r$G("div",{class:b$L})),r$G("div",{class:f$1u},r$G("div",{class:f$I(b$L,v$H,y$16)},H.bottom),r$G("div",{class:b$L}),r$G("div",{class:f$I(b$L,v$H,x$B)},H.right)))}function E$p(r,t,e){const s=e+"_arrowStart",a=e+"_arrowEnd",l="left"===r,i={markerStart:null,markerEnd:null};switch(t){case"HL":l?i.markerStart=`url(#${a})`:i.markerEnd=`url(#${s})`;break;case"LL":i.markerStart=`url(#${a})`;break;case"LH":l?i.markerEnd=`url(#${s})`:i.markerStart=`url(#${a})`;break;default:i.markerEnd=`url(#${s})`;}return i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
function t$1u(e){e.appendChild(this);}function n$25(t,n,r){if(!n)return;if("string"==typeof n)return n;if("value"in n||"unit"in n)return s$v(t.dotValue,n);if("colorName"in n||"bandName"in n)return t[n.colorName]+": "+(t[n.bandName]||n.bandName);if("showCount"in n)return n.showCount?t.clusterCountTitle:null;let o=null;return !function(e,t){return t}(0,r)?i$2k(n,r)&&(o=n.normField?"showNormField":n.normByPct?"showNormPct":n.field?"showField":null):o=n.ratioPercentTotal?"showRatioPercentTotal":n.ratioPercent?"showRatioPercent":n.ratio?"showRatio":n.normField?"showNormField":n.field?"showField":null,o?s$v("showField"===o?"{field}":t[o],{field:n.field,normField:n.normField}):null}function i$2k(e,t){return !t}function r$1k(e,t){return !!(t&&"Stretched"===t&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const _$z="esri-legend--card__carousel-indicator--activated",u$24="esri-legend--card",v$I="esri-legend--stacked",f$1v="esri-legend--card__carousel-title",b$M="esri-legend--card__carousel-indicator",L$p="esri-legend--card__interval-separator",w$M="esri-legend--card__imagery-layer-image--stretched",x$C="esri-legend--card__image-label",S$x="esri-legend--card__layer-caption",I$p="esri-legend--card__label-element",$$f="esri-legend--card__layer-row",j$K="esri-legend--card__label-cell",k$t="esri-legend--card__message",N$l="esri-legend--card__ramp-label",F$n="esri-legend--card__section",E$q="esri-legend--card__relationship-section",C$n="esri-legend--card__service-caption-text",z$m="esri-legend--card__service-content",T$p="esri-legend--card__service",A$q="esri-legend--card__group-layer",R$m="esri-legend--card__group-layer-child",M$t="esri-legend--card__symbol",U$h="esri-legend--card__size-ramp-row",O$m="esri-legend--card__symbol-row",P$m="esri-legend--card__symbol-cell",B$k="esri-legend--card__carousel-indicator-container",H$g="esri-legend--card__interval-separators-container",W$b="esri-legend--card__relationship-label-container",Z$7="esri-legend--card__label-container",G$k="esri-legend--card__service-caption-container",V$d="esri-legend--card__symbol-container",q$k="esri-legend--card__size-ramp-container",D$i="esri-legend--card__size-ramp-preview",J$d="esri-widget__heading",K$9="esri-legend--card__",Q$9=window.devicePixelRatio;let X$9=class extends C$7{constructor(e,s){super(e,s),this._handles=new u$A,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null;}initialize(){this.own([this.watch("activeLayerInfos",e=>{this._handles.removeAll(),this._watchForSectionChanges(e);})]);}destroy(){this._handles.destroy(),this._handles=null;}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=768||"stack"===this.layout;const e=this.activeLayerInfos,s=e&&e.toArray().map(e=>this._renderLegendForLayer(e)).filter(e=>!!e);this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const t=this._sectionNames.length,i=this._sectionNames.map((e,s)=>{const i=s$v(this.messagesCommon.pagination.pageText,{index:s+1,total:t});return r$G("div",{key:e,"aria-label":i,title:i,tabIndex:0,onclick:this._selectSection,onkeydown:this._selectSection,bind:this,class:this.classes(b$M,{[_$z]:this._selectedSectionName===e}),"data-section-name":e})}),o=this._hasIndicators&&t>1?r$G("div",{class:B$k,key:"carousel-navigation"},i):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):s&&s.length?s:null,l={[v$I]:this._hasIndicators};return r$G("div",{class:this.classes(u$24,l)},o,a||r$G("div",{class:k$t},this.messages.noLegend))}_selectSection(e){const s=e.target.getAttribute("data-section-name");s&&(this._selectedSectionName=s);}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(e=>{const s=`activeLayerInfo-${e.layer.uid}-version-change`;this._handles.remove(s),this._watchForSectionChanges(e.children),this._handles.add(e.watch("version",()=>this._generateSectionNames()),s);});const s="activeLayerInfos-collection-change";this._handles.remove(s),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),s);}}_generateSectionNames(){this._sectionNames.length=0,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this);}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((s,t)=>{this._sectionNames.push(`${K$9}${e.layer.uid}-type-${s.type}-${t}`);});}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const s=e.children.map(e=>this._renderLegendForLayer(e)).toArray();return r$G("div",{key:e.layer.uid,class:this.classes(T$p,A$q)},r$G("div",{class:G$k},e.title),s)}{const s=e.legendElements;if(s&&!s.length)return null;const t=s.some(e=>"relationship-ramp"===e.type),i=s.map((s,i)=>this._renderLegendForElement(s,e,i,t)).filter(e=>!!e);if(!i.length)return null;const r={[R$m]:!!e.parent};return r$G("div",{key:e.layer.uid,class:this.classes(T$p,r)},r$G("div",{class:G$k},r$G("div",{class:C$n},e.title)),r$G("div",{class:z$m},i))}}_renderLegendForElement(e,s,t,i=!1){const r="color-ramp"===e.type,o="opacity-ramp"===e.type,a="size-ramp"===e.type,l=s.layer,n=e.title;let d=null;if("string"==typeof n)d=n;else if(n){const e=n$25(this.messages,n,r||o);d=n.title?`${n.title} (${e})`:e;}const h=`${K$9}${l.uid}-type-${e.type}-${t}`,y=this._hasIndicators?r$G("div",null,r$G("h3",{class:this.classes(J$d,f$1v)},s.title),r$G("h4",{class:this.classes(J$d,S$x)},d)):d?r$G("h4",{class:this.classes(J$d,S$x)},d):null;let g=null;if("symbol-table"===e.type){const t=e.infos.map((t,i)=>this._renderLegendForElementInfo(t,s,e.legendType,i)).filter(e=>!!e);if(t.length){const e=t[0].properties.classes&&t[0].properties.classes[O$m],s={[Z$7]:!e&&!i,[W$b]:i};g=r$G("div",{key:h,class:F$n},y,r$G("div",{class:this.classes(s)},t));}}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?g=r$G("div",{key:h,class:F$n},y,this._renderLegendForRamp(e,l.opacity)):a?g=r$G("div",{key:h,class:F$n},y,this._renderSizeRamp(e,l.opacity)):"relationship-ramp"===e.type&&(g=r$G("div",{key:h,class:this.classes(F$n,E$q)},y,q$j(e,this.id,l.opacity)));return g?(this._sectionMap.set(h,g),g):null}_renderLegendForElementInfo(e,s,t,i){const r=s.layer;if(e.type)return this._renderLegendForElement(e,s,i);const o=r$1k(r,t);if(e.symbol&&e.preview){var a,l;if(-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return r$G("div",{key:i,bind:e.preview,afterCreate:t$1u});const s={[P$m]:this._hasIndicators};return r$G("div",{key:i,class:this.classes($$f,{[O$m]:this._hasIndicators})},r$G("div",{class:this.classes(s),bind:e.preview,afterCreate:t$1u}),r$G("div",{class:this.classes(x$C,{[j$K]:this._hasIndicators})},n$25(this.messages,e.label,!1)||""))}let s=255,t=255,o=255,n=0,d=255,h=255,p=255,y=0;const _=e.symbol.color&&e.symbol.color.a,u=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;_&&(s=e.symbol.color.r,t=e.symbol.color.g,o=e.symbol.color.b,n=e.symbol.color.a*r.opacity),u&&(d=e.symbol.outline.color.r,h=e.symbol.outline.color.g,p=e.symbol.outline.color.b,y=e.symbol.outline.color.a*r.opacity);const v=null==(a=null==(l=e.symbol.color)?void 0:l.isBright)||a,f=v?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return r$G("div",{key:i,class:$$f},r$G("div",{class:I$p,styles:{background:_?`rgba(${s}, ${t}, ${o}, ${n})`:"none",color:v?"black":"white",textShadow:`-1px -1px 0 ${f},\n                                              1px -1px 0 ${f},\n                                              -1px 1px 0 ${f},\n                                              1px 1px 0 ${f}`,border:u?`1px solid rgba(${d}, ${h}, ${p}, ${y})`:"none"}}," ",e.label," "))}if(e.src){const s=this._renderImage(e,r,o);return r$G("div",{key:i,class:$$f},s,r$G("div",{class:x$C},e.label||""))}}_renderImage(e,s,t){const{label:i,src:r,opacity:o}=e,a={[w$M]:t,[M$t]:!t},l={opacity:""+(null!=o?o:s.opacity)};return r$G("img",{alt:n$25(this.messages,i,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(a),styles:l})}_renderSizeRampLines(e){const s=e.infos,t=s[0],r=s[s.length-1],o=t.symbol,a=this._hasIndicators,l=t$y(t.size+t.outlineSize)*Q$9,n=t$y(r.size+r.outlineSize)*Q$9,d=a?l:l+50*Q$9,h=a?l/2+50*Q$9:l,p=function(e){if(e){if(e.type.indexOf("3d")>-1){const s=e.symbolLayers&&e.symbolLayers.length;if(!s)return;const t=e.symbolLayers.getItemAt(s-1).get("resource.primitive");return "triangle"===t||"cone"===t||"tetrahedron"===t}return "triangle"===e.style}}(o),m=function(e){if(e){if(e.type.indexOf("3d")>-1){const s=e.symbolLayers&&e.symbolLayers.length;if(!s)return;const t=e.symbolLayers.getItemAt(s-1),i=t.resource&&t.resource.primitive;return "circle"===i||"cross"===i||"kite"===i||"sphere"===i||"cube"===i||"diamond"===i}{const s=e.style;return "circle"===s||"diamond"===s||"cross"===s}}}(o),y=document.createElement("canvas");y.width=d,y.height=h,y.style.width=y.width/Q$9+"px",y.style.height=y.height/Q$9+"px";const _=y.getContext("2d");if(a){_.beginPath();const e=0,s=0,t=d/2-n/2,i=h;_.moveTo(e,s),_.lineTo(t,i);const r=d,o=0,a=d/2+n/2,l=h;_.moveTo(r,o),_.lineTo(a,l);}else {_.beginPath();const e=0,s=h/2-n/2,t=d,i=0;_.moveTo(e,s),_.lineTo(t,i);const r=0,o=h/2+n/2,a=d,l=h;_.moveTo(r,o),_.lineTo(a,l);}return _.strokeStyle="#ddd",_.stroke(),r$G("div",{bind:y,afterCreate:t$1u,styles:a?{display:"flex",marginTop:`-${p?0:m?l/2:0}px`,marginBottom:`-${p?n:m?n/2:0}px`}:{display:"flex",marginRight:`-${p?0:m?l/2:0}px`,marginLeft:`-${p?0:m?n/2:0}px`}})}_renderSizeRamp(e,s){const t=e.infos,i=t[0].label,r=t[t.length-1].label;let o=t[0].preview,a=t[t.length-1].preview;const l=this._hasIndicators,n={"flex-direction":l?"column":"row-reverse"};o&&(o=o.cloneNode(!0),o.style.display="flex"),a&&(a=a.cloneNode(!0),a.style.display="flex");const d={opacity:null!=s?""+s:""};return r$G("div",{class:this.classes($$f,{[U$h]:l})},r$G("div",{class:N$l},l?i:r),r$G("div",{class:q$k,styles:n},r$G("div",{bind:o,afterCreate:t$1u,class:D$i,styles:d}),this._renderSizeRampLines(e),r$G("div",{bind:a,afterCreate:t$1u,class:q$k,styles:d})),r$G("div",{class:N$l},l?r:i))}_renderLegendForRamp(e,s){const t=e.infos,i="heatmap-ramp"===e.type,r=t.length-1,o=25,a=r>2&&!i?25*r:100,l=a+20,n=10,d=t.slice(0).reverse();d.forEach((e,s)=>{e.offset=i?e.ratio:s/r;});const p=d.length-1,m=d.length%2!=0&&d[d.length/2|0],y=m&&r$G("div",{class:H$g},r$G("div",{class:L$p},"|"),r$G("div",{class:N$l},m.label)),g=t[t.length-1].label,_=t[0].label;let u=null;null!=s&&(u="opacity: "+s);const v=[[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:d[0].color,stroke:{width:0}},{shape:{type:"rect",x:n,y:0,width:a,height:o},fill:{type:"linear",x1:n,y1:0,x2:a+n,y2:0,colors:d},stroke:{width:0}},{shape:{type:"path",path:`M${a+n} 0 L${l} 12.5 L${a+n} 25 Z`},fill:d[p].color,stroke:{width:0}}]],f=M$s(v,l,o),{messages:b}=this;return r$G("div",{class:$$f},r$G("div",{class:N$l},i?b[g]:g),r$G("div",{class:V$d},r$G("div",{style:u},f),y),r$G("div",{class:N$l},i?b[_]:_))}};e([o$U(),y$5()],X$9.prototype,"activeLayerInfos",void 0),e([y$5()],X$9.prototype,"layout",void 0),e([y$5(),o$U(),e$T("esri/widgets/Legend/t9n/Legend")],X$9.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/t9n/common")],X$9.prototype,"messagesCommon",void 0),e([y$5({readOnly:!0})],X$9.prototype,"type",void 0),e([y$5()],X$9.prototype,"view",void 0),e([n$Z()],X$9.prototype,"_selectSection",null),X$9=e([n$e("esri.widgets.Legend.styles.Card")],X$9);var Y$9=X$9;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const g$$="esri-legend__service",y$17="esri-legend__service-label",_$A="esri-legend__layer",h$1w="esri-legend__group-layer",u$25="esri-legend__group-layer-child",f$1w="esri-legend__layer-table",v$J="esri-legend__layer-table--size-ramp",b$N="esri-legend__layer-child-table",j$L="esri-legend__layer-caption",L$q="esri-legend__layer-body",w$N="esri-legend__layer-row",F$o="esri-legend__layer-cell esri-legend__layer-cell--info",S$y="esri-legend__imagery-layer-image--stretched",E$r="esri-legend__imagery-layer-info--stretched",I$q="esri-legend__layer-cell esri-legend__layer-cell--symbols",$$g="esri-legend__symbol",k$u="esri-legend__ramps",x$D="esri-legend__size-ramp",U$i="esri-legend__color-ramp",z$n="esri-legend__opacity-ramp",C$o="esri-legend__ramp-labels",A$r="esri-legend__ramp-label",O$n="esri-legend__message",R$n="esri-widget__heading";let T$q=class extends C$7{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.messages=null,this.type="classic";}render(){const e=this.activeLayerInfos,s=e&&e.toArray().map(e=>this._renderLegendForLayer(e)).filter(e=>!!e);return r$G("div",null,s&&s.length?s:r$G("div",{class:O$n},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const s=!!e.children.length,r=`esri-legend__${e.layer.uid}-version-${e.version}`,t=e.title?r$G("h3",{class:this.classes(R$n,y$17)},e.title):null;if(s){const s=e.children.map(e=>this._renderLegendForLayer(e)).toArray();return r$G("div",{key:r,class:this.classes(g$$,h$1w)},t,s)}{const s=e.legendElements;if(s&&!s.length)return null;const l=s.map(s=>this._renderLegendForElement(s,e.layer)).filter(e=>!!e);if(!l.length)return null;const i={[u$25]:!!e.parent};return r$G("div",{key:r,class:this.classes(g$$,i)},t,r$G("div",{class:_$A},l))}}_renderLegendForElement(e,s,r){const t="color-ramp"===e.type,l="opacity-ramp"===e.type,i="size-ramp"===e.type;let n=null;if("symbol-table"===e.type||i){const r=e.infos.map(r=>this._renderLegendForElementInfo(r,s,i,e.legendType)).filter(e=>!!e);r.length&&(n=r$G("div",{class:L$q},r));}else "color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?n=this._renderLegendForRamp(e,s.opacity):"relationship-ramp"===e.type&&(n=q$j(e,this.id,s.opacity));if(!n)return null;const c=e.title;let m=null;if("string"==typeof c)m=c;else if(c){const e=n$25(this.messages,c,t||l);m=i$2k(c,t||l)&&c.title?`${c.title} (${e})`:e;}const g=r?b$N:f$1w,y=m?r$G("div",{class:j$L},m):null,_={[v$J]:i||!r};return r$G("div",{class:this.classes(g,_)},y,n)}_renderLegendForRamp(e,s){const r=e.infos,t="opacity-ramp"===e.type,l="heatmap-ramp"===e.type,i="stretch-ramp"===e.type,n=e.preview,o=t?z$n:"";n.className=`${U$i} ${o}`,null!=s&&(n.style.opacity=s.toString());const p=r.map(e=>r$G("div",{class:e.label?A$r:null},l?this.messages[e.label]:i?this._getStretchStopLabel(e):e.label)),d={width:"24px"},m={height:n.style.height};return r$G("div",{class:w$N},r$G("div",{class:I$q,styles:d},r$G("div",{class:k$u,bind:n,afterCreate:t$1u})),r$G("div",{class:F$o},r$G("div",{class:C$o,styles:m},p)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+u$t(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"}):""}_renderLegendForElementInfo(e,s,r,t){if(e.type)return this._renderLegendForElement(e,s,!0);let l=null;const i=r$1k(s,t);if(e.symbol&&e.preview?l=r$G("div",{class:$$g,bind:e.preview,afterCreate:t$1u}):e.src&&(l=this._renderImage(e,s,i)),!l)return null;const n={[E$r]:i},o={[E$r]:i,[x$D]:!i&&r};return r$G("div",{class:w$N},r$G("div",{class:this.classes(I$q,o)},l),r$G("div",{class:this.classes(F$o,n)},n$25(this.messages,e.label,!1)||""))}_renderImage(e,s,r){const{label:t,src:l,opacity:i}=e,n={[S$y]:r,[$$g]:!r},o={opacity:""+(null!=i?i:s.opacity)};return r$G("img",{alt:n$25(this.messages,t,!1),src:l,border:0,width:e.width,height:e.height,class:this.classes(n),styles:o})}};e([o$U(),y$5()],T$q.prototype,"activeLayerInfos",void 0),e([y$5(),o$U(),e$T("esri/widgets/Legend/t9n/Legend")],T$q.prototype,"messages",void 0),e([y$5({readOnly:!0})],T$q.prototype,"type",void 0),T$q=e([n$e("esri.widgets.Legend.styles.Classic")],T$q);var B$l=T$q;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const v$K="esri-legend",f$1x="esri-widget",u$26="esri-widget--panel",g$10="esri-icon-layer-list";let w$O=class extends C$7{constructor(e,s){super(e,s),this._handles=new u$A,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=g$10,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new B$l,this.view=null,this.viewModel=new w$K;}initialize(){this.own(B$5(this,"activeLayerInfos","change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),d$C(this,"style",(e,s)=>{s&&e!==s&&s.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view));}));}destroy(){this._handles.destroy(),this._handles=null;}castStyle(e){if(e instanceof Y$9||e instanceof B$l)return e;if("string"==typeof e)return "card"===e?new Y$9:new B$l;if(e&&"string"==typeof e.type){const s={...e};delete s.type;return new("card"===e.type?Y$9:B$l)(s)}return new B$l}render(){return r$G("div",{class:this.classes(v$K,f$1x,this.style instanceof B$l?u$26:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(e=>this._renderOnActiveLayerInfoChange(e)),this.scheduleRender();}_renderOnActiveLayerInfoChange(e){const s=d$C(e,"version",()=>this.scheduleRender());this._handles.add(s,"version_"+e.layer.uid);const r=B$5(e,"children","change",()=>{e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e));});this._handles.add(r,"children_"+e.layer.uid),e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e));}};e([o$M("viewModel.activeLayerInfos"),o$U()],w$O.prototype,"activeLayerInfos",void 0),e([o$M("viewModel.basemapLegendVisible"),o$U()],w$O.prototype,"basemapLegendVisible",void 0),e([o$M("viewModel.groundLegendVisible"),o$U()],w$O.prototype,"groundLegendVisible",void 0),e([o$M("viewModel.keepCacheOnDestroy")],w$O.prototype,"keepCacheOnDestroy",void 0),e([o$M("viewModel.respectLayerVisibility"),o$U()],w$O.prototype,"respectLayerVisibility",void 0),e([y$5()],w$O.prototype,"iconClass",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w$O.prototype,"label",void 0),e([o$M("viewModel.layerInfos"),o$U()],w$O.prototype,"layerInfos",void 0),e([y$5(),o$U(),e$T("esri/widgets/Legend/t9n/Legend")],w$O.prototype,"messages",void 0),e([y$5(),o$U()],w$O.prototype,"style",void 0),e([i$b("style")],w$O.prototype,"castStyle",null),e([o$M("viewModel.view"),o$U()],w$O.prototype,"view",void 0),e([y$5(),o$U(["view.size"])],w$O.prototype,"viewModel",void 0),w$O=e([n$e("esri.widgets.Legend")],w$O);var L$r=w$O;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
let n$26=class extends h$c{constructor(e){super(e),this._viewpointHandle=null,this._handles=new u$A,this.group=null;}initialize(){this._handles.add(B$5(this,"view.ui","expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse();}));}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null;}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint();}set expanded(e){const t=!!e;this._set("expanded",t);const s=this.get("view.ui");s&&s.emit("expand",{target:this}),this._viewpointHandleChange(t);}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&x$e(e,"ready",()=>{this.view===e&&this._watchViewpoint();}));}_viewpointHandleChange(e){this._viewpointHandle&&(e?x$e(this.view,"stationary",()=>this._viewpointHandle.resume()):this._viewpointHandle.pause());}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:s}=this;if(s&&t){const t="3d"===s.type?"camera":"viewpoint",i=q$3(s,t,()=>this._collapse());this._handles.add(i,e),this._viewpointHandle=i;}}_collapse(){this.expanded=!1;}};e([y$5({value:!1})],n$26.prototype,"autoCollapse",null),e([y$5({value:!1})],n$26.prototype,"expanded",null),e([y$5()],n$26.prototype,"group",void 0),e([y$5({dependsOn:["view.ready"],readOnly:!0})],n$26.prototype,"state",null),e([y$5({value:null})],n$26.prototype,"view",null),n$26=e([n$e("esri.widgets.Expand.ExpandViewModel")],n$26);var l$1U=n$26;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.17/esri/copyright.txt for details.
*/
const u$27="esri-expand esri-widget",h$1x="esri-expand--auto",x$E="esri-expand--drawer",m$1F="esri-expand--floating",g$11="esri-expand__container",_$B="esri-expand__container--expanded",v$L="esri-expand__panel",C$p="esri-widget--button",b$O="esri-icon-font-fallback-text",y$18="esri-collapse__icon",w$P="esri-expand__icon--expanded",f$1y="esri-expand__icon-number",T$r="esri-expand__icon-number--expanded",j$M="esri-icon-expand",I$r="esri-icon-collapse",M$u="esri-expand__content",k$v="esri-expand__content--expanded",N$m="esri-expand__mask",O$o="esri-expand__mask--expanded";let E$s=class extends C$7{constructor(e,o){super(e,o),this.autoCollapse=null,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new l$1U;}get contentId(){return this.id+"_controls_content"}get expandTitle(){const{expanded:e,messagesCommon:o,collapseTooltip:t,expandTooltip:s}=this;return e?t||o.collapse:s||o.expand}get collapseIconClass(){return I$r}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass");}get expandIconClass(){return e$V(this.content)?this.content.iconClass:j$M}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass");}expand(){this.viewModel.expanded=!0;}collapse(){this.viewModel.expanded=!1;}toggle(){this.viewModel.expanded=!this.viewModel.expanded;}render(){const{mode:e}=this,o={[h$1x]:"auto"===e,[x$E]:"drawer"===e,[m$1F]:"floating"===e};return r$G("div",{class:this.classes(u$27,o)},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,o={[_$B]:e};return r$G("div",{class:this.classes(g$11,o)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,o={[O$o]:e};return r$G("div",{bind:this,onclick:this._toggle,class:this.classes(N$m,o)})}renderBadgeNumber(){const{expanded:e,iconNumber:o}=this;return o&&!e?r$G("span",{key:"expand__icon-number",class:f$1y},o):null}renderPanelNumber(){const{iconNumber:e,expanded:o}=this;return e&&o?r$G("span",{key:"expand__expand-icon-number",class:this.classes(f$1y,T$r)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:o,expanded:t}=this,s={[w$P]:t,[e]:t,[o]:!t};return e===o&&(s[e]=!0),r$G("span",{"aria-hidden":"true",class:this.classes(y$18,s)})}renderTitle(){return r$G("span",{class:b$O},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:o,contentId:t}=this;return r$G("div",{bind:this,onclick:this._toggle,onkeydown:this._toggle,"aria-controls":t,"aria-expanded":e?"true":"false",title:o,role:"button",tabindex:"0",class:C$p},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return r$G("div",{class:v$L},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:o}=this,t={[k$v]:e};return r$G("div",{id:o,role:"region",class:this.classes(M$u,t)},this.renderContentContainer())}renderContentContainer(){const e=this.content;return "string"==typeof e?r$G("div",{innerHTML:e}):e$V(e)?e.render():e instanceof HTMLElement?r$G("div",{bind:e,afterCreate:this._attachToNode}):r$H(e)?r$G("div",{bind:e.domNode,afterCreate:this._attachToNode}):null}_toggle(){this.toggle();}_attachToNode(e){e.appendChild(this);}};e([y$5({readOnly:!0,dependsOn:["id"]}),o$U()],E$s.prototype,"contentId",null),e([y$5({readOnly:!0,dependsOn:["expanded","messagesCommon","collapseTooltip","expandTooltip"]}),o$U()],E$s.prototype,"expandTitle",null),e([o$M("viewModel.autoCollapse")],E$s.prototype,"autoCollapse",void 0),e([y$5({dependsOn:["content"]}),o$U()],E$s.prototype,"collapseIconClass",null),e([y$5(),o$U()],E$s.prototype,"collapseTooltip",void 0),e([y$5(),o$U()],E$s.prototype,"content",void 0),e([o$M("viewModel.expanded"),o$U()],E$s.prototype,"expanded",void 0),e([y$5({dependsOn:["content"]}),o$U()],E$s.prototype,"expandIconClass",null),e([y$5(),o$U()],E$s.prototype,"expandTooltip",void 0),e([o$M("viewModel.group")],E$s.prototype,"group",void 0),e([y$5(),o$U()],E$s.prototype,"iconNumber",void 0),e([y$5({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],E$s.prototype,"label",void 0),e([y$5(),o$U(),e$T("esri/widgets/Expand/t9n/Expand")],E$s.prototype,"messages",void 0),e([y$5(),o$U(),e$T("esri/t9n/common")],E$s.prototype,"messagesCommon",void 0),e([y$5(),o$U()],E$s.prototype,"mode",void 0),e([o$M("viewModel.view"),o$U()],E$s.prototype,"view",void 0),e([y$5({type:l$1U}),o$U("viewModel.state")],E$s.prototype,"viewModel",void 0),e([n$Z()],E$s.prototype,"_toggle",null),E$s=e([n$e("esri.widgets.Expand")],E$s);var B$m=E$s;

var geojsonURL = 'https://bsvensson.github.io/various-tests/geojson/usgs-earthquakes-06182019.geojson';
(function () { return __awaiter(void 0, void 0, void 0, function () {
    var layer, map, view, timeSlider, layerView, start, end, avgDepth, magMax, magAvg, magMin, tremorCount, statsFields, legendExpand, statsDiv, infoDiv, infoDivExpand;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                layer = new G$g({
                    url: geojsonURL,
                    copyright: 'USGS Earthquakes',
                    title: 'USGS Earthquakes',
                    timeInfo: {
                        startField: 'time',
                        interval: {
                            unit: 'days',
                            value: 1
                        }
                    },
                    renderer: {
                        type: 'simple',
                        field: 'mag',
                        symbol: {
                            type: 'simple-marker',
                            color: 'orange',
                            outline: null
                        },
                        visualVariables: [
                            {
                                type: 'size',
                                field: 'mag',
                                stops: [
                                    {
                                        value: 1,
                                        size: '5px'
                                    },
                                    {
                                        value: 2,
                                        size: '15'
                                    },
                                    {
                                        value: 3,
                                        size: '35'
                                    }
                                ]
                            },
                            {
                                type: 'color',
                                field: 'depth',
                                stops: [
                                    {
                                        value: 2.5,
                                        color: '#F9C653',
                                        label: '<2km'
                                    },
                                    {
                                        value: 3.5,
                                        color: '#F8864D',
                                        label: '3km'
                                    },
                                    {
                                        value: 4,
                                        color: '#C53C06',
                                        label: '>4km'
                                    }
                                ]
                            }
                        ]
                    },
                    popupTemplate: {
                        title: '{title}',
                        content: [
                            {
                                type: 'fields',
                                fieldInfos: [
                                    {
                                        fieldName: 'place',
                                        label: 'Location',
                                        visible: true
                                    },
                                    {
                                        fieldName: 'mag',
                                        label: 'Magnitude',
                                        visible: true
                                    },
                                    {
                                        fieldName: 'depth',
                                        label: 'Depth',
                                        visible: true
                                    }
                                ]
                            }
                        ]
                    }
                });
                map = new f$v({
                    basemap: 'dark-gray-vector',
                    layers: [layer]
                });
                view = new G$f({
                    map: map,
                    container: 'viewDiv',
                    zoom: 13,
                    center: [-117.50268, 34.04713]
                });
                timeSlider = new se$2({
                    container: 'timeSlider',
                    playRate: 50,
                    stops: {
                        interval: {
                            value: 1,
                            unit: 'hours'
                        }
                    }
                });
                view.ui.add(timeSlider, 'manual');
                return [4 /*yield*/, view.whenLayerView(layer)];
            case 1:
                layerView = _a.sent();
                start = new Date(2019, 4, 25);
                timeSlider.fullTimeExtent = {
                    start: start,
                    end: layer.timeInfo.fullTimeExtent.end
                };
                end = new Date(start);
                end.setDate(end.getDate() + 1);
                timeSlider.values = [start, end];
                timeSlider.watch('timeExtent', function () { return __awaiter(void 0, void 0, void 0, function () {
                    var statQuery, result, htmls, attributes, name_1, html, yearHtml;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                layer.definitionExpression =
                                    'time <= ' + timeSlider.timeExtent.end.getTime();
                                layerView.effect = {
                                    filter: {
                                        timeExtent: timeSlider.timeExtent,
                                        geometry: view.extent
                                    },
                                    excludedEffect: 'grayscale(20%) opacity(12%)'
                                };
                                statQuery = layerView.effect.filter.createQuery();
                                statQuery.outStatistics = [
                                    magMax,
                                    magAvg,
                                    magMin,
                                    tremorCount,
                                    avgDepth
                                ];
                                return [4 /*yield*/, layer.queryFeatures(statQuery)];
                            case 1:
                                result = _a.sent();
                                htmls = [];
                                statsDiv.innerHTML = '';
                                if (result.features.length >= 1) {
                                    attributes = result.features[0].attributes;
                                    for (name_1 in statsFields) {
                                        if (attributes[name_1] && attributes[name_1] != null) {
                                            html = '<br/>' +
                                                statsFields[name_1] +
                                                ': <b><span> ' +
                                                attributes[name_1].toFixed(2) +
                                                '</span></b>';
                                            htmls.push(html);
                                        }
                                    }
                                    yearHtml = '<span>' +
                                        result.features[0].attributes['tremor_count'] +
                                        '</span> earthquakes were recorded between ' +
                                        timeSlider.timeExtent.start.toLocaleDateString() +
                                        ' - ' +
                                        timeSlider.timeExtent.end.toLocaleDateString() +
                                        '.<br/>';
                                    if (htmls[0] == undefined) {
                                        statsDiv.innerHTML = yearHtml;
                                    }
                                    else {
                                        statsDiv.innerHTML =
                                            yearHtml + htmls[0] + htmls[1] + htmls[2] + htmls[3];
                                    }
                                }
                                return [2 /*return*/];
                        }
                    });
                }); });
                avgDepth = {
                    onStatisticField: 'depth',
                    outStatisticFieldName: 'Average_depth',
                    statisticType: 'avg'
                };
                magMax = {
                    onStatisticField: 'mag',
                    outStatisticFieldName: 'Max_magnitude',
                    statisticType: 'max'
                };
                magAvg = {
                    onStatisticField: 'mag',
                    outStatisticFieldName: 'Average_magnitude',
                    statisticType: 'avg'
                };
                magMin = {
                    onStatisticField: 'mag',
                    outStatisticFieldName: 'Min_magnitude',
                    statisticType: 'min'
                };
                tremorCount = {
                    onStatisticField: 'mag',
                    outStatisticFieldName: 'tremor_count',
                    statisticType: 'count'
                };
                statsFields = {
                    Max_magnitude: 'Max magnitude',
                    Average_magnitude: 'Average magnitude',
                    Min_magnitude: 'Min magnitude',
                    Average_depth: 'Average Depth'
                };
                legendExpand = new B$m({
                    expandIconClass: 'esri-icon-expand',
                    expandTooltip: 'Legend',
                    view: view,
                    content: new L$r({
                        view: view
                    }),
                    expanded: false
                });
                view.ui.add(legendExpand, 'top-left');
                statsDiv = document.getElementById('statsDiv');
                infoDiv = document.getElementById('infoDiv');
                infoDivExpand = new B$m({
                    expandIconClass: 'esri-icon-expand',
                    expandTooltip: 'Expand earthquakes info',
                    view: view,
                    content: infoDiv,
                    expanded: true
                });
                view.ui.add(infoDivExpand, 'top-right');
                return [2 /*return*/];
        }
    });
}); })();

export { n$1o as $, h$c as A, B$2 as B, p$9 as C, D$d as D, A$3 as E, D$1 as F, j$3 as G, r$L as H, d$5 as I, L$1 as J, y$8 as K, L$2 as L, t$5 as M, r$T as N, n$1v as O, P$8 as P, u$15 as Q, n$h as R, i$n as S, T$2 as T, n$1n as U, e$18 as V, s$1i as W, X, v$6 as Y, r$d as Z, d$C as _, s$4 as a, I$1 as a$, h$11 as a0, c$1O as a1, g$q as a2, o$P as a3, r$C as a4, l$R as a5, o$E as a6, r$O as a7, r$u as a8, n$1g as a9, e$r as aA, e$13 as aB, F$g as aC, E$d as aD, i$1x as aE, r$t as aF, f$V as aG, h$Y as aH, x$m as aI, w$5 as aJ, u$n as aK, x$8 as aL, u$i as aM, M$4 as aN, l$k as aO, j$F as aP, b$C as aQ, O$j as aR, n$A as aS, i$D as aT, l$s as aU, r$q as aV, z$4 as aW, o$o as aX, a$18 as aY, l$1k as aZ, y$W as a_, o$17 as aa, s$11 as ab, d$Y as ac, l$15 as ad, _$7 as ae, kt as af, i$H as ag, t$Z as ah, tt$2 as ai, Gt as aj, K$5 as ak, ht$2 as al, lt$2 as am, jt as an, s$w as ao, t$e as ap, d$e as aq, k$3 as ar, g$4 as as, r$Q as at, y$g as au, e$p as av, f$r as aw, W$2 as ax, k$g as ay, f$k as az, s as b, t$8 as b$, h$1 as b0, y$2 as b1, l$1D as b2, d$1 as b3, f$3 as b4, t$16 as b5, h$o as b6, o$r as b7, j$D as b8, n$1N as b9, c$p as bA, s$r as bB, y$e as bC, a$5 as bD, R$7 as bE, o$H as bF, s$Y as bG, r$$ as bH, t$f as bI, r$6 as bJ, i$2h as bK, u$3 as bL, n$1X as bM, u$D as bN, a$v as bO, s$1d as bP, M$n as bQ, p$i as bR, a$27 as bS, a$1j as bT, c$2 as bU, f$12 as bV, l$9 as bW, O$3 as bX, x$1 as bY, o$F as bZ, j$2 as b_, l$1x as ba, c$A as bb, t$q as bc, c$3 as bd, D$5 as be, M$l as bf, n$1t as bg, u$1i as bh, e$1c as bi, h$C as bj, c$D as bk, r$1e as bl, u$z as bm, m$8 as bn, x$4 as bo, E$3 as bp, f$i as bq, R$2 as br, h$12 as bs, T$4 as bt, a$1v as bu, f$18 as bv, o$1c as bw, l$1d as bx, _$m as by, e$17 as bz, c$19 as c, i$l as c$, a$1k as c0, h$d as c1, t$n as c2, u$1b as c3, f$q as c4, u$h as c5, j$u as c6, c$b as c7, e$1 as c8, A as c9, o$k as cA, F$1 as cB, i$1r as cC, c$t as cD, h as cE, f$2 as cF, e$l as cG, g$w as cH, p$1m as cI, w$a as cJ, r$e as cK, f$10 as cL, p$2h as cM, b$6 as cN, w$q as cO, u$1T as cP, p$f as cQ, u$d as cR, C$2 as cS, B$1 as cT, a$1N as cU, e$9 as cV, t$d as cW, g$8 as cX, r$f as cY, x$n as cZ, p$b as c_, o$U as ca, e$T as cb, C$7 as cc, r$G as cd, s$v as ce, m$H as cf, e$V as cg, a$h as ch, i$g as ci, p$1 as cj, w$2 as ck, l$3 as cl, l$4 as cm, N$1 as cn, R as co, Q as cp, C as cq, P as cr, t$4 as cs, D as ct, j$1 as cu, n$g as cv, c$k as cw, f$n as cx, y$z as cy, z$3 as cz, u$1 as d, o$1v as d$, i$b as d0, u$A as d1, e$1t as d2, A$6 as d3, G$5 as d4, d$2 as d5, h$1j as d6, n$E as d7, d$1g as d8, v$B as d9, L$4 as dA, A$9 as dB, b$9 as dC, h$s as dD, ce as dE, u$p as dF, k$2 as dG, H$1 as dH, q$1 as dI, A$5 as dJ, $$4 as dK, O$1 as dL, $$3 as dM, x$c as dN, P$5 as dO, i$2a as dP, n$1T as dQ, t$s as dR, m$$ as dS, e$A as dT, h$F as dU, s$1c as dV, p$1J as dW, p$1x as dX, x$e as dY, f$o as dZ, A$i as d_, b$z as da, h$6 as db, t$c as dc, g$v as dd, y$V as de, s$5 as df, i$1z as dg, a$1D as dh, l$1l as di, h$18 as dj, _$9 as dk, n$u as dl, r$Z as dm, h$13 as dn, i$1M as dp, b$t as dq, i$w as dr, u$v as ds, d$O as dt, m$1u as du, I$5 as dv, T$7 as dw, s$y as dx, j$a as dy, V$2 as dz, e$2 as e, v$s as e$, f$1a as e0, n$1Z as e1, i$27 as e2, n$1u as e3, g$9 as e4, g$U as e5, a$2a as e6, h$1n as e7, l$1S as e8, d$1p as e9, n$4 as eA, r$P as eB, z$9 as eC, N$3 as eD, j$t as eE, q$8 as eF, t$_ as eG, z$2 as eH, M$3 as eI, i$1j as eJ, k$6 as eK, X$1 as eL, B$4 as eM, ee as eN, ne as eO, fe as eP, t$Q as eQ, e$M as eR, t$S as eS, h$S as eT, c$1u as eU, f$G as eV, c$1v as eW, m$S as eX, l$1j as eY, d$M as eZ, w as e_, t$1q as ea, c$Z as eb, l$1N as ec, e$1y as ed, n$1Y as ee, G$3 as ef, l$1I as eg, o$1t as eh, S$s as ei, H$7 as ej, t$1p as ek, h$1l as el, d$D as em, r$5 as en, r$1a as eo, D$6 as ep, S$3 as eq, a$m as er, r$j as es, G$4 as et, u$19 as eu, j$s as ev, m$h as ew, c$1E as ex, _$i as ey, y$a as ez, f$1 as f, g$X as f$, p$28 as f0, a$1W as f1, e$m as f2, O$h as f3, m$j as f4, d$n as f5, i$_ as f6, k as f7, h$i as f8, t$R as f9, d$1l as fA, p$2f as fB, c$2p as fC, d$1m as fD, s$1w as fE, l$1J as fF, P$i as fG, y$$ as fH, c$2m as fI, a$23 as fJ, m$1s as fK, n$1U as fL, u$1N as fM, s$1v as fN, c$2k as fO, u$8 as fP, h$D as fQ, t$3 as fR, P$c as fS, t$m as fT, g$g as fU, b$5 as fV, n$q as fW, Y$4 as fX, o$B as fY, N as fZ, i$1Z as f_, r$J as fa, t$r as fb, t$1k as fc, u$1P as fd, s$1s as fe, o$1r as ff, o$5 as fg, u$1U as fh, c$2q as fi, _$2 as fj, p$w as fk, a$1_ as fl, $$9 as fm, u$1V as fn, d$10 as fo, p$1F as fp, S$7 as fq, u$1W as fr, x$o as fs, h$_ as ft, a$25 as fu, u$Z as fv, c$1t as fw, g$j as fx, L$8 as fy, D$9 as fz, o$G as g, n$j as g$, m$1z as g0, m$1j as g1, p$1_ as g2, m$1n as g3, a$1U as g4, y$p as g5, d$t as g6, v$E as g7, g$P as g8, x$z as g9, E$1 as gA, c$Y as gB, m$s as gC, u$P as gD, o$M as gE, D$a as gF, G$1 as gG, v$1 as gH, a$6 as gI, S as gJ, s$9 as gK, i$17 as gL, G as gM, w$4 as gN, gt as gO, v$b as gP, H as gQ, h$3 as gR, h$v as gS, i$p as gT, B$5 as gU, n$J as gV, j$h as gW, e$1z as gX, x$d as gY, i$1k as gZ, i$2i as g_, _$u as ga, m$z as gb, u$1K as gc, a$L as gd, c$25 as ge, c$2c as gf, p$2p as gg, e$v as gh, r$3 as gi, e$19 as gj, n$n as gk, i$1 as gl, e$3 as gm, n$2 as gn, a$y as go, y$j as gp, d$k as gq, i$B as gr, f$1n as gs, h$1m as gt, n$y as gu, t$E as gv, o$j as gw, l$t as gx, g$5 as gy, c$1K as gz, a$1q as h, a$11 as h0, i$1y as h1, et as h2, o$7 as h3, i$Z as h4, i$1c as h5, ut as h6, b$1 as h7, lt as h8, F as h9, V as hA, e$10 as hB, t$1i as hC, i$1w as hD, y$O as hE, l$1G as hF, i$N as hG, M$5 as hH, L$3 as hI, u$t as hJ, w$D as hK, a$1c as hL, r$i as hM, request as hN, FeatureSet as hO, query as hP, DictionaryRenderer as hQ, O$c as ha, o$t as hb, P$3 as hc, N$5 as hd, d$U as he, m$N as hf, s$l as hg, s$6 as hh, a$1p as hi, u$17 as hj, r$N as hk, x$l as hl, d$11 as hm, y$F as hn, G$b as ho, d$m as hp, I$g as hq, p$1u as hr, q$9 as hs, M$7 as ht, i$E as hu, f$_ as hv, L$h as hw, K as hx, c$1 as hy, n$i as hz, s$16 as i, e$14 as j, e$z as k, t$y as l, a$1d as m, n$7 as n, o$s as o, c$x as p, a$13 as q, e$S as r, s$g as s, t$6 as t, u$4 as u, v$3 as v, e as w, y$5 as x, y$U as y, n$e as z };
